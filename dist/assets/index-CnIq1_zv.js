const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/subset-worker.chunk-B8zXJhZl.js","assets/subset-shared.chunk-vNtYyAPx.js","assets/pica-paFa05HP.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"])))=>i.map(i=>d[i]);
var pse=Object.defineProperty;var z_=e=>{throw TypeError(e)};var mse=(e,t,n)=>t in e?pse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ce=(e,t,n)=>mse(e,typeof t!="symbol"?t+"":t,n),iw=(e,t,n)=>t.has(e)||z_("Cannot "+n);var W=(e,t,n)=>(iw(e,t,"read from private field"),n?n.call(e):t.get(e)),be=(e,t,n)=>t.has(e)?z_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),J=(e,t,n,r)=>(iw(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ie=(e,t,n)=>(iw(e,t,"access private method"),n);var Ug=(e,t,n,r)=>({set _(i){J(e,t,i,n)},get _(){return W(e,t,r)}});function gse(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var n0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sw={exports:{}},yg={},ow={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function bse(){if(H_)return Dt;H_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function u(K){return K===null||typeof K!="object"?null:(K=d&&K[d]||K["@@iterator"],typeof K=="function"?K:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,U={};function y(K,q,se){this.props=K,this.context=q,this.refs=U,this.updater=se||h}y.prototype.isReactComponent={},y.prototype.setState=function(K,q){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,q,"setState")},y.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function x(){}x.prototype=y.prototype;function w(K,q,se){this.props=K,this.context=q,this.refs=U,this.updater=se||h}var E=w.prototype=new x;E.constructor=w,g(E,y.prototype),E.isPureReactComponent=!0;var S=Array.isArray,M=Object.prototype.hasOwnProperty,A={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(K,q,se){var de,xe={},ve=null,ue=null;if(q!=null)for(de in q.ref!==void 0&&(ue=q.ref),q.key!==void 0&&(ve=""+q.key),q)M.call(q,de)&&!C.hasOwnProperty(de)&&(xe[de]=q[de]);var te=arguments.length-2;if(te===1)xe.children=se;else if(1<te){for(var le=Array(te),he=0;he<te;he++)le[he]=arguments[he+2];xe.children=le}if(K&&K.defaultProps)for(de in te=K.defaultProps,te)xe[de]===void 0&&(xe[de]=te[de]);return{$$typeof:e,type:K,key:ve,ref:ue,props:xe,_owner:A.current}}function R(K,q){return{$$typeof:e,type:K.type,key:q,ref:K.ref,props:K.props,_owner:K._owner}}function L(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function _(K){var q={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(se){return q[se]})}var O=/\/+/g;function $(K,q){return typeof K=="object"&&K!==null&&K.key!=null?_(""+K.key):q.toString(36)}function B(K,q,se,de,xe){var ve=typeof K;(ve==="undefined"||ve==="boolean")&&(K=null);var ue=!1;if(K===null)ue=!0;else switch(ve){case"string":case"number":ue=!0;break;case"object":switch(K.$$typeof){case e:case t:ue=!0}}if(ue)return ue=K,xe=xe(ue),K=de===""?"."+$(ue,0):de,S(xe)?(se="",K!=null&&(se=K.replace(O,"$&/")+"/"),B(xe,q,se,"",function(he){return he})):xe!=null&&(L(xe)&&(xe=R(xe,se+(!xe.key||ue&&ue.key===xe.key?"":(""+xe.key).replace(O,"$&/")+"/")+K)),q.push(xe)),1;if(ue=0,de=de===""?".":de+":",S(K))for(var te=0;te<K.length;te++){ve=K[te];var le=de+$(ve,te);ue+=B(ve,q,se,le,xe)}else if(le=u(K),typeof le=="function")for(K=le.call(K),te=0;!(ve=K.next()).done;)ve=ve.value,le=de+$(ve,te++),ue+=B(ve,q,se,le,xe);else if(ve==="object")throw q=String(K),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ue}function F(K,q,se){if(K==null)return K;var de=[],xe=0;return B(K,de,"","",function(ve){return q.call(se,ve,xe++)}),de}function z(K){if(K._status===-1){var q=K._result;q=q(),q.then(function(se){(K._status===0||K._status===-1)&&(K._status=1,K._result=se)},function(se){(K._status===0||K._status===-1)&&(K._status=2,K._result=se)}),K._status===-1&&(K._status=0,K._result=q)}if(K._status===1)return K._result.default;throw K._result}var H={current:null},G={transition:null},V={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:G,ReactCurrentOwner:A};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:F,forEach:function(K,q,se){F(K,function(){q.apply(this,arguments)},se)},count:function(K){var q=0;return F(K,function(){q++}),q},toArray:function(K){return F(K,function(q){return q})||[]},only:function(K){if(!L(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Dt.Component=y,Dt.Fragment=n,Dt.Profiler=i,Dt.PureComponent=w,Dt.StrictMode=r,Dt.Suspense=l,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Dt.act=Y,Dt.cloneElement=function(K,q,se){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var de=g({},K.props),xe=K.key,ve=K.ref,ue=K._owner;if(q!=null){if(q.ref!==void 0&&(ve=q.ref,ue=A.current),q.key!==void 0&&(xe=""+q.key),K.type&&K.type.defaultProps)var te=K.type.defaultProps;for(le in q)M.call(q,le)&&!C.hasOwnProperty(le)&&(de[le]=q[le]===void 0&&te!==void 0?te[le]:q[le])}var le=arguments.length-2;if(le===1)de.children=se;else if(1<le){te=Array(le);for(var he=0;he<le;he++)te[he]=arguments[he+2];de.children=te}return{$$typeof:e,type:K.type,key:xe,ref:ve,props:de,_owner:ue}},Dt.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:s,_context:K},K.Consumer=K},Dt.createElement=I,Dt.createFactory=function(K){var q=I.bind(null,K);return q.type=K,q},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(K){return{$$typeof:a,render:K}},Dt.isValidElement=L,Dt.lazy=function(K){return{$$typeof:c,_payload:{_status:-1,_result:K},_init:z}},Dt.memo=function(K,q){return{$$typeof:f,type:K,compare:q===void 0?null:q}},Dt.startTransition=function(K){var q=G.transition;G.transition={};try{K()}finally{G.transition=q}},Dt.unstable_act=Y,Dt.useCallback=function(K,q){return H.current.useCallback(K,q)},Dt.useContext=function(K){return H.current.useContext(K)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(K){return H.current.useDeferredValue(K)},Dt.useEffect=function(K,q){return H.current.useEffect(K,q)},Dt.useId=function(){return H.current.useId()},Dt.useImperativeHandle=function(K,q,se){return H.current.useImperativeHandle(K,q,se)},Dt.useInsertionEffect=function(K,q){return H.current.useInsertionEffect(K,q)},Dt.useLayoutEffect=function(K,q){return H.current.useLayoutEffect(K,q)},Dt.useMemo=function(K,q){return H.current.useMemo(K,q)},Dt.useReducer=function(K,q,se){return H.current.useReducer(K,q,se)},Dt.useRef=function(K){return H.current.useRef(K)},Dt.useState=function(K){return H.current.useState(K)},Dt.useSyncExternalStore=function(K,q,se){return H.current.useSyncExternalStore(K,q,se)},Dt.useTransition=function(){return H.current.useTransition()},Dt.version="18.3.1",Dt}var V_;function gb(){return V_||(V_=1,ow.exports=bse()),ow.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function Use(){if(W_)return yg;W_=1;var e=gb(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,f){var c,d={},u=null,h=null;f!==void 0&&(u=""+f),l.key!==void 0&&(u=""+l.key),l.ref!==void 0&&(h=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:a,key:u,ref:h,props:d,_owner:i.current}}return yg.Fragment=n,yg.jsx=o,yg.jsxs=o,yg}var G_;function yse(){return G_||(G_=1,sw.exports=Use()),sw.exports}var m=yse(),T=gb();const Te=hc(T),PM=gse({__proto__:null,default:Te},[T]);var dU={},aw={exports:{}},ks={},lw={exports:{}},cw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function xse(){return X_||(X_=1,function(e){function t(G,V){var Y=G.length;G.push(V);e:for(;0<Y;){var K=Y-1>>>1,q=G[K];if(0<i(q,V))G[K]=V,G[Y]=q,Y=K;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var V=G[0],Y=G.pop();if(Y!==V){G[0]=Y;e:for(var K=0,q=G.length,se=q>>>1;K<se;){var de=2*(K+1)-1,xe=G[de],ve=de+1,ue=G[ve];if(0>i(xe,Y))ve<q&&0>i(ue,xe)?(G[K]=ue,G[ve]=Y,K=ve):(G[K]=xe,G[de]=Y,K=de);else if(ve<q&&0>i(ue,Y))G[K]=ue,G[ve]=Y,K=ve;else break e}}return V}function i(G,V){var Y=G.sortIndex-V.sortIndex;return Y!==0?Y:G.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],f=[],c=1,d=null,u=3,h=!1,g=!1,U=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(G){for(var V=n(f);V!==null;){if(V.callback===null)r(f);else if(V.startTime<=G)r(f),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(f)}}function S(G){if(U=!1,E(G),!g)if(n(l)!==null)g=!0,z(M);else{var V=n(f);V!==null&&H(S,V.startTime-G)}}function M(G,V){g=!1,U&&(U=!1,x(I),I=-1),h=!0;var Y=u;try{for(E(V),d=n(l);d!==null&&(!(d.expirationTime>V)||G&&!_());){var K=d.callback;if(typeof K=="function"){d.callback=null,u=d.priorityLevel;var q=K(d.expirationTime<=V);V=e.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),E(V)}else r(l);d=n(l)}if(d!==null)var se=!0;else{var de=n(f);de!==null&&H(S,de.startTime-V),se=!1}return se}finally{d=null,u=Y,h=!1}}var A=!1,C=null,I=-1,R=5,L=-1;function _(){return!(e.unstable_now()-L<R)}function O(){if(C!==null){var G=e.unstable_now();L=G;var V=!0;try{V=C(!0,G)}finally{V?$():(A=!1,C=null)}}else A=!1}var $;if(typeof w=="function")$=function(){w(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,F=B.port2;B.port1.onmessage=O,$=function(){F.postMessage(null)}}else $=function(){y(O,0)};function z(G){C=G,A||(A=!0,$())}function H(G,V){I=y(function(){G(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,z(M))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(G){switch(u){case 1:case 2:case 3:var V=3;break;default:V=u}var Y=u;u=V;try{return G()}finally{u=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,V){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=u;u=G;try{return V()}finally{u=Y}},e.unstable_scheduleCallback=function(G,V,Y){var K=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?K+Y:K):Y=K,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Y+q,G={id:c++,callback:V,priorityLevel:G,startTime:Y,expirationTime:q,sortIndex:-1},Y>K?(G.sortIndex=Y,t(f,G),n(l)===null&&G===n(f)&&(U?(x(I),I=-1):U=!0,H(S,Y-K))):(G.sortIndex=q,t(l,G),g||h||(g=!0,z(M))),G},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(G){var V=u;return function(){var Y=u;u=V;try{return G.apply(this,arguments)}finally{u=Y}}}}(cw)),cw}var K_;function vse(){return K_||(K_=1,lw.exports=xse()),lw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function wse(){if(Y_)return ks;Y_=1;var e=gb(),t=vse();function n(p){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+p,v=1;v<arguments.length;v++)b+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(p,b){o(p,b),o(p+"Capture",b)}function o(p,b){for(i[p]=b,p=0;p<b.length;p++)r.add(b[p])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function u(p){return l.call(d,p)?!0:l.call(c,p)?!1:f.test(p)?d[p]=!0:(c[p]=!0,!1)}function h(p,b,v,k){if(v!==null&&v.type===0)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return k?!1:v!==null?!v.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function g(p,b,v,k){if(b===null||typeof b>"u"||h(p,b,v,k))return!0;if(k)return!1;if(v!==null)switch(v.type){case 3:return!b;case 4:return b===!1;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function U(p,b,v,k,N,D,X){this.acceptsBooleans=b===2||b===3||b===4,this.attributeName=k,this.attributeNamespace=N,this.mustUseProperty=v,this.propertyName=p,this.type=b,this.sanitizeURL=D,this.removeEmptyString=X}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){y[p]=new U(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var b=p[0];y[b]=new U(b,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){y[p]=new U(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){y[p]=new U(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){y[p]=new U(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){y[p]=new U(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){y[p]=new U(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){y[p]=new U(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){y[p]=new U(p,5,!1,p.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function w(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var b=p.replace(x,w);y[b]=new U(b,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var b=p.replace(x,w);y[b]=new U(b,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var b=p.replace(x,w);y[b]=new U(b,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){y[p]=new U(p,1,!1,p.toLowerCase(),null,!1,!1)}),y.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){y[p]=new U(p,1,!1,p.toLowerCase(),null,!0,!0)});function E(p,b,v,k){var N=y.hasOwnProperty(b)?y[b]:null;(N!==null?N.type!==0:k||!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(g(b,v,N,k)&&(v=null),k||N===null?u(b)&&(v===null?p.removeAttribute(b):p.setAttribute(b,""+v)):N.mustUseProperty?p[N.propertyName]=v===null?N.type===3?!1:"":v:(b=N.attributeName,k=N.attributeNamespace,v===null?p.removeAttribute(b):(N=N.type,v=N===3||N===4&&v===!0?"":""+v,k?p.setAttributeNS(k,b,v):p.setAttribute(b,v))))}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),_=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),G=Symbol.iterator;function V(p){return p===null||typeof p!="object"?null:(p=G&&p[G]||p["@@iterator"],typeof p=="function"?p:null)}var Y=Object.assign,K;function q(p){if(K===void 0)try{throw Error()}catch(v){var b=v.stack.trim().match(/\n( *(at )?)/);K=b&&b[1]||""}return`
`+K+p}var se=!1;function de(p,b){if(!p||se)return"";se=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(ge){var k=ge}Reflect.construct(p,[],b)}else{try{b.call()}catch(ge){k=ge}p.call(b.prototype)}else{try{throw Error()}catch(ge){k=ge}p()}}catch(ge){if(ge&&k&&typeof ge.stack=="string"){for(var N=ge.stack.split(`
`),D=k.stack.split(`
`),X=N.length-1,ee=D.length-1;1<=X&&0<=ee&&N[X]!==D[ee];)ee--;for(;1<=X&&0<=ee;X--,ee--)if(N[X]!==D[ee]){if(X!==1||ee!==1)do if(X--,ee--,0>ee||N[X]!==D[ee]){var ne=`
`+N[X].replace(" at new "," at ");return p.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",p.displayName)),ne}while(1<=X&&0<=ee);break}}}finally{se=!1,Error.prepareStackTrace=v}return(p=p?p.displayName||p.name:"")?q(p):""}function xe(p){switch(p.tag){case 5:return q(p.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return p=de(p.type,!1),p;case 11:return p=de(p.type.render,!1),p;case 1:return p=de(p.type,!0),p;default:return""}}function ve(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case C:return"Fragment";case A:return"Portal";case R:return"Profiler";case I:return"StrictMode";case $:return"Suspense";case B:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case _:return(p.displayName||"Context")+".Consumer";case L:return(p._context.displayName||"Context")+".Provider";case O:var b=p.render;return p=p.displayName,p||(p=b.displayName||b.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case F:return b=p.displayName||null,b!==null?b:ve(p.type)||"Memo";case z:b=p._payload,p=p._init;try{return ve(p(b))}catch{}}return null}function ue(p){var b=p.type;switch(p.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=b.render,p=p.displayName||p.name||"",b.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(b);case 8:return b===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function te(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function le(p){var b=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function he(p){var b=le(p)?"checked":"value",v=Object.getOwnPropertyDescriptor(p.constructor.prototype,b),k=""+p[b];if(!p.hasOwnProperty(b)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var N=v.get,D=v.set;return Object.defineProperty(p,b,{configurable:!0,get:function(){return N.call(this)},set:function(X){k=""+X,D.call(this,X)}}),Object.defineProperty(p,b,{enumerable:v.enumerable}),{getValue:function(){return k},setValue:function(X){k=""+X},stopTracking:function(){p._valueTracker=null,delete p[b]}}}}function we(p){p._valueTracker||(p._valueTracker=he(p))}function Se(p){if(!p)return!1;var b=p._valueTracker;if(!b)return!0;var v=b.getValue(),k="";return p&&(k=le(p)?p.checked?"true":"false":p.value),p=k,p!==v?(b.setValue(p),!0):!1}function De(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Ge(p,b){var v=b.checked;return Y({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??p._wrapperState.initialChecked})}function ht(p,b){var v=b.defaultValue==null?"":b.defaultValue,k=b.checked!=null?b.checked:b.defaultChecked;v=te(b.value!=null?b.value:v),p._wrapperState={initialChecked:k,initialValue:v,controlled:b.type==="checkbox"||b.type==="radio"?b.checked!=null:b.value!=null}}function st(p,b){b=b.checked,b!=null&&E(p,"checked",b,!1)}function jt(p,b){st(p,b);var v=te(b.value),k=b.type;if(v!=null)k==="number"?(v===0&&p.value===""||p.value!=v)&&(p.value=""+v):p.value!==""+v&&(p.value=""+v);else if(k==="submit"||k==="reset"){p.removeAttribute("value");return}b.hasOwnProperty("value")?cn(p,b.type,v):b.hasOwnProperty("defaultValue")&&cn(p,b.type,te(b.defaultValue)),b.checked==null&&b.defaultChecked!=null&&(p.defaultChecked=!!b.defaultChecked)}function En(p,b,v){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var k=b.type;if(!(k!=="submit"&&k!=="reset"||b.value!==void 0&&b.value!==null))return;b=""+p._wrapperState.initialValue,v||b===p.value||(p.value=b),p.defaultValue=b}v=p.name,v!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,v!==""&&(p.name=v)}function cn(p,b,v){(b!=="number"||De(p.ownerDocument)!==p)&&(v==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+v&&(p.defaultValue=""+v))}var hi=Array.isArray;function Mi(p,b,v,k){if(p=p.options,b){b={};for(var N=0;N<v.length;N++)b["$"+v[N]]=!0;for(v=0;v<p.length;v++)N=b.hasOwnProperty("$"+p[v].value),p[v].selected!==N&&(p[v].selected=N),N&&k&&(p[v].defaultSelected=!0)}else{for(v=""+te(v),b=null,N=0;N<p.length;N++){if(p[N].value===v){p[N].selected=!0,k&&(p[N].defaultSelected=!0);return}b!==null||p[N].disabled||(b=p[N])}b!==null&&(b.selected=!0)}}function qi(p,b){if(b.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},b,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function Xs(p,b){var v=b.value;if(v==null){if(v=b.children,b=b.defaultValue,v!=null){if(b!=null)throw Error(n(92));if(hi(v)){if(1<v.length)throw Error(n(93));v=v[0]}b=v}b==null&&(b=""),v=b}p._wrapperState={initialValue:te(v)}}function Ks(p,b){var v=te(b.value),k=te(b.defaultValue);v!=null&&(v=""+v,v!==p.value&&(p.value=v),b.defaultValue==null&&p.defaultValue!==v&&(p.defaultValue=v)),k!=null&&(p.defaultValue=""+k)}function Qi(p){var b=p.textContent;b===p._wrapperState.initialValue&&b!==""&&b!==null&&(p.value=b)}function sr(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yn(p,b){return p==null||p==="http://www.w3.org/1999/xhtml"?sr(b):p==="http://www.w3.org/2000/svg"&&b==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var un,Xr=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(b,v,k,N){MSApp.execUnsafeLocalFunction(function(){return p(b,v,k,N)})}:p}(function(p,b){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=b;else{for(un=un||document.createElement("div"),un.innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=un.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;b.firstChild;)p.appendChild(b.firstChild)}});function kr(p,b){if(b){var v=p.firstChild;if(v&&v===p.lastChild&&v.nodeType===3){v.nodeValue=b;return}}p.textContent=b}var Ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vf=["Webkit","ms","Moz","O"];Object.keys(Ai).forEach(function(p){Vf.forEach(function(b){b=b+p.charAt(0).toUpperCase()+p.substring(1),Ai[b]=Ai[p]})});function ua(p,b,v){return b==null||typeof b=="boolean"||b===""?"":v||typeof b!="number"||b===0||Ai.hasOwnProperty(p)&&Ai[p]?(""+b).trim():b+"px"}function ha(p,b){p=p.style;for(var v in b)if(b.hasOwnProperty(v)){var k=v.indexOf("--")===0,N=ua(v,b[v],k);v==="float"&&(v="cssFloat"),k?p.setProperty(v,N):p[v]=N}}var yc=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pa(p,b){if(b){if(yc[p]&&(b.children!=null||b.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(b.dangerouslySetInnerHTML!=null){if(b.children!=null)throw Error(n(60));if(typeof b.dangerouslySetInnerHTML!="object"||!("__html"in b.dangerouslySetInnerHTML))throw Error(n(61))}if(b.style!=null&&typeof b.style!="object")throw Error(n(62))}}function wo(p,b){if(p.indexOf("-")===-1)return typeof b.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=null;function Eo(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var ma=null,ga=null,Me=null;function ot(p){if(p=rg(p)){if(typeof ma!="function")throw Error(n(280));var b=p.stateNode;b&&(b=C8(b),ma(p.stateNode,p.type,b))}}function Be(p){ga?Me?Me.push(p):Me=[p]:ga=p}function Wt(){if(ga){var p=ga,b=Me;if(Me=ga=null,ot(p),b)for(p=0;p<b.length;p++)ot(b[p])}}function or(p,b){return p(b)}function kt(){}var Tn=!1;function Ys(p,b,v){if(Tn)return p(b,v);Tn=!0;try{return or(p,b,v)}finally{Tn=!1,(ga!==null||Me!==null)&&(kt(),Wt())}}function Kr(p,b){var v=p.stateNode;if(v===null)return null;var k=C8(v);if(k===null)return null;v=k[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(p=p.type,k=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!k;break e;default:p=!1}if(p)return null;if(v&&typeof v!="function")throw Error(n(231,b,typeof v));return v}var xc=!1;if(a)try{var So={};Object.defineProperty(So,"passive",{get:function(){xc=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{xc=!1}function Wf(p,b,v,k,N,D,X,ee,ne){var ge=Array.prototype.slice.call(arguments,3);try{b.apply(v,ge)}catch(Ce){this.onError(Ce)}}var Zs=!1,qs=null,ko=!1,Gn=null,Dn={onError:function(p){Zs=!0,qs=p}};function pi(p,b,v,k,N,D,X,ee,ne){Zs=!1,qs=null,Wf.apply(Dn,arguments)}function Lr(p,b,v,k,N,D,X,ee,ne){if(pi.apply(this,arguments),Zs){if(Zs){var ge=qs;Zs=!1,qs=null}else throw Error(n(198));ko||(ko=!0,Gn=ge)}}function ys(p){var b=p,v=p;if(p.alternate)for(;b.return;)b=b.return;else{p=b;do b=p,b.flags&4098&&(v=b.return),p=b.return;while(p)}return b.tag===3?v:null}function H0(p){if(p.tag===13){var b=p.memoizedState;if(b===null&&(p=p.alternate,p!==null&&(b=p.memoizedState)),b!==null)return b.dehydrated}return null}function V0(p){if(ys(p)!==p)throw Error(n(188))}function Ux(p){var b=p.alternate;if(!b){if(b=ys(p),b===null)throw Error(n(188));return b!==p?null:p}for(var v=p,k=b;;){var N=v.return;if(N===null)break;var D=N.alternate;if(D===null){if(k=N.return,k!==null){v=k;continue}break}if(N.child===D.child){for(D=N.child;D;){if(D===v)return V0(N),p;if(D===k)return V0(N),b;D=D.sibling}throw Error(n(188))}if(v.return!==k.return)v=N,k=D;else{for(var X=!1,ee=N.child;ee;){if(ee===v){X=!0,v=N,k=D;break}if(ee===k){X=!0,k=N,v=D;break}ee=ee.sibling}if(!X){for(ee=D.child;ee;){if(ee===v){X=!0,v=D,k=N;break}if(ee===k){X=!0,k=D,v=N;break}ee=ee.sibling}if(!X)throw Error(n(189))}}if(v.alternate!==k)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?p:b}function n8(p){return p=Ux(p),p!==null?r8(p):null}function r8(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var b=r8(p);if(b!==null)return b;p=p.sibling}return null}var i8=t.unstable_scheduleCallback,s8=t.unstable_cancelCallback,yx=t.unstable_shouldYield,o8=t.unstable_requestPaint,Xn=t.unstable_now,xx=t.unstable_getCurrentPriorityLevel,j6=t.unstable_ImmediatePriority,a8=t.unstable_UserBlockingPriority,u1=t.unstable_NormalPriority,vx=t.unstable_LowPriority,l8=t.unstable_IdlePriority,W0=null,Co=null;function wx(p){if(Co&&typeof Co.onCommitFiberRoot=="function")try{Co.onCommitFiberRoot(W0,p,void 0,(p.current.flags&128)===128)}catch{}}var Qs=Math.clz32?Math.clz32:kx,Ex=Math.log,Sx=Math.LN2;function kx(p){return p>>>=0,p===0?32:31-(Ex(p)/Sx|0)|0}var h1=64,p1=4194304;function pl(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function m1(p,b){var v=p.pendingLanes;if(v===0)return 0;var k=0,N=p.suspendedLanes,D=p.pingedLanes,X=v&268435455;if(X!==0){var ee=X&~N;ee!==0?k=pl(ee):(D&=X,D!==0&&(k=pl(D)))}else X=v&~N,X!==0?k=pl(X):D!==0&&(k=pl(D));if(k===0)return 0;if(b!==0&&b!==k&&!(b&N)&&(N=k&-k,D=b&-b,N>=D||N===16&&(D&4194240)!==0))return b;if(k&4&&(k|=v&16),b=p.entangledLanes,b!==0)for(p=p.entanglements,b&=k;0<b;)v=31-Qs(b),N=1<<v,k|=p[v],b&=~N;return k}function c8(p,b){switch(p){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cx(p,b){for(var v=p.suspendedLanes,k=p.pingedLanes,N=p.expirationTimes,D=p.pendingLanes;0<D;){var X=31-Qs(D),ee=1<<X,ne=N[X];ne===-1?(!(ee&v)||ee&k)&&(N[X]=c8(ee,b)):ne<=b&&(p.expiredLanes|=ee),D&=~ee}}function B6(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function g1(){var p=h1;return h1<<=1,!(h1&4194240)&&(h1=64),p}function F6(p){for(var b=[],v=0;31>v;v++)b.push(p);return b}function G0(p,b,v){p.pendingLanes|=b,b!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,b=31-Qs(b),p[b]=v}function f8(p,b){var v=p.pendingLanes&~b;p.pendingLanes=b,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=b,p.mutableReadLanes&=b,p.entangledLanes&=b,b=p.entanglements;var k=p.eventTimes;for(p=p.expirationTimes;0<v;){var N=31-Qs(v),D=1<<N;b[N]=0,k[N]=-1,p[N]=-1,v&=~D}}function Mx(p,b){var v=p.entangledLanes|=b;for(p=p.entanglements;v;){var k=31-Qs(v),N=1<<k;N&b|p[k]&b&&(p[k]|=b),v&=~N}}var fn=0;function xN(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var vN,Ax,wN,EN,SN,Tx=!1,d8=[],Gf=null,Xf=null,Kf=null,$6=new Map,z6=new Map,Yf=[],Ore="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kN(p,b){switch(p){case"focusin":case"focusout":Gf=null;break;case"dragenter":case"dragleave":Xf=null;break;case"mouseover":case"mouseout":Kf=null;break;case"pointerover":case"pointerout":$6.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":z6.delete(b.pointerId)}}function H6(p,b,v,k,N,D){return p===null||p.nativeEvent!==D?(p={blockedOn:b,domEventName:v,eventSystemFlags:k,nativeEvent:D,targetContainers:[N]},b!==null&&(b=rg(b),b!==null&&Ax(b)),p):(p.eventSystemFlags|=k,b=p.targetContainers,N!==null&&b.indexOf(N)===-1&&b.push(N),p)}function jre(p,b,v,k,N){switch(b){case"focusin":return Gf=H6(Gf,p,b,v,k,N),!0;case"dragenter":return Xf=H6(Xf,p,b,v,k,N),!0;case"mouseover":return Kf=H6(Kf,p,b,v,k,N),!0;case"pointerover":var D=N.pointerId;return $6.set(D,H6($6.get(D)||null,p,b,v,k,N)),!0;case"gotpointercapture":return D=N.pointerId,z6.set(D,H6(z6.get(D)||null,p,b,v,k,N)),!0}return!1}function CN(p){var b=X0(p.target);if(b!==null){var v=ys(b);if(v!==null){if(b=v.tag,b===13){if(b=H0(v),b!==null){p.blockedOn=b,SN(p.priority,function(){wN(v)});return}}else if(b===3&&v.stateNode.current.memoizedState.isDehydrated){p.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}p.blockedOn=null}function u8(p){if(p.blockedOn!==null)return!1;for(var b=p.targetContainers;0<b.length;){var v=Nx(p.domEventName,p.eventSystemFlags,b[0],p.nativeEvent);if(v===null){v=p.nativeEvent;var k=new v.constructor(v.type,v);hl=k,v.target.dispatchEvent(k),hl=null}else return b=rg(v),b!==null&&Ax(b),p.blockedOn=v,!1;b.shift()}return!0}function MN(p,b,v){u8(p)&&v.delete(b)}function Bre(){Tx=!1,Gf!==null&&u8(Gf)&&(Gf=null),Xf!==null&&u8(Xf)&&(Xf=null),Kf!==null&&u8(Kf)&&(Kf=null),$6.forEach(MN),z6.forEach(MN)}function V6(p,b){p.blockedOn===b&&(p.blockedOn=null,Tx||(Tx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bre)))}function W6(p){function b(N){return V6(N,p)}if(0<d8.length){V6(d8[0],p);for(var v=1;v<d8.length;v++){var k=d8[v];k.blockedOn===p&&(k.blockedOn=null)}}for(Gf!==null&&V6(Gf,p),Xf!==null&&V6(Xf,p),Kf!==null&&V6(Kf,p),$6.forEach(b),z6.forEach(b),v=0;v<Yf.length;v++)k=Yf[v],k.blockedOn===p&&(k.blockedOn=null);for(;0<Yf.length&&(v=Yf[0],v.blockedOn===null);)CN(v),v.blockedOn===null&&Yf.shift()}var b1=S.ReactCurrentBatchConfig,h8=!0;function Fre(p,b,v,k){var N=fn,D=b1.transition;b1.transition=null;try{fn=1,Ix(p,b,v,k)}finally{fn=N,b1.transition=D}}function $re(p,b,v,k){var N=fn,D=b1.transition;b1.transition=null;try{fn=4,Ix(p,b,v,k)}finally{fn=N,b1.transition=D}}function Ix(p,b,v,k){if(h8){var N=Nx(p,b,v,k);if(N===null)Kx(p,b,k,p8,v),kN(p,k);else if(jre(N,p,b,v,k))k.stopPropagation();else if(kN(p,k),b&4&&-1<Ore.indexOf(p)){for(;N!==null;){var D=rg(N);if(D!==null&&vN(D),D=Nx(p,b,v,k),D===null&&Kx(p,b,k,p8,v),D===N)break;N=D}N!==null&&k.stopPropagation()}else Kx(p,b,k,null,v)}}var p8=null;function Nx(p,b,v,k){if(p8=null,p=Eo(k),p=X0(p),p!==null)if(b=ys(p),b===null)p=null;else if(v=b.tag,v===13){if(p=H0(b),p!==null)return p;p=null}else if(v===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;p=null}else b!==p&&(p=null);return p8=p,null}function AN(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xx()){case j6:return 1;case a8:return 4;case u1:case vx:return 16;case l8:return 536870912;default:return 16}default:return 16}}var Zf=null,Rx=null,m8=null;function TN(){if(m8)return m8;var p,b=Rx,v=b.length,k,N="value"in Zf?Zf.value:Zf.textContent,D=N.length;for(p=0;p<v&&b[p]===N[p];p++);var X=v-p;for(k=1;k<=X&&b[v-k]===N[D-k];k++);return m8=N.slice(p,1<k?1-k:void 0)}function g8(p){var b=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&b===13&&(p=13)):p=b,p===10&&(p=13),32<=p||p===13?p:0}function b8(){return!0}function IN(){return!1}function Js(p){function b(v,k,N,D,X){this._reactName=v,this._targetInst=N,this.type=k,this.nativeEvent=D,this.target=X,this.currentTarget=null;for(var ee in p)p.hasOwnProperty(ee)&&(v=p[ee],this[ee]=v?v(D):D[ee]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?b8:IN,this.isPropagationStopped=IN,this}return Y(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=b8)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=b8)},persist:function(){},isPersistent:b8}),b}var U1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_x=Js(U1),G6=Y({},U1,{view:0,detail:0}),zre=Js(G6),Px,Dx,X6,U8=Y({},G6,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ox,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==X6&&(X6&&p.type==="mousemove"?(Px=p.screenX-X6.screenX,Dx=p.screenY-X6.screenY):Dx=Px=0,X6=p),Px)},movementY:function(p){return"movementY"in p?p.movementY:Dx}}),NN=Js(U8),Hre=Y({},U8,{dataTransfer:0}),Vre=Js(Hre),Wre=Y({},G6,{relatedTarget:0}),Lx=Js(Wre),Gre=Y({},U1,{animationName:0,elapsedTime:0,pseudoElement:0}),Xre=Js(Gre),Kre=Y({},U1,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Yre=Js(Kre),Zre=Y({},U1,{data:0}),RN=Js(Zre),qre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eie(p){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(p):(p=Jre[p])?!!b[p]:!1}function Ox(){return eie}var tie=Y({},G6,{key:function(p){if(p.key){var b=qre[p.key]||p.key;if(b!=="Unidentified")return b}return p.type==="keypress"?(p=g8(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Qre[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ox,charCode:function(p){return p.type==="keypress"?g8(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?g8(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),nie=Js(tie),rie=Y({},U8,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_N=Js(rie),iie=Y({},G6,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ox}),sie=Js(iie),oie=Y({},U1,{propertyName:0,elapsedTime:0,pseudoElement:0}),aie=Js(oie),lie=Y({},U8,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),cie=Js(lie),fie=[9,13,27,32],jx=a&&"CompositionEvent"in window,K6=null;a&&"documentMode"in document&&(K6=document.documentMode);var die=a&&"TextEvent"in window&&!K6,PN=a&&(!jx||K6&&8<K6&&11>=K6),DN=" ",LN=!1;function ON(p,b){switch(p){case"keyup":return fie.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jN(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var y1=!1;function uie(p,b){switch(p){case"compositionend":return jN(b);case"keypress":return b.which!==32?null:(LN=!0,DN);case"textInput":return p=b.data,p===DN&&LN?null:p;default:return null}}function hie(p,b){if(y1)return p==="compositionend"||!jx&&ON(p,b)?(p=TN(),m8=Rx=Zf=null,y1=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return PN&&b.locale!=="ko"?null:b.data;default:return null}}var pie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BN(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b==="input"?!!pie[p.type]:b==="textarea"}function FN(p,b,v,k){Be(k),b=E8(b,"onChange"),0<b.length&&(v=new _x("onChange","change",null,v,k),p.push({event:v,listeners:b}))}var Y6=null,Z6=null;function mie(p){iR(p,0)}function y8(p){var b=S1(p);if(Se(b))return p}function gie(p,b){if(p==="change")return b}var $N=!1;if(a){var Bx;if(a){var Fx="oninput"in document;if(!Fx){var zN=document.createElement("div");zN.setAttribute("oninput","return;"),Fx=typeof zN.oninput=="function"}Bx=Fx}else Bx=!1;$N=Bx&&(!document.documentMode||9<document.documentMode)}function HN(){Y6&&(Y6.detachEvent("onpropertychange",VN),Z6=Y6=null)}function VN(p){if(p.propertyName==="value"&&y8(Z6)){var b=[];FN(b,Z6,p,Eo(p)),Ys(mie,b)}}function bie(p,b,v){p==="focusin"?(HN(),Y6=b,Z6=v,Y6.attachEvent("onpropertychange",VN)):p==="focusout"&&HN()}function Uie(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return y8(Z6)}function yie(p,b){if(p==="click")return y8(b)}function xie(p,b){if(p==="input"||p==="change")return y8(b)}function vie(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var ba=typeof Object.is=="function"?Object.is:vie;function q6(p,b){if(ba(p,b))return!0;if(typeof p!="object"||p===null||typeof b!="object"||b===null)return!1;var v=Object.keys(p),k=Object.keys(b);if(v.length!==k.length)return!1;for(k=0;k<v.length;k++){var N=v[k];if(!l.call(b,N)||!ba(p[N],b[N]))return!1}return!0}function WN(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function GN(p,b){var v=WN(p);p=0;for(var k;v;){if(v.nodeType===3){if(k=p+v.textContent.length,p<=b&&k>=b)return{node:v,offset:b-p};p=k}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=WN(v)}}function XN(p,b){return p&&b?p===b?!0:p&&p.nodeType===3?!1:b&&b.nodeType===3?XN(p,b.parentNode):"contains"in p?p.contains(b):p.compareDocumentPosition?!!(p.compareDocumentPosition(b)&16):!1:!1}function KN(){for(var p=window,b=De();b instanceof p.HTMLIFrameElement;){try{var v=typeof b.contentWindow.location.href=="string"}catch{v=!1}if(v)p=b.contentWindow;else break;b=De(p.document)}return b}function $x(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b&&(b==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||b==="textarea"||p.contentEditable==="true")}function wie(p){var b=KN(),v=p.focusedElem,k=p.selectionRange;if(b!==v&&v&&v.ownerDocument&&XN(v.ownerDocument.documentElement,v)){if(k!==null&&$x(v)){if(b=k.start,p=k.end,p===void 0&&(p=b),"selectionStart"in v)v.selectionStart=b,v.selectionEnd=Math.min(p,v.value.length);else if(p=(b=v.ownerDocument||document)&&b.defaultView||window,p.getSelection){p=p.getSelection();var N=v.textContent.length,D=Math.min(k.start,N);k=k.end===void 0?D:Math.min(k.end,N),!p.extend&&D>k&&(N=k,k=D,D=N),N=GN(v,D);var X=GN(v,k);N&&X&&(p.rangeCount!==1||p.anchorNode!==N.node||p.anchorOffset!==N.offset||p.focusNode!==X.node||p.focusOffset!==X.offset)&&(b=b.createRange(),b.setStart(N.node,N.offset),p.removeAllRanges(),D>k?(p.addRange(b),p.extend(X.node,X.offset)):(b.setEnd(X.node,X.offset),p.addRange(b)))}}for(b=[],p=v;p=p.parentNode;)p.nodeType===1&&b.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<b.length;v++)p=b[v],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Eie=a&&"documentMode"in document&&11>=document.documentMode,x1=null,zx=null,Q6=null,Hx=!1;function YN(p,b,v){var k=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Hx||x1==null||x1!==De(k)||(k=x1,"selectionStart"in k&&$x(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Q6&&q6(Q6,k)||(Q6=k,k=E8(zx,"onSelect"),0<k.length&&(b=new _x("onSelect","select",null,b,v),p.push({event:b,listeners:k}),b.target=x1)))}function x8(p,b){var v={};return v[p.toLowerCase()]=b.toLowerCase(),v["Webkit"+p]="webkit"+b,v["Moz"+p]="moz"+b,v}var v1={animationend:x8("Animation","AnimationEnd"),animationiteration:x8("Animation","AnimationIteration"),animationstart:x8("Animation","AnimationStart"),transitionend:x8("Transition","TransitionEnd")},Vx={},ZN={};a&&(ZN=document.createElement("div").style,"AnimationEvent"in window||(delete v1.animationend.animation,delete v1.animationiteration.animation,delete v1.animationstart.animation),"TransitionEvent"in window||delete v1.transitionend.transition);function v8(p){if(Vx[p])return Vx[p];if(!v1[p])return p;var b=v1[p],v;for(v in b)if(b.hasOwnProperty(v)&&v in ZN)return Vx[p]=b[v];return p}var qN=v8("animationend"),QN=v8("animationiteration"),JN=v8("animationstart"),eR=v8("transitionend"),tR=new Map,nR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qf(p,b){tR.set(p,b),s(b,[p])}for(var Wx=0;Wx<nR.length;Wx++){var Gx=nR[Wx],Sie=Gx.toLowerCase(),kie=Gx[0].toUpperCase()+Gx.slice(1);qf(Sie,"on"+kie)}qf(qN,"onAnimationEnd"),qf(QN,"onAnimationIteration"),qf(JN,"onAnimationStart"),qf("dblclick","onDoubleClick"),qf("focusin","onFocus"),qf("focusout","onBlur"),qf(eR,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var J6="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cie=new Set("cancel close invalid load scroll toggle".split(" ").concat(J6));function rR(p,b,v){var k=p.type||"unknown-event";p.currentTarget=v,Lr(k,b,void 0,p),p.currentTarget=null}function iR(p,b){b=(b&4)!==0;for(var v=0;v<p.length;v++){var k=p[v],N=k.event;k=k.listeners;e:{var D=void 0;if(b)for(var X=k.length-1;0<=X;X--){var ee=k[X],ne=ee.instance,ge=ee.currentTarget;if(ee=ee.listener,ne!==D&&N.isPropagationStopped())break e;rR(N,ee,ge),D=ne}else for(X=0;X<k.length;X++){if(ee=k[X],ne=ee.instance,ge=ee.currentTarget,ee=ee.listener,ne!==D&&N.isPropagationStopped())break e;rR(N,ee,ge),D=ne}}}if(ko)throw p=Gn,ko=!1,Gn=null,p}function In(p,b){var v=b[ev];v===void 0&&(v=b[ev]=new Set);var k=p+"__bubble";v.has(k)||(sR(b,p,2,!1),v.add(k))}function Xx(p,b,v){var k=0;b&&(k|=4),sR(v,p,k,b)}var w8="_reactListening"+Math.random().toString(36).slice(2);function eg(p){if(!p[w8]){p[w8]=!0,r.forEach(function(v){v!=="selectionchange"&&(Cie.has(v)||Xx(v,!1,p),Xx(v,!0,p))});var b=p.nodeType===9?p:p.ownerDocument;b===null||b[w8]||(b[w8]=!0,Xx("selectionchange",!1,b))}}function sR(p,b,v,k){switch(AN(b)){case 1:var N=Fre;break;case 4:N=$re;break;default:N=Ix}v=N.bind(null,b,v,p),N=void 0,!xc||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(N=!0),k?N!==void 0?p.addEventListener(b,v,{capture:!0,passive:N}):p.addEventListener(b,v,!0):N!==void 0?p.addEventListener(b,v,{passive:N}):p.addEventListener(b,v,!1)}function Kx(p,b,v,k,N){var D=k;if(!(b&1)&&!(b&2)&&k!==null)e:for(;;){if(k===null)return;var X=k.tag;if(X===3||X===4){var ee=k.stateNode.containerInfo;if(ee===N||ee.nodeType===8&&ee.parentNode===N)break;if(X===4)for(X=k.return;X!==null;){var ne=X.tag;if((ne===3||ne===4)&&(ne=X.stateNode.containerInfo,ne===N||ne.nodeType===8&&ne.parentNode===N))return;X=X.return}for(;ee!==null;){if(X=X0(ee),X===null)return;if(ne=X.tag,ne===5||ne===6){k=D=X;continue e}ee=ee.parentNode}}k=k.return}Ys(function(){var ge=D,Ce=Eo(v),Ne=[];e:{var ke=tR.get(p);if(ke!==void 0){var He=_x,qe=p;switch(p){case"keypress":if(g8(v)===0)break e;case"keydown":case"keyup":He=nie;break;case"focusin":qe="focus",He=Lx;break;case"focusout":qe="blur",He=Lx;break;case"beforeblur":case"afterblur":He=Lx;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=NN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=Vre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=sie;break;case qN:case QN:case JN:He=Xre;break;case eR:He=aie;break;case"scroll":He=zre;break;case"wheel":He=cie;break;case"copy":case"cut":case"paste":He=Yre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=_N}var Je=(b&4)!==0,gr=!Je&&p==="scroll",ae=Je?ke!==null?ke+"Capture":null:ke;Je=[];for(var re=ge,fe;re!==null;){fe=re;var Pe=fe.stateNode;if(fe.tag===5&&Pe!==null&&(fe=Pe,ae!==null&&(Pe=Kr(re,ae),Pe!=null&&Je.push(tg(re,Pe,fe)))),gr)break;re=re.return}0<Je.length&&(ke=new He(ke,qe,null,v,Ce),Ne.push({event:ke,listeners:Je}))}}if(!(b&7)){e:{if(ke=p==="mouseover"||p==="pointerover",He=p==="mouseout"||p==="pointerout",ke&&v!==hl&&(qe=v.relatedTarget||v.fromElement)&&(X0(qe)||qe[vc]))break e;if((He||ke)&&(ke=Ce.window===Ce?Ce:(ke=Ce.ownerDocument)?ke.defaultView||ke.parentWindow:window,He?(qe=v.relatedTarget||v.toElement,He=ge,qe=qe?X0(qe):null,qe!==null&&(gr=ys(qe),qe!==gr||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(He=null,qe=ge),He!==qe)){if(Je=NN,Pe="onMouseLeave",ae="onMouseEnter",re="mouse",(p==="pointerout"||p==="pointerover")&&(Je=_N,Pe="onPointerLeave",ae="onPointerEnter",re="pointer"),gr=He==null?ke:S1(He),fe=qe==null?ke:S1(qe),ke=new Je(Pe,re+"leave",He,v,Ce),ke.target=gr,ke.relatedTarget=fe,Pe=null,X0(Ce)===ge&&(Je=new Je(ae,re+"enter",qe,v,Ce),Je.target=fe,Je.relatedTarget=gr,Pe=Je),gr=Pe,He&&qe)t:{for(Je=He,ae=qe,re=0,fe=Je;fe;fe=w1(fe))re++;for(fe=0,Pe=ae;Pe;Pe=w1(Pe))fe++;for(;0<re-fe;)Je=w1(Je),re--;for(;0<fe-re;)ae=w1(ae),fe--;for(;re--;){if(Je===ae||ae!==null&&Je===ae.alternate)break t;Je=w1(Je),ae=w1(ae)}Je=null}else Je=null;He!==null&&oR(Ne,ke,He,Je,!1),qe!==null&&gr!==null&&oR(Ne,gr,qe,Je,!0)}}e:{if(ke=ge?S1(ge):window,He=ke.nodeName&&ke.nodeName.toLowerCase(),He==="select"||He==="input"&&ke.type==="file")var nt=gie;else if(BN(ke))if($N)nt=xie;else{nt=Uie;var ft=bie}else(He=ke.nodeName)&&He.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(nt=yie);if(nt&&(nt=nt(p,ge))){FN(Ne,nt,v,Ce);break e}ft&&ft(p,ke,ge),p==="focusout"&&(ft=ke._wrapperState)&&ft.controlled&&ke.type==="number"&&cn(ke,"number",ke.value)}switch(ft=ge?S1(ge):window,p){case"focusin":(BN(ft)||ft.contentEditable==="true")&&(x1=ft,zx=ge,Q6=null);break;case"focusout":Q6=zx=x1=null;break;case"mousedown":Hx=!0;break;case"contextmenu":case"mouseup":case"dragend":Hx=!1,YN(Ne,v,Ce);break;case"selectionchange":if(Eie)break;case"keydown":case"keyup":YN(Ne,v,Ce)}var dt;if(jx)e:{switch(p){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else y1?ON(p,v)&&(Ut="onCompositionEnd"):p==="keydown"&&v.keyCode===229&&(Ut="onCompositionStart");Ut&&(PN&&v.locale!=="ko"&&(y1||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&y1&&(dt=TN()):(Zf=Ce,Rx="value"in Zf?Zf.value:Zf.textContent,y1=!0)),ft=E8(ge,Ut),0<ft.length&&(Ut=new RN(Ut,p,null,v,Ce),Ne.push({event:Ut,listeners:ft}),dt?Ut.data=dt:(dt=jN(v),dt!==null&&(Ut.data=dt)))),(dt=die?uie(p,v):hie(p,v))&&(ge=E8(ge,"onBeforeInput"),0<ge.length&&(Ce=new RN("onBeforeInput","beforeinput",null,v,Ce),Ne.push({event:Ce,listeners:ge}),Ce.data=dt))}iR(Ne,b)})}function tg(p,b,v){return{instance:p,listener:b,currentTarget:v}}function E8(p,b){for(var v=b+"Capture",k=[];p!==null;){var N=p,D=N.stateNode;N.tag===5&&D!==null&&(N=D,D=Kr(p,v),D!=null&&k.unshift(tg(p,D,N)),D=Kr(p,b),D!=null&&k.push(tg(p,D,N))),p=p.return}return k}function w1(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function oR(p,b,v,k,N){for(var D=b._reactName,X=[];v!==null&&v!==k;){var ee=v,ne=ee.alternate,ge=ee.stateNode;if(ne!==null&&ne===k)break;ee.tag===5&&ge!==null&&(ee=ge,N?(ne=Kr(v,D),ne!=null&&X.unshift(tg(v,ne,ee))):N||(ne=Kr(v,D),ne!=null&&X.push(tg(v,ne,ee)))),v=v.return}X.length!==0&&p.push({event:b,listeners:X})}var Mie=/\r\n?/g,Aie=/\u0000|\uFFFD/g;function aR(p){return(typeof p=="string"?p:""+p).replace(Mie,`
`).replace(Aie,"")}function S8(p,b,v){if(b=aR(b),aR(p)!==b&&v)throw Error(n(425))}function k8(){}var Yx=null,Zx=null;function qx(p,b){return p==="textarea"||p==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var Qx=typeof setTimeout=="function"?setTimeout:void 0,Tie=typeof clearTimeout=="function"?clearTimeout:void 0,lR=typeof Promise=="function"?Promise:void 0,Iie=typeof queueMicrotask=="function"?queueMicrotask:typeof lR<"u"?function(p){return lR.resolve(null).then(p).catch(Nie)}:Qx;function Nie(p){setTimeout(function(){throw p})}function Jx(p,b){var v=b,k=0;do{var N=v.nextSibling;if(p.removeChild(v),N&&N.nodeType===8)if(v=N.data,v==="/$"){if(k===0){p.removeChild(N),W6(b);return}k--}else v!=="$"&&v!=="$?"&&v!=="$!"||k++;v=N}while(v);W6(b)}function Qf(p){for(;p!=null;p=p.nextSibling){var b=p.nodeType;if(b===1||b===3)break;if(b===8){if(b=p.data,b==="$"||b==="$!"||b==="$?")break;if(b==="/$")return null}}return p}function cR(p){p=p.previousSibling;for(var b=0;p;){if(p.nodeType===8){var v=p.data;if(v==="$"||v==="$!"||v==="$?"){if(b===0)return p;b--}else v==="/$"&&b++}p=p.previousSibling}return null}var E1=Math.random().toString(36).slice(2),ml="__reactFiber$"+E1,ng="__reactProps$"+E1,vc="__reactContainer$"+E1,ev="__reactEvents$"+E1,Rie="__reactListeners$"+E1,_ie="__reactHandles$"+E1;function X0(p){var b=p[ml];if(b)return b;for(var v=p.parentNode;v;){if(b=v[vc]||v[ml]){if(v=b.alternate,b.child!==null||v!==null&&v.child!==null)for(p=cR(p);p!==null;){if(v=p[ml])return v;p=cR(p)}return b}p=v,v=p.parentNode}return null}function rg(p){return p=p[ml]||p[vc],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function S1(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function C8(p){return p[ng]||null}var tv=[],k1=-1;function Jf(p){return{current:p}}function Nn(p){0>k1||(p.current=tv[k1],tv[k1]=null,k1--)}function Sn(p,b){k1++,tv[k1]=p.current,p.current=b}var ed={},Ti=Jf(ed),xs=Jf(!1),K0=ed;function C1(p,b){var v=p.type.contextTypes;if(!v)return ed;var k=p.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===b)return k.__reactInternalMemoizedMaskedChildContext;var N={},D;for(D in v)N[D]=b[D];return k&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=b,p.__reactInternalMemoizedMaskedChildContext=N),N}function vs(p){return p=p.childContextTypes,p!=null}function M8(){Nn(xs),Nn(Ti)}function fR(p,b,v){if(Ti.current!==ed)throw Error(n(168));Sn(Ti,b),Sn(xs,v)}function dR(p,b,v){var k=p.stateNode;if(b=b.childContextTypes,typeof k.getChildContext!="function")return v;k=k.getChildContext();for(var N in k)if(!(N in b))throw Error(n(108,ue(p)||"Unknown",N));return Y({},v,k)}function A8(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||ed,K0=Ti.current,Sn(Ti,p),Sn(xs,xs.current),!0}function uR(p,b,v){var k=p.stateNode;if(!k)throw Error(n(169));v?(p=dR(p,b,K0),k.__reactInternalMemoizedMergedChildContext=p,Nn(xs),Nn(Ti),Sn(Ti,p)):Nn(xs),Sn(xs,v)}var wc=null,T8=!1,nv=!1;function hR(p){wc===null?wc=[p]:wc.push(p)}function Pie(p){T8=!0,hR(p)}function td(){if(!nv&&wc!==null){nv=!0;var p=0,b=fn;try{var v=wc;for(fn=1;p<v.length;p++){var k=v[p];do k=k(!0);while(k!==null)}wc=null,T8=!1}catch(N){throw wc!==null&&(wc=wc.slice(p+1)),i8(j6,td),N}finally{fn=b,nv=!1}}return null}var M1=[],A1=0,I8=null,N8=0,Mo=[],Ao=0,Y0=null,Ec=1,Sc="";function Z0(p,b){M1[A1++]=N8,M1[A1++]=I8,I8=p,N8=b}function pR(p,b,v){Mo[Ao++]=Ec,Mo[Ao++]=Sc,Mo[Ao++]=Y0,Y0=p;var k=Ec;p=Sc;var N=32-Qs(k)-1;k&=~(1<<N),v+=1;var D=32-Qs(b)+N;if(30<D){var X=N-N%5;D=(k&(1<<X)-1).toString(32),k>>=X,N-=X,Ec=1<<32-Qs(b)+N|v<<N|k,Sc=D+p}else Ec=1<<D|v<<N|k,Sc=p}function rv(p){p.return!==null&&(Z0(p,1),pR(p,1,0))}function iv(p){for(;p===I8;)I8=M1[--A1],M1[A1]=null,N8=M1[--A1],M1[A1]=null;for(;p===Y0;)Y0=Mo[--Ao],Mo[Ao]=null,Sc=Mo[--Ao],Mo[Ao]=null,Ec=Mo[--Ao],Mo[Ao]=null}var eo=null,to=null,Ln=!1,Ua=null;function mR(p,b){var v=Ro(5,null,null,0);v.elementType="DELETED",v.stateNode=b,v.return=p,b=p.deletions,b===null?(p.deletions=[v],p.flags|=16):b.push(v)}function gR(p,b){switch(p.tag){case 5:var v=p.type;return b=b.nodeType!==1||v.toLowerCase()!==b.nodeName.toLowerCase()?null:b,b!==null?(p.stateNode=b,eo=p,to=Qf(b.firstChild),!0):!1;case 6:return b=p.pendingProps===""||b.nodeType!==3?null:b,b!==null?(p.stateNode=b,eo=p,to=null,!0):!1;case 13:return b=b.nodeType!==8?null:b,b!==null?(v=Y0!==null?{id:Ec,overflow:Sc}:null,p.memoizedState={dehydrated:b,treeContext:v,retryLane:1073741824},v=Ro(18,null,null,0),v.stateNode=b,v.return=p,p.child=v,eo=p,to=null,!0):!1;default:return!1}}function sv(p){return(p.mode&1)!==0&&(p.flags&128)===0}function ov(p){if(Ln){var b=to;if(b){var v=b;if(!gR(p,b)){if(sv(p))throw Error(n(418));b=Qf(v.nextSibling);var k=eo;b&&gR(p,b)?mR(k,v):(p.flags=p.flags&-4097|2,Ln=!1,eo=p)}}else{if(sv(p))throw Error(n(418));p.flags=p.flags&-4097|2,Ln=!1,eo=p}}}function bR(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;eo=p}function R8(p){if(p!==eo)return!1;if(!Ln)return bR(p),Ln=!0,!1;var b;if((b=p.tag!==3)&&!(b=p.tag!==5)&&(b=p.type,b=b!=="head"&&b!=="body"&&!qx(p.type,p.memoizedProps)),b&&(b=to)){if(sv(p))throw UR(),Error(n(418));for(;b;)mR(p,b),b=Qf(b.nextSibling)}if(bR(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,b=0;p;){if(p.nodeType===8){var v=p.data;if(v==="/$"){if(b===0){to=Qf(p.nextSibling);break e}b--}else v!=="$"&&v!=="$!"&&v!=="$?"||b++}p=p.nextSibling}to=null}}else to=eo?Qf(p.stateNode.nextSibling):null;return!0}function UR(){for(var p=to;p;)p=Qf(p.nextSibling)}function T1(){to=eo=null,Ln=!1}function av(p){Ua===null?Ua=[p]:Ua.push(p)}var Die=S.ReactCurrentBatchConfig;function ig(p,b,v){if(p=v.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(n(309));var k=v.stateNode}if(!k)throw Error(n(147,p));var N=k,D=""+p;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===D?b.ref:(b=function(X){var ee=N.refs;X===null?delete ee[D]:ee[D]=X},b._stringRef=D,b)}if(typeof p!="string")throw Error(n(284));if(!v._owner)throw Error(n(290,p))}return p}function _8(p,b){throw p=Object.prototype.toString.call(b),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":p))}function yR(p){var b=p._init;return b(p._payload)}function xR(p){function b(ae,re){if(p){var fe=ae.deletions;fe===null?(ae.deletions=[re],ae.flags|=16):fe.push(re)}}function v(ae,re){if(!p)return null;for(;re!==null;)b(ae,re),re=re.sibling;return null}function k(ae,re){for(ae=new Map;re!==null;)re.key!==null?ae.set(re.key,re):ae.set(re.index,re),re=re.sibling;return ae}function N(ae,re){return ae=cd(ae,re),ae.index=0,ae.sibling=null,ae}function D(ae,re,fe){return ae.index=fe,p?(fe=ae.alternate,fe!==null?(fe=fe.index,fe<re?(ae.flags|=2,re):fe):(ae.flags|=2,re)):(ae.flags|=1048576,re)}function X(ae){return p&&ae.alternate===null&&(ae.flags|=2),ae}function ee(ae,re,fe,Pe){return re===null||re.tag!==6?(re=Qv(fe,ae.mode,Pe),re.return=ae,re):(re=N(re,fe),re.return=ae,re)}function ne(ae,re,fe,Pe){var nt=fe.type;return nt===C?Ce(ae,re,fe.props.children,Pe,fe.key):re!==null&&(re.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===z&&yR(nt)===re.type)?(Pe=N(re,fe.props),Pe.ref=ig(ae,re,fe),Pe.return=ae,Pe):(Pe=rU(fe.type,fe.key,fe.props,null,ae.mode,Pe),Pe.ref=ig(ae,re,fe),Pe.return=ae,Pe)}function ge(ae,re,fe,Pe){return re===null||re.tag!==4||re.stateNode.containerInfo!==fe.containerInfo||re.stateNode.implementation!==fe.implementation?(re=Jv(fe,ae.mode,Pe),re.return=ae,re):(re=N(re,fe.children||[]),re.return=ae,re)}function Ce(ae,re,fe,Pe,nt){return re===null||re.tag!==7?(re=iu(fe,ae.mode,Pe,nt),re.return=ae,re):(re=N(re,fe),re.return=ae,re)}function Ne(ae,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=Qv(""+re,ae.mode,fe),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case M:return fe=rU(re.type,re.key,re.props,null,ae.mode,fe),fe.ref=ig(ae,null,re),fe.return=ae,fe;case A:return re=Jv(re,ae.mode,fe),re.return=ae,re;case z:var Pe=re._init;return Ne(ae,Pe(re._payload),fe)}if(hi(re)||V(re))return re=iu(re,ae.mode,fe,null),re.return=ae,re;_8(ae,re)}return null}function ke(ae,re,fe,Pe){var nt=re!==null?re.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return nt!==null?null:ee(ae,re,""+fe,Pe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:return fe.key===nt?ne(ae,re,fe,Pe):null;case A:return fe.key===nt?ge(ae,re,fe,Pe):null;case z:return nt=fe._init,ke(ae,re,nt(fe._payload),Pe)}if(hi(fe)||V(fe))return nt!==null?null:Ce(ae,re,fe,Pe,null);_8(ae,fe)}return null}function He(ae,re,fe,Pe,nt){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return ae=ae.get(fe)||null,ee(re,ae,""+Pe,nt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case M:return ae=ae.get(Pe.key===null?fe:Pe.key)||null,ne(re,ae,Pe,nt);case A:return ae=ae.get(Pe.key===null?fe:Pe.key)||null,ge(re,ae,Pe,nt);case z:var ft=Pe._init;return He(ae,re,fe,ft(Pe._payload),nt)}if(hi(Pe)||V(Pe))return ae=ae.get(fe)||null,Ce(re,ae,Pe,nt,null);_8(re,Pe)}return null}function qe(ae,re,fe,Pe){for(var nt=null,ft=null,dt=re,Ut=re=0,qr=null;dt!==null&&Ut<fe.length;Ut++){dt.index>Ut?(qr=dt,dt=null):qr=dt.sibling;var qt=ke(ae,dt,fe[Ut],Pe);if(qt===null){dt===null&&(dt=qr);break}p&&dt&&qt.alternate===null&&b(ae,dt),re=D(qt,re,Ut),ft===null?nt=qt:ft.sibling=qt,ft=qt,dt=qr}if(Ut===fe.length)return v(ae,dt),Ln&&Z0(ae,Ut),nt;if(dt===null){for(;Ut<fe.length;Ut++)dt=Ne(ae,fe[Ut],Pe),dt!==null&&(re=D(dt,re,Ut),ft===null?nt=dt:ft.sibling=dt,ft=dt);return Ln&&Z0(ae,Ut),nt}for(dt=k(ae,dt);Ut<fe.length;Ut++)qr=He(dt,ae,Ut,fe[Ut],Pe),qr!==null&&(p&&qr.alternate!==null&&dt.delete(qr.key===null?Ut:qr.key),re=D(qr,re,Ut),ft===null?nt=qr:ft.sibling=qr,ft=qr);return p&&dt.forEach(function(fd){return b(ae,fd)}),Ln&&Z0(ae,Ut),nt}function Je(ae,re,fe,Pe){var nt=V(fe);if(typeof nt!="function")throw Error(n(150));if(fe=nt.call(fe),fe==null)throw Error(n(151));for(var ft=nt=null,dt=re,Ut=re=0,qr=null,qt=fe.next();dt!==null&&!qt.done;Ut++,qt=fe.next()){dt.index>Ut?(qr=dt,dt=null):qr=dt.sibling;var fd=ke(ae,dt,qt.value,Pe);if(fd===null){dt===null&&(dt=qr);break}p&&dt&&fd.alternate===null&&b(ae,dt),re=D(fd,re,Ut),ft===null?nt=fd:ft.sibling=fd,ft=fd,dt=qr}if(qt.done)return v(ae,dt),Ln&&Z0(ae,Ut),nt;if(dt===null){for(;!qt.done;Ut++,qt=fe.next())qt=Ne(ae,qt.value,Pe),qt!==null&&(re=D(qt,re,Ut),ft===null?nt=qt:ft.sibling=qt,ft=qt);return Ln&&Z0(ae,Ut),nt}for(dt=k(ae,dt);!qt.done;Ut++,qt=fe.next())qt=He(dt,ae,Ut,qt.value,Pe),qt!==null&&(p&&qt.alternate!==null&&dt.delete(qt.key===null?Ut:qt.key),re=D(qt,re,Ut),ft===null?nt=qt:ft.sibling=qt,ft=qt);return p&&dt.forEach(function(hse){return b(ae,hse)}),Ln&&Z0(ae,Ut),nt}function gr(ae,re,fe,Pe){if(typeof fe=="object"&&fe!==null&&fe.type===C&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:e:{for(var nt=fe.key,ft=re;ft!==null;){if(ft.key===nt){if(nt=fe.type,nt===C){if(ft.tag===7){v(ae,ft.sibling),re=N(ft,fe.props.children),re.return=ae,ae=re;break e}}else if(ft.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===z&&yR(nt)===ft.type){v(ae,ft.sibling),re=N(ft,fe.props),re.ref=ig(ae,ft,fe),re.return=ae,ae=re;break e}v(ae,ft);break}else b(ae,ft);ft=ft.sibling}fe.type===C?(re=iu(fe.props.children,ae.mode,Pe,fe.key),re.return=ae,ae=re):(Pe=rU(fe.type,fe.key,fe.props,null,ae.mode,Pe),Pe.ref=ig(ae,re,fe),Pe.return=ae,ae=Pe)}return X(ae);case A:e:{for(ft=fe.key;re!==null;){if(re.key===ft)if(re.tag===4&&re.stateNode.containerInfo===fe.containerInfo&&re.stateNode.implementation===fe.implementation){v(ae,re.sibling),re=N(re,fe.children||[]),re.return=ae,ae=re;break e}else{v(ae,re);break}else b(ae,re);re=re.sibling}re=Jv(fe,ae.mode,Pe),re.return=ae,ae=re}return X(ae);case z:return ft=fe._init,gr(ae,re,ft(fe._payload),Pe)}if(hi(fe))return qe(ae,re,fe,Pe);if(V(fe))return Je(ae,re,fe,Pe);_8(ae,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,re!==null&&re.tag===6?(v(ae,re.sibling),re=N(re,fe),re.return=ae,ae=re):(v(ae,re),re=Qv(fe,ae.mode,Pe),re.return=ae,ae=re),X(ae)):v(ae,re)}return gr}var I1=xR(!0),vR=xR(!1),P8=Jf(null),D8=null,N1=null,lv=null;function cv(){lv=N1=D8=null}function fv(p){var b=P8.current;Nn(P8),p._currentValue=b}function dv(p,b,v){for(;p!==null;){var k=p.alternate;if((p.childLanes&b)!==b?(p.childLanes|=b,k!==null&&(k.childLanes|=b)):k!==null&&(k.childLanes&b)!==b&&(k.childLanes|=b),p===v)break;p=p.return}}function R1(p,b){D8=p,lv=N1=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&b&&(ws=!0),p.firstContext=null)}function To(p){var b=p._currentValue;if(lv!==p)if(p={context:p,memoizedValue:b,next:null},N1===null){if(D8===null)throw Error(n(308));N1=p,D8.dependencies={lanes:0,firstContext:p}}else N1=N1.next=p;return b}var q0=null;function uv(p){q0===null?q0=[p]:q0.push(p)}function wR(p,b,v,k){var N=b.interleaved;return N===null?(v.next=v,uv(b)):(v.next=N.next,N.next=v),b.interleaved=v,kc(p,k)}function kc(p,b){p.lanes|=b;var v=p.alternate;for(v!==null&&(v.lanes|=b),v=p,p=p.return;p!==null;)p.childLanes|=b,v=p.alternate,v!==null&&(v.childLanes|=b),v=p,p=p.return;return v.tag===3?v.stateNode:null}var nd=!1;function hv(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ER(p,b){p=p.updateQueue,b.updateQueue===p&&(b.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Cc(p,b){return{eventTime:p,lane:b,tag:0,payload:null,callback:null,next:null}}function rd(p,b,v){var k=p.updateQueue;if(k===null)return null;if(k=k.shared,Gt&2){var N=k.pending;return N===null?b.next=b:(b.next=N.next,N.next=b),k.pending=b,kc(p,v)}return N=k.interleaved,N===null?(b.next=b,uv(k)):(b.next=N.next,N.next=b),k.interleaved=b,kc(p,v)}function L8(p,b,v){if(b=b.updateQueue,b!==null&&(b=b.shared,(v&4194240)!==0)){var k=b.lanes;k&=p.pendingLanes,v|=k,b.lanes=v,Mx(p,v)}}function SR(p,b){var v=p.updateQueue,k=p.alternate;if(k!==null&&(k=k.updateQueue,v===k)){var N=null,D=null;if(v=v.firstBaseUpdate,v!==null){do{var X={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};D===null?N=D=X:D=D.next=X,v=v.next}while(v!==null);D===null?N=D=b:D=D.next=b}else N=D=b;v={baseState:k.baseState,firstBaseUpdate:N,lastBaseUpdate:D,shared:k.shared,effects:k.effects},p.updateQueue=v;return}p=v.lastBaseUpdate,p===null?v.firstBaseUpdate=b:p.next=b,v.lastBaseUpdate=b}function O8(p,b,v,k){var N=p.updateQueue;nd=!1;var D=N.firstBaseUpdate,X=N.lastBaseUpdate,ee=N.shared.pending;if(ee!==null){N.shared.pending=null;var ne=ee,ge=ne.next;ne.next=null,X===null?D=ge:X.next=ge,X=ne;var Ce=p.alternate;Ce!==null&&(Ce=Ce.updateQueue,ee=Ce.lastBaseUpdate,ee!==X&&(ee===null?Ce.firstBaseUpdate=ge:ee.next=ge,Ce.lastBaseUpdate=ne))}if(D!==null){var Ne=N.baseState;X=0,Ce=ge=ne=null,ee=D;do{var ke=ee.lane,He=ee.eventTime;if((k&ke)===ke){Ce!==null&&(Ce=Ce.next={eventTime:He,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var qe=p,Je=ee;switch(ke=b,He=v,Je.tag){case 1:if(qe=Je.payload,typeof qe=="function"){Ne=qe.call(He,Ne,ke);break e}Ne=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Je.payload,ke=typeof qe=="function"?qe.call(He,Ne,ke):qe,ke==null)break e;Ne=Y({},Ne,ke);break e;case 2:nd=!0}}ee.callback!==null&&ee.lane!==0&&(p.flags|=64,ke=N.effects,ke===null?N.effects=[ee]:ke.push(ee))}else He={eventTime:He,lane:ke,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Ce===null?(ge=Ce=He,ne=Ne):Ce=Ce.next=He,X|=ke;if(ee=ee.next,ee===null){if(ee=N.shared.pending,ee===null)break;ke=ee,ee=ke.next,ke.next=null,N.lastBaseUpdate=ke,N.shared.pending=null}}while(!0);if(Ce===null&&(ne=Ne),N.baseState=ne,N.firstBaseUpdate=ge,N.lastBaseUpdate=Ce,b=N.shared.interleaved,b!==null){N=b;do X|=N.lane,N=N.next;while(N!==b)}else D===null&&(N.shared.lanes=0);eu|=X,p.lanes=X,p.memoizedState=Ne}}function kR(p,b,v){if(p=b.effects,b.effects=null,p!==null)for(b=0;b<p.length;b++){var k=p[b],N=k.callback;if(N!==null){if(k.callback=null,k=v,typeof N!="function")throw Error(n(191,N));N.call(k)}}}var sg={},gl=Jf(sg),og=Jf(sg),ag=Jf(sg);function Q0(p){if(p===sg)throw Error(n(174));return p}function pv(p,b){switch(Sn(ag,b),Sn(og,p),Sn(gl,sg),p=b.nodeType,p){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:yn(null,"");break;default:p=p===8?b.parentNode:b,b=p.namespaceURI||null,p=p.tagName,b=yn(b,p)}Nn(gl),Sn(gl,b)}function _1(){Nn(gl),Nn(og),Nn(ag)}function CR(p){Q0(ag.current);var b=Q0(gl.current),v=yn(b,p.type);b!==v&&(Sn(og,p),Sn(gl,v))}function mv(p){og.current===p&&(Nn(gl),Nn(og))}var Kn=Jf(0);function j8(p){for(var b=p;b!==null;){if(b.tag===13){var v=b.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if(b.flags&128)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var gv=[];function bv(){for(var p=0;p<gv.length;p++)gv[p]._workInProgressVersionPrimary=null;gv.length=0}var B8=S.ReactCurrentDispatcher,Uv=S.ReactCurrentBatchConfig,J0=0,Yn=null,Or=null,Yr=null,F8=!1,lg=!1,cg=0,Lie=0;function Ii(){throw Error(n(321))}function yv(p,b){if(b===null)return!1;for(var v=0;v<b.length&&v<p.length;v++)if(!ba(p[v],b[v]))return!1;return!0}function xv(p,b,v,k,N,D){if(J0=D,Yn=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,B8.current=p===null||p.memoizedState===null?Fie:$ie,p=v(k,N),lg){D=0;do{if(lg=!1,cg=0,25<=D)throw Error(n(301));D+=1,Yr=Or=null,b.updateQueue=null,B8.current=zie,p=v(k,N)}while(lg)}if(B8.current=H8,b=Or!==null&&Or.next!==null,J0=0,Yr=Or=Yn=null,F8=!1,b)throw Error(n(300));return p}function vv(){var p=cg!==0;return cg=0,p}function bl(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yr===null?Yn.memoizedState=Yr=p:Yr=Yr.next=p,Yr}function Io(){if(Or===null){var p=Yn.alternate;p=p!==null?p.memoizedState:null}else p=Or.next;var b=Yr===null?Yn.memoizedState:Yr.next;if(b!==null)Yr=b,Or=p;else{if(p===null)throw Error(n(310));Or=p,p={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},Yr===null?Yn.memoizedState=Yr=p:Yr=Yr.next=p}return Yr}function fg(p,b){return typeof b=="function"?b(p):b}function wv(p){var b=Io(),v=b.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var k=Or,N=k.baseQueue,D=v.pending;if(D!==null){if(N!==null){var X=N.next;N.next=D.next,D.next=X}k.baseQueue=N=D,v.pending=null}if(N!==null){D=N.next,k=k.baseState;var ee=X=null,ne=null,ge=D;do{var Ce=ge.lane;if((J0&Ce)===Ce)ne!==null&&(ne=ne.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),k=ge.hasEagerState?ge.eagerState:p(k,ge.action);else{var Ne={lane:Ce,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};ne===null?(ee=ne=Ne,X=k):ne=ne.next=Ne,Yn.lanes|=Ce,eu|=Ce}ge=ge.next}while(ge!==null&&ge!==D);ne===null?X=k:ne.next=ee,ba(k,b.memoizedState)||(ws=!0),b.memoizedState=k,b.baseState=X,b.baseQueue=ne,v.lastRenderedState=k}if(p=v.interleaved,p!==null){N=p;do D=N.lane,Yn.lanes|=D,eu|=D,N=N.next;while(N!==p)}else N===null&&(v.lanes=0);return[b.memoizedState,v.dispatch]}function Ev(p){var b=Io(),v=b.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var k=v.dispatch,N=v.pending,D=b.memoizedState;if(N!==null){v.pending=null;var X=N=N.next;do D=p(D,X.action),X=X.next;while(X!==N);ba(D,b.memoizedState)||(ws=!0),b.memoizedState=D,b.baseQueue===null&&(b.baseState=D),v.lastRenderedState=D}return[D,k]}function MR(){}function AR(p,b){var v=Yn,k=Io(),N=b(),D=!ba(k.memoizedState,N);if(D&&(k.memoizedState=N,ws=!0),k=k.queue,Sv(NR.bind(null,v,k,p),[p]),k.getSnapshot!==b||D||Yr!==null&&Yr.memoizedState.tag&1){if(v.flags|=2048,dg(9,IR.bind(null,v,k,N,b),void 0,null),Zr===null)throw Error(n(349));J0&30||TR(v,b,N)}return N}function TR(p,b,v){p.flags|=16384,p={getSnapshot:b,value:v},b=Yn.updateQueue,b===null?(b={lastEffect:null,stores:null},Yn.updateQueue=b,b.stores=[p]):(v=b.stores,v===null?b.stores=[p]:v.push(p))}function IR(p,b,v,k){b.value=v,b.getSnapshot=k,RR(b)&&_R(p)}function NR(p,b,v){return v(function(){RR(b)&&_R(p)})}function RR(p){var b=p.getSnapshot;p=p.value;try{var v=b();return!ba(p,v)}catch{return!0}}function _R(p){var b=kc(p,1);b!==null&&wa(b,p,1,-1)}function PR(p){var b=bl();return typeof p=="function"&&(p=p()),b.memoizedState=b.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fg,lastRenderedState:p},b.queue=p,p=p.dispatch=Bie.bind(null,Yn,p),[b.memoizedState,p]}function dg(p,b,v,k){return p={tag:p,create:b,destroy:v,deps:k,next:null},b=Yn.updateQueue,b===null?(b={lastEffect:null,stores:null},Yn.updateQueue=b,b.lastEffect=p.next=p):(v=b.lastEffect,v===null?b.lastEffect=p.next=p:(k=v.next,v.next=p,p.next=k,b.lastEffect=p)),p}function DR(){return Io().memoizedState}function $8(p,b,v,k){var N=bl();Yn.flags|=p,N.memoizedState=dg(1|b,v,void 0,k===void 0?null:k)}function z8(p,b,v,k){var N=Io();k=k===void 0?null:k;var D=void 0;if(Or!==null){var X=Or.memoizedState;if(D=X.destroy,k!==null&&yv(k,X.deps)){N.memoizedState=dg(b,v,D,k);return}}Yn.flags|=p,N.memoizedState=dg(1|b,v,D,k)}function LR(p,b){return $8(8390656,8,p,b)}function Sv(p,b){return z8(2048,8,p,b)}function OR(p,b){return z8(4,2,p,b)}function jR(p,b){return z8(4,4,p,b)}function BR(p,b){if(typeof b=="function")return p=p(),b(p),function(){b(null)};if(b!=null)return p=p(),b.current=p,function(){b.current=null}}function FR(p,b,v){return v=v!=null?v.concat([p]):null,z8(4,4,BR.bind(null,b,p),v)}function kv(){}function $R(p,b){var v=Io();b=b===void 0?null:b;var k=v.memoizedState;return k!==null&&b!==null&&yv(b,k[1])?k[0]:(v.memoizedState=[p,b],p)}function zR(p,b){var v=Io();b=b===void 0?null:b;var k=v.memoizedState;return k!==null&&b!==null&&yv(b,k[1])?k[0]:(p=p(),v.memoizedState=[p,b],p)}function HR(p,b,v){return J0&21?(ba(v,b)||(v=g1(),Yn.lanes|=v,eu|=v,p.baseState=!0),b):(p.baseState&&(p.baseState=!1,ws=!0),p.memoizedState=v)}function Oie(p,b){var v=fn;fn=v!==0&&4>v?v:4,p(!0);var k=Uv.transition;Uv.transition={};try{p(!1),b()}finally{fn=v,Uv.transition=k}}function VR(){return Io().memoizedState}function jie(p,b,v){var k=ad(p);if(v={lane:k,action:v,hasEagerState:!1,eagerState:null,next:null},WR(p))GR(b,v);else if(v=wR(p,b,v,k),v!==null){var N=es();wa(v,p,k,N),XR(v,b,k)}}function Bie(p,b,v){var k=ad(p),N={lane:k,action:v,hasEagerState:!1,eagerState:null,next:null};if(WR(p))GR(b,N);else{var D=p.alternate;if(p.lanes===0&&(D===null||D.lanes===0)&&(D=b.lastRenderedReducer,D!==null))try{var X=b.lastRenderedState,ee=D(X,v);if(N.hasEagerState=!0,N.eagerState=ee,ba(ee,X)){var ne=b.interleaved;ne===null?(N.next=N,uv(b)):(N.next=ne.next,ne.next=N),b.interleaved=N;return}}catch{}finally{}v=wR(p,b,N,k),v!==null&&(N=es(),wa(v,p,k,N),XR(v,b,k))}}function WR(p){var b=p.alternate;return p===Yn||b!==null&&b===Yn}function GR(p,b){lg=F8=!0;var v=p.pending;v===null?b.next=b:(b.next=v.next,v.next=b),p.pending=b}function XR(p,b,v){if(v&4194240){var k=b.lanes;k&=p.pendingLanes,v|=k,b.lanes=v,Mx(p,v)}}var H8={readContext:To,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useInsertionEffect:Ii,useLayoutEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useMutableSource:Ii,useSyncExternalStore:Ii,useId:Ii,unstable_isNewReconciler:!1},Fie={readContext:To,useCallback:function(p,b){return bl().memoizedState=[p,b===void 0?null:b],p},useContext:To,useEffect:LR,useImperativeHandle:function(p,b,v){return v=v!=null?v.concat([p]):null,$8(4194308,4,BR.bind(null,b,p),v)},useLayoutEffect:function(p,b){return $8(4194308,4,p,b)},useInsertionEffect:function(p,b){return $8(4,2,p,b)},useMemo:function(p,b){var v=bl();return b=b===void 0?null:b,p=p(),v.memoizedState=[p,b],p},useReducer:function(p,b,v){var k=bl();return b=v!==void 0?v(b):b,k.memoizedState=k.baseState=b,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:b},k.queue=p,p=p.dispatch=jie.bind(null,Yn,p),[k.memoizedState,p]},useRef:function(p){var b=bl();return p={current:p},b.memoizedState=p},useState:PR,useDebugValue:kv,useDeferredValue:function(p){return bl().memoizedState=p},useTransition:function(){var p=PR(!1),b=p[0];return p=Oie.bind(null,p[1]),bl().memoizedState=p,[b,p]},useMutableSource:function(){},useSyncExternalStore:function(p,b,v){var k=Yn,N=bl();if(Ln){if(v===void 0)throw Error(n(407));v=v()}else{if(v=b(),Zr===null)throw Error(n(349));J0&30||TR(k,b,v)}N.memoizedState=v;var D={value:v,getSnapshot:b};return N.queue=D,LR(NR.bind(null,k,D,p),[p]),k.flags|=2048,dg(9,IR.bind(null,k,D,v,b),void 0,null),v},useId:function(){var p=bl(),b=Zr.identifierPrefix;if(Ln){var v=Sc,k=Ec;v=(k&~(1<<32-Qs(k)-1)).toString(32)+v,b=":"+b+"R"+v,v=cg++,0<v&&(b+="H"+v.toString(32)),b+=":"}else v=Lie++,b=":"+b+"r"+v.toString(32)+":";return p.memoizedState=b},unstable_isNewReconciler:!1},$ie={readContext:To,useCallback:$R,useContext:To,useEffect:Sv,useImperativeHandle:FR,useInsertionEffect:OR,useLayoutEffect:jR,useMemo:zR,useReducer:wv,useRef:DR,useState:function(){return wv(fg)},useDebugValue:kv,useDeferredValue:function(p){var b=Io();return HR(b,Or.memoizedState,p)},useTransition:function(){var p=wv(fg)[0],b=Io().memoizedState;return[p,b]},useMutableSource:MR,useSyncExternalStore:AR,useId:VR,unstable_isNewReconciler:!1},zie={readContext:To,useCallback:$R,useContext:To,useEffect:Sv,useImperativeHandle:FR,useInsertionEffect:OR,useLayoutEffect:jR,useMemo:zR,useReducer:Ev,useRef:DR,useState:function(){return Ev(fg)},useDebugValue:kv,useDeferredValue:function(p){var b=Io();return Or===null?b.memoizedState=p:HR(b,Or.memoizedState,p)},useTransition:function(){var p=Ev(fg)[0],b=Io().memoizedState;return[p,b]},useMutableSource:MR,useSyncExternalStore:AR,useId:VR,unstable_isNewReconciler:!1};function ya(p,b){if(p&&p.defaultProps){b=Y({},b),p=p.defaultProps;for(var v in p)b[v]===void 0&&(b[v]=p[v]);return b}return b}function Cv(p,b,v,k){b=p.memoizedState,v=v(k,b),v=v==null?b:Y({},b,v),p.memoizedState=v,p.lanes===0&&(p.updateQueue.baseState=v)}var V8={isMounted:function(p){return(p=p._reactInternals)?ys(p)===p:!1},enqueueSetState:function(p,b,v){p=p._reactInternals;var k=es(),N=ad(p),D=Cc(k,N);D.payload=b,v!=null&&(D.callback=v),b=rd(p,D,N),b!==null&&(wa(b,p,N,k),L8(b,p,N))},enqueueReplaceState:function(p,b,v){p=p._reactInternals;var k=es(),N=ad(p),D=Cc(k,N);D.tag=1,D.payload=b,v!=null&&(D.callback=v),b=rd(p,D,N),b!==null&&(wa(b,p,N,k),L8(b,p,N))},enqueueForceUpdate:function(p,b){p=p._reactInternals;var v=es(),k=ad(p),N=Cc(v,k);N.tag=2,b!=null&&(N.callback=b),b=rd(p,N,k),b!==null&&(wa(b,p,k,v),L8(b,p,k))}};function KR(p,b,v,k,N,D,X){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(k,D,X):b.prototype&&b.prototype.isPureReactComponent?!q6(v,k)||!q6(N,D):!0}function YR(p,b,v){var k=!1,N=ed,D=b.contextType;return typeof D=="object"&&D!==null?D=To(D):(N=vs(b)?K0:Ti.current,k=b.contextTypes,D=(k=k!=null)?C1(p,N):ed),b=new b(v,D),p.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=V8,p.stateNode=b,b._reactInternals=p,k&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=N,p.__reactInternalMemoizedMaskedChildContext=D),b}function ZR(p,b,v,k){p=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(v,k),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(v,k),b.state!==p&&V8.enqueueReplaceState(b,b.state,null)}function Mv(p,b,v,k){var N=p.stateNode;N.props=v,N.state=p.memoizedState,N.refs={},hv(p);var D=b.contextType;typeof D=="object"&&D!==null?N.context=To(D):(D=vs(b)?K0:Ti.current,N.context=C1(p,D)),N.state=p.memoizedState,D=b.getDerivedStateFromProps,typeof D=="function"&&(Cv(p,b,D,v),N.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(b=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),b!==N.state&&V8.enqueueReplaceState(N,N.state,null),O8(p,v,N,k),N.state=p.memoizedState),typeof N.componentDidMount=="function"&&(p.flags|=4194308)}function P1(p,b){try{var v="",k=b;do v+=xe(k),k=k.return;while(k);var N=v}catch(D){N=`
Error generating stack: `+D.message+`
`+D.stack}return{value:p,source:b,stack:N,digest:null}}function Av(p,b,v){return{value:p,source:null,stack:v??null,digest:b??null}}function Tv(p,b){try{console.error(b.value)}catch(v){setTimeout(function(){throw v})}}var Hie=typeof WeakMap=="function"?WeakMap:Map;function qR(p,b,v){v=Cc(-1,v),v.tag=3,v.payload={element:null};var k=b.value;return v.callback=function(){q8||(q8=!0,Vv=k),Tv(p,b)},v}function QR(p,b,v){v=Cc(-1,v),v.tag=3;var k=p.type.getDerivedStateFromError;if(typeof k=="function"){var N=b.value;v.payload=function(){return k(N)},v.callback=function(){Tv(p,b)}}var D=p.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(v.callback=function(){Tv(p,b),typeof k!="function"&&(sd===null?sd=new Set([this]):sd.add(this));var X=b.stack;this.componentDidCatch(b.value,{componentStack:X!==null?X:""})}),v}function JR(p,b,v){var k=p.pingCache;if(k===null){k=p.pingCache=new Hie;var N=new Set;k.set(b,N)}else N=k.get(b),N===void 0&&(N=new Set,k.set(b,N));N.has(v)||(N.add(v),p=rse.bind(null,p,b,v),b.then(p,p))}function e_(p){do{var b;if((b=p.tag===13)&&(b=p.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return p;p=p.return}while(p!==null);return null}function t_(p,b,v,k,N){return p.mode&1?(p.flags|=65536,p.lanes=N,p):(p===b?p.flags|=65536:(p.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(b=Cc(-1,1),b.tag=2,rd(v,b,1))),v.lanes|=1),p)}var Vie=S.ReactCurrentOwner,ws=!1;function Ji(p,b,v,k){b.child=p===null?vR(b,null,v,k):I1(b,p.child,v,k)}function n_(p,b,v,k,N){v=v.render;var D=b.ref;return R1(b,N),k=xv(p,b,v,k,D,N),v=vv(),p!==null&&!ws?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~N,Mc(p,b,N)):(Ln&&v&&rv(b),b.flags|=1,Ji(p,b,k,N),b.child)}function r_(p,b,v,k,N){if(p===null){var D=v.type;return typeof D=="function"&&!qv(D)&&D.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(b.tag=15,b.type=D,i_(p,b,D,k,N)):(p=rU(v.type,null,k,b,b.mode,N),p.ref=b.ref,p.return=b,b.child=p)}if(D=p.child,!(p.lanes&N)){var X=D.memoizedProps;if(v=v.compare,v=v!==null?v:q6,v(X,k)&&p.ref===b.ref)return Mc(p,b,N)}return b.flags|=1,p=cd(D,k),p.ref=b.ref,p.return=b,b.child=p}function i_(p,b,v,k,N){if(p!==null){var D=p.memoizedProps;if(q6(D,k)&&p.ref===b.ref)if(ws=!1,b.pendingProps=k=D,(p.lanes&N)!==0)p.flags&131072&&(ws=!0);else return b.lanes=p.lanes,Mc(p,b,N)}return Iv(p,b,v,k,N)}function s_(p,b,v){var k=b.pendingProps,N=k.children,D=p!==null?p.memoizedState:null;if(k.mode==="hidden")if(!(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(L1,no),no|=v;else{if(!(v&1073741824))return p=D!==null?D.baseLanes|v:v,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:p,cachePool:null,transitions:null},b.updateQueue=null,Sn(L1,no),no|=p,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=D!==null?D.baseLanes:v,Sn(L1,no),no|=k}else D!==null?(k=D.baseLanes|v,b.memoizedState=null):k=v,Sn(L1,no),no|=k;return Ji(p,b,N,v),b.child}function o_(p,b){var v=b.ref;(p===null&&v!==null||p!==null&&p.ref!==v)&&(b.flags|=512,b.flags|=2097152)}function Iv(p,b,v,k,N){var D=vs(v)?K0:Ti.current;return D=C1(b,D),R1(b,N),v=xv(p,b,v,k,D,N),k=vv(),p!==null&&!ws?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~N,Mc(p,b,N)):(Ln&&k&&rv(b),b.flags|=1,Ji(p,b,v,N),b.child)}function a_(p,b,v,k,N){if(vs(v)){var D=!0;A8(b)}else D=!1;if(R1(b,N),b.stateNode===null)G8(p,b),YR(b,v,k),Mv(b,v,k,N),k=!0;else if(p===null){var X=b.stateNode,ee=b.memoizedProps;X.props=ee;var ne=X.context,ge=v.contextType;typeof ge=="object"&&ge!==null?ge=To(ge):(ge=vs(v)?K0:Ti.current,ge=C1(b,ge));var Ce=v.getDerivedStateFromProps,Ne=typeof Ce=="function"||typeof X.getSnapshotBeforeUpdate=="function";Ne||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ee!==k||ne!==ge)&&ZR(b,X,k,ge),nd=!1;var ke=b.memoizedState;X.state=ke,O8(b,k,X,N),ne=b.memoizedState,ee!==k||ke!==ne||xs.current||nd?(typeof Ce=="function"&&(Cv(b,v,Ce,k),ne=b.memoizedState),(ee=nd||KR(b,v,ee,k,ke,ne,ge))?(Ne||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(b.flags|=4194308)):(typeof X.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=k,b.memoizedState=ne),X.props=k,X.state=ne,X.context=ge,k=ee):(typeof X.componentDidMount=="function"&&(b.flags|=4194308),k=!1)}else{X=b.stateNode,ER(p,b),ee=b.memoizedProps,ge=b.type===b.elementType?ee:ya(b.type,ee),X.props=ge,Ne=b.pendingProps,ke=X.context,ne=v.contextType,typeof ne=="object"&&ne!==null?ne=To(ne):(ne=vs(v)?K0:Ti.current,ne=C1(b,ne));var He=v.getDerivedStateFromProps;(Ce=typeof He=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(ee!==Ne||ke!==ne)&&ZR(b,X,k,ne),nd=!1,ke=b.memoizedState,X.state=ke,O8(b,k,X,N);var qe=b.memoizedState;ee!==Ne||ke!==qe||xs.current||nd?(typeof He=="function"&&(Cv(b,v,He,k),qe=b.memoizedState),(ge=nd||KR(b,v,ge,k,ke,qe,ne)||!1)?(Ce||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(k,qe,ne),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(k,qe,ne)),typeof X.componentDidUpdate=="function"&&(b.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof X.componentDidUpdate!="function"||ee===p.memoizedProps&&ke===p.memoizedState||(b.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ee===p.memoizedProps&&ke===p.memoizedState||(b.flags|=1024),b.memoizedProps=k,b.memoizedState=qe),X.props=k,X.state=qe,X.context=ne,k=ge):(typeof X.componentDidUpdate!="function"||ee===p.memoizedProps&&ke===p.memoizedState||(b.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||ee===p.memoizedProps&&ke===p.memoizedState||(b.flags|=1024),k=!1)}return Nv(p,b,v,k,D,N)}function Nv(p,b,v,k,N,D){o_(p,b);var X=(b.flags&128)!==0;if(!k&&!X)return N&&uR(b,v,!1),Mc(p,b,D);k=b.stateNode,Vie.current=b;var ee=X&&typeof v.getDerivedStateFromError!="function"?null:k.render();return b.flags|=1,p!==null&&X?(b.child=I1(b,p.child,null,D),b.child=I1(b,null,ee,D)):Ji(p,b,ee,D),b.memoizedState=k.state,N&&uR(b,v,!0),b.child}function l_(p){var b=p.stateNode;b.pendingContext?fR(p,b.pendingContext,b.pendingContext!==b.context):b.context&&fR(p,b.context,!1),pv(p,b.containerInfo)}function c_(p,b,v,k,N){return T1(),av(N),b.flags|=256,Ji(p,b,v,k),b.child}var Rv={dehydrated:null,treeContext:null,retryLane:0};function _v(p){return{baseLanes:p,cachePool:null,transitions:null}}function f_(p,b,v){var k=b.pendingProps,N=Kn.current,D=!1,X=(b.flags&128)!==0,ee;if((ee=X)||(ee=p!==null&&p.memoizedState===null?!1:(N&2)!==0),ee?(D=!0,b.flags&=-129):(p===null||p.memoizedState!==null)&&(N|=1),Sn(Kn,N&1),p===null)return ov(b),p=b.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(b.mode&1?p.data==="$!"?b.lanes=8:b.lanes=1073741824:b.lanes=1,null):(X=k.children,p=k.fallback,D?(k=b.mode,D=b.child,X={mode:"hidden",children:X},!(k&1)&&D!==null?(D.childLanes=0,D.pendingProps=X):D=iU(X,k,0,null),p=iu(p,k,v,null),D.return=b,p.return=b,D.sibling=p,b.child=D,b.child.memoizedState=_v(v),b.memoizedState=Rv,p):Pv(b,X));if(N=p.memoizedState,N!==null&&(ee=N.dehydrated,ee!==null))return Wie(p,b,X,k,ee,N,v);if(D){D=k.fallback,X=b.mode,N=p.child,ee=N.sibling;var ne={mode:"hidden",children:k.children};return!(X&1)&&b.child!==N?(k=b.child,k.childLanes=0,k.pendingProps=ne,b.deletions=null):(k=cd(N,ne),k.subtreeFlags=N.subtreeFlags&14680064),ee!==null?D=cd(ee,D):(D=iu(D,X,v,null),D.flags|=2),D.return=b,k.return=b,k.sibling=D,b.child=k,k=D,D=b.child,X=p.child.memoizedState,X=X===null?_v(v):{baseLanes:X.baseLanes|v,cachePool:null,transitions:X.transitions},D.memoizedState=X,D.childLanes=p.childLanes&~v,b.memoizedState=Rv,k}return D=p.child,p=D.sibling,k=cd(D,{mode:"visible",children:k.children}),!(b.mode&1)&&(k.lanes=v),k.return=b,k.sibling=null,p!==null&&(v=b.deletions,v===null?(b.deletions=[p],b.flags|=16):v.push(p)),b.child=k,b.memoizedState=null,k}function Pv(p,b){return b=iU({mode:"visible",children:b},p.mode,0,null),b.return=p,p.child=b}function W8(p,b,v,k){return k!==null&&av(k),I1(b,p.child,null,v),p=Pv(b,b.pendingProps.children),p.flags|=2,b.memoizedState=null,p}function Wie(p,b,v,k,N,D,X){if(v)return b.flags&256?(b.flags&=-257,k=Av(Error(n(422))),W8(p,b,X,k)):b.memoizedState!==null?(b.child=p.child,b.flags|=128,null):(D=k.fallback,N=b.mode,k=iU({mode:"visible",children:k.children},N,0,null),D=iu(D,N,X,null),D.flags|=2,k.return=b,D.return=b,k.sibling=D,b.child=k,b.mode&1&&I1(b,p.child,null,X),b.child.memoizedState=_v(X),b.memoizedState=Rv,D);if(!(b.mode&1))return W8(p,b,X,null);if(N.data==="$!"){if(k=N.nextSibling&&N.nextSibling.dataset,k)var ee=k.dgst;return k=ee,D=Error(n(419)),k=Av(D,k,void 0),W8(p,b,X,k)}if(ee=(X&p.childLanes)!==0,ws||ee){if(k=Zr,k!==null){switch(X&-X){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=N&(k.suspendedLanes|X)?0:N,N!==0&&N!==D.retryLane&&(D.retryLane=N,kc(p,N),wa(k,p,N,-1))}return Zv(),k=Av(Error(n(421))),W8(p,b,X,k)}return N.data==="$?"?(b.flags|=128,b.child=p.child,b=ise.bind(null,p),N._reactRetry=b,null):(p=D.treeContext,to=Qf(N.nextSibling),eo=b,Ln=!0,Ua=null,p!==null&&(Mo[Ao++]=Ec,Mo[Ao++]=Sc,Mo[Ao++]=Y0,Ec=p.id,Sc=p.overflow,Y0=b),b=Pv(b,k.children),b.flags|=4096,b)}function d_(p,b,v){p.lanes|=b;var k=p.alternate;k!==null&&(k.lanes|=b),dv(p.return,b,v)}function Dv(p,b,v,k,N){var D=p.memoizedState;D===null?p.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:k,tail:v,tailMode:N}:(D.isBackwards=b,D.rendering=null,D.renderingStartTime=0,D.last=k,D.tail=v,D.tailMode=N)}function u_(p,b,v){var k=b.pendingProps,N=k.revealOrder,D=k.tail;if(Ji(p,b,k.children,v),k=Kn.current,k&2)k=k&1|2,b.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=b.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&d_(p,v,b);else if(p.tag===19)d_(p,v,b);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===b)break e;for(;p.sibling===null;){if(p.return===null||p.return===b)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}k&=1}if(Sn(Kn,k),!(b.mode&1))b.memoizedState=null;else switch(N){case"forwards":for(v=b.child,N=null;v!==null;)p=v.alternate,p!==null&&j8(p)===null&&(N=v),v=v.sibling;v=N,v===null?(N=b.child,b.child=null):(N=v.sibling,v.sibling=null),Dv(b,!1,N,v,D);break;case"backwards":for(v=null,N=b.child,b.child=null;N!==null;){if(p=N.alternate,p!==null&&j8(p)===null){b.child=N;break}p=N.sibling,N.sibling=v,v=N,N=p}Dv(b,!0,v,null,D);break;case"together":Dv(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function G8(p,b){!(b.mode&1)&&p!==null&&(p.alternate=null,b.alternate=null,b.flags|=2)}function Mc(p,b,v){if(p!==null&&(b.dependencies=p.dependencies),eu|=b.lanes,!(v&b.childLanes))return null;if(p!==null&&b.child!==p.child)throw Error(n(153));if(b.child!==null){for(p=b.child,v=cd(p,p.pendingProps),b.child=v,v.return=b;p.sibling!==null;)p=p.sibling,v=v.sibling=cd(p,p.pendingProps),v.return=b;v.sibling=null}return b.child}function Gie(p,b,v){switch(b.tag){case 3:l_(b),T1();break;case 5:CR(b);break;case 1:vs(b.type)&&A8(b);break;case 4:pv(b,b.stateNode.containerInfo);break;case 10:var k=b.type._context,N=b.memoizedProps.value;Sn(P8,k._currentValue),k._currentValue=N;break;case 13:if(k=b.memoizedState,k!==null)return k.dehydrated!==null?(Sn(Kn,Kn.current&1),b.flags|=128,null):v&b.child.childLanes?f_(p,b,v):(Sn(Kn,Kn.current&1),p=Mc(p,b,v),p!==null?p.sibling:null);Sn(Kn,Kn.current&1);break;case 19:if(k=(v&b.childLanes)!==0,p.flags&128){if(k)return u_(p,b,v);b.flags|=128}if(N=b.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Sn(Kn,Kn.current),k)break;return null;case 22:case 23:return b.lanes=0,s_(p,b,v)}return Mc(p,b,v)}var h_,Lv,p_,m_;h_=function(p,b){for(var v=b.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===b)break;for(;v.sibling===null;){if(v.return===null||v.return===b)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Lv=function(){},p_=function(p,b,v,k){var N=p.memoizedProps;if(N!==k){p=b.stateNode,Q0(gl.current);var D=null;switch(v){case"input":N=Ge(p,N),k=Ge(p,k),D=[];break;case"select":N=Y({},N,{value:void 0}),k=Y({},k,{value:void 0}),D=[];break;case"textarea":N=qi(p,N),k=qi(p,k),D=[];break;default:typeof N.onClick!="function"&&typeof k.onClick=="function"&&(p.onclick=k8)}pa(v,k);var X;v=null;for(ge in N)if(!k.hasOwnProperty(ge)&&N.hasOwnProperty(ge)&&N[ge]!=null)if(ge==="style"){var ee=N[ge];for(X in ee)ee.hasOwnProperty(X)&&(v||(v={}),v[X]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?D||(D=[]):(D=D||[]).push(ge,null));for(ge in k){var ne=k[ge];if(ee=N!=null?N[ge]:void 0,k.hasOwnProperty(ge)&&ne!==ee&&(ne!=null||ee!=null))if(ge==="style")if(ee){for(X in ee)!ee.hasOwnProperty(X)||ne&&ne.hasOwnProperty(X)||(v||(v={}),v[X]="");for(X in ne)ne.hasOwnProperty(X)&&ee[X]!==ne[X]&&(v||(v={}),v[X]=ne[X])}else v||(D||(D=[]),D.push(ge,v)),v=ne;else ge==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ee=ee?ee.__html:void 0,ne!=null&&ee!==ne&&(D=D||[]).push(ge,ne)):ge==="children"?typeof ne!="string"&&typeof ne!="number"||(D=D||[]).push(ge,""+ne):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(i.hasOwnProperty(ge)?(ne!=null&&ge==="onScroll"&&In("scroll",p),D||ee===ne||(D=[])):(D=D||[]).push(ge,ne))}v&&(D=D||[]).push("style",v);var ge=D;(b.updateQueue=ge)&&(b.flags|=4)}},m_=function(p,b,v,k){v!==k&&(b.flags|=4)};function ug(p,b){if(!Ln)switch(p.tailMode){case"hidden":b=p.tail;for(var v=null;b!==null;)b.alternate!==null&&(v=b),b=b.sibling;v===null?p.tail=null:v.sibling=null;break;case"collapsed":v=p.tail;for(var k=null;v!==null;)v.alternate!==null&&(k=v),v=v.sibling;k===null?b||p.tail===null?p.tail=null:p.tail.sibling=null:k.sibling=null}}function Ni(p){var b=p.alternate!==null&&p.alternate.child===p.child,v=0,k=0;if(b)for(var N=p.child;N!==null;)v|=N.lanes|N.childLanes,k|=N.subtreeFlags&14680064,k|=N.flags&14680064,N.return=p,N=N.sibling;else for(N=p.child;N!==null;)v|=N.lanes|N.childLanes,k|=N.subtreeFlags,k|=N.flags,N.return=p,N=N.sibling;return p.subtreeFlags|=k,p.childLanes=v,b}function Xie(p,b,v){var k=b.pendingProps;switch(iv(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(b),null;case 1:return vs(b.type)&&M8(),Ni(b),null;case 3:return k=b.stateNode,_1(),Nn(xs),Nn(Ti),bv(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(p===null||p.child===null)&&(R8(b)?b.flags|=4:p===null||p.memoizedState.isDehydrated&&!(b.flags&256)||(b.flags|=1024,Ua!==null&&(Xv(Ua),Ua=null))),Lv(p,b),Ni(b),null;case 5:mv(b);var N=Q0(ag.current);if(v=b.type,p!==null&&b.stateNode!=null)p_(p,b,v,k,N),p.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!k){if(b.stateNode===null)throw Error(n(166));return Ni(b),null}if(p=Q0(gl.current),R8(b)){k=b.stateNode,v=b.type;var D=b.memoizedProps;switch(k[ml]=b,k[ng]=D,p=(b.mode&1)!==0,v){case"dialog":In("cancel",k),In("close",k);break;case"iframe":case"object":case"embed":In("load",k);break;case"video":case"audio":for(N=0;N<J6.length;N++)In(J6[N],k);break;case"source":In("error",k);break;case"img":case"image":case"link":In("error",k),In("load",k);break;case"details":In("toggle",k);break;case"input":ht(k,D),In("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!D.multiple},In("invalid",k);break;case"textarea":Xs(k,D),In("invalid",k)}pa(v,D),N=null;for(var X in D)if(D.hasOwnProperty(X)){var ee=D[X];X==="children"?typeof ee=="string"?k.textContent!==ee&&(D.suppressHydrationWarning!==!0&&S8(k.textContent,ee,p),N=["children",ee]):typeof ee=="number"&&k.textContent!==""+ee&&(D.suppressHydrationWarning!==!0&&S8(k.textContent,ee,p),N=["children",""+ee]):i.hasOwnProperty(X)&&ee!=null&&X==="onScroll"&&In("scroll",k)}switch(v){case"input":we(k),En(k,D,!0);break;case"textarea":we(k),Qi(k);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(k.onclick=k8)}k=N,b.updateQueue=k,k!==null&&(b.flags|=4)}else{X=N.nodeType===9?N:N.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=sr(v)),p==="http://www.w3.org/1999/xhtml"?v==="script"?(p=X.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof k.is=="string"?p=X.createElement(v,{is:k.is}):(p=X.createElement(v),v==="select"&&(X=p,k.multiple?X.multiple=!0:k.size&&(X.size=k.size))):p=X.createElementNS(p,v),p[ml]=b,p[ng]=k,h_(p,b,!1,!1),b.stateNode=p;e:{switch(X=wo(v,k),v){case"dialog":In("cancel",p),In("close",p),N=k;break;case"iframe":case"object":case"embed":In("load",p),N=k;break;case"video":case"audio":for(N=0;N<J6.length;N++)In(J6[N],p);N=k;break;case"source":In("error",p),N=k;break;case"img":case"image":case"link":In("error",p),In("load",p),N=k;break;case"details":In("toggle",p),N=k;break;case"input":ht(p,k),N=Ge(p,k),In("invalid",p);break;case"option":N=k;break;case"select":p._wrapperState={wasMultiple:!!k.multiple},N=Y({},k,{value:void 0}),In("invalid",p);break;case"textarea":Xs(p,k),N=qi(p,k),In("invalid",p);break;default:N=k}pa(v,N),ee=N;for(D in ee)if(ee.hasOwnProperty(D)){var ne=ee[D];D==="style"?ha(p,ne):D==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&Xr(p,ne)):D==="children"?typeof ne=="string"?(v!=="textarea"||ne!=="")&&kr(p,ne):typeof ne=="number"&&kr(p,""+ne):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?ne!=null&&D==="onScroll"&&In("scroll",p):ne!=null&&E(p,D,ne,X))}switch(v){case"input":we(p),En(p,k,!1);break;case"textarea":we(p),Qi(p);break;case"option":k.value!=null&&p.setAttribute("value",""+te(k.value));break;case"select":p.multiple=!!k.multiple,D=k.value,D!=null?Mi(p,!!k.multiple,D,!1):k.defaultValue!=null&&Mi(p,!!k.multiple,k.defaultValue,!0);break;default:typeof N.onClick=="function"&&(p.onclick=k8)}switch(v){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(b.flags|=4)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return Ni(b),null;case 6:if(p&&b.stateNode!=null)m_(p,b,p.memoizedProps,k);else{if(typeof k!="string"&&b.stateNode===null)throw Error(n(166));if(v=Q0(ag.current),Q0(gl.current),R8(b)){if(k=b.stateNode,v=b.memoizedProps,k[ml]=b,(D=k.nodeValue!==v)&&(p=eo,p!==null))switch(p.tag){case 3:S8(k.nodeValue,v,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&S8(k.nodeValue,v,(p.mode&1)!==0)}D&&(b.flags|=4)}else k=(v.nodeType===9?v:v.ownerDocument).createTextNode(k),k[ml]=b,b.stateNode=k}return Ni(b),null;case 13:if(Nn(Kn),k=b.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Ln&&to!==null&&b.mode&1&&!(b.flags&128))UR(),T1(),b.flags|=98560,D=!1;else if(D=R8(b),k!==null&&k.dehydrated!==null){if(p===null){if(!D)throw Error(n(318));if(D=b.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[ml]=b}else T1(),!(b.flags&128)&&(b.memoizedState=null),b.flags|=4;Ni(b),D=!1}else Ua!==null&&(Xv(Ua),Ua=null),D=!0;if(!D)return b.flags&65536?b:null}return b.flags&128?(b.lanes=v,b):(k=k!==null,k!==(p!==null&&p.memoizedState!==null)&&k&&(b.child.flags|=8192,b.mode&1&&(p===null||Kn.current&1?jr===0&&(jr=3):Zv())),b.updateQueue!==null&&(b.flags|=4),Ni(b),null);case 4:return _1(),Lv(p,b),p===null&&eg(b.stateNode.containerInfo),Ni(b),null;case 10:return fv(b.type._context),Ni(b),null;case 17:return vs(b.type)&&M8(),Ni(b),null;case 19:if(Nn(Kn),D=b.memoizedState,D===null)return Ni(b),null;if(k=(b.flags&128)!==0,X=D.rendering,X===null)if(k)ug(D,!1);else{if(jr!==0||p!==null&&p.flags&128)for(p=b.child;p!==null;){if(X=j8(p),X!==null){for(b.flags|=128,ug(D,!1),k=X.updateQueue,k!==null&&(b.updateQueue=k,b.flags|=4),b.subtreeFlags=0,k=v,v=b.child;v!==null;)D=v,p=k,D.flags&=14680066,X=D.alternate,X===null?(D.childLanes=0,D.lanes=p,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=X.childLanes,D.lanes=X.lanes,D.child=X.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=X.memoizedProps,D.memoizedState=X.memoizedState,D.updateQueue=X.updateQueue,D.type=X.type,p=X.dependencies,D.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),v=v.sibling;return Sn(Kn,Kn.current&1|2),b.child}p=p.sibling}D.tail!==null&&Xn()>O1&&(b.flags|=128,k=!0,ug(D,!1),b.lanes=4194304)}else{if(!k)if(p=j8(X),p!==null){if(b.flags|=128,k=!0,v=p.updateQueue,v!==null&&(b.updateQueue=v,b.flags|=4),ug(D,!0),D.tail===null&&D.tailMode==="hidden"&&!X.alternate&&!Ln)return Ni(b),null}else 2*Xn()-D.renderingStartTime>O1&&v!==1073741824&&(b.flags|=128,k=!0,ug(D,!1),b.lanes=4194304);D.isBackwards?(X.sibling=b.child,b.child=X):(v=D.last,v!==null?v.sibling=X:b.child=X,D.last=X)}return D.tail!==null?(b=D.tail,D.rendering=b,D.tail=b.sibling,D.renderingStartTime=Xn(),b.sibling=null,v=Kn.current,Sn(Kn,k?v&1|2:v&1),b):(Ni(b),null);case 22:case 23:return Yv(),k=b.memoizedState!==null,p!==null&&p.memoizedState!==null!==k&&(b.flags|=8192),k&&b.mode&1?no&1073741824&&(Ni(b),b.subtreeFlags&6&&(b.flags|=8192)):Ni(b),null;case 24:return null;case 25:return null}throw Error(n(156,b.tag))}function Kie(p,b){switch(iv(b),b.tag){case 1:return vs(b.type)&&M8(),p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 3:return _1(),Nn(xs),Nn(Ti),bv(),p=b.flags,p&65536&&!(p&128)?(b.flags=p&-65537|128,b):null;case 5:return mv(b),null;case 13:if(Nn(Kn),p=b.memoizedState,p!==null&&p.dehydrated!==null){if(b.alternate===null)throw Error(n(340));T1()}return p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 19:return Nn(Kn),null;case 4:return _1(),null;case 10:return fv(b.type._context),null;case 22:case 23:return Yv(),null;case 24:return null;default:return null}}var X8=!1,Ri=!1,Yie=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function D1(p,b){var v=p.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(k){ar(p,b,k)}else v.current=null}function Ov(p,b,v){try{v()}catch(k){ar(p,b,k)}}var g_=!1;function Zie(p,b){if(Yx=h8,p=KN(),$x(p)){if("selectionStart"in p)var v={start:p.selectionStart,end:p.selectionEnd};else e:{v=(v=p.ownerDocument)&&v.defaultView||window;var k=v.getSelection&&v.getSelection();if(k&&k.rangeCount!==0){v=k.anchorNode;var N=k.anchorOffset,D=k.focusNode;k=k.focusOffset;try{v.nodeType,D.nodeType}catch{v=null;break e}var X=0,ee=-1,ne=-1,ge=0,Ce=0,Ne=p,ke=null;t:for(;;){for(var He;Ne!==v||N!==0&&Ne.nodeType!==3||(ee=X+N),Ne!==D||k!==0&&Ne.nodeType!==3||(ne=X+k),Ne.nodeType===3&&(X+=Ne.nodeValue.length),(He=Ne.firstChild)!==null;)ke=Ne,Ne=He;for(;;){if(Ne===p)break t;if(ke===v&&++ge===N&&(ee=X),ke===D&&++Ce===k&&(ne=X),(He=Ne.nextSibling)!==null)break;Ne=ke,ke=Ne.parentNode}Ne=He}v=ee===-1||ne===-1?null:{start:ee,end:ne}}else v=null}v=v||{start:0,end:0}}else v=null;for(Zx={focusedElem:p,selectionRange:v},h8=!1,Xe=b;Xe!==null;)if(b=Xe,p=b.child,(b.subtreeFlags&1028)!==0&&p!==null)p.return=b,Xe=p;else for(;Xe!==null;){b=Xe;try{var qe=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Je=qe.memoizedProps,gr=qe.memoizedState,ae=b.stateNode,re=ae.getSnapshotBeforeUpdate(b.elementType===b.type?Je:ya(b.type,Je),gr);ae.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var fe=b.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Pe){ar(b,b.return,Pe)}if(p=b.sibling,p!==null){p.return=b.return,Xe=p;break}Xe=b.return}return qe=g_,g_=!1,qe}function hg(p,b,v){var k=b.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var N=k=k.next;do{if((N.tag&p)===p){var D=N.destroy;N.destroy=void 0,D!==void 0&&Ov(b,v,D)}N=N.next}while(N!==k)}}function K8(p,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var v=b=b.next;do{if((v.tag&p)===p){var k=v.create;v.destroy=k()}v=v.next}while(v!==b)}}function jv(p){var b=p.ref;if(b!==null){var v=p.stateNode;switch(p.tag){case 5:p=v;break;default:p=v}typeof b=="function"?b(p):b.current=p}}function b_(p){var b=p.alternate;b!==null&&(p.alternate=null,b_(b)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(b=p.stateNode,b!==null&&(delete b[ml],delete b[ng],delete b[ev],delete b[Rie],delete b[_ie])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function U_(p){return p.tag===5||p.tag===3||p.tag===4}function y_(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||U_(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function Bv(p,b,v){var k=p.tag;if(k===5||k===6)p=p.stateNode,b?v.nodeType===8?v.parentNode.insertBefore(p,b):v.insertBefore(p,b):(v.nodeType===8?(b=v.parentNode,b.insertBefore(p,v)):(b=v,b.appendChild(p)),v=v._reactRootContainer,v!=null||b.onclick!==null||(b.onclick=k8));else if(k!==4&&(p=p.child,p!==null))for(Bv(p,b,v),p=p.sibling;p!==null;)Bv(p,b,v),p=p.sibling}function Fv(p,b,v){var k=p.tag;if(k===5||k===6)p=p.stateNode,b?v.insertBefore(p,b):v.appendChild(p);else if(k!==4&&(p=p.child,p!==null))for(Fv(p,b,v),p=p.sibling;p!==null;)Fv(p,b,v),p=p.sibling}var mi=null,xa=!1;function id(p,b,v){for(v=v.child;v!==null;)x_(p,b,v),v=v.sibling}function x_(p,b,v){if(Co&&typeof Co.onCommitFiberUnmount=="function")try{Co.onCommitFiberUnmount(W0,v)}catch{}switch(v.tag){case 5:Ri||D1(v,b);case 6:var k=mi,N=xa;mi=null,id(p,b,v),mi=k,xa=N,mi!==null&&(xa?(p=mi,v=v.stateNode,p.nodeType===8?p.parentNode.removeChild(v):p.removeChild(v)):mi.removeChild(v.stateNode));break;case 18:mi!==null&&(xa?(p=mi,v=v.stateNode,p.nodeType===8?Jx(p.parentNode,v):p.nodeType===1&&Jx(p,v),W6(p)):Jx(mi,v.stateNode));break;case 4:k=mi,N=xa,mi=v.stateNode.containerInfo,xa=!0,id(p,b,v),mi=k,xa=N;break;case 0:case 11:case 14:case 15:if(!Ri&&(k=v.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){N=k=k.next;do{var D=N,X=D.destroy;D=D.tag,X!==void 0&&(D&2||D&4)&&Ov(v,b,X),N=N.next}while(N!==k)}id(p,b,v);break;case 1:if(!Ri&&(D1(v,b),k=v.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=v.memoizedProps,k.state=v.memoizedState,k.componentWillUnmount()}catch(ee){ar(v,b,ee)}id(p,b,v);break;case 21:id(p,b,v);break;case 22:v.mode&1?(Ri=(k=Ri)||v.memoizedState!==null,id(p,b,v),Ri=k):id(p,b,v);break;default:id(p,b,v)}}function v_(p){var b=p.updateQueue;if(b!==null){p.updateQueue=null;var v=p.stateNode;v===null&&(v=p.stateNode=new Yie),b.forEach(function(k){var N=sse.bind(null,p,k);v.has(k)||(v.add(k),k.then(N,N))})}}function va(p,b){var v=b.deletions;if(v!==null)for(var k=0;k<v.length;k++){var N=v[k];try{var D=p,X=b,ee=X;e:for(;ee!==null;){switch(ee.tag){case 5:mi=ee.stateNode,xa=!1;break e;case 3:mi=ee.stateNode.containerInfo,xa=!0;break e;case 4:mi=ee.stateNode.containerInfo,xa=!0;break e}ee=ee.return}if(mi===null)throw Error(n(160));x_(D,X,N),mi=null,xa=!1;var ne=N.alternate;ne!==null&&(ne.return=null),N.return=null}catch(ge){ar(N,b,ge)}}if(b.subtreeFlags&12854)for(b=b.child;b!==null;)w_(b,p),b=b.sibling}function w_(p,b){var v=p.alternate,k=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(va(b,p),Ul(p),k&4){try{hg(3,p,p.return),K8(3,p)}catch(Je){ar(p,p.return,Je)}try{hg(5,p,p.return)}catch(Je){ar(p,p.return,Je)}}break;case 1:va(b,p),Ul(p),k&512&&v!==null&&D1(v,v.return);break;case 5:if(va(b,p),Ul(p),k&512&&v!==null&&D1(v,v.return),p.flags&32){var N=p.stateNode;try{kr(N,"")}catch(Je){ar(p,p.return,Je)}}if(k&4&&(N=p.stateNode,N!=null)){var D=p.memoizedProps,X=v!==null?v.memoizedProps:D,ee=p.type,ne=p.updateQueue;if(p.updateQueue=null,ne!==null)try{ee==="input"&&D.type==="radio"&&D.name!=null&&st(N,D),wo(ee,X);var ge=wo(ee,D);for(X=0;X<ne.length;X+=2){var Ce=ne[X],Ne=ne[X+1];Ce==="style"?ha(N,Ne):Ce==="dangerouslySetInnerHTML"?Xr(N,Ne):Ce==="children"?kr(N,Ne):E(N,Ce,Ne,ge)}switch(ee){case"input":jt(N,D);break;case"textarea":Ks(N,D);break;case"select":var ke=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!D.multiple;var He=D.value;He!=null?Mi(N,!!D.multiple,He,!1):ke!==!!D.multiple&&(D.defaultValue!=null?Mi(N,!!D.multiple,D.defaultValue,!0):Mi(N,!!D.multiple,D.multiple?[]:"",!1))}N[ng]=D}catch(Je){ar(p,p.return,Je)}}break;case 6:if(va(b,p),Ul(p),k&4){if(p.stateNode===null)throw Error(n(162));N=p.stateNode,D=p.memoizedProps;try{N.nodeValue=D}catch(Je){ar(p,p.return,Je)}}break;case 3:if(va(b,p),Ul(p),k&4&&v!==null&&v.memoizedState.isDehydrated)try{W6(b.containerInfo)}catch(Je){ar(p,p.return,Je)}break;case 4:va(b,p),Ul(p);break;case 13:va(b,p),Ul(p),N=p.child,N.flags&8192&&(D=N.memoizedState!==null,N.stateNode.isHidden=D,!D||N.alternate!==null&&N.alternate.memoizedState!==null||(Hv=Xn())),k&4&&v_(p);break;case 22:if(Ce=v!==null&&v.memoizedState!==null,p.mode&1?(Ri=(ge=Ri)||Ce,va(b,p),Ri=ge):va(b,p),Ul(p),k&8192){if(ge=p.memoizedState!==null,(p.stateNode.isHidden=ge)&&!Ce&&p.mode&1)for(Xe=p,Ce=p.child;Ce!==null;){for(Ne=Xe=Ce;Xe!==null;){switch(ke=Xe,He=ke.child,ke.tag){case 0:case 11:case 14:case 15:hg(4,ke,ke.return);break;case 1:D1(ke,ke.return);var qe=ke.stateNode;if(typeof qe.componentWillUnmount=="function"){k=ke,v=ke.return;try{b=k,qe.props=b.memoizedProps,qe.state=b.memoizedState,qe.componentWillUnmount()}catch(Je){ar(k,v,Je)}}break;case 5:D1(ke,ke.return);break;case 22:if(ke.memoizedState!==null){k_(Ne);continue}}He!==null?(He.return=ke,Xe=He):k_(Ne)}Ce=Ce.sibling}e:for(Ce=null,Ne=p;;){if(Ne.tag===5){if(Ce===null){Ce=Ne;try{N=Ne.stateNode,ge?(D=N.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ee=Ne.stateNode,ne=Ne.memoizedProps.style,X=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,ee.style.display=ua("display",X))}catch(Je){ar(p,p.return,Je)}}}else if(Ne.tag===6){if(Ce===null)try{Ne.stateNode.nodeValue=ge?"":Ne.memoizedProps}catch(Je){ar(p,p.return,Je)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===p)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===p)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===p)break e;Ce===Ne&&(Ce=null),Ne=Ne.return}Ce===Ne&&(Ce=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:va(b,p),Ul(p),k&4&&v_(p);break;case 21:break;default:va(b,p),Ul(p)}}function Ul(p){var b=p.flags;if(b&2){try{e:{for(var v=p.return;v!==null;){if(U_(v)){var k=v;break e}v=v.return}throw Error(n(160))}switch(k.tag){case 5:var N=k.stateNode;k.flags&32&&(kr(N,""),k.flags&=-33);var D=y_(p);Fv(p,D,N);break;case 3:case 4:var X=k.stateNode.containerInfo,ee=y_(p);Bv(p,ee,X);break;default:throw Error(n(161))}}catch(ne){ar(p,p.return,ne)}p.flags&=-3}b&4096&&(p.flags&=-4097)}function qie(p,b,v){Xe=p,E_(p)}function E_(p,b,v){for(var k=(p.mode&1)!==0;Xe!==null;){var N=Xe,D=N.child;if(N.tag===22&&k){var X=N.memoizedState!==null||X8;if(!X){var ee=N.alternate,ne=ee!==null&&ee.memoizedState!==null||Ri;ee=X8;var ge=Ri;if(X8=X,(Ri=ne)&&!ge)for(Xe=N;Xe!==null;)X=Xe,ne=X.child,X.tag===22&&X.memoizedState!==null?C_(N):ne!==null?(ne.return=X,Xe=ne):C_(N);for(;D!==null;)Xe=D,E_(D),D=D.sibling;Xe=N,X8=ee,Ri=ge}S_(p)}else N.subtreeFlags&8772&&D!==null?(D.return=N,Xe=D):S_(p)}}function S_(p){for(;Xe!==null;){var b=Xe;if(b.flags&8772){var v=b.alternate;try{if(b.flags&8772)switch(b.tag){case 0:case 11:case 15:Ri||K8(5,b);break;case 1:var k=b.stateNode;if(b.flags&4&&!Ri)if(v===null)k.componentDidMount();else{var N=b.elementType===b.type?v.memoizedProps:ya(b.type,v.memoizedProps);k.componentDidUpdate(N,v.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var D=b.updateQueue;D!==null&&kR(b,D,k);break;case 3:var X=b.updateQueue;if(X!==null){if(v=null,b.child!==null)switch(b.child.tag){case 5:v=b.child.stateNode;break;case 1:v=b.child.stateNode}kR(b,X,v)}break;case 5:var ee=b.stateNode;if(v===null&&b.flags&4){v=ee;var ne=b.memoizedProps;switch(b.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&v.focus();break;case"img":ne.src&&(v.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(b.memoizedState===null){var ge=b.alternate;if(ge!==null){var Ce=ge.memoizedState;if(Ce!==null){var Ne=Ce.dehydrated;Ne!==null&&W6(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ri||b.flags&512&&jv(b)}catch(ke){ar(b,b.return,ke)}}if(b===p){Xe=null;break}if(v=b.sibling,v!==null){v.return=b.return,Xe=v;break}Xe=b.return}}function k_(p){for(;Xe!==null;){var b=Xe;if(b===p){Xe=null;break}var v=b.sibling;if(v!==null){v.return=b.return,Xe=v;break}Xe=b.return}}function C_(p){for(;Xe!==null;){var b=Xe;try{switch(b.tag){case 0:case 11:case 15:var v=b.return;try{K8(4,b)}catch(ne){ar(b,v,ne)}break;case 1:var k=b.stateNode;if(typeof k.componentDidMount=="function"){var N=b.return;try{k.componentDidMount()}catch(ne){ar(b,N,ne)}}var D=b.return;try{jv(b)}catch(ne){ar(b,D,ne)}break;case 5:var X=b.return;try{jv(b)}catch(ne){ar(b,X,ne)}}}catch(ne){ar(b,b.return,ne)}if(b===p){Xe=null;break}var ee=b.sibling;if(ee!==null){ee.return=b.return,Xe=ee;break}Xe=b.return}}var Qie=Math.ceil,Y8=S.ReactCurrentDispatcher,$v=S.ReactCurrentOwner,No=S.ReactCurrentBatchConfig,Gt=0,Zr=null,Cr=null,gi=0,no=0,L1=Jf(0),jr=0,pg=null,eu=0,Z8=0,zv=0,mg=null,Es=null,Hv=0,O1=1/0,Ac=null,q8=!1,Vv=null,sd=null,Q8=!1,od=null,J8=0,gg=0,Wv=null,eU=-1,tU=0;function es(){return Gt&6?Xn():eU!==-1?eU:eU=Xn()}function ad(p){return p.mode&1?Gt&2&&gi!==0?gi&-gi:Die.transition!==null?(tU===0&&(tU=g1()),tU):(p=fn,p!==0||(p=window.event,p=p===void 0?16:AN(p.type)),p):1}function wa(p,b,v,k){if(50<gg)throw gg=0,Wv=null,Error(n(185));G0(p,v,k),(!(Gt&2)||p!==Zr)&&(p===Zr&&(!(Gt&2)&&(Z8|=v),jr===4&&ld(p,gi)),Ss(p,k),v===1&&Gt===0&&!(b.mode&1)&&(O1=Xn()+500,T8&&td()))}function Ss(p,b){var v=p.callbackNode;Cx(p,b);var k=m1(p,p===Zr?gi:0);if(k===0)v!==null&&s8(v),p.callbackNode=null,p.callbackPriority=0;else if(b=k&-k,p.callbackPriority!==b){if(v!=null&&s8(v),b===1)p.tag===0?Pie(A_.bind(null,p)):hR(A_.bind(null,p)),Iie(function(){!(Gt&6)&&td()}),v=null;else{switch(xN(k)){case 1:v=j6;break;case 4:v=a8;break;case 16:v=u1;break;case 536870912:v=l8;break;default:v=u1}v=L_(v,M_.bind(null,p))}p.callbackPriority=b,p.callbackNode=v}}function M_(p,b){if(eU=-1,tU=0,Gt&6)throw Error(n(327));var v=p.callbackNode;if(j1()&&p.callbackNode!==v)return null;var k=m1(p,p===Zr?gi:0);if(k===0)return null;if(k&30||k&p.expiredLanes||b)b=nU(p,k);else{b=k;var N=Gt;Gt|=2;var D=I_();(Zr!==p||gi!==b)&&(Ac=null,O1=Xn()+500,nu(p,b));do try{tse();break}catch(ee){T_(p,ee)}while(!0);cv(),Y8.current=D,Gt=N,Cr!==null?b=0:(Zr=null,gi=0,b=jr)}if(b!==0){if(b===2&&(N=B6(p),N!==0&&(k=N,b=Gv(p,N))),b===1)throw v=pg,nu(p,0),ld(p,k),Ss(p,Xn()),v;if(b===6)ld(p,k);else{if(N=p.current.alternate,!(k&30)&&!Jie(N)&&(b=nU(p,k),b===2&&(D=B6(p),D!==0&&(k=D,b=Gv(p,D))),b===1))throw v=pg,nu(p,0),ld(p,k),Ss(p,Xn()),v;switch(p.finishedWork=N,p.finishedLanes=k,b){case 0:case 1:throw Error(n(345));case 2:ru(p,Es,Ac);break;case 3:if(ld(p,k),(k&130023424)===k&&(b=Hv+500-Xn(),10<b)){if(m1(p,0)!==0)break;if(N=p.suspendedLanes,(N&k)!==k){es(),p.pingedLanes|=p.suspendedLanes&N;break}p.timeoutHandle=Qx(ru.bind(null,p,Es,Ac),b);break}ru(p,Es,Ac);break;case 4:if(ld(p,k),(k&4194240)===k)break;for(b=p.eventTimes,N=-1;0<k;){var X=31-Qs(k);D=1<<X,X=b[X],X>N&&(N=X),k&=~D}if(k=N,k=Xn()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*Qie(k/1960))-k,10<k){p.timeoutHandle=Qx(ru.bind(null,p,Es,Ac),k);break}ru(p,Es,Ac);break;case 5:ru(p,Es,Ac);break;default:throw Error(n(329))}}}return Ss(p,Xn()),p.callbackNode===v?M_.bind(null,p):null}function Gv(p,b){var v=mg;return p.current.memoizedState.isDehydrated&&(nu(p,b).flags|=256),p=nU(p,b),p!==2&&(b=Es,Es=v,b!==null&&Xv(b)),p}function Xv(p){Es===null?Es=p:Es.push.apply(Es,p)}function Jie(p){for(var b=p;;){if(b.flags&16384){var v=b.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var k=0;k<v.length;k++){var N=v[k],D=N.getSnapshot;N=N.value;try{if(!ba(D(),N))return!1}catch{return!1}}}if(v=b.child,b.subtreeFlags&16384&&v!==null)v.return=b,b=v;else{if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function ld(p,b){for(b&=~zv,b&=~Z8,p.suspendedLanes|=b,p.pingedLanes&=~b,p=p.expirationTimes;0<b;){var v=31-Qs(b),k=1<<v;p[v]=-1,b&=~k}}function A_(p){if(Gt&6)throw Error(n(327));j1();var b=m1(p,0);if(!(b&1))return Ss(p,Xn()),null;var v=nU(p,b);if(p.tag!==0&&v===2){var k=B6(p);k!==0&&(b=k,v=Gv(p,k))}if(v===1)throw v=pg,nu(p,0),ld(p,b),Ss(p,Xn()),v;if(v===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=b,ru(p,Es,Ac),Ss(p,Xn()),null}function Kv(p,b){var v=Gt;Gt|=1;try{return p(b)}finally{Gt=v,Gt===0&&(O1=Xn()+500,T8&&td())}}function tu(p){od!==null&&od.tag===0&&!(Gt&6)&&j1();var b=Gt;Gt|=1;var v=No.transition,k=fn;try{if(No.transition=null,fn=1,p)return p()}finally{fn=k,No.transition=v,Gt=b,!(Gt&6)&&td()}}function Yv(){no=L1.current,Nn(L1)}function nu(p,b){p.finishedWork=null,p.finishedLanes=0;var v=p.timeoutHandle;if(v!==-1&&(p.timeoutHandle=-1,Tie(v)),Cr!==null)for(v=Cr.return;v!==null;){var k=v;switch(iv(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&M8();break;case 3:_1(),Nn(xs),Nn(Ti),bv();break;case 5:mv(k);break;case 4:_1();break;case 13:Nn(Kn);break;case 19:Nn(Kn);break;case 10:fv(k.type._context);break;case 22:case 23:Yv()}v=v.return}if(Zr=p,Cr=p=cd(p.current,null),gi=no=b,jr=0,pg=null,zv=Z8=eu=0,Es=mg=null,q0!==null){for(b=0;b<q0.length;b++)if(v=q0[b],k=v.interleaved,k!==null){v.interleaved=null;var N=k.next,D=v.pending;if(D!==null){var X=D.next;D.next=N,k.next=X}v.pending=k}q0=null}return p}function T_(p,b){do{var v=Cr;try{if(cv(),B8.current=H8,F8){for(var k=Yn.memoizedState;k!==null;){var N=k.queue;N!==null&&(N.pending=null),k=k.next}F8=!1}if(J0=0,Yr=Or=Yn=null,lg=!1,cg=0,$v.current=null,v===null||v.return===null){jr=1,pg=b,Cr=null;break}e:{var D=p,X=v.return,ee=v,ne=b;if(b=gi,ee.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ge=ne,Ce=ee,Ne=Ce.tag;if(!(Ce.mode&1)&&(Ne===0||Ne===11||Ne===15)){var ke=Ce.alternate;ke?(Ce.updateQueue=ke.updateQueue,Ce.memoizedState=ke.memoizedState,Ce.lanes=ke.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var He=e_(X);if(He!==null){He.flags&=-257,t_(He,X,ee,D,b),He.mode&1&&JR(D,ge,b),b=He,ne=ge;var qe=b.updateQueue;if(qe===null){var Je=new Set;Je.add(ne),b.updateQueue=Je}else qe.add(ne);break e}else{if(!(b&1)){JR(D,ge,b),Zv();break e}ne=Error(n(426))}}else if(Ln&&ee.mode&1){var gr=e_(X);if(gr!==null){!(gr.flags&65536)&&(gr.flags|=256),t_(gr,X,ee,D,b),av(P1(ne,ee));break e}}D=ne=P1(ne,ee),jr!==4&&(jr=2),mg===null?mg=[D]:mg.push(D),D=X;do{switch(D.tag){case 3:D.flags|=65536,b&=-b,D.lanes|=b;var ae=qR(D,ne,b);SR(D,ae);break e;case 1:ee=ne;var re=D.type,fe=D.stateNode;if(!(D.flags&128)&&(typeof re.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(sd===null||!sd.has(fe)))){D.flags|=65536,b&=-b,D.lanes|=b;var Pe=QR(D,ee,b);SR(D,Pe);break e}}D=D.return}while(D!==null)}R_(v)}catch(nt){b=nt,Cr===v&&v!==null&&(Cr=v=v.return);continue}break}while(!0)}function I_(){var p=Y8.current;return Y8.current=H8,p===null?H8:p}function Zv(){(jr===0||jr===3||jr===2)&&(jr=4),Zr===null||!(eu&268435455)&&!(Z8&268435455)||ld(Zr,gi)}function nU(p,b){var v=Gt;Gt|=2;var k=I_();(Zr!==p||gi!==b)&&(Ac=null,nu(p,b));do try{ese();break}catch(N){T_(p,N)}while(!0);if(cv(),Gt=v,Y8.current=k,Cr!==null)throw Error(n(261));return Zr=null,gi=0,jr}function ese(){for(;Cr!==null;)N_(Cr)}function tse(){for(;Cr!==null&&!yx();)N_(Cr)}function N_(p){var b=D_(p.alternate,p,no);p.memoizedProps=p.pendingProps,b===null?R_(p):Cr=b,$v.current=null}function R_(p){var b=p;do{var v=b.alternate;if(p=b.return,b.flags&32768){if(v=Kie(v,b),v!==null){v.flags&=32767,Cr=v;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{jr=6,Cr=null;return}}else if(v=Xie(v,b,no),v!==null){Cr=v;return}if(b=b.sibling,b!==null){Cr=b;return}Cr=b=p}while(b!==null);jr===0&&(jr=5)}function ru(p,b,v){var k=fn,N=No.transition;try{No.transition=null,fn=1,nse(p,b,v,k)}finally{No.transition=N,fn=k}return null}function nse(p,b,v,k){do j1();while(od!==null);if(Gt&6)throw Error(n(327));v=p.finishedWork;var N=p.finishedLanes;if(v===null)return null;if(p.finishedWork=null,p.finishedLanes=0,v===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var D=v.lanes|v.childLanes;if(f8(p,D),p===Zr&&(Cr=Zr=null,gi=0),!(v.subtreeFlags&2064)&&!(v.flags&2064)||Q8||(Q8=!0,L_(u1,function(){return j1(),null})),D=(v.flags&15990)!==0,v.subtreeFlags&15990||D){D=No.transition,No.transition=null;var X=fn;fn=1;var ee=Gt;Gt|=4,$v.current=null,Zie(p,v),w_(v,p),wie(Zx),h8=!!Yx,Zx=Yx=null,p.current=v,qie(v),o8(),Gt=ee,fn=X,No.transition=D}else p.current=v;if(Q8&&(Q8=!1,od=p,J8=N),D=p.pendingLanes,D===0&&(sd=null),wx(v.stateNode),Ss(p,Xn()),b!==null)for(k=p.onRecoverableError,v=0;v<b.length;v++)N=b[v],k(N.value,{componentStack:N.stack,digest:N.digest});if(q8)throw q8=!1,p=Vv,Vv=null,p;return J8&1&&p.tag!==0&&j1(),D=p.pendingLanes,D&1?p===Wv?gg++:(gg=0,Wv=p):gg=0,td(),null}function j1(){if(od!==null){var p=xN(J8),b=No.transition,v=fn;try{if(No.transition=null,fn=16>p?16:p,od===null)var k=!1;else{if(p=od,od=null,J8=0,Gt&6)throw Error(n(331));var N=Gt;for(Gt|=4,Xe=p.current;Xe!==null;){var D=Xe,X=D.child;if(Xe.flags&16){var ee=D.deletions;if(ee!==null){for(var ne=0;ne<ee.length;ne++){var ge=ee[ne];for(Xe=ge;Xe!==null;){var Ce=Xe;switch(Ce.tag){case 0:case 11:case 15:hg(8,Ce,D)}var Ne=Ce.child;if(Ne!==null)Ne.return=Ce,Xe=Ne;else for(;Xe!==null;){Ce=Xe;var ke=Ce.sibling,He=Ce.return;if(b_(Ce),Ce===ge){Xe=null;break}if(ke!==null){ke.return=He,Xe=ke;break}Xe=He}}}var qe=D.alternate;if(qe!==null){var Je=qe.child;if(Je!==null){qe.child=null;do{var gr=Je.sibling;Je.sibling=null,Je=gr}while(Je!==null)}}Xe=D}}if(D.subtreeFlags&2064&&X!==null)X.return=D,Xe=X;else e:for(;Xe!==null;){if(D=Xe,D.flags&2048)switch(D.tag){case 0:case 11:case 15:hg(9,D,D.return)}var ae=D.sibling;if(ae!==null){ae.return=D.return,Xe=ae;break e}Xe=D.return}}var re=p.current;for(Xe=re;Xe!==null;){X=Xe;var fe=X.child;if(X.subtreeFlags&2064&&fe!==null)fe.return=X,Xe=fe;else e:for(X=re;Xe!==null;){if(ee=Xe,ee.flags&2048)try{switch(ee.tag){case 0:case 11:case 15:K8(9,ee)}}catch(nt){ar(ee,ee.return,nt)}if(ee===X){Xe=null;break e}var Pe=ee.sibling;if(Pe!==null){Pe.return=ee.return,Xe=Pe;break e}Xe=ee.return}}if(Gt=N,td(),Co&&typeof Co.onPostCommitFiberRoot=="function")try{Co.onPostCommitFiberRoot(W0,p)}catch{}k=!0}return k}finally{fn=v,No.transition=b}}return!1}function __(p,b,v){b=P1(v,b),b=qR(p,b,1),p=rd(p,b,1),b=es(),p!==null&&(G0(p,1,b),Ss(p,b))}function ar(p,b,v){if(p.tag===3)__(p,p,v);else for(;b!==null;){if(b.tag===3){__(b,p,v);break}else if(b.tag===1){var k=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(sd===null||!sd.has(k))){p=P1(v,p),p=QR(b,p,1),b=rd(b,p,1),p=es(),b!==null&&(G0(b,1,p),Ss(b,p));break}}b=b.return}}function rse(p,b,v){var k=p.pingCache;k!==null&&k.delete(b),b=es(),p.pingedLanes|=p.suspendedLanes&v,Zr===p&&(gi&v)===v&&(jr===4||jr===3&&(gi&130023424)===gi&&500>Xn()-Hv?nu(p,0):zv|=v),Ss(p,b)}function P_(p,b){b===0&&(p.mode&1?(b=p1,p1<<=1,!(p1&130023424)&&(p1=4194304)):b=1);var v=es();p=kc(p,b),p!==null&&(G0(p,b,v),Ss(p,v))}function ise(p){var b=p.memoizedState,v=0;b!==null&&(v=b.retryLane),P_(p,v)}function sse(p,b){var v=0;switch(p.tag){case 13:var k=p.stateNode,N=p.memoizedState;N!==null&&(v=N.retryLane);break;case 19:k=p.stateNode;break;default:throw Error(n(314))}k!==null&&k.delete(b),P_(p,v)}var D_;D_=function(p,b,v){if(p!==null)if(p.memoizedProps!==b.pendingProps||xs.current)ws=!0;else{if(!(p.lanes&v)&&!(b.flags&128))return ws=!1,Gie(p,b,v);ws=!!(p.flags&131072)}else ws=!1,Ln&&b.flags&1048576&&pR(b,N8,b.index);switch(b.lanes=0,b.tag){case 2:var k=b.type;G8(p,b),p=b.pendingProps;var N=C1(b,Ti.current);R1(b,v),N=xv(null,b,k,p,N,v);var D=vv();return b.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,vs(k)?(D=!0,A8(b)):D=!1,b.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,hv(b),N.updater=V8,b.stateNode=N,N._reactInternals=b,Mv(b,k,p,v),b=Nv(null,b,k,!0,D,v)):(b.tag=0,Ln&&D&&rv(b),Ji(null,b,N,v),b=b.child),b;case 16:k=b.elementType;e:{switch(G8(p,b),p=b.pendingProps,N=k._init,k=N(k._payload),b.type=k,N=b.tag=ase(k),p=ya(k,p),N){case 0:b=Iv(null,b,k,p,v);break e;case 1:b=a_(null,b,k,p,v);break e;case 11:b=n_(null,b,k,p,v);break e;case 14:b=r_(null,b,k,ya(k.type,p),v);break e}throw Error(n(306,k,""))}return b;case 0:return k=b.type,N=b.pendingProps,N=b.elementType===k?N:ya(k,N),Iv(p,b,k,N,v);case 1:return k=b.type,N=b.pendingProps,N=b.elementType===k?N:ya(k,N),a_(p,b,k,N,v);case 3:e:{if(l_(b),p===null)throw Error(n(387));k=b.pendingProps,D=b.memoizedState,N=D.element,ER(p,b),O8(b,k,null,v);var X=b.memoizedState;if(k=X.element,D.isDehydrated)if(D={element:k,isDehydrated:!1,cache:X.cache,pendingSuspenseBoundaries:X.pendingSuspenseBoundaries,transitions:X.transitions},b.updateQueue.baseState=D,b.memoizedState=D,b.flags&256){N=P1(Error(n(423)),b),b=c_(p,b,k,v,N);break e}else if(k!==N){N=P1(Error(n(424)),b),b=c_(p,b,k,v,N);break e}else for(to=Qf(b.stateNode.containerInfo.firstChild),eo=b,Ln=!0,Ua=null,v=vR(b,null,k,v),b.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(T1(),k===N){b=Mc(p,b,v);break e}Ji(p,b,k,v)}b=b.child}return b;case 5:return CR(b),p===null&&ov(b),k=b.type,N=b.pendingProps,D=p!==null?p.memoizedProps:null,X=N.children,qx(k,N)?X=null:D!==null&&qx(k,D)&&(b.flags|=32),o_(p,b),Ji(p,b,X,v),b.child;case 6:return p===null&&ov(b),null;case 13:return f_(p,b,v);case 4:return pv(b,b.stateNode.containerInfo),k=b.pendingProps,p===null?b.child=I1(b,null,k,v):Ji(p,b,k,v),b.child;case 11:return k=b.type,N=b.pendingProps,N=b.elementType===k?N:ya(k,N),n_(p,b,k,N,v);case 7:return Ji(p,b,b.pendingProps,v),b.child;case 8:return Ji(p,b,b.pendingProps.children,v),b.child;case 12:return Ji(p,b,b.pendingProps.children,v),b.child;case 10:e:{if(k=b.type._context,N=b.pendingProps,D=b.memoizedProps,X=N.value,Sn(P8,k._currentValue),k._currentValue=X,D!==null)if(ba(D.value,X)){if(D.children===N.children&&!xs.current){b=Mc(p,b,v);break e}}else for(D=b.child,D!==null&&(D.return=b);D!==null;){var ee=D.dependencies;if(ee!==null){X=D.child;for(var ne=ee.firstContext;ne!==null;){if(ne.context===k){if(D.tag===1){ne=Cc(-1,v&-v),ne.tag=2;var ge=D.updateQueue;if(ge!==null){ge=ge.shared;var Ce=ge.pending;Ce===null?ne.next=ne:(ne.next=Ce.next,Ce.next=ne),ge.pending=ne}}D.lanes|=v,ne=D.alternate,ne!==null&&(ne.lanes|=v),dv(D.return,v,b),ee.lanes|=v;break}ne=ne.next}}else if(D.tag===10)X=D.type===b.type?null:D.child;else if(D.tag===18){if(X=D.return,X===null)throw Error(n(341));X.lanes|=v,ee=X.alternate,ee!==null&&(ee.lanes|=v),dv(X,v,b),X=D.sibling}else X=D.child;if(X!==null)X.return=D;else for(X=D;X!==null;){if(X===b){X=null;break}if(D=X.sibling,D!==null){D.return=X.return,X=D;break}X=X.return}D=X}Ji(p,b,N.children,v),b=b.child}return b;case 9:return N=b.type,k=b.pendingProps.children,R1(b,v),N=To(N),k=k(N),b.flags|=1,Ji(p,b,k,v),b.child;case 14:return k=b.type,N=ya(k,b.pendingProps),N=ya(k.type,N),r_(p,b,k,N,v);case 15:return i_(p,b,b.type,b.pendingProps,v);case 17:return k=b.type,N=b.pendingProps,N=b.elementType===k?N:ya(k,N),G8(p,b),b.tag=1,vs(k)?(p=!0,A8(b)):p=!1,R1(b,v),YR(b,k,N),Mv(b,k,N,v),Nv(null,b,k,!0,p,v);case 19:return u_(p,b,v);case 22:return s_(p,b,v)}throw Error(n(156,b.tag))};function L_(p,b){return i8(p,b)}function ose(p,b,v,k){this.tag=p,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ro(p,b,v,k){return new ose(p,b,v,k)}function qv(p){return p=p.prototype,!(!p||!p.isReactComponent)}function ase(p){if(typeof p=="function")return qv(p)?1:0;if(p!=null){if(p=p.$$typeof,p===O)return 11;if(p===F)return 14}return 2}function cd(p,b){var v=p.alternate;return v===null?(v=Ro(p.tag,b,p.key,p.mode),v.elementType=p.elementType,v.type=p.type,v.stateNode=p.stateNode,v.alternate=p,p.alternate=v):(v.pendingProps=b,v.type=p.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=p.flags&14680064,v.childLanes=p.childLanes,v.lanes=p.lanes,v.child=p.child,v.memoizedProps=p.memoizedProps,v.memoizedState=p.memoizedState,v.updateQueue=p.updateQueue,b=p.dependencies,v.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},v.sibling=p.sibling,v.index=p.index,v.ref=p.ref,v}function rU(p,b,v,k,N,D){var X=2;if(k=p,typeof p=="function")qv(p)&&(X=1);else if(typeof p=="string")X=5;else e:switch(p){case C:return iu(v.children,N,D,b);case I:X=8,N|=8;break;case R:return p=Ro(12,v,b,N|2),p.elementType=R,p.lanes=D,p;case $:return p=Ro(13,v,b,N),p.elementType=$,p.lanes=D,p;case B:return p=Ro(19,v,b,N),p.elementType=B,p.lanes=D,p;case H:return iU(v,N,D,b);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case L:X=10;break e;case _:X=9;break e;case O:X=11;break e;case F:X=14;break e;case z:X=16,k=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return b=Ro(X,v,b,N),b.elementType=p,b.type=k,b.lanes=D,b}function iu(p,b,v,k){return p=Ro(7,p,k,b),p.lanes=v,p}function iU(p,b,v,k){return p=Ro(22,p,k,b),p.elementType=H,p.lanes=v,p.stateNode={isHidden:!1},p}function Qv(p,b,v){return p=Ro(6,p,null,b),p.lanes=v,p}function Jv(p,b,v){return b=Ro(4,p.children!==null?p.children:[],p.key,b),b.lanes=v,b.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},b}function lse(p,b,v,k,N){this.tag=b,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=F6(0),this.expirationTimes=F6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=F6(0),this.identifierPrefix=k,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function ew(p,b,v,k,N,D,X,ee,ne){return p=new lse(p,b,v,ee,ne),b===1?(b=1,D===!0&&(b|=8)):b=0,D=Ro(3,null,null,b),p.current=D,D.stateNode=p,D.memoizedState={element:k,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},hv(D),p}function cse(p,b,v){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:k==null?null:""+k,children:p,containerInfo:b,implementation:v}}function O_(p){if(!p)return ed;p=p._reactInternals;e:{if(ys(p)!==p||p.tag!==1)throw Error(n(170));var b=p;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if(vs(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(n(171))}if(p.tag===1){var v=p.type;if(vs(v))return dR(p,v,b)}return b}function j_(p,b,v,k,N,D,X,ee,ne){return p=ew(v,k,!0,p,N,D,X,ee,ne),p.context=O_(null),v=p.current,k=es(),N=ad(v),D=Cc(k,N),D.callback=b??null,rd(v,D,N),p.current.lanes=N,G0(p,N,k),Ss(p,k),p}function sU(p,b,v,k){var N=b.current,D=es(),X=ad(N);return v=O_(v),b.context===null?b.context=v:b.pendingContext=v,b=Cc(D,X),b.payload={element:p},k=k===void 0?null:k,k!==null&&(b.callback=k),p=rd(N,b,X),p!==null&&(wa(p,N,X,D),L8(p,N,X)),X}function oU(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function B_(p,b){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var v=p.retryLane;p.retryLane=v!==0&&v<b?v:b}}function tw(p,b){B_(p,b),(p=p.alternate)&&B_(p,b)}var F_=typeof reportError=="function"?reportError:function(p){console.error(p)};function nw(p){this._internalRoot=p}aU.prototype.render=nw.prototype.render=function(p){var b=this._internalRoot;if(b===null)throw Error(n(409));sU(p,b,null,null)},aU.prototype.unmount=nw.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var b=p.containerInfo;tu(function(){sU(null,p,null,null)}),b[vc]=null}};function aU(p){this._internalRoot=p}aU.prototype.unstable_scheduleHydration=function(p){if(p){var b=EN();p={blockedOn:null,target:p,priority:b};for(var v=0;v<Yf.length&&b!==0&&b<Yf[v].priority;v++);Yf.splice(v,0,p),v===0&&CN(p)}};function rw(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function lU(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function $_(){}function fse(p,b,v,k,N){if(N){if(typeof k=="function"){var D=k;k=function(){var ge=oU(X);D.call(ge)}}var X=j_(b,k,p,0,null,!1,!1,"",$_);return p._reactRootContainer=X,p[vc]=X.current,eg(p.nodeType===8?p.parentNode:p),tu(),X}for(;N=p.lastChild;)p.removeChild(N);if(typeof k=="function"){var ee=k;k=function(){var ge=oU(ne);ee.call(ge)}}var ne=ew(p,0,!1,null,null,!1,!1,"",$_);return p._reactRootContainer=ne,p[vc]=ne.current,eg(p.nodeType===8?p.parentNode:p),tu(function(){sU(b,ne,v,k)}),ne}function cU(p,b,v,k,N){var D=v._reactRootContainer;if(D){var X=D;if(typeof N=="function"){var ee=N;N=function(){var ne=oU(X);ee.call(ne)}}sU(b,X,p,N)}else X=fse(v,b,p,N,k);return oU(X)}vN=function(p){switch(p.tag){case 3:var b=p.stateNode;if(b.current.memoizedState.isDehydrated){var v=pl(b.pendingLanes);v!==0&&(Mx(b,v|1),Ss(b,Xn()),!(Gt&6)&&(O1=Xn()+500,td()))}break;case 13:tu(function(){var k=kc(p,1);if(k!==null){var N=es();wa(k,p,1,N)}}),tw(p,1)}},Ax=function(p){if(p.tag===13){var b=kc(p,134217728);if(b!==null){var v=es();wa(b,p,134217728,v)}tw(p,134217728)}},wN=function(p){if(p.tag===13){var b=ad(p),v=kc(p,b);if(v!==null){var k=es();wa(v,p,b,k)}tw(p,b)}},EN=function(){return fn},SN=function(p,b){var v=fn;try{return fn=p,b()}finally{fn=v}},ma=function(p,b,v){switch(b){case"input":if(jt(p,v),b=v.name,v.type==="radio"&&b!=null){for(v=p;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<v.length;b++){var k=v[b];if(k!==p&&k.form===p.form){var N=C8(k);if(!N)throw Error(n(90));Se(k),jt(k,N)}}}break;case"textarea":Ks(p,v);break;case"select":b=v.value,b!=null&&Mi(p,!!v.multiple,b,!1)}},or=Kv,kt=tu;var dse={usingClientEntryPoint:!1,Events:[rg,S1,C8,Be,Wt,Kv]},bg={findFiberByHostInstance:X0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},use={bundleType:bg.bundleType,version:bg.version,rendererPackageName:bg.rendererPackageName,rendererConfig:bg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=n8(p),p===null?null:p.stateNode},findFiberByHostInstance:bg.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fU=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fU.isDisabled&&fU.supportsFiber)try{W0=fU.inject(use),Co=fU}catch{}}return ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dse,ks.createPortal=function(p,b){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rw(b))throw Error(n(200));return cse(p,b,null,v)},ks.createRoot=function(p,b){if(!rw(p))throw Error(n(299));var v=!1,k="",N=F_;return b!=null&&(b.unstable_strictMode===!0&&(v=!0),b.identifierPrefix!==void 0&&(k=b.identifierPrefix),b.onRecoverableError!==void 0&&(N=b.onRecoverableError)),b=ew(p,1,!1,null,null,v,!1,k,N),p[vc]=b.current,eg(p.nodeType===8?p.parentNode:p),new nw(b)},ks.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var b=p._reactInternals;if(b===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=n8(b),p=p===null?null:p.stateNode,p},ks.flushSync=function(p){return tu(p)},ks.hydrate=function(p,b,v){if(!lU(b))throw Error(n(200));return cU(null,p,b,!0,v)},ks.hydrateRoot=function(p,b,v){if(!rw(p))throw Error(n(405));var k=v!=null&&v.hydratedSources||null,N=!1,D="",X=F_;if(v!=null&&(v.unstable_strictMode===!0&&(N=!0),v.identifierPrefix!==void 0&&(D=v.identifierPrefix),v.onRecoverableError!==void 0&&(X=v.onRecoverableError)),b=j_(b,null,p,1,v??null,N,!1,D,X),p[vc]=b.current,eg(p),k)for(p=0;p<k.length;p++)v=k[p],N=v._getVersion,N=N(v._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[v,N]:b.mutableSourceEagerHydrationData.push(v,N);return new aU(b)},ks.render=function(p,b,v){if(!lU(b))throw Error(n(200));return cU(null,p,b,!1,v)},ks.unmountComponentAtNode=function(p){if(!lU(p))throw Error(n(40));return p._reactRootContainer?(tu(function(){cU(null,null,p,!1,function(){p._reactRootContainer=null,p[vc]=null})}),!0):!1},ks.unstable_batchedUpdates=Kv,ks.unstable_renderSubtreeIntoContainer=function(p,b,v,k){if(!lU(v))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return cU(p,b,v,!1,k)},ks.version="18.3.1-next-f1338f8080-20240426",ks}var Z_;function Yz(){if(Z_)return aw.exports;Z_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),aw.exports=wse(),aw.exports}var q_;function Ese(){if(q_)return dU;q_=1;var e=Yz();return dU.createRoot=e.createRoot,dU.hydrateRoot=e.hydrateRoot,dU}var Sse=Ese();const kse="6.13.1";function Cse(e,t,n){const r=t.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const i=new Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=e,i}async function ss(e){const t=Object.keys(e);return(await Promise.all(t.map(r=>Promise.resolve(e[r])))).reduce((r,i,s)=>(r[t[s]]=i,r),{})}function ut(e,t,n){for(let r in t){let i=t[r];const s=n?n[r]:null;s&&Cse(i,s,r),Object.defineProperty(e,r,{enumerable:!0,value:i,writable:!1})}}function pp(e){if(e==null)return"null";if(Array.isArray(e))return"[ "+e.map(pp).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[e[r]&15];return n}if(typeof e=="object"&&typeof e.toJSON=="function")return pp(e.toJSON());switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"number":return e.toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map(n=>`${pp(n)}: ${pp(e[n])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function zi(e,t){return e&&e.code===t}function DM(e){return zi(e,"CALL_EXCEPTION")}function hr(e,t,n){let r=e;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${pp(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+pp(a))}}s.push(`code=${t}`),s.push(`version=${kse}`),s.length&&(e+=" ("+s.join(", ")+")")}let i;switch(t){case"INVALID_ARGUMENT":i=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(e);break;default:i=new Error(e)}return ut(i,{code:t}),n&&Object.assign(i,n),i.shortMessage==null&&ut(i,{shortMessage:r}),i}function Ee(e,t,n,r){if(!e)throw hr(t,n,r)}function ie(e,t,n,r){Ee(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function Zz(e,t,n){n==null&&(n=""),n&&(n=": "+n),Ee(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Ee(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");e.push(t)}catch{}return e},[]);function bb(e,t,n){if(n==null&&(n=""),e!==t){let r=n,i="new";n&&(r+=".",i+=" "+n),Ee(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function qz(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if(typeof e=="string"&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((e.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(e.substring(i,i+2),16),i+=2;return r}ie(!1,"invalid BytesLike value",t||"value",e)}function Ht(e,t){return qz(e,t,!1)}function as(e,t){return qz(e,t,!0)}function Mn(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&e.length!==2+2*t||t===!0&&e.length%2!==0)}function LM(e){return Mn(e,!0)||e instanceof Uint8Array}const Q_="0123456789abcdef";function Ze(e){const t=Ht(e);let n="0x";for(let r=0;r<t.length;r++){const i=t[r];n+=Q_[(i&240)>>4]+Q_[i&15]}return n}function wr(e){return"0x"+e.map(t=>Ze(t).substring(2)).join("")}function Pp(e){return Mn(e,!0)?(e.length-2)/2:Ht(e).length}function pr(e,t,n){const r=Ht(e);return n!=null&&n>r.length&&Ee(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Ze(r.slice(t??0,n??r.length))}function Qz(e,t,n){const r=Ht(e);Ee(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const i=new Uint8Array(t);return i.fill(0),n?i.set(r,t-r.length):i.set(r,0),Ze(i)}function Mh(e,t){return Qz(e,t,!0)}function Mse(e,t){return Qz(e,t,!1)}const R9=BigInt(0),Ba=BigInt(1),mp=9007199254740991;function U3(e,t){const n=_9(e,"value"),r=BigInt(Nt(t,"width"));if(Ee(n>>r===R9,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-Ba){const i=(Ba<<r)-Ba;return-((~n&i)+Ba)}return n}function Jz(e,t){let n=et(e,"value");const r=BigInt(Nt(t,"width")),i=Ba<<r-Ba;if(n<R9){n=-n,Ee(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});const s=(Ba<<r)-Ba;return(~n&s)+Ba}else Ee(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return n}function Tu(e,t){const n=_9(e,"value"),r=BigInt(Nt(t,"bits"));return n&(Ba<<r)-Ba}function et(e,t){switch(typeof e){case"bigint":return e;case"number":return ie(Number.isInteger(e),"underflow",t||"value",e),ie(e>=-mp&&e<=mp,"overflow",t||"value",e),BigInt(e);case"string":try{if(e==="")throw new Error("empty string");return e[0]==="-"&&e[1]!=="-"?-BigInt(e.substring(1)):BigInt(e)}catch(n){ie(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}ie(!1,"invalid BigNumberish value",t||"value",e)}function _9(e,t){const n=et(e,t);return Ee(n>=R9,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const J_="0123456789abcdef";function P9(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=J_[n>>4],t+=J_[n&15];return BigInt(t)}return et(e)}function Nt(e,t){switch(typeof e){case"bigint":return ie(e>=-mp&&e<=mp,"overflow",t||"value",e),Number(e);case"number":return ie(Number.isInteger(e),"underflow",t||"value",e),ie(e>=-mp&&e<=mp,"overflow",t||"value",e),e;case"string":try{if(e==="")throw new Error("empty string");return Nt(BigInt(e),t)}catch(n){ie(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}ie(!1,"invalid numeric value",t||"value",e)}function Ase(e){return Nt(P9(e))}function E0(e,t){let r=_9(e,"value").toString(16);if(t==null)r.length%2&&(r="0"+r);else{const i=Nt(t,"width");for(Ee(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<i*2;)r="0"+r}return"0x"+r}function ls(e){const t=_9(e,"value");if(t===R9)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(n.substring(s,s+2),16)}return r}function gp(e){let t=Ze(LM(e)?e:ls(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const eP="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const tP=BigInt(58);function Tse(e){const t=Ht(e);let n=P9(t),r="";for(;n;)r=eP[Number(n%tP)]+r,n/=tP;for(let i=0;i<t.length&&!t[i];i++)r=eP[0]+r;return r}function Ise(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return Ht(t)}function Nse(e){const t=Ht(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}var qp;class eH{constructor(t,n,r){ce(this,"filter");ce(this,"emitter");be(this,qp);J(this,qp,n),ut(this,{emitter:t,filter:r})}async removeListener(){W(this,qp)!=null&&await this.emitter.off(this.filter,W(this,qp))}}qp=new WeakMap;function Rse(e,t,n,r,i){ie(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)}function tH(e,t,n,r,i){if(e==="BAD_PREFIX"||e==="UNEXPECTED_CONTINUE"){let s=0;for(let o=t+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return e==="OVERRUN"?n.length-t-1:0}function _se(e,t,n,r,i){return e==="OVERLONG"?(ie(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),tH(e,t,n))}const Pse=Object.freeze({error:Rse,ignore:tH,replace:_se});function Dse(e,t){t==null&&(t=Pse.error);const n=Ht(e,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(!(s>>7)){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=t("UNEXPECTED_CONTINUE",i-1,n,r):i+=t("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=t("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let f=0;f<o;f++){let c=n[i];if((c&192)!=128){i+=t("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|c&63,i++}if(l!==null){if(l>1114111){i+=t("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=t("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=t("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function gf(e,t){ie(typeof e=="string","invalid string value","str",e);let n=[];for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=e.charCodeAt(r);ie(r<e.length&&(s&64512)===56320,"invalid surrogate pair","str",e);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function Lse(e){return e.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function y3(e,t){return Lse(Dse(e,t))}function nH(e){async function t(n,r){Ee(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Ee(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Ee(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=hr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=hr("request cancelled","CANCELLED"),o.abort()});const l={method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal};let f;try{f=await fetch(n.url,l)}catch(h){throw clearTimeout(a),s||h}clearTimeout(a);const c={};f.headers.forEach((h,g)=>{c[g.toLowerCase()]=h});const d=await f.arrayBuffer(),u=d==null?null:new Uint8Array(d);return{statusCode:f.status,statusMessage:f.statusText,headers:c,body:u}}return t}const Ose=12,jse=250;let nP=nH();const Bse=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Fse=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let fw=!1;async function rH(e,t){try{const n=e.match(Bse);if(!n)throw new Error("invalid data");return new d0(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Ise(n[3]):zse(n[3]))}catch{return new d0(599,"BAD REQUEST (invalid data: URI)",{},null,new vf(e))}}function iH(e){async function t(n,r){try{const i=n.match(Fse);if(!i)throw new Error("invalid link");return new vf(`${e}${i[2]}`)}catch{return new d0(599,"BAD REQUEST (invalid IPFS URI)",{},null,new vf(n))}}return t}const uU={data:rH,ipfs:iH("https://gateway.ipfs.io/ipfs/")},sH=new WeakMap;var Vu,Bd;class $se{constructor(t){be(this,Vu);be(this,Bd);J(this,Vu,[]),J(this,Bd,!1),sH.set(t,()=>{if(!W(this,Bd)){J(this,Bd,!0);for(const n of W(this,Vu))setTimeout(()=>{n()},0);J(this,Vu,[])}})}addListener(t){Ee(!W(this,Bd),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),W(this,Vu).push(t)}get cancelled(){return W(this,Bd)}checkSignal(){Ee(!this.cancelled,"cancelled","CANCELLED",{})}}Vu=new WeakMap,Bd=new WeakMap;function hU(e){if(e==null)throw new Error("missing signal; should not happen");return e.checkSignal(),e}var Qp,Jp,Ra,Yc,em,tm,ei,oo,Zc,Wu,Gu,Xu,_l,_a,Fd,Ku,Kg;const k9=class k9{constructor(t){be(this,Ku);be(this,Qp);be(this,Jp);be(this,Ra);be(this,Yc);be(this,em);be(this,tm);be(this,ei);be(this,oo);be(this,Zc);be(this,Wu);be(this,Gu);be(this,Xu);be(this,_l);be(this,_a);be(this,Fd);J(this,tm,String(t)),J(this,Qp,!1),J(this,Jp,!0),J(this,Ra,{}),J(this,Yc,""),J(this,em,3e5),J(this,_a,{slotInterval:jse,maxAttempts:Ose}),J(this,Fd,null)}get url(){return W(this,tm)}set url(t){J(this,tm,String(t))}get body(){return W(this,ei)==null?null:new Uint8Array(W(this,ei))}set body(t){if(t==null)J(this,ei,void 0),J(this,oo,void 0);else if(typeof t=="string")J(this,ei,gf(t)),J(this,oo,"text/plain");else if(t instanceof Uint8Array)J(this,ei,t),J(this,oo,"application/octet-stream");else if(typeof t=="object")J(this,ei,gf(JSON.stringify(t))),J(this,oo,"application/json");else throw new Error("invalid body")}hasBody(){return W(this,ei)!=null}get method(){return W(this,Yc)?W(this,Yc):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),J(this,Yc,String(t).toUpperCase())}get headers(){const t=Object.assign({},W(this,Ra));return W(this,Zc)&&(t.authorization=`Basic ${Nse(gf(W(this,Zc)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&W(this,oo)&&(t["content-type"]=W(this,oo)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,n){W(this,Ra)[String(t).toLowerCase()]=String(n)}clearHeaders(){J(this,Ra,{})}[Symbol.iterator](){const t=this.headers,n=Object.keys(t);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return W(this,Zc)||null}setCredentials(t,n){ie(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),J(this,Zc,`${t}:${n}`)}get allowGzip(){return W(this,Jp)}set allowGzip(t){J(this,Jp,!!t)}get allowInsecureAuthentication(){return!!W(this,Qp)}set allowInsecureAuthentication(t){J(this,Qp,!!t)}get timeout(){return W(this,em)}set timeout(t){ie(t>=0,"timeout must be non-zero","timeout",t),J(this,em,t)}get preflightFunc(){return W(this,Wu)||null}set preflightFunc(t){J(this,Wu,t)}get processFunc(){return W(this,Gu)||null}set processFunc(t){J(this,Gu,t)}get retryFunc(){return W(this,Xu)||null}set retryFunc(t){J(this,Xu,t)}get getUrlFunc(){return W(this,Fd)||nP}set getUrlFunc(t){J(this,Fd,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${W(this,ei)?Ze(W(this,ei)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(W(this,_a).slotInterval=t.slotInterval),t.maxAttempts!=null&&(W(this,_a).maxAttempts=t.maxAttempts)}send(){return Ee(W(this,_l)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),J(this,_l,new $se(this)),Ie(this,Ku,Kg).call(this,0,rP()+this.timeout,0,this,new d0(0,"",{},null,this))}cancel(){Ee(W(this,_l)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=sH.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const n=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();Ee(this.method==="GET"&&(n!=="https"||r!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const i=new k9(t);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,J(i,Ra,Object.assign({},W(this,Ra))),W(this,ei)&&J(i,ei,new Uint8Array(W(this,ei))),J(i,oo,W(this,oo)),i}clone(){const t=new k9(this.url);return J(t,Yc,W(this,Yc)),W(this,ei)&&J(t,ei,W(this,ei)),J(t,oo,W(this,oo)),J(t,Ra,Object.assign({},W(this,Ra))),J(t,Zc,W(this,Zc)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),J(t,Wu,W(this,Wu)),J(t,Gu,W(this,Gu)),J(t,Xu,W(this,Xu)),J(t,_a,Object.assign({},W(this,_a))),J(t,Fd,W(this,Fd)),t}static lockConfig(){fw=!0}static getGateway(t){return uU[t.toLowerCase()]||null}static registerGateway(t,n){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(fw)throw new Error("gateways locked");uU[t]=n}static registerGetUrl(t){if(fw)throw new Error("gateways locked");nP=t}static createGetUrlFunc(t){return nH()}static createDataGateway(){return rH}static createIpfsGatewayFunc(t){return iH(t)}};Qp=new WeakMap,Jp=new WeakMap,Ra=new WeakMap,Yc=new WeakMap,em=new WeakMap,tm=new WeakMap,ei=new WeakMap,oo=new WeakMap,Zc=new WeakMap,Wu=new WeakMap,Gu=new WeakMap,Xu=new WeakMap,_l=new WeakMap,_a=new WeakMap,Fd=new WeakMap,Ku=new WeakSet,Kg=async function(t,n,r,i,s){var c,d,u;if(t>=W(this,_a).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Ee(rP()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await Hse(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in uU){const h=await uU[a](o.url,hU(W(i,_l)));if(h instanceof d0){let g=h;if(this.processFunc){hU(W(i,_l));try{g=await this.processFunc(o,g)}catch(U){(U.throttle==null||typeof U.stall!="number")&&g.makeServerError("error in post-processing function",U).assertOk()}}return g}o=h}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,hU(W(i,_l)));let f=new d0(l.statusCode,l.statusMessage,l.headers,l.body,i);if(f.statusCode===301||f.statusCode===302){try{const h=f.headers.location||"";return Ie(c=o.redirect(h),Ku,Kg).call(c,t+1,n,0,i,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,f,t))){const h=f.headers["retry-after"];let g=W(this,_a).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(g=parseInt(h)),Ie(d=o.clone(),Ku,Kg).call(d,t+1,n,g,i,f)}if(this.processFunc){hU(W(i,_l));try{f=await this.processFunc(o,f)}catch(h){(h.throttle==null||typeof h.stall!="number")&&f.makeServerError("error in post-processing function",h).assertOk();let g=W(this,_a).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return h.stall>=0&&(g=h.stall),Ie(u=o.clone(),Ku,Kg).call(u,t+1,n,g,i,f)}}return f};let vf=k9;var ib,sb,ob,ao,nm,Yu;const bN=class bN{constructor(t,n,r,i,s){be(this,ib);be(this,sb);be(this,ob);be(this,ao);be(this,nm);be(this,Yu);J(this,ib,t),J(this,sb,n),J(this,ob,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),J(this,ao,i==null?null:new Uint8Array(i)),J(this,nm,s||null),J(this,Yu,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${W(this,ao)?Ze(W(this,ao)):"null"}>`}get statusCode(){return W(this,ib)}get statusMessage(){return W(this,sb)}get headers(){return Object.assign({},W(this,ob))}get body(){return W(this,ao)==null?null:new Uint8Array(W(this,ao))}get bodyText(){try{return W(this,ao)==null?"":y3(W(this,ao))}catch{Ee(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Ee(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,n=Object.keys(t);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,n){let r;t?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${t})`);const i=new bN(599,r,this.headers,this.body,W(this,nm)||void 0);return J(i,Yu,{message:t,error:n}),i}throwThrottleError(t,n){n==null?n=-1:ie(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(t||"throttling requests");throw ut(r,{stall:n,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return W(this,ao)!=null}get request(){return W(this,nm)}ok(){return W(this,Yu).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:n}=W(this,Yu);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{W(this,ao)&&(i=y3(W(this,ao)))}catch{}Ee(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};ib=new WeakMap,sb=new WeakMap,ob=new WeakMap,ao=new WeakMap,nm=new WeakMap,Yu=new WeakMap;let d0=bN;function rP(){return new Date().getTime()}function zse(e){return gf(e.replace(/%([0-9a-f][0-9a-f])/gi,(t,n)=>String.fromCharCode(parseInt(n,16))))}function Hse(e){return new Promise(t=>setTimeout(t,e))}const Vse=BigInt(-1),Ca=BigInt(0),bp=BigInt(1),Wse=BigInt(5),B1={};let Dp="0000";for(;Dp.length<80;)Dp+=Dp;function su(e){let t=Dp;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function xg(e,t,n){const r=BigInt(t.width);if(t.signed){const i=bp<<r-bp;Ee(n==null||e>=-i&&e<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e>Ca?e=U3(Tu(e,r),r):e=-U3(Tu(-e,r),r)}else{const i=bp<<r;Ee(n==null||e>=0&&e<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%i+i)%i&i-bp}return e}function dw(e){typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,n=128,r=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ie(s,"invalid fixed format","format",e),t=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(e){const s=e,o=(a,l,f)=>s[a]==null?f:(ie(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);t=o("signed","boolean",t),n=o("width","number",n),r=o("decimals","number",r)}ie(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),ie(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(t?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:t,width:n,decimals:r,name:i}}function Gse(e,t){let n="";e<Ca&&(n="-",e*=Vse);let r=e.toString();if(t===0)return n+r;for(;r.length<=t;)r=Dp+r;const i=r.length-t;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Pa,hn,ns,an,uu,Oc,OS,jS,BS,FS;const _d=class _d{constructor(t,n,r){be(this,an);ce(this,"format");be(this,Pa);be(this,hn);be(this,ns);ce(this,"_value");bb(t,B1,"FixedNumber"),J(this,hn,n),J(this,Pa,r);const i=Gse(n,r.decimals);ut(this,{format:r.name,_value:i}),J(this,ns,su(r.decimals))}get signed(){return W(this,Pa).signed}get width(){return W(this,Pa).width}get decimals(){return W(this,Pa).decimals}get value(){return W(this,hn)}addUnsafe(t){return Ie(this,an,OS).call(this,t)}add(t){return Ie(this,an,OS).call(this,t,"add")}subUnsafe(t){return Ie(this,an,jS).call(this,t)}sub(t){return Ie(this,an,jS).call(this,t,"sub")}mulUnsafe(t){return Ie(this,an,BS).call(this,t)}mul(t){return Ie(this,an,BS).call(this,t,"mul")}mulSignal(t){Ie(this,an,uu).call(this,t);const n=W(this,hn)*W(t,hn);return Ee(n%W(this,ns)===Ca,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Ie(this,an,Oc).call(this,n/W(this,ns),"mulSignal")}divUnsafe(t){return Ie(this,an,FS).call(this,t)}div(t){return Ie(this,an,FS).call(this,t,"div")}divSignal(t){Ee(W(t,hn)!==Ca,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ie(this,an,uu).call(this,t);const n=W(this,hn)*W(this,ns);return Ee(n%W(t,hn)===Ca,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Ie(this,an,Oc).call(this,n/W(t,hn),"divSignal")}cmp(t){let n=this.value,r=t.value;const i=this.decimals-t.decimals;return i>0?r*=su(i):i<0&&(n*=su(-i)),n<r?-1:n>r?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=W(this,hn);return W(this,hn)<Ca&&(t-=W(this,ns)-bp),t=W(this,hn)/W(this,ns)*W(this,ns),Ie(this,an,Oc).call(this,t,"floor")}ceiling(){let t=W(this,hn);return W(this,hn)>Ca&&(t+=W(this,ns)-bp),t=W(this,hn)/W(this,ns)*W(this,ns),Ie(this,an,Oc).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const n=this.decimals-t,r=Wse*su(n-1);let i=this.value+r;const s=su(n);return i=i/s*s,xg(i,W(this,Pa),"round"),new _d(B1,i,W(this,Pa))}isZero(){return W(this,hn)===Ca}isNegative(){return W(this,hn)<Ca}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return _d.fromString(this.toString(),t)}static fromValue(t,n,r){const i=n==null?0:Nt(n),s=dw(r);let o=et(t,"value");const a=i-s.decimals;if(a>0){const l=su(a);Ee(o%l===Ca,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=l}else a<0&&(o*=su(-a));return xg(o,s,"fromValue"),new _d(B1,o,s)}static fromString(t,n){const r=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ie(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const i=dw(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=Dp;Ee(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return xg(a,i,"fromString"),new _d(B1,a,i)}static fromBytes(t,n){let r=P9(Ht(t,"value"));const i=dw(n);return i.signed&&(r=U3(r,i.width)),xg(r,i,"fromBytes"),new _d(B1,r,i)}};Pa=new WeakMap,hn=new WeakMap,ns=new WeakMap,an=new WeakSet,uu=function(t){ie(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},Oc=function(t,n){return t=xg(t,W(this,Pa),n),new _d(B1,t,W(this,Pa))},OS=function(t,n){return Ie(this,an,uu).call(this,t),Ie(this,an,Oc).call(this,W(this,hn)+W(t,hn),n)},jS=function(t,n){return Ie(this,an,uu).call(this,t),Ie(this,an,Oc).call(this,W(this,hn)-W(t,hn),n)},BS=function(t,n){return Ie(this,an,uu).call(this,t),Ie(this,an,Oc).call(this,W(this,hn)*W(t,hn)/W(this,ns),n)},FS=function(t,n){return Ee(W(t,hn)!==Ca,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ie(this,an,uu).call(this,t),Ie(this,an,Oc).call(this,W(this,hn)*W(this,ns)/W(t,hn),n)};let x3=_d;function Xse(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function iP(e,t,n){let r=0;for(let i=0;i<n;i++)r=r*256+e[t+i];return r}function sP(e,t,n,r){const i=[];for(;n<t+1+r;){const s=oH(e,n);i.push(s.result),n+=s.consumed,Ee(n<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:i}}function oH(e,t){Ee(e.length!==0,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=r=>{Ee(r<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:r})};if(e[t]>=248){const r=e[t]-247;n(t+1+r);const i=iP(e,t+1,r);return n(t+1+r+i),sP(e,t,t+1+r,r+i)}else if(e[t]>=192){const r=e[t]-192;return n(t+1+r),sP(e,t,t+1,r)}else if(e[t]>=184){const r=e[t]-183;n(t+1+r);const i=iP(e,t+1,r);n(t+1+r+i);const s=Ze(e.slice(t+1+r,t+1+r+i));return{consumed:1+r+i,result:s}}else if(e[t]>=128){const r=e[t]-128;n(t+1+r);const i=Ze(e.slice(t+1,t+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Xse(e[t])}}function D9(e){const t=Ht(e,"data"),n=oH(t,0);return ie(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function oP(e){const t=[];for(;e;)t.unshift(e&255),e>>=8;return t}function aH(e){if(Array.isArray(e)){let r=[];if(e.forEach(function(s){r=r.concat(aH(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=oP(r.length);return i.unshift(247+i.length),i.concat(r)}const t=Array.prototype.slice.call(Ht(e,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=oP(t.length);return n.unshift(183+n.length),n.concat(t)}const aP="0123456789abcdef";function Ah(e){let t="0x";for(const n of aH(e))t+=aP[n>>4],t+=aP[n&15];return t}function Kse(e,t){let n=18;return n=Nt(t,"unit"),x3.fromValue(e,n,{decimals:n,width:512}).toString()}function Yse(e,t){ie(typeof e=="string","value must be a string","value",e);let n=18;return n=Nt(t,"unit"),x3.fromString(e,{decimals:n,width:512}).value}function Zse(e){return Kse(e,18)}function Tc(e){return Yse(e,18)}const cs=32,$S=new Uint8Array(cs),qse=["then"],pU={},lH=new WeakMap;function xu(e){return lH.get(e)}function lP(e,t){lH.set(e,t)}function vg(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}function zS(e,t,n){return e.indexOf(null)>=0?t.map((r,i)=>r instanceof Lm?zS(xu(r),r,n):r):e.reduce((r,i,s)=>{let o=t.getValue(i);return i in r||(n&&o instanceof Lm&&(o=zS(xu(o),o,n)),r[i]=o),r},{})}var rm;const Np=class Np extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==pU&&(i=n,s=[],o=!1);super(i.length);be(this,rm);i.forEach((f,c)=>{this[c]=f});const a=s.reduce((f,c)=>(typeof c=="string"&&f.set(c,(f.get(c)||0)+1),f),new Map);if(lP(this,Object.freeze(i.map((f,c)=>{const d=s[c];return d!=null&&a.get(d)===1?d:null}))),J(this,rm,[]),W(this,rm)==null&&W(this,rm),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(f,c,d)=>{if(typeof c=="string"){if(c.match(/^[0-9]+$/)){const h=Nt(c,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const g=f[h];return g instanceof Error&&vg(`index ${h}`,g),g}if(qse.indexOf(c)>=0)return Reflect.get(f,c,d);const u=f[c];if(u instanceof Function)return function(...h){return u.apply(this===d?f:this,h)};if(!(c in f))return f.getValue.apply(this===d?f:this,[c])}return Reflect.get(f,c,d)}});return lP(l,xu(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&vg(`index ${s}`,i),n&&i instanceof Np&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=xu(this);return r.reduce((i,s,o)=>(Ee(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),zS(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=xu(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Np(pU,s,o)}filter(n,r){const i=xu(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&vg(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Np(pU,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&vg(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=xu(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&vg(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Np(pU,n,r)}};rm=new WeakMap;let Lm=Np;function cP(e){let t=ls(e);return Ee(t.length<=cs,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:cs,offset:t.length}),t.length!==cs&&(t=as(wr([$S.slice(t.length%cs),t]))),t}class Lf{constructor(t,n,r,i){ce(this,"name");ce(this,"type");ce(this,"localName");ce(this,"dynamic");ut(this,{name:t,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,n){ie(!1,t,this.localName,n)}}var qc,Zu,im,xy;class HS{constructor(){be(this,im);be(this,qc);be(this,Zu);J(this,qc,[]),J(this,Zu,0)}get data(){return wr(W(this,qc))}get length(){return W(this,Zu)}appendWriter(t){return Ie(this,im,xy).call(this,as(t.data))}writeBytes(t){let n=as(t);const r=n.length%cs;return r&&(n=as(wr([n,$S.slice(r)]))),Ie(this,im,xy).call(this,n)}writeValue(t){return Ie(this,im,xy).call(this,cP(t))}writeUpdatableValue(){const t=W(this,qc).length;return W(this,qc).push($S),J(this,Zu,W(this,Zu)+cs),n=>{W(this,qc)[t]=cP(n)}}}qc=new WeakMap,Zu=new WeakMap,im=new WeakSet,xy=function(t){return W(this,qc).push(t),J(this,Zu,W(this,Zu)+t.length),t.length};var Is,lo,qu,Qu,$d,r1,WS,cH;const UN=class UN{constructor(t,n,r){be(this,r1);ce(this,"allowLoose");be(this,Is);be(this,lo);be(this,qu);be(this,Qu);be(this,$d);ut(this,{allowLoose:!!n}),J(this,Is,as(t)),J(this,qu,0),J(this,Qu,null),J(this,$d,r??1024),J(this,lo,0)}get data(){return Ze(W(this,Is))}get dataLength(){return W(this,Is).length}get consumed(){return W(this,lo)}get bytes(){return new Uint8Array(W(this,Is))}subReader(t){const n=new UN(W(this,Is).slice(W(this,lo)+t),this.allowLoose,W(this,$d));return J(n,Qu,this),n}readBytes(t,n){let r=Ie(this,r1,cH).call(this,0,t,!!n);return Ie(this,r1,WS).call(this,t),J(this,lo,W(this,lo)+r.length),r.slice(0,t)}readValue(){return P9(this.readBytes(cs))}readIndex(){return Ase(this.readBytes(cs))}};Is=new WeakMap,lo=new WeakMap,qu=new WeakMap,Qu=new WeakMap,$d=new WeakMap,r1=new WeakSet,WS=function(t){var n;if(W(this,Qu))return Ie(n=W(this,Qu),r1,WS).call(n,t);J(this,qu,W(this,qu)+t),Ee(W(this,$d)<1||W(this,qu)<=W(this,$d)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${W(this,$d)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:as(W(this,Is)),offset:W(this,lo),length:t,info:{bytesRead:W(this,qu),dataLength:this.dataLength}})},cH=function(t,n,r){let i=Math.ceil(n/cs)*cs;return W(this,lo)+i>W(this,Is).length&&(this.allowLoose&&r&&W(this,lo)+n<=W(this,Is).length?i=n:Ee(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:as(W(this,Is)),length:W(this,Is).length,offset:W(this,lo)+i})),W(this,Is).slice(W(this,lo),W(this,lo)+i)};let VS=UN;function v3(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function OM(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Qse(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");v3(e.outputLen),v3(e.blockLen)}function Om(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fH(e,t){OM(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const uw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dH=e=>e instanceof Uint8Array,Jse=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),hw=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),yl=(e,t)=>e<<32-t|e>>>t,eoe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!eoe)throw new Error("Non little-endian hardware is not supported");function toe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function L9(e){if(typeof e=="string"&&(e=toe(e)),!dH(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function noe(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!dH(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class jM{clone(){return this._cloneInto()}}function BM(e){const t=r=>e().update(L9(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function roe(e=32){if(uw&&typeof uw.getRandomValues=="function")return uw.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class uH extends jM{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Qse(t);const r=L9(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Om(this),this.iHash.update(t),this}digestInto(t){Om(this),OM(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hH=(e,t,n)=>new uH(e,t).update(n).digest();hH.create=(e,t)=>new uH(e,t);function ioe(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,f=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+f,a,r)}class pH extends jM{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=hw(this.buffer)}update(t){Om(this);const{view:n,buffer:r,blockLen:i}=this;t=L9(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=hw(t);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Om(this),fH(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;ioe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=hw(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=l/4,c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)a.setUint32(4*d,c[d],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}}const soe=(e,t,n)=>e&t^~e&n,ooe=(e,t,n)=>e&t^e&n^t&n,aoe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ud=new Uint32Array(64);class loe extends pH{constructor(){super(64,32,8,!1),this.A=dd[0]|0,this.B=dd[1]|0,this.C=dd[2]|0,this.D=dd[3]|0,this.E=dd[4]|0,this.F=dd[5]|0,this.G=dd[6]|0,this.H=dd[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[t,n,r,i,s,o,a,l]}set(t,n,r,i,s,o,a,l){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(t,n){for(let d=0;d<16;d++,n+=4)ud[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const u=ud[d-15],h=ud[d-2],g=yl(u,7)^yl(u,18)^u>>>3,U=yl(h,17)^yl(h,19)^h>>>10;ud[d]=U+ud[d-7]+g+ud[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:f,H:c}=this;for(let d=0;d<64;d++){const u=yl(a,6)^yl(a,11)^yl(a,25),h=c+u+soe(a,l,f)+aoe[d]+ud[d]|0,U=(yl(r,2)^yl(r,13)^yl(r,22))+ooe(r,i,s)|0;c=f,f=l,l=a,a=o+h|0,o=s,s=i,i=r,r=h+U|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,f=f+this.G|0,c=c+this.H|0,this.set(r,i,s,o,a,l,f,c)}roundClean(){ud.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const mH=BM(()=>new loe),mU=BigInt(2**32-1),GS=BigInt(32);function gH(e,t=!1){return t?{h:Number(e&mU),l:Number(e>>GS&mU)}:{h:Number(e>>GS&mU)|0,l:Number(e&mU)|0}}function bH(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=gH(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]}const coe=(e,t)=>BigInt(e>>>0)<<GS|BigInt(t>>>0),foe=(e,t,n)=>e>>>n,doe=(e,t,n)=>e<<32-n|t>>>n,uoe=(e,t,n)=>e>>>n|t<<32-n,hoe=(e,t,n)=>e<<32-n|t>>>n,poe=(e,t,n)=>e<<64-n|t>>>n-32,moe=(e,t,n)=>e>>>n-32|t<<64-n,goe=(e,t)=>t,boe=(e,t)=>e,UH=(e,t,n)=>e<<n|t>>>32-n,yH=(e,t,n)=>t<<n|e>>>32-n,xH=(e,t,n)=>t<<n-32|e>>>64-n,vH=(e,t,n)=>e<<n-32|t>>>64-n;function Uoe(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const yoe=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),xoe=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,voe=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),woe=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,Eoe=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Soe=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,_t={fromBig:gH,split:bH,toBig:coe,shrSH:foe,shrSL:doe,rotrSH:uoe,rotrSL:hoe,rotrBH:poe,rotrBL:moe,rotr32H:goe,rotr32L:boe,rotlSH:UH,rotlSL:yH,rotlBH:xH,rotlBL:vH,add:Uoe,add3L:yoe,add3H:xoe,add4L:voe,add4H:woe,add5H:Soe,add5L:Eoe},[koe,Coe]=_t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),hd=new Uint32Array(80),pd=new Uint32Array(80);class Moe extends pH{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:f,El:c,Fh:d,Fl:u,Gh:h,Gl:g,Hh:U,Hl:y}=this;return[t,n,r,i,s,o,a,l,f,c,d,u,h,g,U,y]}set(t,n,r,i,s,o,a,l,f,c,d,u,h,g,U,y){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=f|0,this.El=c|0,this.Fh=d|0,this.Fl=u|0,this.Gh=h|0,this.Gl=g|0,this.Hh=U|0,this.Hl=y|0}process(t,n){for(let E=0;E<16;E++,n+=4)hd[E]=t.getUint32(n),pd[E]=t.getUint32(n+=4);for(let E=16;E<80;E++){const S=hd[E-15]|0,M=pd[E-15]|0,A=_t.rotrSH(S,M,1)^_t.rotrSH(S,M,8)^_t.shrSH(S,M,7),C=_t.rotrSL(S,M,1)^_t.rotrSL(S,M,8)^_t.shrSL(S,M,7),I=hd[E-2]|0,R=pd[E-2]|0,L=_t.rotrSH(I,R,19)^_t.rotrBH(I,R,61)^_t.shrSH(I,R,6),_=_t.rotrSL(I,R,19)^_t.rotrBL(I,R,61)^_t.shrSL(I,R,6),O=_t.add4L(C,_,pd[E-7],pd[E-16]),$=_t.add4H(O,A,L,hd[E-7],hd[E-16]);hd[E]=$|0,pd[E]=O|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:f,Dl:c,Eh:d,El:u,Fh:h,Fl:g,Gh:U,Gl:y,Hh:x,Hl:w}=this;for(let E=0;E<80;E++){const S=_t.rotrSH(d,u,14)^_t.rotrSH(d,u,18)^_t.rotrBH(d,u,41),M=_t.rotrSL(d,u,14)^_t.rotrSL(d,u,18)^_t.rotrBL(d,u,41),A=d&h^~d&U,C=u&g^~u&y,I=_t.add5L(w,M,C,Coe[E],pd[E]),R=_t.add5H(I,x,S,A,koe[E],hd[E]),L=I|0,_=_t.rotrSH(r,i,28)^_t.rotrBH(r,i,34)^_t.rotrBH(r,i,39),O=_t.rotrSL(r,i,28)^_t.rotrBL(r,i,34)^_t.rotrBL(r,i,39),$=r&s^r&a^s&a,B=i&o^i&l^o&l;x=U|0,w=y|0,U=h|0,y=g|0,h=d|0,g=u|0,{h:d,l:u}=_t.add(f|0,c|0,R|0,L|0),f=a|0,c=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const F=_t.add3L(L,O,B);r=_t.add3H(F,R,_,$),i=F|0}({h:r,l:i}=_t.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=_t.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=_t.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:f,l:c}=_t.add(this.Dh|0,this.Dl|0,f|0,c|0),{h:d,l:u}=_t.add(this.Eh|0,this.El|0,d|0,u|0),{h,l:g}=_t.add(this.Fh|0,this.Fl|0,h|0,g|0),{h:U,l:y}=_t.add(this.Gh|0,this.Gl|0,U|0,y|0),{h:x,l:w}=_t.add(this.Hh|0,this.Hl|0,x|0,w|0),this.set(r,i,s,o,a,l,f,c,d,u,h,g,U,y,x,w)}roundClean(){hd.fill(0),pd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Aoe=BM(()=>new Moe);function Toe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const fP=Toe();fP.crypto||fP.msCrypto;function Ioe(e){switch(e){case"sha256":return mH.create();case"sha512":return Aoe.create()}ie(!1,"invalid hashing algorithm name","algorithm",e)}const[wH,EH,SH]=[[],[],[]],Noe=BigInt(0),wg=BigInt(1),Roe=BigInt(2),_oe=BigInt(7),Poe=BigInt(256),Doe=BigInt(113);for(let e=0,t=wg,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],wH.push(2*(5*r+n)),EH.push((e+1)*(e+2)/2%64);let i=Noe;for(let s=0;s<7;s++)t=(t<<wg^(t>>_oe)*Doe)%Poe,t&Roe&&(i^=wg<<(wg<<BigInt(s))-wg);SH.push(i)}const[Loe,Ooe]=bH(SH,!0),dP=(e,t,n)=>n>32?xH(e,t,n):UH(e,t,n),uP=(e,t,n)=>n>32?vH(e,t,n):yH(e,t,n);function joe(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,f=n[l],c=n[l+1],d=dP(f,c,1)^n[a],u=uP(f,c,1)^n[a+1];for(let h=0;h<50;h+=10)e[o+h]^=d,e[o+h+1]^=u}let i=e[2],s=e[3];for(let o=0;o<24;o++){const a=EH[o],l=dP(i,s,a),f=uP(i,s,a),c=wH[o];i=e[c],s=e[c+1],e[c]=l,e[c+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=Loe[r],e[1]^=Ooe[r]}n.fill(0)}class FM extends jM{constructor(t,n,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,v3(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Jse(this.state)}keccak(){joe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Om(this);const{blockLen:n,state:r}=this;t=L9(t);const i=t.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=t[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){Om(this,!1),OM(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=t.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return v3(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(fH(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return t||(t=new FM(n,r,i,o,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Boe=(e,t,n)=>BM(()=>new FM(t,e,n)),Foe=Boe(1,136,256/8);let kH=!1;const CH=function(e){return Foe(e)};let MH=CH;function Tr(e){const t=Ht(e,"data");return Ze(MH(t))}Tr._=CH;Tr.lock=function(){kH=!0};Tr.register=function(e){if(kH)throw new TypeError("keccak256 is locked");MH=e};Object.freeze(Tr);const AH=function(e){return Ioe("sha256").update(e).digest()};let TH=AH,IH=!1;function S6(e){const t=Ht(e,"data");return Ze(TH(t))}S6._=AH;S6.lock=function(){IH=!0};S6.register=function(e){if(IH)throw new Error("sha256 is locked");TH=e};Object.freeze(S6);Object.freeze(S6);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NH=BigInt(0),O9=BigInt(1),$oe=BigInt(2),j9=e=>e instanceof Uint8Array,zoe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function jm(e){if(!j9(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=zoe[e[n]];return t}function RH(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function $M(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Bm(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function fh(e){return $M(jm(e))}function zM(e){if(!j9(e))throw new Error("Uint8Array expected");return $M(jm(Uint8Array.from(e).reverse()))}function Fm(e,t){return Bm(e.toString(16).padStart(t*2,"0"))}function HM(e,t){return Fm(e,t).reverse()}function Hoe(e){return Bm(RH(e))}function Ia(e,t,n){let r;if(typeof t=="string")try{r=Bm(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(j9(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function Q5(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!j9(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function Voe(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Woe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Goe(e){let t;for(t=0;e>NH;e>>=O9,t+=1);return t}function Xoe(e,t){return e>>BigInt(t)&O9}const Koe=(e,t,n)=>e|(n?O9:NH)<<BigInt(t),VM=e=>($oe<<BigInt(e-1))-O9,pw=e=>new Uint8Array(e),hP=e=>Uint8Array.from(e);function _H(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=pw(e),i=pw(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),l=(d=pw())=>{i=a(hP([0]),d),r=a(),d.length!==0&&(i=a(hP([1]),d),r=a())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const u=[];for(;d<t;){r=a();const h=r.slice();u.push(h),d+=r.length}return Q5(...u)};return(d,u)=>{o(),l(d);let h;for(;!(h=u(f()));)l();return o(),h}}const Yoe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ub(e,t,n={}){const r=(i,s,o)=>{const a=Yoe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=e[i];if(!(o&&l===void 0)&&!a(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const Zoe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Xoe,bitLen:Goe,bitMask:VM,bitSet:Koe,bytesToHex:jm,bytesToNumberBE:fh,bytesToNumberLE:zM,concatBytes:Q5,createHmacDrbg:_H,ensureBytes:Ia,equalBytes:Voe,hexToBytes:Bm,hexToNumber:$M,numberToBytesBE:Fm,numberToBytesLE:HM,numberToHexUnpadded:RH,numberToVarBytesBE:Hoe,utf8ToBytes:Woe,validateObject:Ub},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ai=BigInt(0),xr=BigInt(1),vu=BigInt(2),qoe=BigInt(3),XS=BigInt(4),pP=BigInt(5),mP=BigInt(8);BigInt(9);BigInt(16);function _s(e,t){const n=e%t;return n>=ai?n:t+n}function Qoe(e,t,n){if(n<=ai||t<ai)throw new Error("Expected power/modulo > 0");if(n===xr)return ai;let r=xr;for(;t>ai;)t&xr&&(r=r*e%n),e=e*e%n,t>>=xr;return r}function _o(e,t,n){let r=e;for(;t-- >ai;)r*=r,r%=n;return r}function KS(e,t){if(e===ai||t<=ai)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=_s(e,t),r=t,i=ai,s=xr;for(;n!==ai;){const a=r/n,l=r%n,f=i-s*a;r=n,n=l,i=s,s=f}if(r!==xr)throw new Error("invert: does not exist");return _s(i,t)}function Joe(e){const t=(e-xr)/vu;let n,r,i;for(n=e-xr,r=0;n%vu===ai;n/=vu,r++);for(i=vu;i<e&&Qoe(i,t,e)!==e-xr;i++);if(r===1){const o=(e+xr)/XS;return function(l,f){const c=l.pow(f,o);if(!l.eql(l.sqr(c),f))throw new Error("Cannot find square root");return c}}const s=(n+xr)/vu;return function(a,l){if(a.pow(l,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=r,c=a.pow(a.mul(a.ONE,i),n),d=a.pow(l,s),u=a.pow(l,n);for(;!a.eql(u,a.ONE);){if(a.eql(u,a.ZERO))return a.ZERO;let h=1;for(let U=a.sqr(u);h<f&&!a.eql(U,a.ONE);h++)U=a.sqr(U);const g=a.pow(c,xr<<BigInt(f-h-1));c=a.sqr(g),d=a.mul(d,g),u=a.mul(u,c),f=h}return d}}function eae(e){if(e%XS===qoe){const t=(e+xr)/XS;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%mP===pP){const t=(e-pP)/mP;return function(r,i){const s=r.mul(i,vu),o=r.pow(s,t),a=r.mul(i,o),l=r.mul(r.mul(a,vu),o),f=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(f),i))throw new Error("Cannot find square root");return f}}return Joe(e)}const tae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nae(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=tae.reduce((r,i)=>(r[i]="function",r),t);return Ub(e,n)}function rae(e,t,n){if(n<ai)throw new Error("Expected power > 0");if(n===ai)return e.ONE;if(n===xr)return t;let r=e.ONE,i=t;for(;n>ai;)n&xr&&(r=e.mul(r,i)),i=e.sqr(i),n>>=xr;return r}function iae(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function PH(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function sae(e,t,n=!1,r={}){if(e<=ai)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=PH(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=eae(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:VM(i),ZERO:ai,ONE:xr,create:l=>_s(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return ai<=l&&l<e},is0:l=>l===ai,isOdd:l=>(l&xr)===xr,neg:l=>_s(-l,e),eql:(l,f)=>l===f,sqr:l=>_s(l*l,e),add:(l,f)=>_s(l+f,e),sub:(l,f)=>_s(l-f,e),mul:(l,f)=>_s(l*f,e),pow:(l,f)=>rae(a,l,f),div:(l,f)=>_s(l*KS(f,e),e),sqrN:l=>l*l,addN:(l,f)=>l+f,subN:(l,f)=>l-f,mulN:(l,f)=>l*f,inv:l=>KS(l,e),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>iae(a,l),cmov:(l,f,c)=>c?f:l,toBytes:l=>n?HM(l,s):Fm(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?zM(l):fh(l)}});return Object.freeze(a)}function DH(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function LH(e){const t=DH(e);return t+Math.ceil(t/2)}function oae(e,t,n=!1){const r=e.length,i=DH(t),s=LH(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?fh(e):zM(e),a=_s(o,t-xr)+xr;return n?HM(a,i):Fm(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aae=BigInt(0),mw=BigInt(1);function lae(e,t){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>aae;)s&mw&&(o=o.add(a)),a=a.double(),s>>=mw;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let f=i,c=f;for(let d=0;d<o;d++){c=f,l.push(c);for(let u=1;u<a;u++)c=c.add(f),l.push(c);f=c.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let f=e.ZERO,c=e.BASE;const d=BigInt(2**i-1),u=2**i,h=BigInt(i);for(let g=0;g<a;g++){const U=g*l;let y=Number(o&d);o>>=h,y>l&&(y-=u,o+=mw);const x=U,w=U+Math.abs(y)-1,E=g%2!==0,S=y<0;y===0?c=c.add(n(E,s[x])):f=f.add(n(S,s[w]))}return{p:f,f:c}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let f=s.get(i);return f||(f=this.precomputeWindow(i,l),l!==1&&s.set(i,a(f))),this.wNAF(l,f,o)}}}function OH(e){return nae(e.Fp),Ub(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...PH(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cae(e){const t=OH(e);Ub(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:fae,hexToBytes:dae}=Zoe,Iu={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Iu;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:fae(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Iu,n=typeof e=="string"?dae(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Iu._parseInt(n.subarray(2)),{d:o,l:a}=Iu._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,n=f=>{const c=f.toString(16);return c.length&1?`0${c}`:c},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},lf=BigInt(0),Wo=BigInt(1);BigInt(2);const gP=BigInt(3);BigInt(4);function uae(e){const t=cae(e),{Fp:n}=t,r=t.toBytes||((g,U,y)=>{const x=U.toAffine();return Q5(Uint8Array.from([4]),n.toBytes(x.x),n.toBytes(x.y))}),i=t.fromBytes||(g=>{const U=g.subarray(1),y=n.fromBytes(U.subarray(0,n.BYTES)),x=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:y,y:x}});function s(g){const{a:U,b:y}=t,x=n.sqr(g),w=n.mul(x,g);return n.add(n.add(w,n.mul(g,U)),y)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return typeof g=="bigint"&&lf<g&&g<t.n}function a(g){if(!o(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(g){const{allowedPrivateKeyLengths:U,nByteLength:y,wrapPrivateKey:x,n:w}=t;if(U&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=jm(g)),typeof g!="string"||!U.includes(g.length))throw new Error("Invalid key");g=g.padStart(y*2,"0")}let E;try{E=typeof g=="bigint"?g:fh(Ia("private key",g,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof g}`)}return x&&(E=_s(E,w)),a(E),E}const f=new Map;function c(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(U,y,x){if(this.px=U,this.py=y,this.pz=x,U==null||!n.isValid(U))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(x==null||!n.isValid(x))throw new Error("z required")}static fromAffine(U){const{x:y,y:x}=U||{};if(!U||!n.isValid(y)||!n.isValid(x))throw new Error("invalid affine point");if(U instanceof d)throw new Error("projective point not allowed");const w=E=>n.eql(E,n.ZERO);return w(y)&&w(x)?d.ZERO:new d(y,x,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(U){const y=n.invertBatch(U.map(x=>x.pz));return U.map((x,w)=>x.toAffine(y[w])).map(d.fromAffine)}static fromHex(U){const y=d.fromAffine(i(Ia("pointHex",U)));return y.assertValidity(),y}static fromPrivateKey(U){return d.BASE.multiply(l(U))}_setWindowSize(U){this._WINDOW_SIZE=U,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:U,y}=this.toAffine();if(!n.isValid(U)||!n.isValid(y))throw new Error("bad point: x or y not FE");const x=n.sqr(y),w=s(U);if(!n.eql(x,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:U}=this.toAffine();if(n.isOdd)return!n.isOdd(U);throw new Error("Field doesn't support isOdd")}equals(U){c(U);const{px:y,py:x,pz:w}=this,{px:E,py:S,pz:M}=U,A=n.eql(n.mul(y,M),n.mul(E,w)),C=n.eql(n.mul(x,M),n.mul(S,w));return A&&C}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:U,b:y}=t,x=n.mul(y,gP),{px:w,py:E,pz:S}=this;let M=n.ZERO,A=n.ZERO,C=n.ZERO,I=n.mul(w,w),R=n.mul(E,E),L=n.mul(S,S),_=n.mul(w,E);return _=n.add(_,_),C=n.mul(w,S),C=n.add(C,C),M=n.mul(U,C),A=n.mul(x,L),A=n.add(M,A),M=n.sub(R,A),A=n.add(R,A),A=n.mul(M,A),M=n.mul(_,M),C=n.mul(x,C),L=n.mul(U,L),_=n.sub(I,L),_=n.mul(U,_),_=n.add(_,C),C=n.add(I,I),I=n.add(C,I),I=n.add(I,L),I=n.mul(I,_),A=n.add(A,I),L=n.mul(E,S),L=n.add(L,L),I=n.mul(L,_),M=n.sub(M,I),C=n.mul(L,R),C=n.add(C,C),C=n.add(C,C),new d(M,A,C)}add(U){c(U);const{px:y,py:x,pz:w}=this,{px:E,py:S,pz:M}=U;let A=n.ZERO,C=n.ZERO,I=n.ZERO;const R=t.a,L=n.mul(t.b,gP);let _=n.mul(y,E),O=n.mul(x,S),$=n.mul(w,M),B=n.add(y,x),F=n.add(E,S);B=n.mul(B,F),F=n.add(_,O),B=n.sub(B,F),F=n.add(y,w);let z=n.add(E,M);return F=n.mul(F,z),z=n.add(_,$),F=n.sub(F,z),z=n.add(x,w),A=n.add(S,M),z=n.mul(z,A),A=n.add(O,$),z=n.sub(z,A),I=n.mul(R,F),A=n.mul(L,$),I=n.add(A,I),A=n.sub(O,I),I=n.add(O,I),C=n.mul(A,I),O=n.add(_,_),O=n.add(O,_),$=n.mul(R,$),F=n.mul(L,F),O=n.add(O,$),$=n.sub(_,$),$=n.mul(R,$),F=n.add(F,$),_=n.mul(O,F),C=n.add(C,_),_=n.mul(z,F),A=n.mul(B,A),A=n.sub(A,_),_=n.mul(B,O),I=n.mul(z,I),I=n.add(I,_),new d(A,C,I)}subtract(U){return this.add(U.negate())}is0(){return this.equals(d.ZERO)}wNAF(U){return h.wNAFCached(this,f,U,y=>{const x=n.invertBatch(y.map(w=>w.pz));return y.map((w,E)=>w.toAffine(x[E])).map(d.fromAffine)})}multiplyUnsafe(U){const y=d.ZERO;if(U===lf)return y;if(a(U),U===Wo)return this;const{endo:x}=t;if(!x)return h.unsafeLadder(this,U);let{k1neg:w,k1:E,k2neg:S,k2:M}=x.splitScalar(U),A=y,C=y,I=this;for(;E>lf||M>lf;)E&Wo&&(A=A.add(I)),M&Wo&&(C=C.add(I)),I=I.double(),E>>=Wo,M>>=Wo;return w&&(A=A.negate()),S&&(C=C.negate()),C=new d(n.mul(C.px,x.beta),C.py,C.pz),A.add(C)}multiply(U){a(U);let y=U,x,w;const{endo:E}=t;if(E){const{k1neg:S,k1:M,k2neg:A,k2:C}=E.splitScalar(y);let{p:I,f:R}=this.wNAF(M),{p:L,f:_}=this.wNAF(C);I=h.constTimeNegate(S,I),L=h.constTimeNegate(A,L),L=new d(n.mul(L.px,E.beta),L.py,L.pz),x=I.add(L),w=R.add(_)}else{const{p:S,f:M}=this.wNAF(y);x=S,w=M}return d.normalizeZ([x,w])[0]}multiplyAndAddUnsafe(U,y,x){const w=d.BASE,E=(M,A)=>A===lf||A===Wo||!M.equals(w)?M.multiplyUnsafe(A):M.multiply(A),S=E(this,y).add(E(U,x));return S.is0()?void 0:S}toAffine(U){const{px:y,py:x,pz:w}=this,E=this.is0();U==null&&(U=E?n.ONE:n.inv(w));const S=n.mul(y,U),M=n.mul(x,U),A=n.mul(w,U);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:S,y:M}}isTorsionFree(){const{h:U,isTorsionFree:y}=t;if(U===Wo)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:U,clearCofactor:y}=t;return U===Wo?this:y?y(d,this):this.multiplyUnsafe(t.h)}toRawBytes(U=!0){return this.assertValidity(),r(d,this,U)}toHex(U=!0){return jm(this.toRawBytes(U))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const u=t.nBitLength,h=lae(d,t.endo?Math.ceil(u/2):u);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function hae(e){const t=OH(e);return Ub(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function pae(e){const t=hae(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(F){return lf<F&&F<n.ORDER}function a(F){return _s(F,r)}function l(F){return KS(F,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:u}=uae({...t,toBytes(F,z,H){const G=z.toAffine(),V=n.toBytes(G.x),Y=Q5;return H?Y(Uint8Array.from([z.hasEvenY()?2:3]),V):Y(Uint8Array.from([4]),V,n.toBytes(G.y))},fromBytes(F){const z=F.length,H=F[0],G=F.subarray(1);if(z===i&&(H===2||H===3)){const V=fh(G);if(!o(V))throw new Error("Point is not on curve");const Y=d(V);let K=n.sqrt(Y);const q=(K&Wo)===Wo;return(H&1)===1!==q&&(K=n.neg(K)),{x:V,y:K}}else if(z===s&&H===4){const V=n.fromBytes(G.subarray(0,n.BYTES)),Y=n.fromBytes(G.subarray(n.BYTES,2*n.BYTES));return{x:V,y:Y}}else throw new Error(`Point of length ${z} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=F=>jm(Fm(F,t.nByteLength));function g(F){const z=r>>Wo;return F>z}function U(F){return g(F)?a(-F):F}const y=(F,z,H)=>fh(F.slice(z,H));class x{constructor(z,H,G){this.r=z,this.s=H,this.recovery=G,this.assertValidity()}static fromCompact(z){const H=t.nByteLength;return z=Ia("compactSignature",z,H*2),new x(y(z,0,H),y(z,H,2*H))}static fromDER(z){const{r:H,s:G}=Iu.toSig(Ia("DER",z));return new x(H,G)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new x(this.r,this.s,z)}recoverPublicKey(z){const{r:H,s:G,recovery:V}=this,Y=C(Ia("msgHash",z));if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");const K=V===2||V===3?H+t.n:H;if(K>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=V&1?"03":"02",se=f.fromHex(q+h(K)),de=l(K),xe=a(-Y*de),ve=a(G*de),ue=f.BASE.multiplyAndAddUnsafe(se,xe,ve);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Bm(this.toDERHex())}toDERHex(){return Iu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bm(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const w={isValidPrivateKey(F){try{return c(F),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const F=LH(t.n);return oae(t.randomBytes(F),t.n)},precompute(F=8,z=f.BASE){return z._setWindowSize(F),z.multiply(BigInt(3)),z}};function E(F,z=!0){return f.fromPrivateKey(F).toRawBytes(z)}function S(F){const z=F instanceof Uint8Array,H=typeof F=="string",G=(z||H)&&F.length;return z?G===i||G===s:H?G===2*i||G===2*s:F instanceof f}function M(F,z,H=!0){if(S(F))throw new Error("first arg must be private key");if(!S(z))throw new Error("second arg must be public key");return f.fromHex(z).multiply(c(F)).toRawBytes(H)}const A=t.bits2int||function(F){const z=fh(F),H=F.length*8-t.nBitLength;return H>0?z>>BigInt(H):z},C=t.bits2int_modN||function(F){return a(A(F))},I=VM(t.nBitLength);function R(F){if(typeof F!="bigint")throw new Error("bigint expected");if(!(lf<=F&&F<I))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Fm(F,t.nByteLength)}function L(F,z,H=_){if(["recovered","canonical"].some(le=>le in H))throw new Error("sign() legacy options not supported");const{hash:G,randomBytes:V}=t;let{lowS:Y,prehash:K,extraEntropy:q}=H;Y==null&&(Y=!0),F=Ia("msgHash",F),K&&(F=Ia("prehashed msgHash",G(F)));const se=C(F),de=c(z),xe=[R(de),R(se)];if(q!=null){const le=q===!0?V(n.BYTES):q;xe.push(Ia("extraEntropy",le))}const ve=Q5(...xe),ue=se;function te(le){const he=A(le);if(!u(he))return;const we=l(he),Se=f.BASE.multiply(he).toAffine(),De=a(Se.x);if(De===lf)return;const Ge=a(we*a(ue+De*de));if(Ge===lf)return;let ht=(Se.x===De?0:2)|Number(Se.y&Wo),st=Ge;return Y&&g(Ge)&&(st=U(Ge),ht^=1),new x(De,st,ht)}return{seed:ve,k2sig:te}}const _={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};function $(F,z,H=_){const{seed:G,k2sig:V}=L(F,z,H),Y=t;return _H(Y.hash.outputLen,Y.nByteLength,Y.hmac)(G,V)}f.BASE._setWindowSize(8);function B(F,z,H,G=O){var Se;const V=F;if(z=Ia("msgHash",z),H=Ia("publicKey",H),"strict"in G)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:K}=G;let q,se;try{if(typeof V=="string"||V instanceof Uint8Array)try{q=x.fromDER(V)}catch(De){if(!(De instanceof Iu.Err))throw De;q=x.fromCompact(V)}else if(typeof V=="object"&&typeof V.r=="bigint"&&typeof V.s=="bigint"){const{r:De,s:Ge}=V;q=new x(De,Ge)}else throw new Error("PARSE");se=f.fromHex(H)}catch(De){if(De.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&q.hasHighS())return!1;K&&(z=t.hash(z));const{r:de,s:xe}=q,ve=C(z),ue=l(xe),te=a(ve*ue),le=a(de*ue),he=(Se=f.BASE.multiplyAndAddUnsafe(se,te,le))==null?void 0:Se.toAffine();return he?a(he.x)===de:!1}return{CURVE:t,getPublicKey:E,getSharedSecret:M,sign:$,verify:B,ProjectivePoint:f,Signature:x,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mae(e){return{hash:e,hmac:(t,...n)=>hH(e,t,noe(...n)),randomBytes:roe}}function gae(e,t){const n=r=>pae({...e,...mae(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jH=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),bP=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),bae=BigInt(1),YS=BigInt(2),UP=(e,t)=>(e+t/YS)/t;function Uae(e){const t=jH,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),f=e*e*e%t,c=f*f*e%t,d=_o(c,n,t)*c%t,u=_o(d,n,t)*c%t,h=_o(u,YS,t)*f%t,g=_o(h,i,t)*h%t,U=_o(g,s,t)*g%t,y=_o(U,a,t)*U%t,x=_o(y,l,t)*y%t,w=_o(x,a,t)*U%t,E=_o(w,n,t)*c%t,S=_o(E,o,t)*g%t,M=_o(S,r,t)*f%t,A=_o(M,YS,t);if(!ZS.eql(ZS.sqr(A),e))throw new Error("Cannot find square root");return A}const ZS=sae(jH,void 0,void 0,{sqrt:Uae}),wd=gae({a:BigInt(0),b:BigInt(7),Fp:ZS,n:bP,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=bP,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-bae*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=UP(s*e,t),l=UP(-r*e,t);let f=_s(e-a*n-l*i,t),c=_s(-a*r-l*s,t);const d=f>o,u=c>o;if(d&&(f=t-f),u&&(c=t-c),f>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:f,k2neg:u,k2:c}}}},mH);BigInt(0);wd.ProjectivePoint;const J5="0x0000000000000000000000000000000000000000",yP="0x0000000000000000000000000000000000000000000000000000000000000000",xP=BigInt(0),vP=BigInt(1),wP=BigInt(2),EP=BigInt(27),SP=BigInt(28),gU=BigInt(35),F1={};function kP(e){return Mh(ls(e),32)}var sm,om,am,Ju;const Ta=class Ta{constructor(t,n,r,i){be(this,sm);be(this,om);be(this,am);be(this,Ju);bb(t,F1,"Signature"),J(this,sm,n),J(this,om,r),J(this,am,i),J(this,Ju,null)}get r(){return W(this,sm)}set r(t){ie(Pp(t)===32,"invalid r","value",t),J(this,sm,Ze(t))}get s(){return W(this,om)}set s(t){ie(Pp(t)===32,"invalid s","value",t);const n=Ze(t);ie(parseInt(n.substring(0,3))<8,"non-canonical s","value",n),J(this,om,n)}get v(){return W(this,am)}set v(t){const n=Nt(t,"value");ie(n===27||n===28,"invalid v","v",t),J(this,am,n)}get networkV(){return W(this,Ju)}get legacyChainId(){const t=this.networkV;return t==null?null:Ta.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=Ht(this.s);return this.yParity&&(t[0]|=128),Ze(t)}get compactSerialized(){return wr([this.r,this.yParityAndS])}get serialized(){return wr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Ta(F1,this.r,this.s,this.v);return this.networkV&&J(t,Ju,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const n=et(t,"v");return n==EP||n==SP?xP:(ie(n>=gU,"invalid EIP-155 v","v",t),(n-gU)/wP)}static getChainIdV(t,n){return et(t)*wP+BigInt(35+n-27)}static getNormalizedV(t){const n=et(t);return n===xP||n===EP?27:n===vP||n===SP?28:(ie(n>=gU,"invalid v","v",t),n&vP?27:28)}static from(t){function n(f,c){ie(f,c,"signature",t)}if(t==null)return new Ta(F1,yP,yP,27);if(typeof t=="string"){const f=Ht(t,"signature");if(f.length===64){const c=Ze(f.slice(0,32)),d=f.slice(32,64),u=d[0]&128?28:27;return d[0]&=127,new Ta(F1,c,Ze(d),u)}if(f.length===65){const c=Ze(f.slice(0,32)),d=f.slice(32,64);n((d[0]&128)===0,"non-canonical s");const u=Ta.getNormalizedV(f[64]);return new Ta(F1,c,Ze(d),u)}n(!1,"invalid raw signature length")}if(t instanceof Ta)return t.clone();const r=t.r;n(r!=null,"missing r");const i=kP(r),s=function(f,c){if(f!=null)return kP(f);if(c!=null){n(Mn(c,32),"invalid yParityAndS");const d=Ht(c);return d[0]&=127,Ze(d)}n(!1,"missing s")}(t.s,t.yParityAndS);n((Ht(s)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(f,c,d){if(f!=null){const u=et(f);return{networkV:u>=gU?u:void 0,v:Ta.getNormalizedV(u)}}if(c!=null)return n(Mn(c,32),"invalid yParityAndS"),{v:Ht(c)[0]&128?28:27};if(d!=null){switch(Nt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),l=new Ta(F1,i,s,a);return o&&J(l,Ju,o),n(t.yParity==null||Nt(t.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(t.yParityAndS==null||t.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};sm=new WeakMap,om=new WeakMap,am=new WeakMap,Ju=new WeakMap;let nl=Ta;var Qc;const Mu=class Mu{constructor(t){be(this,Qc);ie(Pp(t)===32,"invalid private key","privateKey","[REDACTED]"),J(this,Qc,Ze(t))}get privateKey(){return W(this,Qc)}get publicKey(){return Mu.computePublicKey(W(this,Qc))}get compressedPublicKey(){return Mu.computePublicKey(W(this,Qc),!0)}sign(t){ie(Pp(t)===32,"invalid digest length","digest",t);const n=wd.sign(as(t),as(W(this,Qc)),{lowS:!0});return nl.from({r:E0(n.r,32),s:E0(n.s,32),v:n.recovery?28:27})}computeSharedSecret(t){const n=Mu.computePublicKey(t);return Ze(wd.getSharedSecret(as(W(this,Qc)),Ht(n),!1))}static computePublicKey(t,n){let r=Ht(t,"key");if(r.length===32){const s=wd.getPublicKey(r,!!n);return Ze(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=wd.ProjectivePoint.fromHex(r);return Ze(i.toRawBytes(n))}static recoverPublicKey(t,n){ie(Pp(t)===32,"invalid digest length","digest",t);const r=nl.from(n);let i=wd.Signature.fromCompact(as(wr([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(as(t));return ie(s!=null,"invalid signautre for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(t,n,r){const i=wd.ProjectivePoint.fromHex(Mu.computePublicKey(t).substring(2)),s=wd.ProjectivePoint.fromHex(Mu.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};Qc=new WeakMap;let e2=Mu;const yae=BigInt(0),xae=BigInt(36);function CP(e){e=e.toLowerCase();const t=e.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=t[i].charCodeAt(0);const r=Ht(Tr(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(r[i>>1]&15)>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const WM={};for(let e=0;e<10;e++)WM[String(e)]=String(e);for(let e=0;e<26;e++)WM[String.fromCharCode(65+e)]=String(10+e);const MP=15;function vae(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map(r=>WM[r]).join("");for(;t.length>=MP;){let r=t.substring(0,MP);t=parseInt(r,10)%97+t.substring(r.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const wae=function(){const e={};for(let t=0;t<36;t++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[t];e[n]=BigInt(t)}return e}();function Eae(e){e=e.toLowerCase();let t=yae;for(let n=0;n<e.length;n++)t=t*xae+wae[e[n]];return t}function bn(e){if(ie(typeof e=="string","invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=CP(e);return ie(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ie(e.substring(2,4)===vae(e),"bad icap checksum","address",e);let t=Eae(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return CP("0x"+t)}ie(!1,"invalid address","address",e)}function Sae(e){const t=bn(e.from);let r=et(e.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,bn(pr(Tr(Ah([t,r])),12))}function BH(e){return e&&typeof e.getAddress=="function"}async function gw(e,t){const n=await t;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ee(typeof e!="string","unconfigured name","UNCONFIGURED_NAME",{value:e}),ie(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),bn(n)}function fs(e,t){if(typeof e=="string")return e.match(/^0x[0-9a-f]{40}$/i)?bn(e):(Ee(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),gw(e,t.resolveName(e)));if(BH(e))return gw(e,e.getAddress());if(e&&typeof e.then=="function")return gw(e,e);ie(!1,"unsupported addressable value","target",e)}const Fc={};function Ke(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new Wi(Fc,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function Qt(e,t){return new Wi(Fc,`bytes${t||""}`,e,{size:t})}const AP=Symbol.for("_ethers_typed");var eh;const Vc=class Vc{constructor(t,n,r,i){ce(this,"type");ce(this,"value");be(this,eh);ce(this,"_typedSymbol");i==null&&(i=null),bb(Fc,t,"Typed"),ut(this,{_typedSymbol:AP,type:n,value:r}),J(this,eh,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return W(this,eh)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return W(this,eh)===!0?-1:W(this,eh)===!1?this.value.length:null}static from(t,n){return new Vc(Fc,t,n)}static uint8(t){return Ke(t,8)}static uint16(t){return Ke(t,16)}static uint24(t){return Ke(t,24)}static uint32(t){return Ke(t,32)}static uint40(t){return Ke(t,40)}static uint48(t){return Ke(t,48)}static uint56(t){return Ke(t,56)}static uint64(t){return Ke(t,64)}static uint72(t){return Ke(t,72)}static uint80(t){return Ke(t,80)}static uint88(t){return Ke(t,88)}static uint96(t){return Ke(t,96)}static uint104(t){return Ke(t,104)}static uint112(t){return Ke(t,112)}static uint120(t){return Ke(t,120)}static uint128(t){return Ke(t,128)}static uint136(t){return Ke(t,136)}static uint144(t){return Ke(t,144)}static uint152(t){return Ke(t,152)}static uint160(t){return Ke(t,160)}static uint168(t){return Ke(t,168)}static uint176(t){return Ke(t,176)}static uint184(t){return Ke(t,184)}static uint192(t){return Ke(t,192)}static uint200(t){return Ke(t,200)}static uint208(t){return Ke(t,208)}static uint216(t){return Ke(t,216)}static uint224(t){return Ke(t,224)}static uint232(t){return Ke(t,232)}static uint240(t){return Ke(t,240)}static uint248(t){return Ke(t,248)}static uint256(t){return Ke(t,256)}static uint(t){return Ke(t,256)}static int8(t){return Ke(t,-8)}static int16(t){return Ke(t,-16)}static int24(t){return Ke(t,-24)}static int32(t){return Ke(t,-32)}static int40(t){return Ke(t,-40)}static int48(t){return Ke(t,-48)}static int56(t){return Ke(t,-56)}static int64(t){return Ke(t,-64)}static int72(t){return Ke(t,-72)}static int80(t){return Ke(t,-80)}static int88(t){return Ke(t,-88)}static int96(t){return Ke(t,-96)}static int104(t){return Ke(t,-104)}static int112(t){return Ke(t,-112)}static int120(t){return Ke(t,-120)}static int128(t){return Ke(t,-128)}static int136(t){return Ke(t,-136)}static int144(t){return Ke(t,-144)}static int152(t){return Ke(t,-152)}static int160(t){return Ke(t,-160)}static int168(t){return Ke(t,-168)}static int176(t){return Ke(t,-176)}static int184(t){return Ke(t,-184)}static int192(t){return Ke(t,-192)}static int200(t){return Ke(t,-200)}static int208(t){return Ke(t,-208)}static int216(t){return Ke(t,-216)}static int224(t){return Ke(t,-224)}static int232(t){return Ke(t,-232)}static int240(t){return Ke(t,-240)}static int248(t){return Ke(t,-248)}static int256(t){return Ke(t,-256)}static int(t){return Ke(t,-256)}static bytes1(t){return Qt(t,1)}static bytes2(t){return Qt(t,2)}static bytes3(t){return Qt(t,3)}static bytes4(t){return Qt(t,4)}static bytes5(t){return Qt(t,5)}static bytes6(t){return Qt(t,6)}static bytes7(t){return Qt(t,7)}static bytes8(t){return Qt(t,8)}static bytes9(t){return Qt(t,9)}static bytes10(t){return Qt(t,10)}static bytes11(t){return Qt(t,11)}static bytes12(t){return Qt(t,12)}static bytes13(t){return Qt(t,13)}static bytes14(t){return Qt(t,14)}static bytes15(t){return Qt(t,15)}static bytes16(t){return Qt(t,16)}static bytes17(t){return Qt(t,17)}static bytes18(t){return Qt(t,18)}static bytes19(t){return Qt(t,19)}static bytes20(t){return Qt(t,20)}static bytes21(t){return Qt(t,21)}static bytes22(t){return Qt(t,22)}static bytes23(t){return Qt(t,23)}static bytes24(t){return Qt(t,24)}static bytes25(t){return Qt(t,25)}static bytes26(t){return Qt(t,26)}static bytes27(t){return Qt(t,27)}static bytes28(t){return Qt(t,28)}static bytes29(t){return Qt(t,29)}static bytes30(t){return Qt(t,30)}static bytes31(t){return Qt(t,31)}static bytes32(t){return Qt(t,32)}static address(t){return new Vc(Fc,"address",t)}static bool(t){return new Vc(Fc,"bool",!!t)}static bytes(t){return new Vc(Fc,"bytes",t)}static string(t){return new Vc(Fc,"string",t)}static array(t,n){throw new Error("not implemented yet")}static tuple(t,n){throw new Error("not implemented yet")}static overrides(t){return new Vc(Fc,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===AP}static dereference(t,n){if(Vc.isTyped(t)){if(t.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${t.type}`);return t.value}return t}};eh=new WeakMap;let Wi=Vc;class kae extends Lf{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,n){let r=Wi.dereference(n,"string");try{r=bn(r)}catch(i){return this._throwError(i.message,n)}return t.writeValue(r)}decode(t){return bn(E0(t.readValue(),20))}}class Cae extends Lf{constructor(n){super(n.name,n.type,"_",n.dynamic);ce(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function FH(e,t,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=t.map(f=>{const c=f.localName;return Ee(c,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:n}),Ee(!l[c],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:n}),l[c]=!0,n[c]})}else ie(!1,"invalid tuple value","tuple",n);ie(t.length===r.length,"types/value length mismatch","tuple",n);let i=new HS,s=new HS,o=[];t.forEach((l,f)=>{let c=r[f];if(l.dynamic){let d=s.length;l.encode(s,c);let u=i.writeUpdatableValue();o.push(h=>{u(h+d)})}else l.encode(i,c)}),o.forEach(l=>{l(i.length)});let a=e.appendWriter(i);return a+=e.appendWriter(s),a}function $H(e,t){let n=[],r=[],i=e.subReader(0);return t.forEach(s=>{let o=null;if(s.dynamic){let a=e.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(f){if(zi(f,"BUFFER_OVERRUN"))throw f;o=f,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(e)}catch(a){if(zi(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),Lm.fromItems(n,r)}class Mae extends Lf{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);ce(this,"coder");ce(this,"length");ut(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=Wi.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),Zz(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return FH(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Ee(r*cs<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*cs,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new Cae(this.coder));return $H(n,i)}}class Aae extends Lf{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,n){const r=Wi.dereference(n,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class zH extends Lf{constructor(t,n){super(t,t,n,!0)}defaultValue(){return"0x"}encode(t,n){n=as(n);let r=t.writeValue(n.length);return r+=t.writeBytes(n),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class Tae extends zH{constructor(t){super("bytes",t)}decode(t){return Ze(super.decode(t))}}class Iae extends Lf{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);ce(this,"size");ut(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=as(Wi.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return Ze(n.readBytes(this.size))}}const Nae=new Uint8Array([]);class Rae extends Lf{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,n){return n!=null&&this._throwError("not null",n),t.writeBytes(Nae)}decode(t){return t.readBytes(0),null}}const _ae=BigInt(0),Pae=BigInt(1),Dae=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Lae extends Lf{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);ce(this,"size");ce(this,"signed");ut(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=et(Wi.dereference(r,this.type)),s=Tu(Dae,cs*8);if(this.signed){let o=Tu(s,this.size*8-1);(i>o||i<-(o+Pae))&&this._throwError("value out-of-bounds",r),i=Jz(i,8*cs)}else(i<_ae||i>Tu(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=Tu(n.readValue(),this.size*8);return this.signed&&(r=U3(r,this.size*8)),r}}class Oae extends zH{constructor(t){super("string",t)}defaultValue(){return""}encode(t,n){return super.encode(t,gf(Wi.dereference(n,"string")))}decode(t){return y3(super.decode(t))}}class bU extends Lf{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);ce(this,"coders");ut(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=Wi.dereference(r,"tuple");return FH(n,this.coders,i)}decode(n){return $H(n,this.coders)}}function Th(e){return Tr(gf(e))}var jae="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const TP=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),IP=4;function Bae(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),i=1,s=[0,1];for(let M=1;M<r;M++)s.push(i+=n());let o=n(),a=t;t+=o;let l=0,f=0;function c(){return l==0&&(f=f<<8|e[t++],l=8),f>>--l&1}const d=31,u=2**d,h=u>>>1,g=h>>1,U=u-1;let y=0;for(let M=0;M<d;M++)y=y<<1|c();let x=[],w=0,E=u;for(;;){let M=Math.floor(((y-w+1)*i-1)/E),A=0,C=r;for(;C-A>1;){let L=A+C>>>1;M<s[L]?C=L:A=L}if(A==0)break;x.push(A);let I=w+Math.floor(E*s[A]/i),R=w+Math.floor(E*s[A+1]/i)-1;for(;!((I^R)&h);)y=y<<1&U|c(),I=I<<1&U,R=R<<1&U|1;for(;I&~R&g;)y=y&h|y<<1&U>>>1|c(),I=I<<1^h,R=(R^h)<<1|h|1;w=I,E=1+R-I}let S=r-4;return x.map(M=>{switch(M-S){case 3:return S+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return S+256+(e[a++]<<8|e[a++]);case 1:return S+e[a++];default:return M-1}})}function Fae(e){let t=0;return()=>e[t++]}function HH(e){return Fae(Bae($ae(e)))}function $ae(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>t[i.charCodeAt(0)]=s);let n=e.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|t[e.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function zae(e){return e&1?~e>>1:e>>1}function Hae(e,t){let n=Array(e);for(let r=0,i=0;r<e;r++)n[r]=i+=zae(t());return n}function t2(e,t=0){let n=[];for(;;){let r=e(),i=e();if(!i)break;t+=r;for(let s=0;s<i;s++)n.push(t+s);t+=i+1}return n}function VH(e){return n2(()=>{let t=t2(e);if(t.length)return t})}function WH(e){let t=[];for(;;){let n=e();if(n==0)break;t.push(Vae(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(Wae(n,e))}return t.flat()}function n2(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function GH(e,t,n){let r=Array(e).fill().map(()=>[]);for(let i=0;i<t;i++)Hae(e,n).forEach((s,o)=>r[o].push(s));return r}function Vae(e,t){let n=1+t(),r=t(),i=n2(t);return GH(i.length,1+e,t).flatMap((o,a)=>{let[l,...f]=o;return Array(i[a]).fill().map((c,d)=>{let u=d*r;return[l+d*n,f.map(h=>h+u)]})})}function Wae(e,t){let n=1+t();return GH(n,1+e,t).map(i=>[i[0],i.slice(1)])}function Gae(e){let t=[],n=t2(e);return i(r([]),[]),t;function r(s){let o=e(),a=n2(()=>{let l=t2(e).map(f=>n[f]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&t.push(a);for(let f of o)for(let c of f.Q)i(f,[...a,c],l)}}}function Xae(e){return e.toString(16).toUpperCase().padStart(2,"0")}function XH(e){return`{${Xae(e)}}`}function Kae(e){let t=[];for(let n=0,r=e.length;n<r;){let i=e.codePointAt(n);n+=i<65536?1:2,t.push(i)}return t}function $m(e){let n=e.length;if(n<4096)return String.fromCodePoint(...e);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...e.slice(i,i+=4096)));return r.join("")}function Yae(e,t){let n=e.length,r=n-t.length;for(let i=0;r==0&&i<n;i++)r=e[i]-t[i];return r}var Zae="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const r2=44032,w3=4352,E3=4449,S3=4519,KH=19,YH=21,zm=28,k3=YH*zm,qae=KH*k3,Qae=r2+qae,Jae=w3+KH,ele=E3+YH,tle=S3+zm;function Yg(e){return e>>24&255}function ZH(e){return e&16777215}let qS,NP,QS,vy;function nle(){let e=HH(Zae);qS=new Map(VH(e).flatMap((t,n)=>t.map(r=>[r,n+1<<24]))),NP=new Set(t2(e)),QS=new Map,vy=new Map;for(let[t,n]of WH(e)){if(!NP.has(t)&&n.length==2){let[r,i]=n,s=vy.get(r);s||(s=new Map,vy.set(r,s)),s.set(i,t)}QS.set(t,n.reverse())}}function qH(e){return e>=r2&&e<Qae}function rle(e,t){if(e>=w3&&e<Jae&&t>=E3&&t<ele)return r2+(e-w3)*k3+(t-E3)*zm;if(qH(e)&&t>S3&&t<tle&&(e-r2)%zm==0)return e+(t-S3);{let n=vy.get(e);return n&&(n=n.get(t),n)?n:-1}}function QH(e){qS||nle();let t=[],n=[],r=!1;function i(s){let o=qS.get(s);o&&(r=!0,s|=o),t.push(s)}for(let s of e)for(;;){if(s<128)t.push(s);else if(qH(s)){let o=s-r2,a=o/k3|0,l=o%k3/zm|0,f=o%zm;i(w3+a),i(E3+l),f>0&&i(S3+f)}else{let o=QS.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&t.length>1){let s=Yg(t[0]);for(let o=1;o<t.length;o++){let a=Yg(t[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let f=t[l+1];if(t[l+1]=t[l],t[l]=f,!l||(s=Yg(t[--l]),s<=a))break}s=Yg(t[o])}}return t}function ile(e){let t=[],n=[],r=-1,i=0;for(let s of e){let o=Yg(s),a=ZH(s);if(r==-1)o==0?r=a:t.push(a);else if(i>0&&i>=o)o==0?(t.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=rle(r,a);l>=0?r=l:i==0&&o==0?(t.push(r),r=a):(n.push(a),i=o)}}return r>=0&&t.push(r,...n),t}function JH(e){return QH(e).map(ZH)}function sle(e){return ile(QH(e))}const RP=45,eV=".",tV=65039,nV=1,C3=e=>Array.from(e);function i2(e,t){return e.P.has(t)||e.Q.has(t)}class ole extends Array{get is_emoji(){return!0}}let JS,rV,Nu,ek,iV,Lp,bw,sp,hu,_P,tk;function GM(){if(JS)return;let e=HH(jae);const t=()=>t2(e),n=()=>new Set(t()),r=(c,d)=>d.forEach(u=>c.add(u));JS=new Map(WH(e)),rV=n(),Nu=t(),ek=new Set(t().map(c=>Nu[c])),Nu=new Set(Nu),iV=n(),n();let i=VH(e),s=e();const o=()=>{let c=new Set;return t().forEach(d=>r(c,i[d])),r(c,t()),c};Lp=n2(c=>{let d=n2(e).map(u=>u+96);if(d.length){let u=c>=s;d[0]-=32,d=$m(d),u&&(d=`Restricted[${d}]`);let h=o(),g=o(),U=!e();return{N:d,P:h,Q:g,M:U,R:u}}}),bw=n(),sp=new Map;let a=t().concat(C3(bw)).sort((c,d)=>c-d);a.forEach((c,d)=>{let u=e(),h=a[d]=u?a[d-u]:{V:[],M:new Map};h.V.push(c),bw.has(c)||sp.set(c,h)});for(let{V:c,M:d}of new Set(sp.values())){let u=[];for(let g of c){let U=Lp.filter(x=>i2(x,g)),y=u.find(({G:x})=>U.some(w=>x.has(w)));y||(y={G:new Set,V:[]},u.push(y)),y.V.push(g),r(y.G,U)}let h=u.flatMap(g=>C3(g.G));for(let{G:g,V:U}of u){let y=new Set(h.filter(x=>!g.has(x)));for(let x of U)d.set(x,y)}}hu=new Set;let l=new Set;const f=c=>hu.has(c)?l.add(c):hu.add(c);for(let c of Lp){for(let d of c.P)f(d);for(let d of c.Q)f(d)}for(let c of hu)!sp.has(c)&&!l.has(c)&&sp.set(c,nV);r(hu,JH(hu)),_P=Gae(e).map(c=>ole.from(c)).sort(Yae),tk=new Map;for(let c of _P){let d=[tk];for(let u of c){let h=d.map(g=>{let U=g.get(u);return U||(U=new Map,g.set(u,U)),U});u===tV?d.push(...h):d=h}for(let u of d)u.V=c}}function XM(e){return(sV(e)?"":`${KM(B9([e]))} `)+XH(e)}function KM(e){return`"${e}"`}function ale(e){if(e.length>=4&&e[2]==RP&&e[3]==RP)throw new Error(`invalid label extension: "${$m(e.slice(0,4))}"`)}function lle(e){for(let n=e.lastIndexOf(95);n>0;)if(e[--n]!==95)throw new Error("underscore allowed only at start")}function cle(e){let t=e[0],n=TP.get(t);if(n)throw y5(`leading ${n}`);let r=e.length,i=-1;for(let s=1;s<r;s++){t=e[s];let o=TP.get(t);if(o){if(i==s)throw y5(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw y5(`trailing ${n}`)}function B9(e,t=1/0,n=XH){let r=[];fle(e[0])&&r.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,s=e.length;for(let o=0;o<s;o++){let a=e[o];sV(a)&&(r.push($m(e.slice(i,o))),r.push(n(a)),i=o+1)}return r.push($m(e.slice(i,s))),r.join("")}function fle(e){return GM(),Nu.has(e)}function sV(e){return GM(),iV.has(e)}function dle(e){return mle(ule(e,sle,Ule))}function ule(e,t,n){if(!e)return[];GM();let r=0;return e.split(eV).map(i=>{let s=Kae(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=ble(s,t,n),l=a.length,f;if(!l)throw new Error("empty label");let c=o.output=a.flat();if(lle(c),!(o.emoji=l>1||a[0].is_emoji)&&c.every(u=>u<128))ale(c),f="ASCII";else{let u=a.flatMap(h=>h.is_emoji?[]:h);if(!u.length)f="Emoji";else{if(Nu.has(c[0]))throw y5("leading combining mark");for(let U=1;U<l;U++){let y=a[U];if(!y.is_emoji&&Nu.has(y[0]))throw y5(`emoji + combining mark: "${$m(a[U-1])} + ${B9([y[0]])}"`)}cle(c);let h=C3(new Set(u)),[g]=ple(h);gle(g,u),hle(g,h),f=g.N}}o.type=f}catch(a){o.error=a}return o})}function hle(e,t){let n,r=[];for(let i of t){let s=sp.get(i);if(s===nV)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):C3(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>i2(i,s)))throw new Error(`whole-script confusable: ${e.N}/${i.N}`)}}function ple(e){let t=Lp;for(let n of e){let r=t.filter(i=>i2(i,n));if(!r.length)throw Lp.some(i=>i2(i,n))?aV(t[0],n):oV(n);if(t=r,r.length==1)break}return t}function mle(e){return e.map(({input:t,error:n,output:r})=>{if(n){let i=n.message;throw new Error(e.length==1?i:`Invalid label ${KM(B9(t,63))}: ${i}`)}return $m(r)}).join(eV)}function oV(e){return new Error(`disallowed character: ${XM(e)}`)}function aV(e,t){let n=XM(t),r=Lp.find(i=>i.P.has(t));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function y5(e){return new Error(`illegal placement: ${e}`)}function gle(e,t){for(let n of t)if(!i2(e,n))throw aV(e,n);if(e.M){let n=JH(t);for(let r=1,i=n.length;r<i;r++)if(ek.has(n[r])){let s=r+1;for(let o;s<i&&ek.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${XM(o)}`);if(s-r>IP)throw new Error(`excessive non-spacing marks: ${KM(B9(n.slice(r-1,s)))} (${s-r}/${IP})`);r=s}}}function ble(e,t,n){let r=[],i=[];for(e=e.slice().reverse();e.length;){let s=yle(e);if(s)i.length&&(r.push(t(i)),i=[]),r.push(n(s));else{let o=e.pop();if(hu.has(o))i.push(o);else{let a=JS.get(o);if(a)i.push(...a);else if(!rV.has(o))throw oV(o)}}}return i.length&&r.push(t(i)),r}function Ule(e){return e.filter(t=>t!=tV)}function yle(e,t){let n=tk,r,i=e.length;for(;i&&(n=n.get(e[--i]),!!n);){let{V:s}=n;s&&(r=s,e.length=i)}return r}const lV=new Uint8Array(32);lV.fill(0);function PP(e){return ie(e.length!==0,"invalid ENS name; empty component","comp",e),e}function cV(e){const t=gf(xle(e)),n=[];if(e.length===0)return n;let r=0;for(let i=0;i<t.length;i++)t[i]===46&&(n.push(PP(t.slice(r,i))),r=i+1);return ie(r<t.length,"invalid ENS name; empty component","name",e),n.push(PP(t.slice(r))),n}function xle(e){try{if(e.length===0)throw new Error("empty label");return dle(e)}catch(t){ie(!1,`invalid ENS name (${t.message})`,"name",e)}}function nk(e){ie(typeof e=="string","invalid ENS name; not a string","name",e),ie(e.length,"invalid ENS name (empty label)","name",e);let t=lV;const n=cV(e);for(;n.length;)t=Tr(wr([t,Tr(n.pop())]));return Ze(t)}function vle(e,t){const n=t;return ie(n<=255,"DNS encoded label cannot exceed 255","length",n),Ze(wr(cV(e).map(r=>{ie(r.length<=n,`label ${JSON.stringify(e)} exceeds ${n} bytes`,"name",e);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function Uw(e,t){return{address:bn(e),storageKeys:t.map((n,r)=>(ie(Mn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function i1(e){if(Array.isArray(e))return e.map((n,r)=>Array.isArray(n)?(ie(n.length===2,"invalid slot set",`value[${r}]`,n),Uw(n[0],n[1])):(ie(n!=null&&typeof n=="object","invalid address-slot set","value",e),Uw(n.address,n.storageKeys)));ie(e!=null&&typeof e=="object","invalid access list","value",e);const t=Object.keys(e).map(n=>{const r=e[n].reduce((i,s)=>(i[s]=!0,i),{});return Uw(n,Object.keys(r).sort())});return t.sort((n,r)=>n.address.localeCompare(r.address)),t}function wle(e){let t;return typeof e=="string"?t=e2.computePublicKey(e,!1):t=e.publicKey,bn(Tr("0x"+t.substring(4)).substring(26))}function Ele(e,t){return wle(e2.recoverPublicKey(e,t))}const ri=BigInt(0),Sle=BigInt(2),kle=BigInt(27),Cle=BigInt(28),Mle=BigInt(35),Ale=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),yw=4096*32;function DP(e,t){let n=e.toString(16);for(;n.length<2;)n="0"+n;return n+=S6(t).substring(4),"0x"+n}function F9(e){return e==="0x"?null:bn(e)}function YM(e,t){try{return i1(e)}catch(n){ie(!1,n.message,t,e)}}function yb(e,t){return e==="0x"?0:Nt(e,t)}function vr(e,t){if(e==="0x")return ri;const n=et(e,t);return ie(n<=Ale,"value exceeds uint size",t,n),n}function Pn(e,t){const n=et(e,"value"),r=ls(n);return ie(r.length<=32,"value too large",`tx.${t}`,n),r}function ZM(e){return i1(e).map(t=>[t.address,t.storageKeys])}function Tle(e,t){ie(Array.isArray(e),`invalid ${t}`,"value",e);for(let n=0;n<e.length;n++)ie(Mn(e[n],32),"invalid ${ param } hash",`value[${n}]`,e[n]);return e}function Ile(e){const t=D9(e);ie(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:yb(t[0],"nonce"),gasPrice:vr(t[1],"gasPrice"),gasLimit:vr(t[2],"gasLimit"),to:F9(t[3]),value:vr(t[4],"value"),data:Ze(t[5]),chainId:ri};if(t.length===6)return n;const r=vr(t[6],"v"),i=vr(t[7],"r"),s=vr(t[8],"s");if(i===ri&&s===ri)n.chainId=r;else{let o=(r-Mle)/Sle;o<ri&&(o=ri),n.chainId=o,ie(o!==ri||r===kle||r===Cle,"non-canonical legacy v","v",t[6]),n.signature=nl.from({r:Mh(t[7],32),s:Mh(t[8],32),v:r})}return n}function Nle(e,t){const n=[Pn(e.nonce,"nonce"),Pn(e.gasPrice||0,"gasPrice"),Pn(e.gasLimit,"gasLimit"),e.to||"0x",Pn(e.value,"value"),e.data];let r=ri;if(e.chainId!=ri)r=et(e.chainId,"tx.chainId"),ie(!t||t.networkV==null||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const s=e.signature.legacyChainId;s!=null&&(r=s)}if(!t)return r!==ri&&(n.push(ls(r)),n.push("0x"),n.push("0x")),Ah(n);let i=BigInt(27+t.yParity);return r!==ri?i=nl.getChainIdV(r,t.v):BigInt(t.v)!==i&&ie(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(ls(i)),n.push(ls(t.r)),n.push(ls(t.s)),Ah(n)}function qM(e,t){let n;try{if(n=yb(t[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{ie(!1,"invalid yParity","yParity",t[0])}const r=Mh(t[1],32),i=Mh(t[2],32),s=nl.from({r,s:i,yParity:n});e.signature=s}function Rle(e){const t=D9(Ht(e).slice(1));ie(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",Ze(e));const n={type:2,chainId:vr(t[0],"chainId"),nonce:yb(t[1],"nonce"),maxPriorityFeePerGas:vr(t[2],"maxPriorityFeePerGas"),maxFeePerGas:vr(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:vr(t[4],"gasLimit"),to:F9(t[5]),value:vr(t[6],"value"),data:Ze(t[7]),accessList:YM(t[8],"accessList")};return t.length===9||qM(n,t.slice(9)),n}function _le(e,t){const n=[Pn(e.chainId,"chainId"),Pn(e.nonce,"nonce"),Pn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pn(e.maxFeePerGas||0,"maxFeePerGas"),Pn(e.gasLimit,"gasLimit"),e.to||"0x",Pn(e.value,"value"),e.data,ZM(e.accessList||[])];return t&&(n.push(Pn(t.yParity,"yParity")),n.push(ls(t.r)),n.push(ls(t.s))),wr(["0x02",Ah(n)])}function Ple(e){const t=D9(Ht(e).slice(1));ie(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",Ze(e));const n={type:1,chainId:vr(t[0],"chainId"),nonce:yb(t[1],"nonce"),gasPrice:vr(t[2],"gasPrice"),gasLimit:vr(t[3],"gasLimit"),to:F9(t[4]),value:vr(t[5],"value"),data:Ze(t[6]),accessList:YM(t[7],"accessList")};return t.length===8||qM(n,t.slice(8)),n}function Dle(e,t){const n=[Pn(e.chainId,"chainId"),Pn(e.nonce,"nonce"),Pn(e.gasPrice||0,"gasPrice"),Pn(e.gasLimit,"gasLimit"),e.to||"0x",Pn(e.value,"value"),e.data,ZM(e.accessList||[])];return t&&(n.push(Pn(t.yParity,"recoveryParam")),n.push(ls(t.r)),n.push(ls(t.s))),wr(["0x01",Ah(n)])}function Lle(e){let t=D9(Ht(e).slice(1)),n="3",r=null;if(t.length===4&&Array.isArray(t[0])){n="3 (network format)";const s=t[1],o=t[2],a=t[3];ie(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),ie(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),ie(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),ie(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),ie(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let l=0;l<t[1].length;l++)r.push({data:s[l],commitment:o[l],proof:a[l]});t=t[0]}ie(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${n}`,"data",Ze(e));const i={type:3,chainId:vr(t[0],"chainId"),nonce:yb(t[1],"nonce"),maxPriorityFeePerGas:vr(t[2],"maxPriorityFeePerGas"),maxFeePerGas:vr(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:vr(t[4],"gasLimit"),to:F9(t[5]),value:vr(t[6],"value"),data:Ze(t[7]),accessList:YM(t[8],"accessList"),maxFeePerBlobGas:vr(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(i.blobs=r),ie(i.to!=null,`invalid address for transaction type: ${n}`,"data",e),ie(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let s=0;s<i.blobVersionedHashes.length;s++)ie(Mn(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",e);return t.length===11||qM(i,t.slice(11)),i}function Ole(e,t,n){const r=[Pn(e.chainId,"chainId"),Pn(e.nonce,"nonce"),Pn(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pn(e.maxFeePerGas||0,"maxFeePerGas"),Pn(e.gasLimit,"gasLimit"),e.to||J5,Pn(e.value,"value"),e.data,ZM(e.accessList||[]),Pn(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Tle(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(Pn(t.yParity,"yParity")),r.push(ls(t.r)),r.push(ls(t.s)),n)?wr(["0x03",Ah([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])]):wr(["0x03",Ah(r)])}var Pl,lm,cm,fm,dm,um,hm,pm,mm,gm,bm,Um,th,zd,Jc,Hd,ym,wy,Yo;let fV=(Yo=class{constructor(){be(this,ym);be(this,Pl);be(this,lm);be(this,cm);be(this,fm);be(this,dm);be(this,um);be(this,hm);be(this,pm);be(this,mm);be(this,gm);be(this,bm);be(this,Um);be(this,th);be(this,zd);be(this,Jc);be(this,Hd);J(this,Pl,null),J(this,lm,null),J(this,fm,0),J(this,dm,ri),J(this,um,null),J(this,hm,null),J(this,pm,null),J(this,cm,"0x"),J(this,mm,ri),J(this,gm,ri),J(this,bm,null),J(this,Um,null),J(this,th,null),J(this,zd,null),J(this,Hd,null),J(this,Jc,null)}get type(){return W(this,Pl)}set type(t){switch(t){case null:J(this,Pl,null);break;case 0:case"legacy":J(this,Pl,0);break;case 1:case"berlin":case"eip-2930":J(this,Pl,1);break;case 2:case"london":case"eip-1559":J(this,Pl,2);break;case 3:case"cancun":case"eip-4844":J(this,Pl,3);break;default:ie(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const t=W(this,lm);return t==null&&this.type===3?J5:t}set to(t){J(this,lm,t==null?null:bn(t))}get nonce(){return W(this,fm)}set nonce(t){J(this,fm,Nt(t,"value"))}get gasLimit(){return W(this,dm)}set gasLimit(t){J(this,dm,et(t))}get gasPrice(){const t=W(this,um);return t==null&&(this.type===0||this.type===1)?ri:t}set gasPrice(t){J(this,um,t==null?null:et(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=W(this,hm);return t??(this.type===2||this.type===3?ri:null)}set maxPriorityFeePerGas(t){J(this,hm,t==null?null:et(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=W(this,pm);return t??(this.type===2||this.type===3?ri:null)}set maxFeePerGas(t){J(this,pm,t==null?null:et(t,"maxFeePerGas"))}get data(){return W(this,cm)}set data(t){J(this,cm,Ze(t))}get value(){return W(this,mm)}set value(t){J(this,mm,et(t,"value"))}get chainId(){return W(this,gm)}set chainId(t){J(this,gm,et(t))}get signature(){return W(this,bm)||null}set signature(t){J(this,bm,t==null?null:nl.from(t))}get accessList(){const t=W(this,Um)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){J(this,Um,t==null?null:i1(t))}get maxFeePerBlobGas(){const t=W(this,th);return t==null&&this.type===3?ri:t}set maxFeePerBlobGas(t){J(this,th,t==null?null:et(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=W(this,zd);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){ie(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let n=0;n<t.length;n++)ie(Mn(t[n],32),"invalid blobVersionedHash",`value[${n}]`,t[n])}J(this,zd,t)}get blobs(){return W(this,Hd)==null?null:W(this,Hd).map(t=>Object.assign({},t))}set blobs(t){if(t==null){J(this,Hd,null);return}const n=[],r=[];for(let i=0;i<t.length;i++){const s=t[i];if(LM(s)){Ee(W(this,Jc),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Ht(s);if(ie(o.length<=yw,"blob is too large",`blobs[${i}]`,s),o.length!==yw){const f=new Uint8Array(yw);f.set(o),o=f}const a=W(this,Jc).blobToKzgCommitment(o),l=Ze(W(this,Jc).computeBlobKzgProof(o,a));n.push({data:Ze(o),commitment:Ze(a),proof:l}),r.push(DP(1,a))}else{const o=Ze(s.commitment);n.push({data:Ze(s.data),commitment:o,proof:Ze(s.proof)}),r.push(DP(1,o))}}J(this,Hd,n),J(this,zd,r)}get kzg(){return W(this,Jc)}set kzg(t){J(this,Jc,t)}get hash(){return this.signature==null?null:Tr(Ie(this,ym,wy).call(this,!0,!1))}get unsignedHash(){return Tr(this.unsignedSerialized)}get from(){return this.signature==null?null:Ele(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:e2.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Ie(this,ym,wy).call(this,!0,!0)}get unsignedSerialized(){return Ie(this,ym,wy).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=W(this,th)!=null||W(this,zd);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ee(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ee(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ee(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):n?s.push(2):t?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Yo.from(this)}toJSON(){const t=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new Yo;if(typeof t=="string"){const r=Ht(t);if(r[0]>=127)return Yo.from(Ile(r));switch(r[0]){case 1:return Yo.from(Ple(r));case 2:return Yo.from(Rle(r));case 3:return Yo.from(Lle(r))}Ee(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Yo;return t.type!=null&&(n.type=t.type),t.to!=null&&(n.to=t.to),t.nonce!=null&&(n.nonce=t.nonce),t.gasLimit!=null&&(n.gasLimit=t.gasLimit),t.gasPrice!=null&&(n.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(n.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(n.data=t.data),t.value!=null&&(n.value=t.value),t.chainId!=null&&(n.chainId=t.chainId),t.signature!=null&&(n.signature=nl.from(t.signature)),t.accessList!=null&&(n.accessList=t.accessList),t.blobVersionedHashes!=null&&(n.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(n.kzg=t.kzg),t.blobs!=null&&(n.blobs=t.blobs),t.hash!=null&&(ie(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),ie(n.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(ie(n.isSigned(),"unsigned transaction cannot define '.from'","tx",t),ie(n.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),n}},Pl=new WeakMap,lm=new WeakMap,cm=new WeakMap,fm=new WeakMap,dm=new WeakMap,um=new WeakMap,hm=new WeakMap,pm=new WeakMap,mm=new WeakMap,gm=new WeakMap,bm=new WeakMap,Um=new WeakMap,th=new WeakMap,zd=new WeakMap,Jc=new WeakMap,Hd=new WeakMap,ym=new WeakSet,wy=function(t,n){Ee(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=t?this.signature:null;switch(this.inferType()){case 0:return Nle(this,r);case 1:return Dle(this,r);case 2:return _le(this,r);case 3:return Ole(this,r,n?this.blobs:null)}Ee(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},Yo);const dV=new Uint8Array(32);dV.fill(0);const jle=BigInt(-1),uV=BigInt(0),hV=BigInt(1),Ble=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Fle(e){const t=Ht(e),n=t.length%32;return n?wr([t,dV.slice(n)]):Ze(t)}const $le=E0(hV,32),zle=E0(uV,32),LP={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},xw=["name","version","chainId","verifyingContract","salt"];function OP(e){return function(t){return ie(typeof t=="string",`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Hle={name:OP("name"),version:OP("version"),chainId:function(e){const t=et(e,"domain.chainId");return ie(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):gp(t)},verifyingContract:function(e){try{return bn(e).toLowerCase()}catch{}ie(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=Ht(e,"domain.salt");return ie(t.length===32,'invalid domain value "salt"',"domain.salt",e),Ze(t)}};function vw(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=t[1]==="",r=parseInt(t[2]);ie(r%8===0&&r!==0&&r<=256&&t[2]===String(r),"invalid numeric width","type",e);const i=Tu(Ble,n?r-1:r),s=n?(i+hV)*jle:uV;return function(o){const a=et(o,"value");return ie(a>=s&&a<=i,`value out-of-bounds for ${e}`,"value",a),E0(n?Jz(a,256):a,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return ie(n!==0&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(r){const i=Ht(r);return ie(i.length===n,`invalid length for ${e}`,"value",r),Fle(r)}}}switch(e){case"address":return function(t){return Mh(bn(t),32)};case"bool":return function(t){return t?$le:zle};case"bytes":return function(t){return Tr(t)};case"string":return function(t){return Th(t)}}return null}function jP(e,t){return`${e}(${t.map(({name:n,type:r})=>r+" "+n).join(",")})`}function UU(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}var ab,ef,xm,C9,pV;const jo=class jo{constructor(t){be(this,C9);ce(this,"primaryType");be(this,ab);be(this,ef);be(this,xm);J(this,ef,new Map),J(this,xm,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(t).forEach(l=>{s[l]=t[l].map(({name:f,type:c})=>{let{base:d,index:u}=UU(c);return d==="int"&&!t.int&&(d="int256"),d==="uint"&&!t.uint&&(d="uint256"),{name:f,type:d+(u||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),J(this,ab,JSON.stringify(s));for(const l in s){const f=new Set;for(const c of s[l]){ie(!f.has(c.name),`duplicate variable name ${JSON.stringify(c.name)} in ${JSON.stringify(l)}`,"types",t),f.add(c.name);const d=UU(c.type).base;ie(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",t),!vw(d)&&(ie(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",t),r.get(d).push(l),n.get(l).add(d))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);ie(o.length!==0,"missing primary type","types",t),ie(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",t),ut(this,{primaryType:o[0]});function a(l,f){ie(!f.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",t),f.add(l);for(const c of n.get(l))if(r.has(c)){a(c,f);for(const d of f)i.get(d).add(c)}f.delete(l)}a(this.primaryType,new Set);for(const[l,f]of i){const c=Array.from(f);c.sort(),W(this,ef).set(l,jP(l,s[l])+c.map(d=>jP(d,s[d])).join(""))}}get types(){return JSON.parse(W(this,ab))}getEncoder(t){let n=W(this,xm).get(t);return n||(n=Ie(this,C9,pV).call(this,t),W(this,xm).set(t,n)),n}encodeType(t){const n=W(this,ef).get(t);return ie(n,`unknown type: ${JSON.stringify(t)}`,"name",t),n}encodeData(t,n){return this.getEncoder(t)(n)}hashStruct(t,n){return Tr(this.encodeData(t,n))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,n,r){if(vw(t))return r(t,n);const i=UU(t).array;if(i)return ie(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[t];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});ie(!1,`unknown type: ${t}`,"type",t)}visit(t,n){return this._visit(this.primaryType,t,n)}static from(t){return new jo(t)}static getPrimaryType(t){return jo.from(t).primaryType}static hashStruct(t,n,r){return jo.from(n).hashStruct(t,r)}static hashDomain(t){const n=[];for(const r in t){if(t[r]==null)continue;const i=LP[r];ie(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),n.push({name:r,type:i})}return n.sort((r,i)=>xw.indexOf(r.name)-xw.indexOf(i.name)),jo.hashStruct("EIP712Domain",{EIP712Domain:n},t)}static encode(t,n,r){return wr(["0x1901",jo.hashDomain(t),jo.from(n).hash(r)])}static hash(t,n,r){return Tr(jo.encode(t,n,r))}static async resolveNames(t,n,r,i){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const s={};t.verifyingContract&&!Mn(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const o=jo.from(n);o.visit(r,(a,l)=>(a==="address"&&!Mn(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:t,value:r}}static getPayload(t,n,r){jo.hashDomain(t);const i={},s=[];xw.forEach(l=>{const f=t[l];f!=null&&(i[l]=Hle[l](f),s.push({name:l,type:LP[l]}))});const o=jo.from(n);n=o.types;const a=Object.assign({},n);return ie(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,f)=>{if(l.match(/^bytes(\d*)/))return Ze(Ht(f));if(l.match(/^u?int/))return et(f).toString();switch(l){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return ie(typeof f=="string","invalid string","value",f),f}ie(!1,"unsupported type","type",l)})}}};ab=new WeakMap,ef=new WeakMap,xm=new WeakMap,C9=new WeakSet,pV=function(t){{const i=vw(t);if(i)return i}const n=UU(t).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{ie(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return W(this,ef).has(i)&&(a=a.map(Tr)),Tr(wr(a))}}const r=this.types[t];if(r){const i=Th(W(this,ef).get(t));return s=>{const o=r.map(({name:a,type:l})=>{const f=this.getEncoder(l)(s[a]);return W(this,ef).has(l)?Tr(f):f});return o.unshift(i),wr(o)}}ie(!1,`unknown type: ${t}`,"type",t)};let M3=jo;function ds(e){const t=new Set;return e.forEach(n=>t.add(n)),Object.freeze(t)}const Vle="external public payable override",Wle=ds(Vle.split(" ")),mV="constant external internal payable private public pure view override",Gle=ds(mV.split(" ")),gV="constructor error event fallback function receive struct",bV=ds(gV.split(" ")),UV="calldata memory storage payable indexed",Xle=ds(UV.split(" ")),Kle="tuple returns",Yle=[gV,UV,Kle,mV].join(" "),Zle=ds(Yle.split(" ")),qle={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Qle=new RegExp("^(\\s*)"),Jle=new RegExp("^([0-9]+)"),ece=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),yV=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),xV=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var bi,Da,lb,rk;const M9=class M9{constructor(t){be(this,lb);be(this,bi);be(this,Da);J(this,bi,0),J(this,Da,t.slice())}get offset(){return W(this,bi)}get length(){return W(this,Da).length-W(this,bi)}clone(){return new M9(W(this,Da))}reset(){J(this,bi,0)}popKeyword(t){const n=this.peek();if(n.type!=="KEYWORD"||!t.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const n=this.peek();throw new Error(`expected ${t}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const n=Ie(this,lb,rk).call(this,W(this,bi)+1,t.match+1);return J(this,bi,t.match+1),n}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;W(this,bi)<t.match-1;){const r=this.peek().linkNext;n.push(Ie(this,lb,rk).call(this,W(this,bi)+1,r)),J(this,bi,r)}return J(this,bi,t.match+1),n}peek(){if(W(this,bi)>=W(this,Da).length)throw new Error("out-of-bounds");return W(this,Da)[W(this,bi)]}peekKeyword(t){const n=this.peekType("KEYWORD");return n!=null&&t.has(n)?n:null}peekType(t){if(this.length===0)return null;const n=this.peek();return n.type===t?n.text:null}pop(){const t=this.peek();return Ug(this,bi)._++,t}toString(){const t=[];for(let n=W(this,bi);n<W(this,Da).length;n++){const r=W(this,Da)[n];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}};bi=new WeakMap,Da=new WeakMap,lb=new WeakSet,rk=function(t=0,n=0){return new M9(W(this,Da).slice(t,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-t,linkBack:r.linkBack-t,linkNext:r.linkNext-t}))))};let rl=M9;function P0(e){const t=[],n=o=>{const a=s<e.length?JSON.stringify(e[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<e.length;){let o=e.substring(s),a=o.match(Qle);a&&(s+=a[1].length,o=e.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(l);let f=qle[o[0]]||"";if(f){if(l.type=f,l.text=o[0],s++,f==="OPEN_PAREN")r.push(t.length-1),i.push(t.length-1);else if(f=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1;else if(f==="COMMA")l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1,i.push(t.length-1);else if(f==="OPEN_BRACKET")l.type="BRACKET";else if(f==="CLOSE_BRACKET"){let c=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const d=t.pop().text;c=d+c,t[t.length-1].value=Nt(d)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=c}continue}if(a=o.match(ece),a){if(l.text=a[1],s+=l.text.length,Zle.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(xV)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(Jle),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new rl(t.map(o=>Object.freeze(o)))}function BP(e,t){let n=[];for(const r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function $9(e,t){if(t.peekKeyword(bV)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function wf(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(r==null||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function vV(e){let t=wf(e,Gle);return BP(t,ds("constant payable nonpayable".split(" "))),BP(t,ds("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function bf(e,t){return e.popParams().map(n=>Ci.from(n,t))}function wV(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return et(e.pop().text);throw new Error("invalid gas")}return null}function Ih(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const tce=new RegExp(/^(.*)\[([0-9]*)\]$/);function FP(e){const t=e.match(xV);if(ie(t,"invalid type","type",e),e==="uint")return"uint256";if(e==="int")return"int256";if(t[2]){const n=parseInt(t[2]);ie(n!==0&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);ie(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",e)}return e}const Jn={},Vs=Symbol.for("_ethers_internal"),$P="_ParamTypeInternal",zP="_ErrorInternal",HP="_EventInternal",VP="_ConstructorInternal",WP="_FallbackInternal",GP="_FunctionInternal",XP="_StructInternal";var vm,Ey;const Bo=class Bo{constructor(t,n,r,i,s,o,a,l){be(this,vm);ce(this,"name");ce(this,"type");ce(this,"baseType");ce(this,"indexed");ce(this,"components");ce(this,"arrayLength");ce(this,"arrayChildren");if(bb(t,Jn,"ParamType"),Object.defineProperty(this,Vs,{value:$P}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");ut(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(t){if(t==null&&(t="sighash"),t==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(t)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(t),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(t)).join(t==="full"?", ":",")+")":n+=this.type,t!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),t==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,n){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,t)}async walkAsync(t,n){const r=[],i=[t];return Ie(this,vm,Ey).call(this,r,t,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(t,n){if(Bo.isParamType(t))return t;if(typeof t=="string")try{return Bo.from(P0(t),n)}catch{ie(!1,"invalid param type","obj",t)}else if(t instanceof rl){let a="",l="",f=null;wf(t,ds(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(l="tuple",f=t.popParams().map(U=>Bo.from(U)),a=`tuple(${f.map(U=>U.format()).join(",")})`):(a=FP(t.popType("TYPE")),l=a);let c=null,d=null;for(;t.length&&t.peekType("BRACKET");){const U=t.pop();c=new Bo(Jn,"",a,l,null,f,d,c),d=U.value,a+=U.text,l="array",f=null}let u=null;if(wf(t,Xle).has("indexed")){if(!n)throw new Error("");u=!0}const g=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new Bo(Jn,g,a,l,u,f,d,c)}const r=t.name;ie(!r||typeof r=="string"&&r.match(yV),"invalid name","obj.name",r);let i=t.indexed;i!=null&&(ie(n,"parameter cannot be indexed","obj.indexed",t.indexed),i=!!i);let s=t.type,o=s.match(tce);if(o){const a=parseInt(o[2]||"-1"),l=Bo.from({type:o[1],components:t.components});return new Bo(Jn,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=t.components!=null?t.components.map(f=>Bo.from(f)):null;return new Bo(Jn,r||"",s,"tuple",i,a,null,null)}return s=FP(t.type),new Bo(Jn,r||"",s,s,i,null,null,null)}static isParamType(t){return t&&t[Vs]===$P}};vm=new WeakSet,Ey=function(t,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,f)=>{var c;Ie(c=o,vm,Ey).call(c,t,l,r,d=>{a[f]=d})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,f)=>{var c;Ie(c=o[f],vm,Ey).call(c,t,l,r,d=>{a[f]=d})}),i(a);return}const s=r(this.type,n);s.then?t.push(async function(){i(await s)}()):i(s)};let Ci=Bo,z9=class ik{constructor(t,n,r){ce(this,"type");ce(this,"inputs");bb(t,Jn,"Fragment"),r=Object.freeze(r.slice()),ut(this,{type:n,inputs:r})}static from(t){if(typeof t=="string"){try{ik.from(JSON.parse(t))}catch{}return ik.from(P0(t))}if(t instanceof rl)switch(t.peekKeyword(bV)){case"constructor":return ff.from(t);case"error":return Ps.from(t);case"event":return Hl.from(t);case"fallback":case"receive":return Wc.from(t);case"function":return Vl.from(t);case"struct":return dh.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return ff.from(t);case"error":return Ps.from(t);case"event":return Hl.from(t);case"fallback":case"receive":return Wc.from(t);case"function":return Vl.from(t);case"struct":return dh.from(t)}Ee(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ie(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return ff.isFragment(t)}static isError(t){return Ps.isFragment(t)}static isEvent(t){return Hl.isFragment(t)}static isFunction(t){return Vl.isFragment(t)}static isStruct(t){return dh.isFragment(t)}};class H9 extends z9{constructor(n,r,i,s){super(n,r,s);ce(this,"name");ie(typeof i=="string"&&i.match(yV),"invalid identifier","name",i),s=Object.freeze(s.slice()),ut(this,{name:i})}}function s2(e,t){return"("+t.map(n=>n.format(e)).join(e==="full"?", ":",")+")"}class Ps extends H9{constructor(t,n,r){super(t,"error",n,r),Object.defineProperty(this,Vs,{value:zP})}get selector(){return Th(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(t)))});const n=[];return t!=="sighash"&&n.push("error"),n.push(this.name+s2(t,this.inputs)),n.join(" ")}static from(t){if(Ps.isFragment(t))return t;if(typeof t=="string")return Ps.from(P0(t));if(t instanceof rl){const n=$9("error",t),r=bf(t);return Ih(t),new Ps(Jn,n,r)}return new Ps(Jn,t.name,t.inputs?t.inputs.map(Ci.from):[])}static isFragment(t){return t&&t[Vs]===zP}}class Hl extends H9{constructor(n,r,i,s){super(n,"event",r,i);ce(this,"anonymous");Object.defineProperty(this,Vs,{value:HP}),ut(this,{anonymous:s})}get topicHash(){return Th(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+s2(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>Ci.from(s)),new Hl(Jn,n,r,!1).topicHash}static from(n){if(Hl.isFragment(n))return n;if(typeof n=="string")try{return Hl.from(P0(n))}catch{ie(!1,"invalid event fragment","obj",n)}else if(n instanceof rl){const r=$9("event",n),i=bf(n,!0),s=!!wf(n,ds(["anonymous"])).has("anonymous");return Ih(n),new Hl(Jn,r,i,s)}return new Hl(Jn,n.name,n.inputs?n.inputs.map(r=>Ci.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Vs]===HP}}class ff extends z9{constructor(n,r,i,s,o){super(n,r,i);ce(this,"payable");ce(this,"gas");Object.defineProperty(this,Vs,{value:VP}),ut(this,{payable:s,gas:o})}format(n){if(Ee(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${s2(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(ff.isFragment(n))return n;if(typeof n=="string")try{return ff.from(P0(n))}catch{ie(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof rl){wf(n,ds(["constructor"]));const r=bf(n),i=!!wf(n,Wle).has("payable"),s=wV(n);return Ih(n),new ff(Jn,"constructor",r,i,s)}return new ff(Jn,"constructor",n.inputs?n.inputs.map(Ci.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Vs]===VP}}class Wc extends z9{constructor(n,r,i){super(n,"fallback",r);ce(this,"payable");Object.defineProperty(this,Vs,{value:WP}),ut(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Wc.isFragment(n))return n;if(typeof n=="string")try{return Wc.from(P0(n))}catch{ie(!1,"invalid fallback fragment","obj",n)}else if(n instanceof rl){const r=n.toString(),i=n.peekKeyword(ds(["fallback","receive"]));if(ie(i,"type must be fallback or receive","obj",r),n.popKeyword(ds(["fallback","receive"]))==="receive"){const l=bf(n);return ie(l.length===0,"receive cannot have arguments","obj.inputs",l),wf(n,ds(["payable"])),Ih(n),new Wc(Jn,[],!0)}let o=bf(n);o.length?ie(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[Ci.from("bytes")];const a=vV(n);if(ie(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),wf(n,ds(["returns"])).has("returns")){const l=bf(n);ie(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(f=>f.format("minimal")).join(", "))}return Ih(n),new Wc(Jn,o,a==="payable")}if(n.type==="receive")return new Wc(Jn,[],!0);if(n.type==="fallback"){const r=[Ci.from("bytes")],i=n.stateMutability==="payable";return new Wc(Jn,r,i)}ie(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Vs]===WP}}class Vl extends H9{constructor(n,r,i,s,o,a){super(n,"function",r,s);ce(this,"constant");ce(this,"outputs");ce(this,"stateMutability");ce(this,"payable");ce(this,"gas");Object.defineProperty(this,Vs,{value:GP}),o=Object.freeze(o.slice()),ut(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return Th(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+s2(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(s2(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>Ci.from(s)),new Vl(Jn,n,"view",r,[],null).selector}static from(n){if(Vl.isFragment(n))return n;if(typeof n=="string")try{return Vl.from(P0(n))}catch{ie(!1,"invalid function fragment","obj",n)}else if(n instanceof rl){const i=$9("function",n),s=bf(n),o=vV(n);let a=[];wf(n,ds(["returns"])).has("returns")&&(a=bf(n));const l=wV(n);return Ih(n),new Vl(Jn,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Vl(Jn,n.name,r,n.inputs?n.inputs.map(Ci.from):[],n.outputs?n.outputs.map(Ci.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Vs]===GP}}class dh extends H9{constructor(t,n,r){super(t,"struct",n,r),Object.defineProperty(this,Vs,{value:XP})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return dh.from(P0(t))}catch{ie(!1,"invalid struct fragment","obj",t)}else if(t instanceof rl){const n=$9("struct",t),r=bf(t);return Ih(t),new dh(Jn,n,r)}return new dh(Jn,t.name,t.inputs?t.inputs.map(Ci.from):[])}static isFragment(t){return t&&t[Vs]===XP}}const fl=new Map;fl.set(0,"GENERIC_PANIC");fl.set(1,"ASSERT_FALSE");fl.set(17,"OVERFLOW");fl.set(18,"DIVIDE_BY_ZERO");fl.set(33,"ENUM_RANGE_ERROR");fl.set(34,"BAD_STORAGE_DATA");fl.set(49,"STACK_UNDERFLOW");fl.set(50,"ARRAY_RANGE_ERROR");fl.set(65,"OUT_OF_MEMORY");fl.set(81,"UNINITIALIZED_FUNCTION_CALL");const nce=new RegExp(/^bytes([0-9]*)$/),rce=new RegExp(/^(u?int)([0-9]*)$/);let ww=null,KP=1024;function ice(e,t,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const f=Ht(n);if(n=Ze(n),f.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(f.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(Ze(f.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],f.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(Ze(f.slice(0,4))==="0x4e487b71")try{const c=Number(r.decode(["uint256"],f.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[c]},s=`Panic due to ${fl.get(c)||"UNKNOWN"}(${c})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:t.to?bn(t.to):null,data:t.data||"0x"};return t.from&&(l.from=bn(t.from)),hr(i,"CALL_EXCEPTION",{action:e,data:n,reason:s,transaction:l,invocation:o,revert:a})}var Vd,op;const A9=class A9{constructor(){be(this,Vd)}getDefaultValue(t){const n=t.map(i=>Ie(this,Vd,op).call(this,Ci.from(i)));return new bU(n,"_").defaultValue()}encode(t,n){Zz(n.length,t.length,"types/values length mismatch");const r=t.map(o=>Ie(this,Vd,op).call(this,Ci.from(o))),i=new bU(r,"_"),s=new HS;return i.encode(s,n),s.data}decode(t,n,r){const i=t.map(o=>Ie(this,Vd,op).call(this,Ci.from(o)));return new bU(i,"_").decode(new VS(n,r,KP))}static _setDefaultMaxInflation(t){ie(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),KP=t}static defaultAbiCoder(){return ww==null&&(ww=new A9),ww}static getBuiltinCallException(t,n,r){return ice(t,n,r,A9.defaultAbiCoder())}};Vd=new WeakSet,op=function(t){if(t.isArray())return new Mae(Ie(this,Vd,op).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new bU(t.components.map(r=>Ie(this,Vd,op).call(this,r)),t.name);switch(t.baseType){case"address":return new kae(t.name);case"bool":return new Aae(t.name);case"string":return new Oae(t.name);case"bytes":return new Tae(t.name);case"":return new Rae(t.name)}let n=t.type.match(rce);if(n){let r=parseInt(n[2]||"256");return ie(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",t),new Lae(r/8,n[1]==="int",t.name)}if(n=t.type.match(nce),n){let r=parseInt(n[1]);return ie(r!==0&&r<=32,"invalid bytes length","param",t),new Iae(r,t.name)}ie(!1,"invalid type","type",t.type)};let o2=A9;class sce{constructor(t,n,r){ce(this,"fragment");ce(this,"name");ce(this,"signature");ce(this,"topic");ce(this,"args");const i=t.name,s=t.format();ut(this,{fragment:t,name:i,signature:s,topic:n,args:r})}}class oce{constructor(t,n,r,i){ce(this,"fragment");ce(this,"name");ce(this,"args");ce(this,"signature");ce(this,"selector");ce(this,"value");const s=t.name,o=t.format();ut(this,{fragment:t,name:s,args:r,signature:o,selector:n,value:i})}}class ace{constructor(t,n,r){ce(this,"fragment");ce(this,"name");ce(this,"args");ce(this,"signature");ce(this,"selector");const i=t.name,s=t.format();ut(this,{fragment:t,name:i,args:r,signature:s,selector:n})}}class YP{constructor(t){ce(this,"hash");ce(this,"_isIndexed");ut(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const ZP={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},qP={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&ZP[e.toString()]&&(t=ZP[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};var Dl,Ll,Ol,Pi,tc,Sy,ky;const Au=class Au{constructor(t){be(this,tc);ce(this,"fragments");ce(this,"deploy");ce(this,"fallback");ce(this,"receive");be(this,Dl);be(this,Ll);be(this,Ol);be(this,Pi);let n=[];typeof t=="string"?n=JSON.parse(t):n=t,J(this,Ol,new Map),J(this,Dl,new Map),J(this,Ll,new Map);const r=[];for(const o of n)try{r.push(z9.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}ut(this,{fragments:Object.freeze(r)});let i=null,s=!1;J(this,Pi,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}ut(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(ie(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=W(this,Ol);break;case"event":l=W(this,Ll);break;case"error":l=W(this,Dl);break;default:return}const f=o.format();l.has(f)||l.set(f,o)}),this.deploy||ut(this,{deploy:ff.from("constructor()")}),ut(this,{fallback:i,receive:s})}format(t){const n=t?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const t=this.fragments.map(n=>n.format("json"));return JSON.stringify(t.map(n=>JSON.parse(n)))}getAbiCoder(){return o2.defaultAbiCoder()}getFunctionName(t){const n=Ie(this,tc,Sy).call(this,t,null,!1);return ie(n,"no matching function","key",t),n.name}hasFunction(t){return!!Ie(this,tc,Sy).call(this,t,null,!1)}getFunction(t,n){return Ie(this,tc,Sy).call(this,t,n||null,!0)}forEachFunction(t){const n=Array.from(W(this,Ol).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(W(this,Ol).get(i),r)}}getEventName(t){const n=Ie(this,tc,ky).call(this,t,null,!1);return ie(n,"no matching event","key",t),n.name}hasEvent(t){return!!Ie(this,tc,ky).call(this,t,null,!1)}getEvent(t,n){return Ie(this,tc,ky).call(this,t,n||null,!0)}forEachEvent(t){const n=Array.from(W(this,Ll).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(W(this,Ll).get(i),r)}}getError(t,n){if(Mn(t)){const i=t.toLowerCase();if(qP[i])return Ps.from(qP[i].signature);for(const s of W(this,Dl).values())if(i===s.selector)return s;return null}if(t.indexOf("(")===-1){const i=[];for(const[s,o]of W(this,Dl))s.split("(")[0]===t&&i.push(o);if(i.length===0)return t==="Error"?Ps.from("error Error(string)"):t==="Panic"?Ps.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");ie(!1,`ambiguous error description (i.e. ${s})`,"name",t)}return i[0]}if(t=Ps.from(t).format(),t==="Error(string)")return Ps.from("error Error(string)");if(t==="Panic(uint256)")return Ps.from("error Panic(uint256)");const r=W(this,Dl).get(t);return r||null}forEachError(t){const n=Array.from(W(this,Dl).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];t(W(this,Dl).get(i),r)}}_decodeParams(t,n){return W(this,Pi).decode(t,n)}_encodeParams(t,n){return W(this,Pi).encode(t,n)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,n){if(typeof t=="string"){const r=this.getError(t);ie(r,"unknown error","fragment",t),t=r}return ie(pr(n,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",n),this._decodeParams(t.inputs,pr(n,4))}encodeErrorResult(t,n){if(typeof t=="string"){const r=this.getError(t);ie(r,"unknown error","fragment",t),t=r}return wr([t.selector,this._encodeParams(t.inputs,n||[])])}decodeFunctionData(t,n){if(typeof t=="string"){const r=this.getFunction(t);ie(r,"unknown function","fragment",t),t=r}return ie(pr(n,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",n),this._decodeParams(t.inputs,pr(n,4))}encodeFunctionData(t,n){if(typeof t=="string"){const r=this.getFunction(t);ie(r,"unknown function","fragment",t),t=r}return wr([t.selector,this._encodeParams(t.inputs,n||[])])}decodeFunctionResult(t,n){if(typeof t=="string"){const s=this.getFunction(t);ie(s,"unknown function","fragment",t),t=s}let r="invalid length for result data";const i=as(n);if(i.length%32===0)try{return W(this,Pi).decode(t.outputs,i)}catch{r="could not decode result data"}Ee(!1,r,"BAD_DATA",{value:Ze(i),info:{method:t.name,signature:t.format()}})}makeError(t,n){const r=Ht(t,"data"),i=o2.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=Ze(r.slice(0,4)),l=this.getError(a);if(l)try{const f=W(this,Pi).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:f},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(t,n){if(typeof t=="string"){const r=this.getFunction(t);ie(r,"unknown function","fragment",t),t=r}return Ze(W(this,Pi).encode(t.outputs,n||[]))}encodeFilterTopics(t,n){if(typeof t=="string"){const s=this.getEvent(t);ie(s,"unknown event","eventFragment",t),t=s}Ee(n.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const i=(s,o)=>s.type==="string"?Th(o):s.type==="bytes"?Tr(Ze(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=E0(o):s.type.match(/^bytes/)?o=Mse(o,32):s.type==="address"&&W(this,Pi).encode(["address"],[o]),Mh(Ze(o),32));for(n.forEach((s,o)=>{const a=t.inputs[o];if(!a.indexed){ie(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?ie(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(t,n){if(typeof t=="string"){const o=this.getEvent(t);ie(o,"unknown event","eventFragment",t),t=o}const r=[],i=[],s=[];return t.anonymous||r.push(t.topicHash),ie(n.length===t.inputs.length,"event arguments/values mismatch","values",n),t.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(Th(l));else if(o.type==="bytes")r.push(Tr(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(W(this,Pi).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:W(this,Pi).encode(i,s),topics:r}}decodeEventLog(t,n,r){if(typeof t=="string"){const h=this.getEvent(t);ie(h,"unknown event","eventFragment",t),t=h}if(r!=null&&!t.anonymous){const h=t.topicHash;ie(Mn(r[0],32)&&r[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];t.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(Ci.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=r!=null?W(this,Pi).decode(i,wr(r)):null,l=W(this,Pi).decode(s,n,!0),f=[],c=[];let d=0,u=0;return t.inputs.forEach((h,g)=>{let U=null;if(h.indexed)if(a==null)U=new YP(null);else if(o[g])U=new YP(a[u++]);else try{U=a[u++]}catch(y){U=y}else try{U=l[d++]}catch(y){U=y}f.push(U),c.push(h.name||null)}),Lm.fromItems(f,c)}parseTransaction(t){const n=Ht(t.data,"tx.data"),r=et(t.value!=null?t.value:0,"tx.value"),i=this.getFunction(Ze(n.slice(0,4)));if(!i)return null;const s=W(this,Pi).decode(i.inputs,n.slice(4));return new oce(i,i.selector,s,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const n=this.getEvent(t.topics[0]);return!n||n.anonymous?null:new sce(n,n.topicHash,this.decodeEventLog(n,t.data,t.topics))}parseError(t){const n=Ze(t),r=this.getError(pr(n,0,4));if(!r)return null;const i=W(this,Pi).decode(r.inputs,pr(n,4));return new ace(r,r.selector,i)}static from(t){return t instanceof Au?t:typeof t=="string"?new Au(JSON.parse(t)):typeof t.formatJson=="function"?new Au(t.formatJson()):typeof t.format=="function"?new Au(t.format("json")):new Au(t)}};Dl=new WeakMap,Ll=new WeakMap,Ol=new WeakMap,Pi=new WeakMap,tc=new WeakSet,Sy=function(t,n,r){if(Mn(t)){const s=t.toLowerCase();for(const o of W(this,Ol).values())if(s===o.selector)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of W(this,Ol))o.split("(")[0]===t&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;Wi.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let f=s.length-1;f>=0;f--){const c=s[f].inputs.length;c!==a&&(!l||c!==a-1)&&s.splice(f,1)}for(let f=s.length-1;f>=0;f--){const c=s[f].inputs;for(let d=0;d<n.length;d++)if(Wi.isTyped(n[d])){if(d>=c.length){if(n[d].type==="overrides")continue;s.splice(f,1);break}if(n[d].type!==c[d].baseType){s.splice(f,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ie(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return s[0]}const i=W(this,Ol).get(Vl.from(t).format());return i||null},ky=function(t,n,r){if(Mn(t)){const s=t.toLowerCase();for(const o of W(this,Ll).values())if(s===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const s=[];for(const[o,a]of W(this,Ll))o.split("(")[0]===t&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(Wi.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ie(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return s[0]}const i=W(this,Ll).get(Hl.from(t).format());return i||null};let sk=Au;const EV=BigInt(0);function Op(e){return e??null}function yr(e){return e==null?null:e.toString()}class QP{constructor(t,n,r){ce(this,"gasPrice");ce(this,"maxFeePerGas");ce(this,"maxPriorityFeePerGas");ut(this,{gasPrice:Op(t),maxFeePerGas:Op(n),maxPriorityFeePerGas:Op(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:yr(t),maxFeePerGas:yr(n),maxPriorityFeePerGas:yr(r)}}}function A3(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=Ze(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in e)||e[i]==null||(t[i]=et(e[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in e)||e[i]==null||(t[i]=Nt(e[i],`request.${i}`));return e.accessList&&(t.accessList=i1(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(i=>LM(i)?Ze(i):Object.assign({},i))),t}var tf;class lce{constructor(t,n){ce(this,"provider");ce(this,"number");ce(this,"hash");ce(this,"timestamp");ce(this,"parentHash");ce(this,"parentBeaconBlockRoot");ce(this,"nonce");ce(this,"difficulty");ce(this,"gasLimit");ce(this,"gasUsed");ce(this,"stateRoot");ce(this,"receiptsRoot");ce(this,"blobGasUsed");ce(this,"excessBlobGas");ce(this,"miner");ce(this,"prevRandao");ce(this,"extraData");ce(this,"baseFeePerGas");be(this,tf);J(this,tf,t.transactions.map(r=>typeof r!="string"?new a2(r,n):r)),ut(this,{provider:n,hash:Op(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:Op(t.prevRandao),extraData:t.extraData,baseFeePerGas:Op(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return W(this,tf).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=W(this,tf).slice();return t.length===0?[]:(Ee(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:f,number:c,parentHash:d,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:g,timestamp:U,transactions:y}=this;return{_type:"Block",baseFeePerGas:yr(t),difficulty:yr(n),extraData:r,gasLimit:yr(i),gasUsed:yr(s),blobGasUsed:yr(this.blobGasUsed),excessBlobGas:yr(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:f,number:c,parentHash:d,timestamp:U,parentBeaconBlockRoot:u,stateRoot:h,receiptsRoot:g,transactions:y}}[Symbol.iterator](){let t=0;const n=this.transactions;return{next:()=>t<this.length?{value:n[t++],done:!1}:{value:void 0,done:!0}}}get length(){return W(this,tf).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let n;if(typeof t=="number")n=W(this,tf)[t];else{const r=t.toLowerCase();for(const i of W(this,tf))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash===r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(t){const n=this.prefetchedTransactions;if(typeof t=="number")return n[t];t=t.toLowerCase();for(const r of n)if(r.hash===t)return r;ie(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return cce(this)}}tf=new WeakMap;class xb{constructor(t,n){ce(this,"provider");ce(this,"transactionHash");ce(this,"blockHash");ce(this,"blockNumber");ce(this,"removed");ce(this,"address");ce(this,"data");ce(this,"topics");ce(this,"index");ce(this,"transactionIndex");this.provider=n;const r=Object.freeze(t.topics.slice());ut(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:f}=this;return{_type:"log",address:t,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:f}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return Ee(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return Ee(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return Ee(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return fce(this)}}var cb;class SV{constructor(t,n){ce(this,"provider");ce(this,"to");ce(this,"from");ce(this,"contractAddress");ce(this,"hash");ce(this,"index");ce(this,"blockHash");ce(this,"blockNumber");ce(this,"logsBloom");ce(this,"gasUsed");ce(this,"blobGasUsed");ce(this,"cumulativeGasUsed");ce(this,"gasPrice");ce(this,"blobGasPrice");ce(this,"type");ce(this,"status");ce(this,"root");be(this,cb);J(this,cb,Object.freeze(t.logs.map(i=>new xb(i,n))));let r=EV;t.effectiveGasPrice!=null?r=t.effectiveGasPrice:t.gasPrice!=null&&(r=t.gasPrice),ut(this,{provider:n,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return W(this,cb)}toJSON(){const{to:t,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:f,status:c,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:yr(this.cumulativeGasUsed),from:n,gasPrice:yr(this.gasPrice),blobGasUsed:yr(this.blobGasUsed),blobGasPrice:yr(this.blobGasPrice),gasUsed:yr(this.gasUsed),hash:i,index:s,logs:f,logsBloom:l,root:d,status:c,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return CV(this)}reorderedEvent(t){return Ee(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),kV(this,t)}}cb=new WeakMap;var Wd;const yN=class yN{constructor(t,n){ce(this,"provider");ce(this,"blockNumber");ce(this,"blockHash");ce(this,"index");ce(this,"hash");ce(this,"type");ce(this,"to");ce(this,"from");ce(this,"nonce");ce(this,"gasLimit");ce(this,"gasPrice");ce(this,"maxPriorityFeePerGas");ce(this,"maxFeePerGas");ce(this,"maxFeePerBlobGas");ce(this,"data");ce(this,"value");ce(this,"chainId");ce(this,"signature");ce(this,"accessList");ce(this,"blobVersionedHashes");be(this,Wd);this.provider=n,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,J(this,Wd,-1)}toJSON(){const{blockNumber:t,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:f,signature:c,accessList:d,blobVersionedHashes:u}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:t,blockHash:n,blobVersionedHashes:u,chainId:yr(this.chainId),data:f,from:a,gasLimit:yr(this.gasLimit),gasPrice:yr(this.gasPrice),hash:i,maxFeePerGas:yr(this.maxFeePerGas),maxPriorityFeePerGas:yr(this.maxPriorityFeePerGas),maxFeePerBlobGas:yr(this.maxFeePerBlobGas),nonce:l,signature:c,to:o,index:r,type:s,value:yr(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const r=await this.getTransaction();r&&(t=r.blockNumber)}if(t==null)return null;const n=this.provider.getBlock(t);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await ss({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,n){const r=t??1,i=n??0;let s=W(this,Wd),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:u,nonce:h}=await ss({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=u;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=s-3,o<W(this,Wd)&&(o=W(this,Wd)));o<=u;){if(a)return null;const U=await this.provider.getBlock(o,!0);if(U==null)return;for(const y of U)if(y===this.hash)return;for(let y=0;y<U.length;y++){const x=await U.getTransaction(y);if(x.from===this.from&&x.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(x.hash);if(w==null||u-w.blockNumber+1<r)return;let E="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?E="repriced":x.data==="0x"&&x.from===x.to&&x.value===EV&&(E="cancelled"),Ee(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:x.replaceableTransaction(s),hash:x.hash,receipt:w})}}o++}},f=u=>{if(u==null||u.status!==0)return u;Ee(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:u.to,from:u.from,data:""},receipt:u})},c=await this.provider.getTransactionReceipt(this.hash);if(r===0)return f(c);if(c){if(await c.confirmations()>=r)return f(c)}else if(await l(),r===0)return null;return await new Promise((u,h)=>{const g=[],U=()=>{g.forEach(x=>x())};if(g.push(()=>{a=!0}),i>0){const x=setTimeout(()=>{U(),h(hr("wait for transaction timeout","TIMEOUT"))},i);g.push(()=>{clearTimeout(x)})}const y=async x=>{if(await x.confirmations()>=r){U();try{u(f(x))}catch(w){h(w)}}};if(g.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),s>=0){const x=async()=>{try{await l()}catch(w){if(zi(w,"TRANSACTION_REPLACED")){U(),h(w);return}}a||this.provider.once("block",x)};g.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Ee(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),CV(this)}reorderedEvent(t){return Ee(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ee(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),kV(this,t)}replaceableTransaction(t){ie(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const n=new yN(this,this.provider);return J(n,Wd,t),n}};Wd=new WeakMap;let a2=yN;function cce(e){return{orphan:"drop-block",hash:e.hash,number:e.number}}function kV(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function CV(e){return{orphan:"drop-transaction",tx:e}}function fce(e){return{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}class QM extends xb{constructor(n,r,i){super(n,n.provider);ce(this,"interface");ce(this,"fragment");ce(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);ut(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class MV extends xb{constructor(n,r){super(n,n.provider);ce(this,"error");ut(this,{error:r})}}var wm;class dce extends SV{constructor(n,r,i){super(i,r);be(this,wm);J(this,wm,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?W(this,wm).getEvent(n.topics[0]):null;if(r)try{return new QM(n,W(this,wm),r)}catch(i){return new MV(n,i)}return n})}}wm=new WeakMap;var fb;class JM extends a2{constructor(n,r,i){super(i,r);be(this,fb);J(this,fb,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new dce(W(this,fb),this.provider,i)}}fb=new WeakMap;class AV extends eH{constructor(n,r,i,s){super(n,r,i);ce(this,"log");ut(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class uce extends AV{constructor(t,n,r,i,s){super(t,n,r,new QM(s,t.interface,i));const o=t.interface.decodeEventLog(i,this.log.data,this.log.topics);ut(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const JP=BigInt(0);function TV(e){return e&&typeof e.call=="function"}function IV(e){return e&&typeof e.estimateGas=="function"}function V9(e){return e&&typeof e.resolveName=="function"}function NV(e){return e&&typeof e.sendTransaction=="function"}function RV(e){if(e!=null){if(V9(e))return e;if(e.provider)return e.provider}}var db;class hce{constructor(t,n,r){be(this,db);ce(this,"fragment");if(ut(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=Nh(t.runner,"resolveName"),s=V9(i)?i:null;J(this,db,async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(c,d)=>c==="address"?Array.isArray(d)?Promise.all(d.map(u=>fs(u,s))):fs(d,s):d)));return t.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return W(this,db)}}db=new WeakMap;function Nh(e,t){return e==null?null:typeof e[t]=="function"?e:e.provider&&typeof e.provider[t]=="function"?e.provider:null}function Ru(e){return e==null?null:e.provider||null}async function _V(e,t){const n=Wi.dereference(e,"overrides");ie(typeof n=="object","invalid overrides parameter","overrides",e);const r=A3(n);return ie(r.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ie(r.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function pce(e,t,n){const r=Nh(e,"resolveName"),i=V9(r)?r:null;return await Promise.all(t.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=Wi.dereference(l,a),a==="address"?fs(l,i):l))))}function mce(e){const t=async function(o){const a=await _V(o,["data"]);a.to=await e.getAddress(),a.from&&(a.from=await fs(a.from,RV(e.runner)));const l=e.interface,f=et(a.value||JP,"overrides.value")===JP,c=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!c&&!f&&ie(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),ie(l.fallback||c,"cannot send data to receive-only contract","overrides.data",a.data);const d=l.receive||l.fallback&&l.fallback.payable;return ie(d||f,"cannot send value to non-payable fallback","overrides.value",a.value),ie(l.fallback||c,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Nh(e.runner,"call");Ee(TV(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await t(o);try{return await a.call(l)}catch(f){throw DM(f)&&f.data?e.interface.makeError(f.data,l):f}},r=async function(o){const a=e.runner;Ee(NV(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await t(o)),f=Ru(e.runner);return new JM(e.interface,f,l)},i=async function(o){const a=Nh(e.runner,"estimateGas");return Ee(IV(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},s=async o=>await r(o);return ut(s,{_contract:e,estimateGas:i,populateTransaction:t,send:r,staticCall:n}),s}function gce(e,t){const n=function(...f){const c=e.interface.getFunction(t,f);return Ee(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:f}}),c},r=async function(...f){const c=n(...f);let d={};if(c.inputs.length+1===f.length&&(d=await _V(f.pop()),d.from&&(d.from=await fs(d.from,RV(e.runner)))),c.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const u=await pce(e.runner,c.inputs,f);return Object.assign({},d,await ss({to:e.getAddress(),data:e.interface.encodeFunctionData(c,u)}))},i=async function(...f){const c=await a(...f);return c.length===1?c[0]:c},s=async function(...f){const c=e.runner;Ee(NV(c),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await c.sendTransaction(await r(...f)),u=Ru(e.runner);return new JM(e.interface,u,d)},o=async function(...f){const c=Nh(e.runner,"estimateGas");return Ee(IV(c),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await c.estimateGas(await r(...f))},a=async function(...f){const c=Nh(e.runner,"call");Ee(TV(c),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...f);let u="0x";try{u=await c.call(d)}catch(g){throw DM(g)&&g.data?e.interface.makeError(g.data,d):g}const h=n(...f);return e.interface.decodeFunctionResult(h,u)},l=async(...f)=>n(...f).constant?await i(...f):await s(...f);return ut(l,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=e.interface.getFunction(t);return Ee(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),f}}),l}function bce(e,t){const n=function(...i){const s=e.interface.getEvent(t,i);return Ee(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:i}}),s},r=function(...i){return new hce(e,n(...i),i)};return ut(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=e.interface.getEvent(t);return Ee(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),i}}),r}const T3=Symbol.for("_ethersInternal_contract"),PV=new WeakMap;function Uce(e,t){PV.set(e[T3],t)}function so(e){return PV.get(e[T3])}function yce(e){return e&&typeof e=="object"&&"getTopicFilter"in e&&typeof e.getTopicFilter=="function"&&e.fragment}async function eA(e,t){let n,r=null;if(Array.isArray(t)){const s=function(o){if(Mn(o,32))return o;const a=e.interface.getEvent(o);return ie(a,"unknown fragment","name",o),a.topicHash};n=t.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else t==="*"?n=[null]:typeof t=="string"?Mn(t,32)?n=[t]:(r=e.interface.getEvent(t),ie(r,"unknown fragment","event",t),n=[r.topicHash]):yce(t)?n=await t.getTopicFilter():"fragment"in t?(r=t.fragment,n=[r.topicHash]):ie(!1,"unknown event name","event",t);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Zg(e,t){const{subs:n}=so(e);return n.get((await eA(e,t)).tag)||null}async function eD(e,t,n){const r=Ru(e.runner);Ee(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:s,topics:o}=await eA(e,n),{addr:a,subs:l}=so(e);let f=l.get(s);if(!f){const d={address:a||e,topics:o},u=y=>{let x=i;if(x==null)try{x=e.interface.getEvent(y.topics[0])}catch{}if(x){const w=x,E=i?e.interface.decodeEventLog(i,y.data,y.topics):[];ak(e,n,E,S=>new uce(e,S,n,w,y))}else ak(e,n,[],w=>new AV(e,w,n,y))};let h=[];f={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(d,u))},stop:async()=>{if(h.length==0)return;let y=h;h=[],await Promise.all(y),r.off(d,u)}},l.set(s,f)}return f}let ok=Promise.resolve();async function xce(e,t,n,r){await ok;const i=await Zg(e,t);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(e,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),so(e).subs.delete(i.tag)),s>0}async function ak(e,t,n,r){try{await ok}catch{}const i=xce(e,t,n,r);return ok=i,await i}const yU=["then"];var Kz;Kz=T3;const q5=class q5{constructor(t,n,r,i){ce(this,"target");ce(this,"interface");ce(this,"runner");ce(this,"filters");ce(this,Kz);ce(this,"fallback");ie(typeof t=="string"||BH(t),"invalid value for Contract target","target",t),r==null&&(r=null);const s=sk.from(n);ut(this,{target:t,runner:r,interface:s}),Object.defineProperty(this,T3,{value:{}});let o,a=null,l=null;if(i){const d=Ru(r);l=new JM(this.interface,d,i)}let f=new Map;if(typeof t=="string")if(Mn(t))a=t,o=Promise.resolve(t);else{const d=Nh(r,"resolveName");if(!V9(d))throw hr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(t).then(u=>{if(u==null)throw hr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return so(this).addr=u,u})}else o=t.getAddress().then(d=>{if(d==null)throw new Error("TODO");return so(this).addr=d,d});Uce(this,{addrPromise:o,addr:a,deployTx:l,subs:f});const c=new Proxy({},{get:(d,u,h)=>{if(typeof u=="symbol"||yU.indexOf(u)>=0)return Reflect.get(d,u,h);try{return this.getEvent(u)}catch(g){if(!zi(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,u)=>yU.indexOf(u)>=0?Reflect.has(d,u):Reflect.has(d,u)||this.interface.hasEvent(String(u))});return ut(this,{filters:c}),ut(this,{fallback:s.receive||s.fallback?mce(this):null}),new Proxy(this,{get:(d,u,h)=>{if(typeof u=="symbol"||u in d||yU.indexOf(u)>=0)return Reflect.get(d,u,h);try{return d.getFunction(u)}catch(g){if(!zi(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(d,u)=>typeof u=="symbol"||u in d||yU.indexOf(u)>=0?Reflect.has(d,u):d.interface.hasFunction(u)})}connect(t){return new q5(this.target,this.interface,t)}attach(t){return new q5(t,this.interface,this.runner)}async getAddress(){return await so(this).addrPromise}async getDeployedCode(){const t=Ru(this.runner);Ee(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await t.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ru(this.runner);return Ee(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return so(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),gce(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),bce(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=so(this),o=i||await s,{fragment:a,topics:l}=await eA(this,t),f={address:o,topics:l,fromBlock:n,toBlock:r},c=Ru(this.runner);return Ee(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(f)).map(d=>{let u=a;if(u==null)try{u=this.interface.getEvent(d.topics[0])}catch{}if(u)try{return new QM(d,this.interface,u)}catch(h){return new MV(d,h)}return new xb(d,c)})}async on(t,n){const r=await eD(this,"on",t);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(t,n){const r=await eD(this,"once",t);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(t,...n){return await ak(this,t,n,null)}async listenerCount(t){if(t){const i=await Zg(this,t);return i?i.listeners.length:0}const{subs:n}=so(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(t){if(t){const i=await Zg(this,t);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=so(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(t,n){const r=await Zg(this,t);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),so(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const n=await Zg(this,t);if(!n)return this;n.stop(),so(this).subs.delete(n.tag)}else{const{subs:n}=so(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(t,n){return await this.on(t,n)}async removeListener(t,n){return await this.off(t,n)}static buildClass(t){class n extends q5{constructor(i,s=null){super(i,t,s)}}return n}static from(t,n,r){return r==null&&(r=null),new this(t,n,r)}};let lk=q5;function vce(){return lk}class uh extends vce(){}function Ew(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):ie(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class wce{constructor(t){ce(this,"name");ut(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,n){throw new Error("unsupported coin")}async decodeAddress(t,n){throw new Error("unsupported coin")}}const DV=new RegExp("^(ipfs)://(.*)$","i"),tD=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),DV,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Gd,nh,Xd,ap,T9,LV;const Rp=class Rp{constructor(t,n,r){be(this,Xd);ce(this,"provider");ce(this,"address");ce(this,"name");be(this,Gd);be(this,nh);ut(this,{provider:t,address:n,name:r}),J(this,Gd,null),J(this,nh,new uh(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return W(this,Gd)==null&&J(this,Gd,(async()=>{try{return await W(this,nh).supportsInterface("0x9061b923")}catch(t){if(zi(t,"CALL_EXCEPTION"))return!1;throw J(this,Gd,null),t}})()),await W(this,Gd)}async getAddress(t){if(t==null&&(t=60),t===60)try{const s=await Ie(this,Xd,ap).call(this,"addr(bytes32)");return s==null||s===J5?null:s}catch(s){if(zi(s,"CALL_EXCEPTION"))return null;throw s}if(t>=0&&t<2147483648){let s=t+2147483648;const o=await Ie(this,Xd,ap).call(this,"addr(bytes32,uint)",[s]);if(Mn(o,20))return bn(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof wce&&s.supportsCoinType(t)){n=s;break}if(n==null)return null;const r=await Ie(this,Xd,ap).call(this,"addr(bytes32,uint)",[t]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(t,r);if(i!=null)return i;Ee(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const n=await Ie(this,Xd,ap).call(this,"text(bytes32,string)",[t]);return n==null||n==="0x"?null:n}async getContentHash(){const t=await Ie(this,Xd,ap).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const n=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${Tse("0x"+n[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Ee(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:n});for(let r=0;r<tD.length;r++){const i=n.match(tD[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return t.push({type:"url",value:n}),{linkage:t,url:n};case"ipfs":{const o=Ew(n);return t.push({type:"ipfs",value:n}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:s,value:n});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const l=(i[2]||"").split("/");if(l.length!==2)return t.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:t};const f=l[1],c=new uh(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const U=await c.ownerOf(f);if(a!==U)return t.push({type:"!owner",value:U}),{url:null,linkage:t};t.push({type:"owner",value:U})}else if(s==="erc1155"){const U=await c.balanceOf(a,f);if(!U)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:U.toString()})}let d=await c[o](f);if(d==null||d==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:d}),s==="erc1155"&&(d=d.replace("{id}",E0(f,32).substring(2)),t.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=Ew(d)),t.push({type:"metadata-url",value:d});let u={};const h=await new vf(d).send();h.assertOk();try{u=h.bodyJson}catch{try{t.push({type:"!metadata",value:h.bodyText})}catch{const x=h.body;return x&&t.push({type:"!metadata",value:Ze(x)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!u)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(u)});let g=u.image;if(typeof g!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(DV)==null)return t.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:g}),g=Ew(g)}return t.push({type:"url",value:g}),{linkage:t,url:g}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const n=await t.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Ee(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(t,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await Ie(i=Rp,T9,LV).call(i,t,r);if(s!=null){const o=new Rp(t,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Gd=new WeakMap,nh=new WeakMap,Xd=new WeakSet,ap=async function(t,n){n=(n||[]).slice();const r=W(this,nh).interface;n.unshift(nk(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(t),Ee(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),n=[vle(this.name,255),r.encodeFunctionData(i,n)],t="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await W(this,nh)[t](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!zi(s,"CALL_EXCEPTION"))throw s}return null},T9=new WeakSet,LV=async function(t,n){const r=await Rp.getEnsAddress(t);try{const s=await new uh(r,["function resolver(bytes32) view returns (address)"],t).resolver(nk(n),{enableCcipRead:!0});return s===J5?null:s}catch(i){throw i}return null},be(Rp,T9);let I3=Rp;const nD=BigInt(0);function zt(e,t){return function(n){return n==null?t:e(n)}}function W9(e,t){return n=>{if(t&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>e(r))}}function vb(e,t){return n=>{const r={};for(const i in e){let s=i;if(t&&i in t&&!(s in n)){for(const o of t[i])if(o in n){s=o;break}}try{const o=e[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Ee(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r}}function Ece(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}ie(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}function Hm(e){return ie(Mn(e,!0),"invalid data","value",e),e}function xi(e){return ie(Mn(e,32),"invalid hash","value",e),e}const Sce=vb({address:bn,blockHash:xi,blockNumber:Nt,data:Hm,index:Nt,removed:zt(Ece,!1),topics:W9(xi),transactionHash:xi,transactionIndex:Nt},{index:["logIndex"]});function kce(e){return Sce(e)}const Cce=vb({hash:zt(xi),parentHash:xi,parentBeaconBlockRoot:zt(xi,null),number:Nt,timestamp:Nt,nonce:zt(Hm),difficulty:et,gasLimit:et,gasUsed:et,stateRoot:zt(xi,null),receiptsRoot:zt(xi,null),blobGasUsed:zt(et,null),excessBlobGas:zt(et,null),miner:zt(bn),prevRandao:zt(xi,null),extraData:Hm,baseFeePerGas:zt(et)},{prevRandao:["mixHash"]});function Mce(e){const t=Cce(e);return t.transactions=e.transactions.map(n=>typeof n=="string"?n:OV(n)),t}const Ace=vb({transactionIndex:Nt,blockNumber:Nt,transactionHash:xi,address:bn,topics:W9(xi),data:Hm,index:Nt,blockHash:xi},{index:["logIndex"]});function Tce(e){return Ace(e)}const Ice=vb({to:zt(bn,null),from:zt(bn,null),contractAddress:zt(bn,null),index:Nt,root:zt(Ze),gasUsed:et,blobGasUsed:zt(et,null),logsBloom:zt(Hm),blockHash:xi,hash:xi,logs:W9(Tce),blockNumber:Nt,cumulativeGasUsed:et,effectiveGasPrice:zt(et),blobGasPrice:zt(et,null),status:zt(Nt),type:zt(Nt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Nce(e){return Ice(e)}function OV(e){e.to&&et(e.to)===nD&&(e.to="0x0000000000000000000000000000000000000000");const t=vb({hash:xi,index:zt(Nt,void 0),type:n=>n==="0x"||n==null?0:Nt(n),accessList:zt(i1,null),blobVersionedHashes:zt(W9(xi,!0),null),blockHash:zt(xi,null),blockNumber:zt(Nt,null),transactionIndex:zt(Nt,null),from:bn,gasPrice:zt(et),maxPriorityFeePerGas:zt(et),maxFeePerGas:zt(et),maxFeePerBlobGas:zt(et,null),gasLimit:et,to:zt(bn,null),value:et,nonce:Nt,data:Hm,creates:zt(bn,null),chainId:zt(et,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(t.to==null&&t.creates==null&&(t.creates=Sae(t)),(e.type===1||e.type===2)&&e.accessList==null&&(t.accessList=[]),e.signature?t.signature=nl.from(e.signature):t.signature=nl.from(e),t.chainId==null){const n=t.signature.legacyChainId;n!=null&&(t.chainId=n)}return t.blockHash&&et(t.blockHash)===nD&&(t.blockHash=null),t}const Rce="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class wb{constructor(t){ce(this,"name");ut(this,{name:t})}clone(){return new wb(this.name)}}class G9 extends wb{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);ce(this,"effectiveBlock");ce(this,"txBase");ce(this,"txCreate");ce(this,"txDataZero");ce(this,"txDataNonzero");ce(this,"txAccessListStorageKey");ce(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),ie(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),ut(this,i)}clone(){return new G9(this.effectiveBlock,this)}}class X9 extends wb{constructor(n,r){super("org.ethers.plugins.network.Ens");ce(this,"address");ce(this,"targetNetwork");ut(this,{address:n||Rce,targetNetwork:r??1})}clone(){return new X9(this.address,this.targetNetwork)}}var ub,hb;class _ce extends wb{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");be(this,ub);be(this,hb);J(this,ub,n),J(this,hb,r)}get url(){return W(this,ub)}get processFunc(){return W(this,hb)}clone(){return this}}ub=new WeakMap,hb=new WeakMap;const Sw=new Map;var Em,Sm,Kd;const _p=class _p{constructor(t,n){be(this,Em);be(this,Sm);be(this,Kd);J(this,Em,t),J(this,Sm,et(n)),J(this,Kd,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return W(this,Em)}set name(t){J(this,Em,t)}get chainId(){return W(this,Sm)}set chainId(t){J(this,Sm,et(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===et(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===et(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===et(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(W(this,Kd).values())}attachPlugin(t){if(W(this,Kd).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return W(this,Kd).set(t.name,t.clone()),this}getPlugin(t){return W(this,Kd).get(t)||null}getPlugins(t){return this.plugins.filter(n=>n.name.split("#")[0]===t)}clone(){const t=new _p(this.name,this.chainId);return this.plugins.forEach(n=>{t.attachPlugin(n.clone())}),t}computeIntrinsicGas(t){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new G9;let r=n.txBase;if(t.to==null&&(r+=n.txCreate),t.data)for(let i=2;i<t.data.length;i+=2)t.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(t.accessList){const i=i1(t.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(t){if(Pce(),t==null)return _p.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const n=Sw.get(t);if(n)return n();if(typeof t=="bigint")return new _p("unknown",t);ie(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){ie(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const n=new _p(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&n.attachPlugin(new X9(t.ensAddress,t.ensNetwork)),n}ie(!1,"invalid network","network",t)}static register(t,n){typeof t=="number"&&(t=BigInt(t));const r=Sw.get(t);r&&ie(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),Sw.set(t,n)}};Em=new WeakMap,Sm=new WeakMap,Kd=new WeakMap;let Yl=_p;function rD(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${e}`);for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function iD(e){return new _ce(e,async(t,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),t()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:rD(a.maxFee,9),maxPriorityFeePerGas:rD(a.maxPriorityFee,9)}}catch(s){Ee(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let sD=!1;function Pce(){if(sD)return;sD=!0;function e(t,n,r){const i=function(){const s=new Yl(t,n);return r.ensNetwork!=null&&s.attachPlugin(new X9(null,r.ensNetwork)),s.attachPlugin(new G9),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Yl.register(t,i),Yl.register(n,i),r.altNames&&r.altNames.forEach(s=>{Yl.register(s,i)})}e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[iD("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[iD("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1})}function ck(e){return JSON.parse(JSON.stringify(e))}var nf,$o,Yd,jl,km,Cy;class Dce{constructor(t){be(this,km);be(this,nf);be(this,$o);be(this,Yd);be(this,jl);J(this,nf,t),J(this,$o,null),J(this,Yd,4e3),J(this,jl,-2)}get pollingInterval(){return W(this,Yd)}set pollingInterval(t){J(this,Yd,t)}start(){W(this,$o)||(J(this,$o,W(this,nf)._setTimeout(Ie(this,km,Cy).bind(this),W(this,Yd))),Ie(this,km,Cy).call(this))}stop(){W(this,$o)&&(W(this,nf)._clearTimeout(W(this,$o)),J(this,$o,null))}pause(t){this.stop(),t&&J(this,jl,-2)}resume(){this.start()}}nf=new WeakMap,$o=new WeakMap,Yd=new WeakMap,jl=new WeakMap,km=new WeakSet,Cy=async function(){try{const t=await W(this,nf).getBlockNumber();if(W(this,jl)===-2){J(this,jl,t);return}if(t!==W(this,jl)){for(let n=W(this,jl)+1;n<=t;n++){if(W(this,$o)==null)return;await W(this,nf).emit("block",n)}J(this,jl,t)}}catch{}W(this,$o)!=null&&J(this,$o,W(this,nf)._setTimeout(Ie(this,km,Cy).bind(this),W(this,Yd)))};var rh,ih,Zd;class tA{constructor(t){be(this,rh);be(this,ih);be(this,Zd);J(this,rh,t),J(this,Zd,!1),J(this,ih,n=>{this._poll(n,W(this,rh))})}async _poll(t,n){throw new Error("sub-classes must override this")}start(){W(this,Zd)||(J(this,Zd,!0),W(this,ih).call(this,-2),W(this,rh).on("block",W(this,ih)))}stop(){W(this,Zd)&&(J(this,Zd,!1),W(this,rh).off("block",W(this,ih)))}pause(t){this.stop()}resume(){this.start()}}rh=new WeakMap,ih=new WeakMap,Zd=new WeakMap;var Cm,rf;class Lce extends tA{constructor(n,r){super(n);be(this,Cm);be(this,rf);J(this,Cm,r),J(this,rf,-2)}pause(n){n&&J(this,rf,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(W(this,Cm));i!=null&&(W(this,rf)===-2?J(this,rf,i.number):i.number>W(this,rf)&&(r.emit(W(this,Cm),i.number),J(this,rf,i.number)))}}Cm=new WeakMap,rf=new WeakMap;var I9;class Oce extends tA{constructor(n,r){super(n);be(this,I9);J(this,I9,ck(r))}async _poll(n,r){throw new Error("@TODO")}}I9=new WeakMap;var Mm;class jce extends tA{constructor(n,r){super(n);be(this,Mm);J(this,Mm,r)}async _poll(n,r){const i=await r.getTransactionReceipt(W(this,Mm));i&&r.emit(W(this,Mm),i)}}Mm=new WeakMap;var sf,Am,Tm,qd,zo,N9,jV;class nA{constructor(t,n){be(this,N9);be(this,sf);be(this,Am);be(this,Tm);be(this,qd);be(this,zo);J(this,sf,t),J(this,Am,ck(n)),J(this,Tm,Ie(this,N9,jV).bind(this)),J(this,qd,!1),J(this,zo,-2)}start(){W(this,qd)||(J(this,qd,!0),W(this,zo)===-2&&W(this,sf).getBlockNumber().then(t=>{J(this,zo,t)}),W(this,sf).on("block",W(this,Tm)))}stop(){W(this,qd)&&(J(this,qd,!1),W(this,sf).off("block",W(this,Tm)))}pause(t){this.stop(),t&&J(this,zo,-2)}resume(){this.start()}}sf=new WeakMap,Am=new WeakMap,Tm=new WeakMap,qd=new WeakMap,zo=new WeakMap,N9=new WeakSet,jV=async function(t){if(W(this,zo)===-2)return;const n=ck(W(this,Am));n.fromBlock=W(this,zo)+1,n.toBlock=t;const r=await W(this,sf).getLogs(n);if(r.length===0){W(this,zo)<t-60&&J(this,zo,t-60);return}for(const i of r)W(this,sf).emit(W(this,Am),i),J(this,zo,i.blockNumber)};const Bce=BigInt(2),Fce=10;function xU(e){return e&&typeof e.then=="function"}function My(e,t){return e+":"+JSON.stringify(t,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class BV{constructor(t){ce(this,"name");ut(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function $ce(e){return JSON.parse(JSON.stringify(e))}function fk(e){return e=Array.from(new Set(e).values()),e.sort(),e}async function kw(e,t){if(e==null)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),typeof e=="string")switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(Mn(e,32)){const n=e.toLowerCase();return{type:"transaction",tag:My("tx",{hash:n}),hash:n}}if(e.orphan){const n=e;return{type:"orphan",tag:My("orphan",n),filter:$ce(n)}}if(e.address||e.topics){const n=e,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?fk(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{Mn(a)?i.push(a):s.push((async()=>{i.push(await fs(a,t))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=fk(i.map(a=>a.toLowerCase()))}return{filter:r,tag:My("event",r),type:"event"}}ie(!1,"unknown ProviderEvent","event",e)}function Cw(){return new Date().getTime()}const zce={cacheTimeout:250,pollingInterval:4e3};var Di,Qd,Li,Im,co,sh,Jd,of,pb,Ho,Nm,Rm,Lt,io,dk,uk,qg,hk,Qg,Ay;class Hce{constructor(t,n){be(this,Lt);be(this,Di);be(this,Qd);be(this,Li);be(this,Im);be(this,co);be(this,sh);be(this,Jd);be(this,of);be(this,pb);be(this,Ho);be(this,Nm);be(this,Rm);if(J(this,Rm,Object.assign({},zce,n||{})),t==="any")J(this,sh,!0),J(this,co,null);else if(t){const r=Yl.from(t);J(this,sh,!1),J(this,co,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else J(this,sh,!1),J(this,co,null);J(this,of,-1),J(this,Jd,new Map),J(this,Di,new Map),J(this,Qd,new Map),J(this,Li,null),J(this,Im,!1),J(this,pb,1),J(this,Ho,new Map),J(this,Nm,!1)}get pollingInterval(){return W(this,Rm).pollingInterval}get provider(){return this}get plugins(){return Array.from(W(this,Qd).values())}attachPlugin(t){if(W(this,Qd).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return W(this,Qd).set(t.name,t.connect(this)),this}getPlugin(t){return W(this,Qd).get(t)||null}get disableCcipRead(){return W(this,Nm)}set disableCcipRead(t){J(this,Nm,!!t)}async ccipReadFetch(t,n,r){if(this.disableCcipRead||r.length===0||t.to==null)return null;const i=t.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],f=l.replace("{sender}",i).replace("{data}",s),c=new vf(f);l.indexOf("{data}")===-1&&(c.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:a,urls:r});let d="unknown error";const u=await c.send();try{const h=u.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:h}),h.data;h.message&&(d=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:h})}catch{}Ee(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:l,errorMessage:d}}),o.push(d)}Ee(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:o}})}_wrapBlock(t,n){return new lce(Mce(t),this)}_wrapLog(t,n){return new xb(kce(t),this)}_wrapTransactionReceipt(t,n){return new SV(Nce(t),this)}_wrapTransactionResponse(t,n){return new a2(OV(t),this)}_detectNetwork(){Ee(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){Ee(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=Nt(await Ie(this,Lt,io).call(this,{method:"getBlockNumber"}),"%response");return W(this,of)>=0&&J(this,of,t),t}_getAddress(t){return fs(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(Mn(t))return Mn(t,32)?t:gp(t);if(typeof t=="bigint"&&(t=Nt(t,"blockTag")),typeof t=="number")return t>=0?gp(t):W(this,of)>=0?gp(W(this,of)+t):this.getBlockNumber().then(n=>gp(n+t));ie(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const n=(t.topics||[]).map(l=>l==null?null:Array.isArray(l)?fk(l.map(f=>f.toLowerCase())):l.toLowerCase()),r="blockHash"in t?t.blockHash:void 0,i=(l,f,c)=>{let d;switch(l.length){case 0:break;case 1:d=l[0];break;default:l.sort(),d=l}if(r&&(f!=null||c!=null))throw new Error("invalid filter");const u={};return d&&(u.address=d),n.length&&(u.topics=n),f&&(u.fromBlock=f),c&&(u.toBlock=c),r&&(u.blockHash=r),u};let s=[];if(t.address)if(Array.isArray(t.address))for(const l of t.address)s.push(this._getAddress(l));else s.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(t){const n=A3(t),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=fs(n[i],this);xU(s)?r.push(async function(){n[i]=await s}()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);xU(i)?r.push(async function(){n.blockTag=await i}()):n.blockTag=i}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(W(this,co)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw W(this,co)===i&&J(this,co,null),s}})();return J(this,co,i),(await i).clone()}const t=W(this,co),[n,r]=await Promise.all([t,this._detectNetwork()]);return n.chainId!==r.chainId&&(W(this,sh)?(this.emit("network",r,n),W(this,co)===t&&J(this,co,Promise.resolve(r))):Ee(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const t=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await ss({_block:Ie(this,Lt,hk).call(this,"latest",!1),gasPrice:(async()=>{try{const c=await Ie(this,Lt,io).call(this,{method:"getGasPrice"});return et(c,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const c=await Ie(this,Lt,io).call(this,{method:"getPriorityFee"});return et(c,"%response")}catch{}return null})()});let a=null,l=null;const f=this._wrapBlock(i,t);return f&&f.baseFeePerGas&&(l=o??BigInt("1000000000"),a=f.baseFeePerGas*Bce+l),new QP(s,a,l)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new vf(r.url),s=await r.processFunc(n,this,i);return new QP(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(t){let n=this._getTransactionRequest(t);return xU(n)&&(n=await n),et(await Ie(this,Lt,io).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(t){const{tx:n,blockTag:r}=await ss({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await Ie(this,Lt,uk).call(this,Ie(this,Lt,dk).call(this,n,r,t.enableCcipRead?0:-1))}async getBalance(t,n){return et(await Ie(this,Lt,qg).call(this,{method:"getBalance"},t,n),"%response")}async getTransactionCount(t,n){return Nt(await Ie(this,Lt,qg).call(this,{method:"getTransactionCount"},t,n),"%response")}async getCode(t,n){return Ze(await Ie(this,Lt,qg).call(this,{method:"getCode"},t,n))}async getStorage(t,n,r){const i=et(n,"position");return Ze(await Ie(this,Lt,qg).call(this,{method:"getStorage",position:i},t,r))}async broadcastTransaction(t){const{blockNumber:n,hash:r,network:i}=await ss({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),s=fV.from(t);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(t,n){const{network:r,params:i}=await ss({network:this.getNetwork(),params:Ie(this,Lt,hk).call(this,t,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(t){const{network:n,params:r}=await ss({network:this.getNetwork(),params:Ie(this,Lt,io).call(this,{method:"getTransaction",hash:t})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(t){const{network:n,params:r}=await ss({network:this.getNetwork(),params:Ie(this,Lt,io).call(this,{method:"getTransactionReceipt",hash:t})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await Ie(this,Lt,io).call(this,{method:"getTransaction",hash:t});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(t){const{result:n}=await ss({network:this.getNetwork(),result:Ie(this,Lt,io).call(this,{method:"getTransactionResult",hash:t})});return n==null?null:Ze(n)}async getLogs(t){let n=this._getFilter(t);xU(n)&&(n=await n);const{network:r,params:i}=await ss({network:this.getNetwork(),params:Ie(this,Lt,io).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(t){Ee(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await I3.fromName(this,t)}async getAvatar(t){const n=await this.getResolver(t);return n?await n.getAvatar():null}async resolveName(t){const n=await this.getResolver(t);return n?await n.getAddress():null}async lookupAddress(t){t=bn(t);const n=nk(t.substring(2).toLowerCase()+".addr.reverse");try{const r=await I3.getEnsAddress(this),s=await new uh(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===J5)return null;const a=await new uh(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==t?null:a}catch(r){if(zi(r,"BAD_DATA")&&r.value==="0x"||zi(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(t,n,r){const i=n??1;return i===0?this.getTransactionReceipt(t):new Promise(async(s,o)=>{let a=null;const l=async f=>{try{const c=await this.getTransactionReceipt(t);if(c!=null&&f-c.blockNumber+1>=i){s(c),a&&(clearTimeout(a),a=null);return}}catch(c){console.log("EEE",c)}this.once("block",l)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(hr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(t){Ee(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const n=W(this,Ho).get(t);n&&(n.timer&&clearTimeout(n.timer),W(this,Ho).delete(t))}_setTimeout(t,n){n==null&&(n=0);const r=Ug(this,pb)._++,i=()=>{W(this,Ho).delete(r),t()};if(this.paused)W(this,Ho).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);W(this,Ho).set(r,{timer:s,func:i,time:Cw()})}return r}_forEachSubscriber(t){for(const n of W(this,Di).values())t(n.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new BV(t.type);case"block":{const n=new Dce(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new Lce(this,t.type);case"event":return new nA(this,t.filter);case"transaction":return new jce(this,t.hash);case"orphan":return new Oce(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,n){for(const r of W(this,Di).values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),W(this,Li)!=null&&n.pause(W(this,Li));break}}async on(t,n){const r=await Ie(this,Lt,Ay).call(this,t);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,W(this,Li)!=null&&r.subscriber.pause(W(this,Li))),this}async once(t,n){const r=await Ie(this,Lt,Ay).call(this,t);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,W(this,Li)!=null&&r.subscriber.pause(W(this,Li))),this}async emit(t,...n){const r=await Ie(this,Lt,Qg).call(this,t,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new eH(this,o?null:s,t);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),W(this,Di).delete(r.tag)),i>0}async listenerCount(t){if(t){const r=await Ie(this,Lt,Qg).call(this,t);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of W(this,Di).values())n+=r.length;return n}async listeners(t){if(t){const r=await Ie(this,Lt,Qg).call(this,t);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of W(this,Di).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(t,n){const r=await Ie(this,Lt,Qg).call(this,t);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),W(this,Di).delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:n,started:r,subscriber:i}=await Ie(this,Lt,Ay).call(this,t);r&&i.stop(),W(this,Di).delete(n)}else for(const[n,{started:r,subscriber:i}]of W(this,Di))r&&i.stop(),W(this,Di).delete(n);return this}async addListener(t,n){return await this.on(t,n)}async removeListener(t,n){return this.off(t,n)}get destroyed(){return W(this,Im)}destroy(){this.removeAllListeners();for(const t of W(this,Ho).keys())this._clearTimeout(t);J(this,Im,!0)}get paused(){return W(this,Li)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(J(this,of,-1),W(this,Li)!=null){if(W(this,Li)==!!t)return;Ee(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(t)),J(this,Li,!!t);for(const n of W(this,Ho).values())n.timer&&clearTimeout(n.timer),n.time=Cw()-n.time}resume(){if(W(this,Li)!=null){this._forEachSubscriber(t=>t.resume()),J(this,Li,null);for(const t of W(this,Ho).values()){let n=t.time;n<0&&(n=0),t.time=Cw(),setTimeout(t.func,n)}}}}Di=new WeakMap,Qd=new WeakMap,Li=new WeakMap,Im=new WeakMap,co=new WeakMap,sh=new WeakMap,Jd=new WeakMap,of=new WeakMap,pb=new WeakMap,Ho=new WeakMap,Nm=new WeakMap,Rm=new WeakMap,Lt=new WeakSet,io=async function(t){const n=W(this,Rm).cacheTimeout;if(n<0)return await this._perform(t);const r=My(t.method,t);let i=W(this,Jd).get(r);return i||(i=this._perform(t),W(this,Jd).set(r,i),setTimeout(()=>{W(this,Jd).get(r)===i&&W(this,Jd).delete(r)},n)),await i},dk=async function(t,n,r){Ee(r<Fce,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:n,enableCcipRead:!0})});const i=A3(t);try{return Ze(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&DM(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&pr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await fs(i.to,this);let l;try{l=Kce(pr(s.data,4))}catch(d){Ee(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Ee(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const f=await this.ccipReadFetch(i,l.calldata,l.urls);Ee(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const c={to:a,data:wr([l.selector,Xce([f,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const d=await Ie(this,Lt,dk).call(this,c,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:d}),d}}throw s}},uk=async function(t){const{value:n}=await ss({network:this.getNetwork(),value:t});return n},qg=async function(t,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await Ie(this,Lt,uk).call(this,Ie(this,Lt,io).call(this,Object.assign(t,{address:i,blockTag:s})))},hk=async function(t,n){if(Mn(t,32))return await Ie(this,Lt,io).call(this,{method:"getBlock",blockHash:t,includeTransactions:n});let r=this._getBlockTag(t);return typeof r!="string"&&(r=await r),await Ie(this,Lt,io).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Qg=async function(t,n){let r=await kw(t,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await kw({orphan:"drop-log",log:n[0]},this)),W(this,Di).get(r.tag)||null},Ay=async function(t){const n=await kw(t,this),r=n.tag;let i=W(this,Di).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},W(this,Di).set(r,i)),i};function Vce(e,t){try{const n=pk(e,t);if(n)return y3(n)}catch{}return null}function pk(e,t){if(e==="0x")return null;try{const n=Nt(pr(e,t,t+32)),r=Nt(pr(e,n,n+32));return pr(e,n+32,n+32+r)}catch{}return null}function oD(e){const t=ls(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function Wce(e){if(e.length%32===0)return e;const t=new Uint8Array(Math.ceil(e.length/32)*32);return t.set(e),t}const Gce=new Uint8Array([]);function Xce(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(Gce),n+=32;for(let r=0;r<e.length;r++){const i=Ht(e[r]);t[r]=oD(n),t.push(oD(i.length)),t.push(Wce(i)),n+=32+Math.ceil(i.length/32)*32}return wr(t)}const aD="0x0000000000000000000000000000000000000000000000000000000000000000";function Kce(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Ee(Pp(e)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=pr(e,0,32);Ee(pr(n,0,12)===pr(aD,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=pr(n,12);try{const r=[],i=Nt(pr(e,32,64)),s=Nt(pr(e,i,i+32)),o=pr(e,i+32);for(let a=0;a<s;a++){const l=Vce(o,a*32);if(l==null)throw new Error("abort");r.push(l)}t.urls=r}catch{Ee(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=pk(e,64);if(r==null)throw new Error("abort");t.calldata=r}catch{Ee(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Ee(pr(e,100,128)===pr(aD,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=pr(e,96,100);try{const r=pk(e,128);if(r==null)throw new Error("abort");t.extraData=r}catch{Ee(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>t[r]),t}function $1(e,t){if(e.provider)return e.provider;Ee(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function lD(e,t){let n=A3(t);if(n.to!=null&&(n.to=fs(n.to,e)),n.from!=null){const r=n.from;n.from=Promise.all([e.getAddress(),fs(r,e)]).then(([i,s])=>(ie(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=e.getAddress();return await ss(n)}class Yce{constructor(t){ce(this,"provider");ut(this,{provider:t||null})}async getNonce(t){return $1(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await lD(this,t)}async populateTransaction(t){const n=$1(this,"populateTransaction"),r=await lD(this,t);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=et(r.chainId);ie(o===i.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?ie(!1,"eip-1559 transaction do not support gasPrice","tx",t):(r.type===0||r.type===1)&&s&&ie(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Ee(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Ee(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Ee(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ss(r)}async estimateGas(t){return $1(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return $1(this,"call").call(await this.populateCall(t))}async resolveName(t){return await $1(this,"resolveName").resolveName(t)}async sendTransaction(t){const n=$1(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const i=fV.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}}function Zce(e){return JSON.parse(JSON.stringify(e))}var rs,Bl,oh,e0,ah,_m,_0,mk,gk;class FV{constructor(t){be(this,_0);be(this,rs);be(this,Bl);be(this,oh);be(this,e0);be(this,ah);be(this,_m);J(this,rs,t),J(this,Bl,null),J(this,oh,Ie(this,_0,mk).bind(this)),J(this,e0,!1),J(this,ah,null),J(this,_m,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,n){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){W(this,e0)||(J(this,e0,!0),Ie(this,_0,mk).call(this,-2))}stop(){W(this,e0)&&(J(this,e0,!1),J(this,_m,!0),Ie(this,_0,gk).call(this),W(this,rs).off("block",W(this,oh)))}pause(t){t&&Ie(this,_0,gk).call(this),W(this,rs).off("block",W(this,oh))}resume(){this.start()}}rs=new WeakMap,Bl=new WeakMap,oh=new WeakMap,e0=new WeakMap,ah=new WeakMap,_m=new WeakMap,_0=new WeakSet,mk=async function(t){try{W(this,Bl)==null&&J(this,Bl,this._subscribe(W(this,rs)));let n=null;try{n=await W(this,Bl)}catch(s){if(!zi(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){J(this,Bl,null),W(this,rs)._recoverSubscriber(this,this._recover(W(this,rs)));return}const r=await W(this,rs).getNetwork();if(W(this,ah)||J(this,ah,r),W(this,ah).chainId!==r.chainId)throw new Error("chaid changed");if(W(this,_m))return;const i=await W(this,rs).send("eth_getFilterChanges",[n]);await this._emitResults(W(this,rs),i)}catch(n){console.log("@TODO",n)}W(this,rs).once("block",W(this,oh))},gk=function(){const t=W(this,Bl);t&&(J(this,Bl,null),t.then(n=>{W(this,rs).destroyed||W(this,rs).send("eth_uninstallFilter",[n])}))};var lh;class qce extends FV{constructor(n,r){super(n);be(this,lh);J(this,lh,Zce(r))}_recover(n){return new nA(n,W(this,lh))}async _subscribe(n){return await n.send("eth_newFilter",[W(this,lh)])}async _emitResults(n,r){for(const i of r)n.emit(W(this,lh),n._wrapLog(i,n._network))}}lh=new WeakMap;class Qce extends FV{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,n){for(const r of n)t.emit("pending",r)}}const Jce="bigint,boolean,function,number,string,symbol".split(/,/g);function Ty(e){if(e==null||Jce.indexOf(typeof e)>=0||typeof e.getAddress=="function")return e;if(Array.isArray(e))return e.map(Ty);if(typeof e=="object")return Object.keys(e).reduce((t,n)=>(t[n]=e[n],t),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function efe(e){return new Promise(t=>{setTimeout(t,e)})}function z1(e){return e&&e.toLowerCase()}function cD(e){return e&&typeof e.pollingInterval=="number"}const $V={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Mw extends Yce{constructor(n,r){super(n);ce(this,"address");r=bn(r),ut(this,{address:r})}connect(n){Ee(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=Ty(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await fs(o,this.provider);ie(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await fs(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const f=async()=>{try{const c=await this.provider.getTransaction(i);if(c!=null){s(c.replaceableTransaction(r));return}}catch(c){if(zi(c,"CANCELLED")||zi(c,"BAD_DATA")||zi(c,"NETWORK_ERROR")){c.info==null&&(c.info={}),c.info.sendTransactionHash=i,o(c);return}if(zi(c,"INVALID_ARGUMENT")&&(l++,c.info==null&&(c.info={}),c.info.sendTransactionHash=i,l>10)){o(c);return}this.provider.emit("error",hr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{f()},a.pop()||4e3)};f()})}async signTransaction(n){const r=Ty(n);if(r.from){const s=await fs(r.from,this.provider);ie(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?gf(n):n;return await this.provider.send("personal_sign",[Ze(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=Ty(i),o=await M3.resolveNames(n,r,s,async a=>{const l=await fs(a);return ie(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(M3.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?gf(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ze(r)])}}var ch,Pm,af,Fl,La,Vo,Ns,mb,bk;class tfe extends Hce{constructor(n,r){super(n,r);be(this,mb);be(this,ch);be(this,Pm);be(this,af);be(this,Fl);be(this,La);be(this,Vo);be(this,Ns);J(this,Pm,1),J(this,ch,Object.assign({},$V,r||{})),J(this,af,[]),J(this,Fl,null),J(this,Vo,null),J(this,Ns,null);{let s=null;const o=new Promise(a=>{s=a});J(this,La,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(ie(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&J(this,Vo,Yl.from(n))):i&&(ie(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),J(this,Vo,i))}_getOption(n){return W(this,ch)[n]}get _network(){return Ee(W(this,Vo),"network is not available yet","NETWORK_ERROR"),W(this,Vo)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&et(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(W(this,Vo))return W(this,Vo)}else return n;return W(this,Ns)?await W(this,Ns):this.ready?(J(this,Ns,(async()=>{try{const r=Yl.from(et(await this.send("eth_chainId",[])));return J(this,Ns,null),r}catch(r){throw J(this,Ns,null),r}})()),await W(this,Ns)):(J(this,Ns,(async()=>{const r={id:Ug(this,Pm)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],J(this,Ns,null)}catch(s){throw J(this,Ns,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Yl.from(et(i.result));throw this.getRpcError(r,i)})()),await W(this,Ns))}_start(){W(this,La)==null||W(this,La).resolve==null||(W(this,La).resolve(),J(this,La,null),(async()=>{for(;W(this,Vo)==null&&!this.destroyed;)try{J(this,Vo,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",hr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await efe(1e3)}Ie(this,mb,bk).call(this)})())}async _waitUntilReady(){if(W(this,La)!=null)return await W(this,La).promise}_getSubscriber(n){return n.type==="pending"?new Qce(this):n.type==="event"?this._getOption("polling")?new nA(this,n.filter):new qce(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new BV("orphan"):super._getSubscriber(n)}get ready(){return W(this,La)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=gp(et(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=Ze(n[i]))}),n.accessList&&(r.accessList=i1(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[z1(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[z1(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[z1(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[z1(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(z1):n.filter.address=z1(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return hr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=Uk(s),f=o2.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return f.info={error:s,payload:n},f}const o=JSON.stringify(ife(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return hr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return hr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return hr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return hr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return hr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?hr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):hr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(hr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=Ug(this,Pm)._++,s=new Promise((o,a)=>{W(this,af).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return Ie(this,mb,bk).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new Mw(this,s[n])}const{accounts:i}=await ss({network:this.getNetwork(),accounts:r});n=bn(n);for(const s of i)if(bn(s)===n)return new Mw(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new Mw(this,r))}destroy(){W(this,Fl)&&(clearTimeout(W(this,Fl)),J(this,Fl,null));for(const{payload:n,reject:r}of W(this,af))r(hr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));J(this,af,[]),super.destroy()}}ch=new WeakMap,Pm=new WeakMap,af=new WeakMap,Fl=new WeakMap,La=new WeakMap,Vo=new WeakMap,Ns=new WeakMap,mb=new WeakSet,bk=function(){if(W(this,Fl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");J(this,Fl,setTimeout(()=>{J(this,Fl,null);const r=W(this,af);for(J(this,af,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==W(this,ch).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>W(this,ch).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:f}of i){if(this.destroyed){l(hr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const c=o.filter(d=>d.id===f.id)[0];if(c==null){const d=hr("missing response for request","BAD_DATA",{value:o,info:{payload:f}});this.emit("error",d),l(d);continue}if("error"in c){l(this.getRpcError(f,c));continue}a(c.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var t0;class nfe extends tfe{constructor(n,r){super(n,r);be(this,t0);let i=this._getOption("pollingInterval");i==null&&(i=$V.pollingInterval),J(this,t0,i)}_getSubscriber(n){const r=super._getSubscriber(n);return cD(r)&&(r.pollingInterval=W(this,t0)),r}get pollingInterval(){return W(this,t0)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");J(this,t0,n),this._forEachSubscriber(r=>{cD(r)&&(r.pollingInterval=W(this,t0))})}}t0=new WeakMap;var Dm;class rfe extends nfe{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);be(this,Dm);typeof n=="string"?J(this,Dm,new vf(n)):J(this,Dm,n.clone())}_getConnection(){return W(this,Dm).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}Dm=new WeakMap;function Uk(e){if(e==null)return null;if(typeof e.message=="string"&&e.message.match(/revert/i)&&Mn(e.data))return{message:e.message,data:e.data};if(typeof e=="object"){for(const t in e){const n=Uk(e[t]);if(n)return n}return null}if(typeof e=="string")try{return Uk(JSON.parse(e))}catch{}return null}function yk(e,t){if(e!=null){if(typeof e.message=="string"&&t.push(e.message),typeof e=="object")for(const n in e)yk(e[n],t);if(typeof e=="string")try{return yk(JSON.parse(e),t)}catch{}}}function ife(e){const t=[];return yk(e,t),t}const sfe="hh-sol-artifact-1",ofe="CanonThread",afe="contracts/CanonThread.sol",lfe=[{inputs:[{internalType:"address",name:"_tokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"contentType",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ContentAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"oldContentHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"}],name:"ContentUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"nodeId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"NodeCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"proposer",type:"address"},{indexed:!1,internalType:"uint256",name:"stake",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"bool",name:"passed",type:"bool"}],name:"ProposalExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"string",name:"metadataHash",type:"string"},{indexed:!1,internalType:"string",name:"contentHash",type:"string"}],name:"ThreadCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"threadId",type:"uint256"},{indexed:!1,internalType:"string",name:"newMetadataHash",type:"string"},{indexed:!1,internalType:"string",name:"newContentHash",type:"string"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"}],name:"ThreadUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"proposalId",type:"uint256"},{indexed:!1,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"bool",name:"support",type:"bool"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Voted",type:"event"},{inputs:[],name:"MINIMUM_STAKE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_BUFFER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_PERIOD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"_nodeType",type:"uint8"}],name:"createNode",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_metadataHash",type:"string"},{internalType:"string",name:"_contentHash",type:"string"}],name:"createThread",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"executeProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"hasVoted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_hash",type:"string"}],name:"isValidIPFSHash",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"nodeCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"nodes",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"enum CanonThread.NodeType",name:"nodeType",type:"uint8"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposalCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"proposals",outputs:[{internalType:"uint256",name:"threadId",type:"uint256"},{internalType:"string",name:"proposedMetadataHash",type:"string"},{internalType:"string",name:"proposedContentHash",type:"string"},{internalType:"address",name:"proposer",type:"address"},{internalType:"uint256",name:"stake",type:"uint256"},{internalType:"uint256",name:"votesFor",type:"uint256"},{internalType:"uint256",name:"votesAgainst",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"bool",name:"passed",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"},{internalType:"uint256",name:"_stake",type:"uint256"}],name:"proposeUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"threadCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"threads",outputs:[{internalType:"string",name:"metadataHash",type:"string"},{internalType:"string",name:"contentHash",type:"string"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint256",name:"version",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract CanonToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_threadId",type:"uint256"},{internalType:"string",name:"_newMetadataHash",type:"string"},{internalType:"string",name:"_newContentHash",type:"string"}],name:"updateThread",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"bool",name:"_support",type:"bool"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"}],cfe="0x60806040523480156200001157600080fd5b50604051620030f2380380620030f28339818101604052810190620000379190620000f1565b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060006006819055505062000123565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620000b9826200008c565b9050919050565b620000cb81620000ac565b8114620000d757600080fd5b50565b600081519050620000eb81620000c0565b92915050565b6000602082840312156200010a576200010962000087565b5b60006200011a84828501620000da565b91505092915050565b612fbf80620001336000396000f3fe608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",ffe="0x608060405234801561001057600080fd5b50600436106101165760003560e01c80638e5b14b5116100a2578063cb1650b411610071578063cb1650b414610306578063cea5a96114610336578063d46a5d7e14610366578063f552b2ba14610382578063fc0c546a146103b757610116565b80638e5b14b51461027e5780639b73be46146102ae578063b1610d7e146102ca578063c7b219d6146102e857610116565b8063191eb4c6116100e9578063191eb4c6146101ac5780631c53c280146101ca5780631ca02e6314610200578063438596321461021e5780636262ecd31461024e57610116565b8063013cf08b1461011b57806308dbbb03146101545780630c0512e9146101725780630d61b51914610190575b600080fd5b61013560048036038101906101309190611b25565b6103d5565b60405161014b9a99989796959493929190611c4d565b60405180910390f35b61015c610573565b6040516101699190611cf7565b60405180910390f35b61017a610580565b6040516101879190611cf7565b60405180910390f35b6101aa60048036038101906101a59190611b25565b610586565b005b6101b4610824565b6040516101c19190611cf7565b60405180910390f35b6101e460048036038101906101df9190611b25565b61082a565b6040516101f79796959493929190611d89565b60405180910390f35b6102086109b6565b6040516102159190611cf7565b60405180910390f35b61023860048036038101906102339190611e32565b6109bc565b6040516102459190611e72565b60405180910390f35b61026860048036038101906102639190611fe7565b6109eb565b6040516102759190611cf7565b60405180910390f35b61029860048036038101906102939190612086565b610c90565b6040516102a59190611cf7565b60405180910390f35b6102c860048036038101906102c39190612125565b611094565b005b6102d26112cc565b6040516102df9190611cf7565b60405180910390f35b6102f06112d3565b6040516102fd9190611cf7565b60405180910390f35b610320600480360381019061031b91906121b0565b6112d8565b60405161032d9190611cf7565b60405180910390f35b610350600480360381019061034b9190612228565b6114d0565b60405161035d9190611e72565b60405180910390f35b610380600480360381019061037b919061229d565b6115d2565b005b61039c60048036038101906103979190611b25565b61193c565b6040516103ae969594939291906122f0565b60405180910390f35b6103bf611ab5565b6040516103cc91906123be565b60405180910390f35b60056020528060005260406000206000915090508060000154908060010180546103fe90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461042a90612408565b80156104775780601f1061044c57610100808354040283529160200191610477565b820191906000526020600020905b81548152906001019060200180831161045a57829003601f168201915b50505050509080600201805461048c90612408565b80601f01602080910402602001604051908101604052809291908181526020018280546104b890612408565b80156105055780601f106104da57610100808354040283529160200191610505565b820191906000526020600020905b8154815290600101906020018083116104e857829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060040154908060050154908060060154908060070154908060080160009054906101000a900460ff16908060080160019054906101000a900460ff1690508a565b68056bc75e2d6310000081565b60065481565b6000600560008381526020019081526020016000209050603c81600701546105ae9190612468565b4210156105f0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e7906124e8565b60405180910390fd5b8060080160009054906101000a900460ff1615610642576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063990612554565b60405180910390fd5b60018160080160006101000a81548160ff0219169083151502179055508060060154816005015411156107b95760018160080160016101000a81548160ff0219169083151502179055506000806000836000015481526020019081526020016000209050816001018160000190816106ba9190612741565b50816002018160010190816106cf9190612741565b508060030160008154809291906106e590612829565b9190505550600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8360030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600401546040518363ffffffff1660e01b815260040161076f929190612871565b6020604051808303816000875af115801561078e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107b291906128af565b50506107d7565b60008160080160016101000a81548160ff0219169083151502179055505b817f948f4a9cd986f1118c3fbd459f7a22b23c0693e1ca3ef06a6a8be5aa7d39cc038260080160019054906101000a900460ff166040516108189190611e72565b60405180910390a25050565b60025481565b600160205280600052604060002060009150905080600001805461084d90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461087990612408565b80156108c65780601f1061089b576101008083540402835291602001916108c6565b820191906000526020600020905b8154815290600101906020018083116108a957829003601f168201915b5050505050908060010180546108db90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461090790612408565b80156109545780601f1061092957610100808354040283529160200191610954565b820191906000526020600020905b81548152906001019060200180831161093757829003601f168201915b5050505050908060020160009054906101000a900460ff16908060020160019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905087565b60035481565b60076020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600086815260200190815260200160002060050160009054906101000a900460ff16610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612928565b60405180910390fd5b610a58846114d0565b610a97576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8e90612994565b60405180910390fd5b610aa0836114d0565b610adf576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad690612a00565b60405180910390fd5b60036000815480929190610af290612829565b91905055506040518060e00160405280858152602001848152602001836005811115610b2157610b20611d12565b5b81526020013373ffffffffffffffffffffffffffffffffffffffff168152602001428152602001868152602001600115158152506001600060035481526020019081526020016000206000820151816000019081610b7f9190612a20565b506020820151816001019081610b959190612a20565b5060408201518160020160006101000a81548160ff02191690836005811115610bc157610bc0611d12565b5b021790555060608201518160020160016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816003015560a0820151816004015560c08201518160050160006101000a81548160ff021916908315150217905550905050846003547f4ad9bba3461e946a892efbe1a3f5f912b4a3f2e77f47f60e9f1e01dd56dffdb5848787604051610c7b93929190612af2565b60405180910390a36003549050949350505050565b600068056bc75e2d63100000821015610cde576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cd590612b83565b60405180910390fd5b60008086815260200190815260200160002060050160009054906101000a900460ff16610d40576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3790612928565b60405180910390fd5b610d49846114d0565b610d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d7f90612994565b60405180910390fd5b610d91836114d0565b610dd0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dc790612a00565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b8152600401610e2f93929190612ba3565b6020604051808303816000875af1158015610e4e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e7291906128af565b610eb1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ea890612c26565b60405180910390fd5b60066000815480929190610ec490612829565b91905055506040518061014001604052808681526020018581526020018481526020013373ffffffffffffffffffffffffffffffffffffffff16815260200183815260200160008152602001600081526020016203f48042610f269190612468565b815260200160001515815260200160001515815250600560006006548152602001908152602001600020600082015181600001556020820151816001019081610f6f9190612a20565b506040820151816002019081610f859190612a20565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004015560a0820151816005015560c0820151816006015560e082015181600701556101008201518160080160006101000a81548160ff0219169083151502179055506101208201518160080160016101000a81548160ff021916908315150217905550905050846006547fa67ca5ea1ca35cfdf24fd867604d1db6d4cdb7b7df1f737293e16e549ac45fd033856203f480426110709190612468565b60405161107f93929190612c46565b60405180910390a36006549050949350505050565b60008084815260200190815260200160002060050160009054906101000a900460ff166110f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016110ed90612928565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660008085815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611199576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161119090612cc9565b60405180910390fd5b6111a2826114d0565b6111e1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016111d890612994565b60405180910390fd5b6111ea816114d0565b611229576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161122090612a00565b60405180910390fd5b60008060008581526020019081526020016000209050828160000190816112509190612a20565b50818160010190816112629190612a20565b5080600301600081548092919061127890612829565b9190505550428160040181905550837f9aac02c846a391ebcc431cf32209849eb70d2dd45c501b6a50997d38b0292d75848484600301546040516112be93929190612ce9565b60405180910390a250505050565b6203f48081565b603c81565b60006112e3836114d0565b611322576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161131990612994565b60405180910390fd5b61132b826114d0565b61136a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161136190612a00565b60405180910390fd5b6002600081548092919061137d90612829565b91905055506040518060c001604052808481526020018381526020013373ffffffffffffffffffffffffffffffffffffffff1681526020016001815260200142815260200160011515815250600080600254815260200190815260200160002060008201518160000190816113f29190612a20565b5060208201518160010190816114089190612a20565b5060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff0219169083151502179055509050506002547faafda774caeb60f01f42dff1f1fb9ac772090761e7edde8bbfe7b17cffee45ed3385856040516114bd93929190612d2e565b60405180910390a2600254905092915050565b600080829050602e8151146114e95760009150506115cd565b7f51000000000000000000000000000000000000000000000000000000000000008160008151811061151e5761151d612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415806115b857507f6d000000000000000000000000000000000000000000000000000000000000008160018151811061158857611587612d73565b5b602001015160f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614155b156115c75760009150506115cd565b60019150505b919050565b6000600560008581526020019081526020016000209050603c81600701546115fa9190612468565b421061163b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161163290612dee565b60405180910390fd5b8060080160009054906101000a900460ff161561168d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161168490612554565b60405180910390fd5b6007600085815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161561172b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161172290612e5a565b60405180910390fd5b6000821161176e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176590612ec6565b60405180910390fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330856040518463ffffffff1660e01b81526004016117cd93929190612ba3565b6020604051808303816000875af11580156117ec573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181091906128af565b61184f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161184690612f32565b60405180910390fd5b821561187557818160050160008282546118699190612468565b92505081905550611891565b818160060160008282546118899190612468565b925050819055505b60016007600086815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550837f7c2de587c00d75474a0c6c6fa96fd3b45dc974cd4e8a75f712bb84c950dce1b533858560405161192e93929190612f52565b60405180910390a250505050565b600060205280600052604060002060009150905080600001805461195f90612408565b80601f016020809104026020016040519081016040528092919081815260200182805461198b90612408565b80156119d85780601f106119ad576101008083540402835291602001916119d8565b820191906000526020600020905b8154815290600101906020018083116119bb57829003601f168201915b5050505050908060010180546119ed90612408565b80601f0160208091040260200160405190810160405280929190818152602001828054611a1990612408565b8015611a665780601f10611a3b57610100808354040283529160200191611a66565b820191906000526020600020905b815481529060010190602001808311611a4957829003601f168201915b5050505050908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050160009054906101000a900460ff16905086565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b611b0281611aef565b8114611b0d57600080fd5b50565b600081359050611b1f81611af9565b92915050565b600060208284031215611b3b57611b3a611ae5565b5b6000611b4984828501611b10565b91505092915050565b611b5b81611aef565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611b9b578082015181840152602081019050611b80565b60008484015250505050565b6000601f19601f8301169050919050565b6000611bc382611b61565b611bcd8185611b6c565b9350611bdd818560208601611b7d565b611be681611ba7565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611c1c82611bf1565b9050919050565b611c2c81611c11565b82525050565b60008115159050919050565b611c4781611c32565b82525050565b600061014082019050611c63600083018d611b52565b8181036020830152611c75818c611bb8565b90508181036040830152611c89818b611bb8565b9050611c98606083018a611c23565b611ca56080830189611b52565b611cb260a0830188611b52565b611cbf60c0830187611b52565b611ccc60e0830186611b52565b611cda610100830185611c3e565b611ce8610120830184611c3e565b9b9a5050505050505050505050565b6000602082019050611d0c6000830184611b52565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b60068110611d5257611d51611d12565b5b50565b6000819050611d6382611d41565b919050565b6000611d7382611d55565b9050919050565b611d8381611d68565b82525050565b600060e0820190508181036000830152611da3818a611bb8565b90508181036020830152611db78189611bb8565b9050611dc66040830188611d7a565b611dd36060830187611c23565b611de06080830186611b52565b611ded60a0830185611b52565b611dfa60c0830184611c3e565b98975050505050505050565b611e0f81611c11565b8114611e1a57600080fd5b50565b600081359050611e2c81611e06565b92915050565b60008060408385031215611e4957611e48611ae5565b5b6000611e5785828601611b10565b9250506020611e6885828601611e1d565b9150509250929050565b6000602082019050611e876000830184611c3e565b92915050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611ecf82611ba7565b810181811067ffffffffffffffff82111715611eee57611eed611e97565b5b80604052505050565b6000611f01611adb565b9050611f0d8282611ec6565b919050565b600067ffffffffffffffff821115611f2d57611f2c611e97565b5b611f3682611ba7565b9050602081019050919050565b82818337600083830152505050565b6000611f65611f6084611f12565b611ef7565b905082815260208101848484011115611f8157611f80611e92565b5b611f8c848285611f43565b509392505050565b600082601f830112611fa957611fa8611e8d565b5b8135611fb9848260208601611f52565b91505092915050565b60068110611fcf57600080fd5b50565b600081359050611fe181611fc2565b92915050565b6000806000806080858703121561200157612000611ae5565b5b600061200f87828801611b10565b945050602085013567ffffffffffffffff8111156120305761202f611aea565b5b61203c87828801611f94565b935050604085013567ffffffffffffffff81111561205d5761205c611aea565b5b61206987828801611f94565b925050606061207a87828801611fd2565b91505092959194509250565b600080600080608085870312156120a05761209f611ae5565b5b60006120ae87828801611b10565b945050602085013567ffffffffffffffff8111156120cf576120ce611aea565b5b6120db87828801611f94565b935050604085013567ffffffffffffffff8111156120fc576120fb611aea565b5b61210887828801611f94565b925050606061211987828801611b10565b91505092959194509250565b60008060006060848603121561213e5761213d611ae5565b5b600061214c86828701611b10565b935050602084013567ffffffffffffffff81111561216d5761216c611aea565b5b61217986828701611f94565b925050604084013567ffffffffffffffff81111561219a57612199611aea565b5b6121a686828701611f94565b9150509250925092565b600080604083850312156121c7576121c6611ae5565b5b600083013567ffffffffffffffff8111156121e5576121e4611aea565b5b6121f185828601611f94565b925050602083013567ffffffffffffffff81111561221257612211611aea565b5b61221e85828601611f94565b9150509250929050565b60006020828403121561223e5761223d611ae5565b5b600082013567ffffffffffffffff81111561225c5761225b611aea565b5b61226884828501611f94565b91505092915050565b61227a81611c32565b811461228557600080fd5b50565b60008135905061229781612271565b92915050565b6000806000606084860312156122b6576122b5611ae5565b5b60006122c486828701611b10565b93505060206122d586828701612288565b92505060406122e686828701611b10565b9150509250925092565b600060c082019050818103600083015261230a8189611bb8565b9050818103602083015261231e8188611bb8565b905061232d6040830187611c23565b61233a6060830186611b52565b6123476080830185611b52565b61235460a0830184611c3e565b979650505050505050565b6000819050919050565b600061238461237f61237a84611bf1565b61235f565b611bf1565b9050919050565b600061239682612369565b9050919050565b60006123a88261238b565b9050919050565b6123b88161239d565b82525050565b60006020820190506123d360008301846123af565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061242057607f821691505b602082108103612433576124326123d9565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061247382611aef565b915061247e83611aef565b925082820190508082111561249657612495612439565b5b92915050565b7f566f74696e6720706572696f64206e6f7420656e646564000000000000000000600082015250565b60006124d2601783611b6c565b91506124dd8261249c565b602082019050919050565b60006020820190508181036000830152612501816124c5565b9050919050565b7f50726f706f73616c20616c726561647920657865637574656400000000000000600082015250565b600061253e601983611b6c565b915061254982612508565b602082019050919050565b6000602082019050818103600083015261256d81612531565b9050919050565b60008154905061258381612408565b9050919050565b60008190508160005260206000209050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026126017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826125c4565b61260b86836125c4565b95508019841693508086168417925050509392505050565b600061263e61263961263484611aef565b61235f565b611aef565b9050919050565b6000819050919050565b61265883612623565b61266c61266482612645565b8484546125d1565b825550505050565b600090565b612681612674565b61268c81848461264f565b505050565b5b818110156126b0576126a5600082612679565b600181019050612692565b5050565b601f8211156126f5576126c68161258a565b6126cf846125b4565b810160208510156126de578190505b6126f26126ea856125b4565b830182612691565b50505b505050565b600082821c905092915050565b6000612718600019846008026126fa565b1980831691505092915050565b60006127318383612707565b9150826002028217905092915050565b81810361274f575050612827565b61275882612574565b67ffffffffffffffff81111561277157612770611e97565b5b61277b8254612408565b6127868282856126b4565b6000601f8311600181146127b557600084156127a3578287015490505b6127ad8582612725565b865550612820565b601f1984166127c38761259f565b96506127ce8661258a565b60005b828110156127f6578489015482556001820191506001850194506020810190506127d1565b86831015612813578489015461280f601f891682612707565b8355505b6001600288020188555050505b5050505050505b565b600061283482611aef565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361286657612865612439565b5b600182019050919050565b60006040820190506128866000830185611c23565b6128936020830184611b52565b9392505050565b6000815190506128a981612271565b92915050565b6000602082840312156128c5576128c4611ae5565b5b60006128d38482850161289a565b91505092915050565b7f54687265616420646f6573206e6f742065786973740000000000000000000000600082015250565b6000612912601583611b6c565b915061291d826128dc565b602082019050919050565b6000602082019050818103600083015261294181612905565b9050919050565b7f496e76616c6964206d6574616461746120495046532068617368000000000000600082015250565b600061297e601a83611b6c565b915061298982612948565b602082019050919050565b600060208201905081810360008301526129ad81612971565b9050919050565b7f496e76616c696420636f6e74656e742049504653206861736800000000000000600082015250565b60006129ea601983611b6c565b91506129f5826129b4565b602082019050919050565b60006020820190508181036000830152612a19816129dd565b9050919050565b612a2982611b61565b67ffffffffffffffff811115612a4257612a41611e97565b5b612a4c8254612408565b612a578282856126b4565b600060209050601f831160018114612a8a5760008415612a78578287015190505b612a828582612725565b865550612aea565b601f198416612a988661258a565b60005b82811015612ac057848901518255600182019150602085019450602081019050612a9b565b86831015612add5784890151612ad9601f891682612707565b8355505b6001600288020188555050505b505050505050565b6000606082019050612b076000830186611d7a565b8181036020830152612b198185611bb8565b90508181036040830152612b2d8184611bb8565b9050949350505050565b7f496e73756666696369656e74207374616b650000000000000000000000000000600082015250565b6000612b6d601283611b6c565b9150612b7882612b37565b602082019050919050565b60006020820190508181036000830152612b9c81612b60565b9050919050565b6000606082019050612bb86000830186611c23565b612bc56020830185611c23565b612bd26040830184611b52565b949350505050565b7f5374616b65207472616e73666572206661696c65640000000000000000000000600082015250565b6000612c10601583611b6c565b9150612c1b82612bda565b602082019050919050565b60006020820190508181036000830152612c3f81612c03565b9050919050565b6000606082019050612c5b6000830186611c23565b612c686020830185611b52565b612c756040830184611b52565b949350505050565b7f4f6e6c792063726561746f722063616e20757064617465000000000000000000600082015250565b6000612cb3601783611b6c565b9150612cbe82612c7d565b602082019050919050565b60006020820190508181036000830152612ce281612ca6565b9050919050565b60006060820190508181036000830152612d038186611bb8565b90508181036020830152612d178185611bb8565b9050612d266040830184611b52565b949350505050565b6000606082019050612d436000830186611c23565b8181036020830152612d558185611bb8565b90508181036040830152612d698184611bb8565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f566f74696e6720706572696f6420656e64656400000000000000000000000000600082015250565b6000612dd8601383611b6c565b9150612de382612da2565b602082019050919050565b60006020820190508181036000830152612e0781612dcb565b9050919050565b7f416c726561647920766f74656400000000000000000000000000000000000000600082015250565b6000612e44600d83611b6c565b9150612e4f82612e0e565b602082019050919050565b60006020820190508181036000830152612e7381612e37565b9050919050565b7f4d75737420766f7465207769746820736f6d6520746f6b656e73000000000000600082015250565b6000612eb0601a83611b6c565b9150612ebb82612e7a565b602082019050919050565b60006020820190508181036000830152612edf81612ea3565b9050919050565b7f566f7465207472616e73666572206661696c6564000000000000000000000000600082015250565b6000612f1c601483611b6c565b9150612f2782612ee6565b602082019050919050565b60006020820190508181036000830152612f4b81612f0f565b9050919050565b6000606082019050612f676000830186611c23565b612f746020830185611c3e565b612f816040830184611b52565b94935050505056fea264697066735822122015e919a2a59c86e83d5300182ea3ab30dcb327909583883cc37fa299d086fb5964736f6c63430008180033",dfe={},ufe={},hfe={_format:sfe,contractName:ofe,sourceName:afe,abi:lfe,bytecode:cfe,deployedBytecode:ffe,linkReferences:dfe,deployedLinkReferences:ufe},pfe="hh-sol-artifact-1",mfe="CanonToken",gfe="contracts/CanonToken.sol",bfe=[{inputs:[{internalType:"uint256",name:"initialSupply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Ufe="0x60806040523480156200001157600080fd5b5060405162001dc738038062001dc7833981810160405281019062000037919062000560565b336040518060400160405280600a81526020017f43616e6f6e546f6b656e000000000000000000000000000000000000000000008152506040518060400160405280600581526020017f43414e4f4e0000000000000000000000000000000000000000000000000000008152508160039081620000b5919062000802565b508060049081620000c7919062000802565b505050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036200013f5760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016200013691906200092e565b60405180910390fd5b62000150816200019460201b60201c565b506200018d33620001666200025a60201b60201c565b600a62000174919062000adb565b8362000181919062000b2c565b6200026360201b60201c565b5062000c1d565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b60006012905090565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620002d85760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401620002cf91906200092e565b60405180910390fd5b620002ec60008383620002f060201b60201c565b5050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036200034657806002600082825462000339919062000b77565b925050819055506200041c565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015620003d5578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401620003cc9392919062000bc3565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603620004675780600260008282540392505081905550620004b4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8360405162000513919062000c00565b60405180910390a3505050565b600080fd5b6000819050919050565b6200053a8162000525565b81146200054657600080fd5b50565b6000815190506200055a816200052f565b92915050565b60006020828403121562000579576200057862000520565b5b6000620005898482850162000549565b91505092915050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200061457607f821691505b6020821081036200062a5762000629620005cc565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620006947fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000655565b620006a0868362000655565b95508019841693508086168417925050509392505050565b6000819050919050565b6000620006e3620006dd620006d78462000525565b620006b8565b62000525565b9050919050565b6000819050919050565b620006ff83620006c2565b620007176200070e82620006ea565b84845462000662565b825550505050565b600090565b6200072e6200071f565b6200073b818484620006f4565b505050565b5b8181101562000763576200075760008262000724565b60018101905062000741565b5050565b601f821115620007b2576200077c8162000630565b620007878462000645565b8101602085101562000797578190505b620007af620007a68562000645565b83018262000740565b50505b505050565b600082821c905092915050565b6000620007d760001984600802620007b7565b1980831691505092915050565b6000620007f28383620007c4565b9150826002028217905092915050565b6200080d8262000592565b67ffffffffffffffff8111156200082957620008286200059d565b5b620008358254620005fb565b6200084282828562000767565b600060209050601f8311600181146200087a576000841562000865578287015190505b620008718582620007e4565b865550620008e1565b601f1984166200088a8662000630565b60005b82811015620008b4578489015182556001820191506020850194506020810190506200088d565b86831015620008d45784890151620008d0601f891682620007c4565b8355505b6001600288020188555050505b505050505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200091682620008e9565b9050919050565b620009288162000909565b82525050565b60006020820190506200094560008301846200091d565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008160011c9050919050565b6000808291508390505b6001851115620009d957808604811115620009b157620009b06200094b565b5b6001851615620009c15780820291505b8081029050620009d1856200097a565b945062000991565b94509492505050565b600082620009f4576001905062000ac7565b8162000a04576000905062000ac7565b816001811462000a1d576002811462000a285762000a5e565b600191505062000ac7565b60ff84111562000a3d5762000a3c6200094b565b5b8360020a91508482111562000a575762000a566200094b565b5b5062000ac7565b5060208310610133831016604e8410600b841016171562000a985782820a90508381111562000a925762000a916200094b565b5b62000ac7565b62000aa7848484600162000987565b9250905081840481111562000ac15762000ac06200094b565b5b81810290505b9392505050565b600060ff82169050919050565b600062000ae88262000525565b915062000af58362000ace565b925062000b247fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484620009e2565b905092915050565b600062000b398262000525565b915062000b468362000525565b925082820262000b568162000525565b9150828204841483151762000b705762000b6f6200094b565b5b5092915050565b600062000b848262000525565b915062000b918362000525565b925082820190508082111562000bac5762000bab6200094b565b5b92915050565b62000bbd8162000525565b82525050565b600060608201905062000bda60008301866200091d565b62000be9602083018562000bb2565b62000bf8604083018462000bb2565b949350505050565b600060208201905062000c17600083018462000bb2565b92915050565b61119a8062000c2d6000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",yfe="0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c806370a082311161008c57806395d89b411161006657806395d89b4114610202578063a9059cbb14610220578063dd62ed3e14610250578063f2fde38b14610280576100cf565b806370a08231146101aa578063715018a6146101da5780638da5cb5b146101e4576100cf565b806306fdde03146100d4578063095ea7b3146100f257806318160ddd1461012257806323b872dd14610140578063313ce5671461017057806340c10f191461018e575b600080fd5b6100dc61029c565b6040516100e99190610dee565b60405180910390f35b61010c60048036038101906101079190610ea9565b61032e565b6040516101199190610f04565b60405180910390f35b61012a610351565b6040516101379190610f2e565b60405180910390f35b61015a60048036038101906101559190610f49565b61035b565b6040516101679190610f04565b60405180910390f35b61017861038a565b6040516101859190610fb8565b60405180910390f35b6101a860048036038101906101a39190610ea9565b610393565b005b6101c460048036038101906101bf9190610fd3565b6103a9565b6040516101d19190610f2e565b60405180910390f35b6101e26103f1565b005b6101ec610405565b6040516101f9919061100f565b60405180910390f35b61020a61042f565b6040516102179190610dee565b60405180910390f35b61023a60048036038101906102359190610ea9565b6104c1565b6040516102479190610f04565b60405180910390f35b61026a6004803603810190610265919061102a565b6104e4565b6040516102779190610f2e565b60405180910390f35b61029a60048036038101906102959190610fd3565b61056b565b005b6060600380546102ab90611099565b80601f01602080910402602001604051908101604052809291908181526020018280546102d790611099565b80156103245780601f106102f957610100808354040283529160200191610324565b820191906000526020600020905b81548152906001019060200180831161030757829003601f168201915b5050505050905090565b6000806103396105f1565b90506103468185856105f9565b600191505092915050565b6000600254905090565b6000806103666105f1565b905061037385828561060b565b61037e85858561069f565b60019150509392505050565b60006012905090565b61039b610793565b6103a5828261081a565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6103f9610793565b610403600061089c565b565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606004805461043e90611099565b80601f016020809104026020016040519081016040528092919081815260200182805461046a90611099565b80156104b75780601f1061048c576101008083540402835291602001916104b7565b820191906000526020600020905b81548152906001019060200180831161049a57829003601f168201915b5050505050905090565b6000806104cc6105f1565b90506104d981858561069f565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b610573610793565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036105e55760006040517f1e4fbdf70000000000000000000000000000000000000000000000000000000081526004016105dc919061100f565b60405180910390fd5b6105ee8161089c565b50565b600033905090565b6106068383836001610962565b505050565b600061061784846104e4565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106995781811015610689578281836040517ffb8f41b2000000000000000000000000000000000000000000000000000000008152600401610680939291906110ca565b60405180910390fd5b61069884848484036000610962565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107115760006040517f96c6fd1e000000000000000000000000000000000000000000000000000000008152600401610708919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107835760006040517fec442f0500000000000000000000000000000000000000000000000000000000815260040161077a919061100f565b60405180910390fd5b61078e838383610b39565b505050565b61079b6105f1565b73ffffffffffffffffffffffffffffffffffffffff166107b9610405565b73ffffffffffffffffffffffffffffffffffffffff1614610818576107dc6105f1565b6040517f118cdaa700000000000000000000000000000000000000000000000000000000815260040161080f919061100f565b60405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160361088c5760006040517fec442f05000000000000000000000000000000000000000000000000000000008152600401610883919061100f565b60405180910390fd5b61089860008383610b39565b5050565b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036109d45760006040517fe602df050000000000000000000000000000000000000000000000000000000081526004016109cb919061100f565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a465760006040517f94280d62000000000000000000000000000000000000000000000000000000008152600401610a3d919061100f565b60405180910390fd5b81600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508015610b33578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92584604051610b2a9190610f2e565b60405180910390a35b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610b8b578060026000828254610b7f9190611130565b92505081905550610c5e565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015610c17578381836040517fe450d38c000000000000000000000000000000000000000000000000000000008152600401610c0e939291906110ca565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610ca75780600260008282540392505081905550610cf4565b806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610d519190610f2e565b60405180910390a3505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d98578082015181840152602081019050610d7d565b60008484015250505050565b6000601f19601f8301169050919050565b6000610dc082610d5e565b610dca8185610d69565b9350610dda818560208601610d7a565b610de381610da4565b840191505092915050565b60006020820190508181036000830152610e088184610db5565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610e4082610e15565b9050919050565b610e5081610e35565b8114610e5b57600080fd5b50565b600081359050610e6d81610e47565b92915050565b6000819050919050565b610e8681610e73565b8114610e9157600080fd5b50565b600081359050610ea381610e7d565b92915050565b60008060408385031215610ec057610ebf610e10565b5b6000610ece85828601610e5e565b9250506020610edf85828601610e94565b9150509250929050565b60008115159050919050565b610efe81610ee9565b82525050565b6000602082019050610f196000830184610ef5565b92915050565b610f2881610e73565b82525050565b6000602082019050610f436000830184610f1f565b92915050565b600080600060608486031215610f6257610f61610e10565b5b6000610f7086828701610e5e565b9350506020610f8186828701610e5e565b9250506040610f9286828701610e94565b9150509250925092565b600060ff82169050919050565b610fb281610f9c565b82525050565b6000602082019050610fcd6000830184610fa9565b92915050565b600060208284031215610fe957610fe8610e10565b5b6000610ff784828501610e5e565b91505092915050565b61100981610e35565b82525050565b60006020820190506110246000830184611000565b92915050565b6000806040838503121561104157611040610e10565b5b600061104f85828601610e5e565b925050602061106085828601610e5e565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806110b157607f821691505b6020821081036110c4576110c361106a565b5b50919050565b60006060820190506110df6000830186611000565b6110ec6020830185610f1f565b6110f96040830184610f1f565b949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061113b82610e73565b915061114683610e73565b925082820190508082111561115e5761115d611101565b5b9291505056fea2646970667358221220839a1649455eb12ca72eb6f01787b31db0b3b879b1a07fbcae563e039f24528864736f6c63430008180033",xfe={},vfe={},wfe={_format:pfe,contractName:mfe,sourceName:gfe,abi:bfe,bytecode:Ufe,deployedBytecode:yfe,linkReferences:xfe,deployedLinkReferences:vfe},Efe="0x5FbDB2315678afecb367f032d93F642f64180aa3",Sfe="0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512",vU={canonToken:Efe,canonThread:Sfe};function Dr(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Dr(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var kfe={value:()=>{}};function K9(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Iy(n)}function Iy(e){this._=e}function Cfe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Iy.prototype=K9.prototype={constructor:Iy,on:function(e,t){var n=this._,r=Cfe(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Mfe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=fD(n[i],e.name,t);else if(t==null)for(i in n)n[i]=fD(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Iy(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Mfe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function fD(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=kfe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xk="http://www.w3.org/1999/xhtml";const dD={svg:"http://www.w3.org/2000/svg",xhtml:xk,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Y9(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),dD.hasOwnProperty(t)?{space:dD[t],local:e}:e}function Afe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xk&&t.documentElement.namespaceURI===xk?t.createElement(e):t.createElementNS(n,e)}}function Tfe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function zV(e){var t=Y9(e);return(t.local?Tfe:Afe)(t)}function Ife(){}function rA(e){return e==null?Ife:function(){return this.querySelector(e)}}function Nfe(e){typeof e!="function"&&(e=rA(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,f,c=0;c<o;++c)(l=s[c])&&(f=e.call(l,l.__data__,c,s))&&("__data__"in l&&(f.__data__=l.__data__),a[c]=f);return new Uo(r,this._parents)}function Rfe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function _fe(){return[]}function HV(e){return e==null?_fe:function(){return this.querySelectorAll(e)}}function Pfe(e){return function(){return Rfe(e.apply(this,arguments))}}function Dfe(e){typeof e=="function"?e=Pfe(e):e=HV(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,f=0;f<a;++f)(l=o[f])&&(r.push(e.call(l,l.__data__,f,o)),i.push(l));return new Uo(r,i)}function VV(e){return function(){return this.matches(e)}}function WV(e){return function(t){return t.matches(e)}}var Lfe=Array.prototype.find;function Ofe(e){return function(){return Lfe.call(this.children,e)}}function jfe(){return this.firstElementChild}function Bfe(e){return this.select(e==null?jfe:Ofe(typeof e=="function"?e:WV(e)))}var Ffe=Array.prototype.filter;function $fe(){return Array.from(this.children)}function zfe(e){return function(){return Ffe.call(this.children,e)}}function Hfe(e){return this.selectAll(e==null?$fe:zfe(typeof e=="function"?e:WV(e)))}function Vfe(e){typeof e!="function"&&(e=VV(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,f=0;f<o;++f)(l=s[f])&&e.call(l,l.__data__,f,s)&&a.push(l);return new Uo(r,this._parents)}function GV(e){return new Array(e.length)}function Wfe(){return new Uo(this._enter||this._groups.map(GV),this._parents)}function N3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}N3.prototype={constructor:N3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gfe(e){return function(){return e}}function Xfe(e,t,n,r,i,s){for(var o=0,a,l=t.length,f=s.length;o<f;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new N3(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function Kfe(e,t,n,r,i,s,o){var a,l,f=new Map,c=t.length,d=s.length,u=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(u[a]=h=o.call(l,l.__data__,a,t)+"",f.has(h)?i[a]=l:f.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=f.get(h))?(r[a]=l,l.__data__=s[a],f.delete(h)):n[a]=new N3(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&f.get(u[a])===l&&(i[a]=l)}function Yfe(e){return e.__data__}function Zfe(e,t){if(!arguments.length)return Array.from(this,Yfe);var n=t?Kfe:Xfe,r=this._parents,i=this._groups;typeof e!="function"&&(e=Gfe(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),f=0;f<s;++f){var c=r[f],d=i[f],u=d.length,h=qfe(e.call(c,c&&c.__data__,f,r)),g=h.length,U=a[f]=new Array(g),y=o[f]=new Array(g),x=l[f]=new Array(u);n(c,d,U,y,x,h,t);for(var w=0,E=0,S,M;w<g;++w)if(S=U[w]){for(w>=E&&(E=w+1);!(M=y[E])&&++E<g;);S._next=M||null}}return o=new Uo(o,r),o._enter=a,o._exit=l,o}function qfe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qfe(){return new Uo(this._exit||this._groups.map(GV),this._parents)}function Jfe(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function ede(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var f=n[l],c=r[l],d=f.length,u=a[l]=new Array(d),h,g=0;g<d;++g)(h=f[g]||c[g])&&(u[g]=h);for(;l<i;++l)a[l]=n[l];return new Uo(a,this._parents)}function tde(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function nde(e){e||(e=rde);function t(d,u){return d&&u?e(d.__data__,u.__data__):!d-!u}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),f,c=0;c<a;++c)(f=o[c])&&(l[c]=f);l.sort(t)}return new Uo(i,this._parents).order()}function rde(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ide(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sde(){return Array.from(this)}function ode(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function ade(){let e=0;for(const t of this)++e;return e}function lde(){return!this.node()}function cde(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function fde(e){return function(){this.removeAttribute(e)}}function dde(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ude(e,t){return function(){this.setAttribute(e,t)}}function hde(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function pde(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mde(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function gde(e,t){var n=Y9(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?dde:fde:typeof t=="function"?n.local?mde:pde:n.local?hde:ude)(n,t))}function XV(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bde(e){return function(){this.style.removeProperty(e)}}function Ude(e,t,n){return function(){this.style.setProperty(e,t,n)}}function yde(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function xde(e,t,n){return arguments.length>1?this.each((t==null?bde:typeof t=="function"?yde:Ude)(e,t,n??"")):Vm(this.node(),e)}function Vm(e,t){return e.style.getPropertyValue(t)||XV(e).getComputedStyle(e,null).getPropertyValue(t)}function vde(e){return function(){delete this[e]}}function wde(e,t){return function(){this[e]=t}}function Ede(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Sde(e,t){return arguments.length>1?this.each((t==null?vde:typeof t=="function"?Ede:wde)(e,t)):this.node()[e]}function KV(e){return e.trim().split(/^|\s+/)}function iA(e){return e.classList||new YV(e)}function YV(e){this._node=e,this._names=KV(e.getAttribute("class")||"")}YV.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ZV(e,t){for(var n=iA(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function qV(e,t){for(var n=iA(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function kde(e){return function(){ZV(this,e)}}function Cde(e){return function(){qV(this,e)}}function Mde(e,t){return function(){(t.apply(this,arguments)?ZV:qV)(this,e)}}function Ade(e,t){var n=KV(e+"");if(arguments.length<2){for(var r=iA(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Mde:t?kde:Cde)(n,t))}function Tde(){this.textContent=""}function Ide(e){return function(){this.textContent=e}}function Nde(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Rde(e){return arguments.length?this.each(e==null?Tde:(typeof e=="function"?Nde:Ide)(e)):this.node().textContent}function _de(){this.innerHTML=""}function Pde(e){return function(){this.innerHTML=e}}function Dde(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Lde(e){return arguments.length?this.each(e==null?_de:(typeof e=="function"?Dde:Pde)(e)):this.node().innerHTML}function Ode(){this.nextSibling&&this.parentNode.appendChild(this)}function jde(){return this.each(Ode)}function Bde(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fde(){return this.each(Bde)}function $de(e){var t=typeof e=="function"?e:zV(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zde(){return null}function Hde(e,t){var n=typeof e=="function"?e:zV(e),r=t==null?zde:typeof t=="function"?t:rA(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vde(){var e=this.parentNode;e&&e.removeChild(this)}function Wde(){return this.each(Vde)}function Gde(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xde(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kde(e){return this.select(e?Xde:Gde)}function Yde(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zde(e){return function(t){e.call(this,t,this.__data__)}}function qde(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Qde(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Jde(e,t,n){return function(){var r=this.__on,i,s=Zde(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function e0e(e,t,n){var r=qde(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,f=a.length,c;l<f;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Jde:Qde,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function QV(e,t,n){var r=XV(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function t0e(e,t){return function(){return QV(this,e,t)}}function n0e(e,t){return function(){return QV(this,e,t.apply(this,arguments))}}function r0e(e,t){return this.each((typeof t=="function"?n0e:t0e)(e,t))}function*i0e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var JV=[null];function Uo(e,t){this._groups=e,this._parents=t}function Eb(){return new Uo([[document.documentElement]],JV)}function s0e(){return this}Uo.prototype=Eb.prototype={constructor:Uo,select:Nfe,selectAll:Dfe,selectChild:Bfe,selectChildren:Hfe,filter:Vfe,data:Zfe,enter:Wfe,exit:Qfe,join:Jfe,merge:ede,selection:s0e,order:tde,sort:nde,call:ide,nodes:sde,node:ode,size:ade,empty:lde,each:cde,attr:gde,style:xde,property:Sde,classed:Ade,text:Rde,html:Lde,raise:jde,lower:Fde,append:$de,insert:Hde,remove:Wde,clone:Kde,datum:Yde,on:e0e,dispatch:r0e,[Symbol.iterator]:i0e};function ho(e){return typeof e=="string"?new Uo([[document.querySelector(e)]],[document.documentElement]):new Uo([[e]],JV)}function o0e(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Oa(e,t){if(e=o0e(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const a0e={passive:!1},l2={capture:!0,passive:!1};function Aw(e){e.stopImmediatePropagation()}function jp(e){e.preventDefault(),e.stopImmediatePropagation()}function eW(e){var t=e.document.documentElement,n=ho(e).on("dragstart.drag",jp,l2);"onselectstart"in t?n.on("selectstart.drag",jp,l2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function tW(e,t){var n=e.document.documentElement,r=ho(e).on("dragstart.drag",null);t&&(r.on("click.drag",jp,l2),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const wU=e=>()=>e;function vk(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:f,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:c}})}vk.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function l0e(e){return!e.ctrlKey&&!e.button}function c0e(){return this.parentNode}function f0e(e,t){return t??{x:e.x,y:e.y}}function d0e(){return navigator.maxTouchPoints||"ontouchstart"in this}function nW(){var e=l0e,t=c0e,n=f0e,r=d0e,i={},s=K9("start","drag","end"),o=0,a,l,f,c,d=0;function u(S){S.on("mousedown.drag",h).filter(r).on("touchstart.drag",y).on("touchmove.drag",x,a0e).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(S,M){if(!(c||!e.call(this,S,M))){var A=E(this,t.call(this,S,M),S,M,"mouse");A&&(ho(S.view).on("mousemove.drag",g,l2).on("mouseup.drag",U,l2),eW(S.view),Aw(S),f=!1,a=S.clientX,l=S.clientY,A("start",S))}}function g(S){if(jp(S),!f){var M=S.clientX-a,A=S.clientY-l;f=M*M+A*A>d}i.mouse("drag",S)}function U(S){ho(S.view).on("mousemove.drag mouseup.drag",null),tW(S.view,f),jp(S),i.mouse("end",S)}function y(S,M){if(e.call(this,S,M)){var A=S.changedTouches,C=t.call(this,S,M),I=A.length,R,L;for(R=0;R<I;++R)(L=E(this,C,S,M,A[R].identifier,A[R]))&&(Aw(S),L("start",S,A[R]))}}function x(S){var M=S.changedTouches,A=M.length,C,I;for(C=0;C<A;++C)(I=i[M[C].identifier])&&(jp(S),I("drag",S,M[C]))}function w(S){var M=S.changedTouches,A=M.length,C,I;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),C=0;C<A;++C)(I=i[M[C].identifier])&&(Aw(S),I("end",S,M[C]))}function E(S,M,A,C,I,R){var L=s.copy(),_=Oa(R||A,M),O,$,B;if((B=n.call(S,new vk("beforestart",{sourceEvent:A,target:u,identifier:I,active:o,x:_[0],y:_[1],dx:0,dy:0,dispatch:L}),C))!=null)return O=B.x-_[0]||0,$=B.y-_[1]||0,function F(z,H,G){var V=_,Y;switch(z){case"start":i[I]=F,Y=o++;break;case"end":delete i[I],--o;case"drag":_=Oa(G||H,M),Y=o;break}L.call(z,S,new vk(z,{sourceEvent:H,subject:B,target:u,identifier:I,active:Y,x:_[0]+O,y:_[1]+$,dx:_[0]-V[0],dy:_[1]-V[1],dispatch:L}),C)}}return u.filter=function(S){return arguments.length?(e=typeof S=="function"?S:wU(!!S),u):e},u.container=function(S){return arguments.length?(t=typeof S=="function"?S:wU(S),u):t},u.subject=function(S){return arguments.length?(n=typeof S=="function"?S:wU(S),u):n},u.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:wU(!!S),u):r},u.on=function(){var S=s.on.apply(s,arguments);return S===s?u:S},u.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,u):Math.sqrt(d)},u}function sA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rW(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Sb(){}var c2=.7,R3=1/c2,Bp="\\s*([+-]?\\d+)\\s*",f2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ql="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u0e=/^#([0-9a-f]{3,8})$/,h0e=new RegExp(`^rgb\\(${Bp},${Bp},${Bp}\\)$`),p0e=new RegExp(`^rgb\\(${Ql},${Ql},${Ql}\\)$`),m0e=new RegExp(`^rgba\\(${Bp},${Bp},${Bp},${f2}\\)$`),g0e=new RegExp(`^rgba\\(${Ql},${Ql},${Ql},${f2}\\)$`),b0e=new RegExp(`^hsl\\(${f2},${Ql},${Ql}\\)$`),U0e=new RegExp(`^hsla\\(${f2},${Ql},${Ql},${f2}\\)$`),uD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sA(Sb,Rh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hD,formatHex:hD,formatHex8:y0e,formatHsl:x0e,formatRgb:pD,toString:pD});function hD(){return this.rgb().formatHex()}function y0e(){return this.rgb().formatHex8()}function x0e(){return iW(this).formatHsl()}function pD(){return this.rgb().formatRgb()}function Rh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u0e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?mD(t):n===3?new js(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?EU(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?EU(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=h0e.exec(e))?new js(t[1],t[2],t[3],1):(t=p0e.exec(e))?new js(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=m0e.exec(e))?EU(t[1],t[2],t[3],t[4]):(t=g0e.exec(e))?EU(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=b0e.exec(e))?UD(t[1],t[2]/100,t[3]/100,1):(t=U0e.exec(e))?UD(t[1],t[2]/100,t[3]/100,t[4]):uD.hasOwnProperty(e)?mD(uD[e]):e==="transparent"?new js(NaN,NaN,NaN,0):null}function mD(e){return new js(e>>16&255,e>>8&255,e&255,1)}function EU(e,t,n,r){return r<=0&&(e=t=n=NaN),new js(e,t,n,r)}function v0e(e){return e instanceof Sb||(e=Rh(e)),e?(e=e.rgb(),new js(e.r,e.g,e.b,e.opacity)):new js}function wk(e,t,n,r){return arguments.length===1?v0e(e):new js(e,t,n,r??1)}function js(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}sA(js,wk,rW(Sb,{brighter(e){return e=e==null?R3:Math.pow(R3,e),new js(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?c2:Math.pow(c2,e),new js(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new js(hh(this.r),hh(this.g),hh(this.b),_3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gD,formatHex:gD,formatHex8:w0e,formatRgb:bD,toString:bD}));function gD(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}`}function w0e(){return`#${_u(this.r)}${_u(this.g)}${_u(this.b)}${_u((isNaN(this.opacity)?1:this.opacity)*255)}`}function bD(){const e=_3(this.opacity);return`${e===1?"rgb(":"rgba("}${hh(this.r)}, ${hh(this.g)}, ${hh(this.b)}${e===1?")":`, ${e})`}`}function _3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _u(e){return e=hh(e),(e<16?"0":"")+e.toString(16)}function UD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fa(e,t,n,r)}function iW(e){if(e instanceof Fa)return new Fa(e.h,e.s,e.l,e.opacity);if(e instanceof Sb||(e=Rh(e)),!e)return new Fa;if(e instanceof Fa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Fa(o,a,l,e.opacity)}function E0e(e,t,n,r){return arguments.length===1?iW(e):new Fa(e,t,n,r??1)}function Fa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sA(Fa,E0e,rW(Sb,{brighter(e){return e=e==null?R3:Math.pow(R3,e),new Fa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?c2:Math.pow(c2,e),new Fa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new js(Tw(e>=240?e-240:e+120,i,r),Tw(e,i,r),Tw(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fa(yD(this.h),SU(this.s),SU(this.l),_3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_3(this.opacity);return`${e===1?"hsl(":"hsla("}${yD(this.h)}, ${SU(this.s)*100}%, ${SU(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yD(e){return e=(e||0)%360,e<0?e+360:e}function SU(e){return Math.max(0,Math.min(1,e||0))}function Tw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Z9=e=>()=>e;function sW(e,t){return function(n){return e+n*t}}function S0e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function CHe(e,t){var n=t-e;return n?sW(e,n>180||n<-180?n-360*Math.round(n/360):n):Z9(isNaN(e)?t:e)}function k0e(e){return(e=+e)==1?oW:function(t,n){return n-t?S0e(t,n,e):Z9(isNaN(t)?n:t)}}function oW(e,t){var n=t-e;return n?sW(e,n):Z9(isNaN(e)?t:e)}const P3=function e(t){var n=k0e(t);function r(i,s){var o=n((i=wk(i)).r,(s=wk(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),f=oW(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=f(c),i+""}}return r.gamma=e,r}(1);function C0e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function M0e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function A0e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=x5(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function T0e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function $l(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function I0e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=x5(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Ek=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Iw=new RegExp(Ek.source,"g");function N0e(e){return function(){return e}}function R0e(e){return function(t){return e(t)+""}}function aW(e,t){var n=Ek.lastIndex=Iw.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Ek.exec(e))&&(i=Iw.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:$l(r,i)})),n=Iw.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?R0e(l[0].x):N0e(t):(t=l.length,function(f){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(f);return a.join("")})}function x5(e,t){var n=typeof t,r;return t==null||n==="boolean"?Z9(t):(n==="number"?$l:n==="string"?(r=Rh(t))?(t=r,P3):aW:t instanceof Rh?P3:t instanceof Date?T0e:M0e(t)?C0e:Array.isArray(t)?A0e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?I0e:$l)(e,t)}var xD=180/Math.PI,Sk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lW(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*xD,skewX:Math.atan(l)*xD,scaleX:o,scaleY:a}}var kU;function _0e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Sk:lW(t.a,t.b,t.c,t.d,t.e,t.f)}function P0e(e){return e==null||(kU||(kU=document.createElementNS("http://www.w3.org/2000/svg","g")),kU.setAttribute("transform",e),!(e=kU.transform.baseVal.consolidate()))?Sk:(e=e.matrix,lW(e.a,e.b,e.c,e.d,e.e,e.f))}function cW(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,c,d,u,h,g){if(f!==d||c!==u){var U=h.push("translate(",null,t,null,n);g.push({i:U-4,x:$l(f,d)},{i:U-2,x:$l(c,u)})}else(d||u)&&h.push("translate("+d+t+u+n)}function o(f,c,d,u){f!==c?(f-c>180?c+=360:c-f>180&&(f+=360),u.push({i:d.push(i(d)+"rotate(",null,r)-2,x:$l(f,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(f,c,d,u){f!==c?u.push({i:d.push(i(d)+"skewX(",null,r)-2,x:$l(f,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(f,c,d,u,h,g){if(f!==d||c!==u){var U=h.push(i(h)+"scale(",null,",",null,")");g.push({i:U-4,x:$l(f,d)},{i:U-2,x:$l(c,u)})}else(d!==1||u!==1)&&h.push(i(h)+"scale("+d+","+u+")")}return function(f,c){var d=[],u=[];return f=e(f),c=e(c),s(f.translateX,f.translateY,c.translateX,c.translateY,d,u),o(f.rotate,c.rotate,d,u),a(f.skewX,c.skewX,d,u),l(f.scaleX,f.scaleY,c.scaleX,c.scaleY,d,u),f=c=null,function(h){for(var g=-1,U=u.length,y;++g<U;)d[(y=u[g]).i]=y.x(h);return d.join("")}}}var D0e=cW(_0e,"px, ","px)","deg)"),L0e=cW(P0e,", ",")",")"),O0e=1e-12;function vD(e){return((e=Math.exp(e))+1/e)/2}function j0e(e){return((e=Math.exp(e))-1/e)/2}function B0e(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ny=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],f=s[2],c=o[0],d=o[1],u=o[2],h=c-a,g=d-l,U=h*h+g*g,y,x;if(U<O0e)x=Math.log(u/f)/t,y=function(C){return[a+C*h,l+C*g,f*Math.exp(t*C*x)]};else{var w=Math.sqrt(U),E=(u*u-f*f+r*U)/(2*f*n*w),S=(u*u-f*f-r*U)/(2*u*n*w),M=Math.log(Math.sqrt(E*E+1)-E),A=Math.log(Math.sqrt(S*S+1)-S);x=(A-M)/t,y=function(C){var I=C*x,R=vD(M),L=f/(n*w)*(R*B0e(t*I+M)-j0e(M));return[a+L*h,l+L*g,f*R/vD(t*I+M)]}}return y.duration=x*1e3*t/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);var Wm=0,Jg=0,Eg=0,fW=1e3,D3,e5,L3=0,_h=0,q9=0,d2=typeof performance=="object"&&performance.now?performance:Date,dW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oA(){return _h||(dW(F0e),_h=d2.now()+q9)}function F0e(){_h=0}function O3(){this._call=this._time=this._next=null}O3.prototype=uW.prototype={constructor:O3,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oA():+n)+(t==null?0:+t),!this._next&&e5!==this&&(e5?e5._next=this:D3=this,e5=this),this._call=e,this._time=n,kk()},stop:function(){this._call&&(this._call=null,this._time=1/0,kk())}};function uW(e,t,n){var r=new O3;return r.restart(e,t,n),r}function $0e(){oA(),++Wm;for(var e=D3,t;e;)(t=_h-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wm}function wD(){_h=(L3=d2.now())+q9,Wm=Jg=0;try{$0e()}finally{Wm=0,H0e(),_h=0}}function z0e(){var e=d2.now(),t=e-L3;t>fW&&(q9-=t,L3=e)}function H0e(){for(var e,t=D3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:D3=n);e5=e,kk(r)}function kk(e){if(!Wm){Jg&&(Jg=clearTimeout(Jg));var t=e-_h;t>24?(e<1/0&&(Jg=setTimeout(wD,e-d2.now()-q9)),Eg&&(Eg=clearInterval(Eg))):(Eg||(L3=d2.now(),Eg=setInterval(z0e,fW)),Wm=1,dW(wD))}}function ED(e,t,n){var r=new O3;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var V0e=K9("start","end","cancel","interrupt"),W0e=[],hW=0,SD=1,Ck=2,Ry=3,kD=4,Mk=5,_y=6;function Q9(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;G0e(e,n,{name:t,index:r,group:i,on:V0e,tween:W0e,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:hW})}function aA(e,t){var n=dl(e,t);if(n.state>hW)throw new Error("too late; already scheduled");return n}function pc(e,t){var n=dl(e,t);if(n.state>Ry)throw new Error("too late; already running");return n}function dl(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function G0e(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=uW(s,0,n.time);function s(f){n.state=SD,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var c,d,u,h;if(n.state!==SD)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Ry)return ED(o);h.state===kD?(h.state=_y,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=_y,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(ED(function(){n.state===Ry&&(n.state=kD,n.timer.restart(a,n.delay,n.time),a(f))}),n.state=Ck,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ck){for(n.state=Ry,i=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(f){for(var c=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=Mk,1),d=-1,u=i.length;++d<u;)i[d].call(e,c);n.state===Mk&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=_y,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function Py(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Ck&&r.state<Mk,r.state=_y,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function X0e(e){return this.each(function(){Py(this,e)})}function K0e(e,t){var n,r;return function(){var i=pc(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Y0e(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=pc(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,f=i.length;l<f;++l)if(i[l].name===t){i[l]=a;break}l===f&&i.push(a)}s.tween=i}}function Z0e(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=dl(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?K0e:Y0e)(n,e,t))}function lA(e,t,n){var r=e._id;return e.each(function(){var i=pc(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return dl(i,r).value[t]}}function pW(e,t){var n;return(typeof t=="number"?$l:t instanceof Rh?P3:(n=Rh(t))?(t=n,P3):aW)(e,t)}function q0e(e){return function(){this.removeAttribute(e)}}function Q0e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function J0e(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function eue(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function tue(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function nue(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function rue(e,t){var n=Y9(e),r=n==="transform"?L0e:pW;return this.attrTween(e,typeof t=="function"?(n.local?nue:tue)(n,r,lA(this,"attr."+e,t)):t==null?(n.local?Q0e:q0e)(n):(n.local?eue:J0e)(n,r,t))}function iue(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sue(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function oue(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&sue(e,s)),n}return i._value=t,i}function aue(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&iue(e,s)),n}return i._value=t,i}function lue(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Y9(e);return this.tween(n,(r.local?oue:aue)(r,t))}function cue(e,t){return function(){aA(this,e).delay=+t.apply(this,arguments)}}function fue(e,t){return t=+t,function(){aA(this,e).delay=t}}function due(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cue:fue)(t,e)):dl(this.node(),t).delay}function uue(e,t){return function(){pc(this,e).duration=+t.apply(this,arguments)}}function hue(e,t){return t=+t,function(){pc(this,e).duration=t}}function pue(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?uue:hue)(t,e)):dl(this.node(),t).duration}function mue(e,t){if(typeof t!="function")throw new Error;return function(){pc(this,e).ease=t}}function gue(e){var t=this._id;return arguments.length?this.each(mue(t,e)):dl(this.node(),t).ease}function bue(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;pc(this,e).ease=n}}function Uue(e){if(typeof e!="function")throw new Error;return this.each(bue(this._id,e))}function yue(e){typeof e!="function"&&(e=VV(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,f=0;f<o;++f)(l=s[f])&&e.call(l,l.__data__,f,s)&&a.push(l);return new Ef(r,this._parents,this._name,this._id)}function xue(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],f=n[a],c=l.length,d=o[a]=new Array(c),u,h=0;h<c;++h)(u=l[h]||f[h])&&(d[h]=u);for(;a<r;++a)o[a]=t[a];return new Ef(o,this._parents,this._name,this._id)}function vue(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function wue(e,t,n){var r,i,s=vue(t)?aA:pc;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Eue(e,t){var n=this._id;return arguments.length<2?dl(this.node(),n).on.on(e):this.each(wue(n,e,t))}function Sue(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function kue(){return this.on("end.remove",Sue(this._id))}function Cue(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rA(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,f=s[o]=new Array(l),c,d,u=0;u<l;++u)(c=a[u])&&(d=e.call(c,c.__data__,u,a))&&("__data__"in c&&(d.__data__=c.__data__),f[u]=d,Q9(f[u],t,n,u,f,dl(c,n)));return new Ef(s,this._parents,t,n)}function Mue(e){var t=this._name,n=this._id;typeof e!="function"&&(e=HV(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],f=l.length,c,d=0;d<f;++d)if(c=l[d]){for(var u=e.call(c,c.__data__,d,l),h,g=dl(c,n),U=0,y=u.length;U<y;++U)(h=u[U])&&Q9(h,t,n,U,u,g);s.push(u),o.push(c)}return new Ef(s,o,t,n)}var Aue=Eb.prototype.constructor;function Tue(){return new Aue(this._groups,this._parents)}function Iue(e,t){var n,r,i;return function(){var s=Vm(this,e),o=(this.style.removeProperty(e),Vm(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function mW(e){return function(){this.style.removeProperty(e)}}function Nue(e,t,n){var r,i=n+"",s;return function(){var o=Vm(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Rue(e,t,n){var r,i,s;return function(){var o=Vm(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Vm(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function _ue(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=pc(this,e),f=l.on,c=l.value[s]==null?a||(a=mW(t)):void 0;(f!==n||i!==c)&&(r=(n=f).copy()).on(o,i=c),l.on=r}}function Pue(e,t,n){var r=(e+="")=="transform"?D0e:pW;return t==null?this.styleTween(e,Iue(e,r)).on("end.style."+e,mW(e)):typeof t=="function"?this.styleTween(e,Rue(e,r,lA(this,"style."+e,t))).each(_ue(this._id,e)):this.styleTween(e,Nue(e,r,t),n).on("end.style."+e,null)}function Due(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Lue(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Due(e,o,n)),r}return s._value=t,s}function Oue(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Lue(e,t,n??""))}function jue(e){return function(){this.textContent=e}}function Bue(e){return function(){var t=e(this);this.textContent=t??""}}function Fue(e){return this.tween("text",typeof e=="function"?Bue(lA(this,"text",e)):jue(e==null?"":e+""))}function $ue(e){return function(t){this.textContent=e.call(this,t)}}function zue(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&$ue(i)),t}return r._value=e,r}function Hue(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,zue(e))}function Vue(){for(var e=this._name,t=this._id,n=gW(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,f=0;f<a;++f)if(l=o[f]){var c=dl(l,t);Q9(l,e,n,f,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ef(r,this._parents,e,n)}function Wue(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var f=pc(this,r),c=f.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),f.on=t}),i===0&&s()})}var Gue=0;function Ef(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function gW(){return++Gue}var Ic=Eb.prototype;Ef.prototype={constructor:Ef,select:Cue,selectAll:Mue,selectChild:Ic.selectChild,selectChildren:Ic.selectChildren,filter:yue,merge:xue,selection:Tue,transition:Vue,call:Ic.call,nodes:Ic.nodes,node:Ic.node,size:Ic.size,empty:Ic.empty,each:Ic.each,on:Eue,attr:rue,attrTween:lue,style:Pue,styleTween:Oue,text:Fue,textTween:Hue,remove:kue,tween:Z0e,delay:due,duration:pue,ease:gue,easeVarying:Uue,end:Wue,[Symbol.iterator]:Ic[Symbol.iterator]};function Xue(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Kue={time:null,delay:0,duration:250,ease:Xue};function Yue(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zue(e){var t,n;e instanceof Ef?(t=e._id,e=e._name):(t=gW(),(n=Kue).time=oA(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,f=0;f<a;++f)(l=o[f])&&Q9(l,e,t,f,o,n||Yue(l,t));return new Ef(r,this._parents,e,t)}Eb.prototype.interrupt=X0e;Eb.prototype.transition=Zue;const CU=e=>()=>e;function que(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function df(e,t,n){this.k=e,this.x=t,this.y=n}df.prototype={constructor:df,scale:function(e){return e===1?this:new df(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new df(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var J9=new df(1,0,0);bW.prototype=df.prototype;function bW(e){for(;!e.__zoom;)if(!(e=e.parentNode))return J9;return e.__zoom}function Nw(e){e.stopImmediatePropagation()}function Sg(e){e.preventDefault(),e.stopImmediatePropagation()}function Que(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Jue(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function CD(){return this.__zoom||J9}function ehe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function the(){return navigator.maxTouchPoints||"ontouchstart"in this}function nhe(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function UW(){var e=Que,t=Jue,n=nhe,r=ehe,i=the,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ny,f=K9("start","zoom","end"),c,d,u,h=500,g=150,U=0,y=10;function x(B){B.property("__zoom",CD).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",L).filter(i).on("touchstart.zoom",_).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(B,F,z,H){var G=B.selection?B.selection():B;G.property("__zoom",CD),B!==G?M(B,F,z,H):G.interrupt().each(function(){A(this,arguments).event(H).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},x.scaleBy=function(B,F,z,H){x.scaleTo(B,function(){var G=this.__zoom.k,V=typeof F=="function"?F.apply(this,arguments):F;return G*V},z,H)},x.scaleTo=function(B,F,z,H){x.transform(B,function(){var G=t.apply(this,arguments),V=this.__zoom,Y=z==null?S(G):typeof z=="function"?z.apply(this,arguments):z,K=V.invert(Y),q=typeof F=="function"?F.apply(this,arguments):F;return n(E(w(V,q),Y,K),G,o)},z,H)},x.translateBy=function(B,F,z,H){x.transform(B,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof z=="function"?z.apply(this,arguments):z),t.apply(this,arguments),o)},null,H)},x.translateTo=function(B,F,z,H,G){x.transform(B,function(){var V=t.apply(this,arguments),Y=this.__zoom,K=H==null?S(V):typeof H=="function"?H.apply(this,arguments):H;return n(J9.translate(K[0],K[1]).scale(Y.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof z=="function"?-z.apply(this,arguments):-z),V,o)},H,G)};function w(B,F){return F=Math.max(s[0],Math.min(s[1],F)),F===B.k?B:new df(F,B.x,B.y)}function E(B,F,z){var H=F[0]-z[0]*B.k,G=F[1]-z[1]*B.k;return H===B.x&&G===B.y?B:new df(B.k,H,G)}function S(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function M(B,F,z,H){B.on("start.zoom",function(){A(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(H).end()}).tween("zoom",function(){var G=this,V=arguments,Y=A(G,V).event(H),K=t.apply(G,V),q=z==null?S(K):typeof z=="function"?z.apply(G,V):z,se=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),de=G.__zoom,xe=typeof F=="function"?F.apply(G,V):F,ve=l(de.invert(q).concat(se/de.k),xe.invert(q).concat(se/xe.k));return function(ue){if(ue===1)ue=xe;else{var te=ve(ue),le=se/te[2];ue=new df(le,q[0]-te[0]*le,q[1]-te[1]*le)}Y.zoom(null,ue)}})}function A(B,F,z){return!z&&B.__zooming||new C(B,F)}function C(B,F){this.that=B,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,F),this.taps=0}C.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,F){return this.mouse&&B!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var F=ho(this.that).datum();f.call(B,this.that,new que(B,{sourceEvent:this.sourceEvent,target:x,type:B,transform:this.that.__zoom,dispatch:f}),F)}};function I(B,...F){if(!e.apply(this,arguments))return;var z=A(this,F).event(B),H=this.__zoom,G=Math.max(s[0],Math.min(s[1],H.k*Math.pow(2,r.apply(this,arguments)))),V=Oa(B);if(z.wheel)(z.mouse[0][0]!==V[0]||z.mouse[0][1]!==V[1])&&(z.mouse[1]=H.invert(z.mouse[0]=V)),clearTimeout(z.wheel);else{if(H.k===G)return;z.mouse=[V,H.invert(V)],Py(this),z.start()}Sg(B),z.wheel=setTimeout(Y,g),z.zoom("mouse",n(E(w(H,G),z.mouse[0],z.mouse[1]),z.extent,o));function Y(){z.wheel=null,z.end()}}function R(B,...F){if(u||!e.apply(this,arguments))return;var z=B.currentTarget,H=A(this,F,!0).event(B),G=ho(B.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",se,!0),V=Oa(B,z),Y=B.clientX,K=B.clientY;eW(B.view),Nw(B),H.mouse=[V,this.__zoom.invert(V)],Py(this),H.start();function q(de){if(Sg(de),!H.moved){var xe=de.clientX-Y,ve=de.clientY-K;H.moved=xe*xe+ve*ve>U}H.event(de).zoom("mouse",n(E(H.that.__zoom,H.mouse[0]=Oa(de,z),H.mouse[1]),H.extent,o))}function se(de){G.on("mousemove.zoom mouseup.zoom",null),tW(de.view,H.moved),Sg(de),H.event(de).end()}}function L(B,...F){if(e.apply(this,arguments)){var z=this.__zoom,H=Oa(B.changedTouches?B.changedTouches[0]:B,this),G=z.invert(H),V=z.k*(B.shiftKey?.5:2),Y=n(E(w(z,V),H,G),t.apply(this,F),o);Sg(B),a>0?ho(this).transition().duration(a).call(M,Y,H,B):ho(this).call(x.transform,Y,H,B)}}function _(B,...F){if(e.apply(this,arguments)){var z=B.touches,H=z.length,G=A(this,F,B.changedTouches.length===H).event(B),V,Y,K,q;for(Nw(B),Y=0;Y<H;++Y)K=z[Y],q=Oa(K,this),q=[q,this.__zoom.invert(q),K.identifier],G.touch0?!G.touch1&&G.touch0[2]!==q[2]&&(G.touch1=q,G.taps=0):(G.touch0=q,V=!0,G.taps=1+!!c);c&&(c=clearTimeout(c)),V&&(G.taps<2&&(d=q[0],c=setTimeout(function(){c=null},h)),Py(this),G.start())}}function O(B,...F){if(this.__zooming){var z=A(this,F).event(B),H=B.changedTouches,G=H.length,V,Y,K,q;for(Sg(B),V=0;V<G;++V)Y=H[V],K=Oa(Y,this),z.touch0&&z.touch0[2]===Y.identifier?z.touch0[0]=K:z.touch1&&z.touch1[2]===Y.identifier&&(z.touch1[0]=K);if(Y=z.that.__zoom,z.touch1){var se=z.touch0[0],de=z.touch0[1],xe=z.touch1[0],ve=z.touch1[1],ue=(ue=xe[0]-se[0])*ue+(ue=xe[1]-se[1])*ue,te=(te=ve[0]-de[0])*te+(te=ve[1]-de[1])*te;Y=w(Y,Math.sqrt(ue/te)),K=[(se[0]+xe[0])/2,(se[1]+xe[1])/2],q=[(de[0]+ve[0])/2,(de[1]+ve[1])/2]}else if(z.touch0)K=z.touch0[0],q=z.touch0[1];else return;z.zoom("touch",n(E(Y,K,q),z.extent,o))}}function $(B,...F){if(this.__zooming){var z=A(this,F).event(B),H=B.changedTouches,G=H.length,V,Y;for(Nw(B),u&&clearTimeout(u),u=setTimeout(function(){u=null},h),V=0;V<G;++V)Y=H[V],z.touch0&&z.touch0[2]===Y.identifier?delete z.touch0:z.touch1&&z.touch1[2]===Y.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(Y=Oa(Y,this),Math.hypot(d[0]-Y[0],d[1]-Y[1])<y)){var K=ho(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return x.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:CU(+B),x):r},x.filter=function(B){return arguments.length?(e=typeof B=="function"?B:CU(!!B),x):e},x.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:CU(!!B),x):i},x.extent=function(B){return arguments.length?(t=typeof B=="function"?B:CU([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),x):t},x.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],x):[s[0],s[1]]},x.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(B){return arguments.length?(n=B,x):n},x.duration=function(B){return arguments.length?(a=+B,x):a},x.interpolate=function(B){return arguments.length?(l=B,x):l},x.on=function(){var B=f.on.apply(f,arguments);return B===f?x:B},x.clickDistance=function(B){return arguments.length?(U=(B=+B)*B,x):Math.sqrt(U)},x.tapDistance=function(B){return arguments.length?(y=+B,x):y},x}const nc={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},u2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],yW=["Enter"," ","Escape"],xW={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Gm;(function(e){e.Strict="strict",e.Loose="loose"})(Gm||(Gm={}));var ph;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ph||(ph={}));var h2;(function(e){e.Partial="partial",e.Full="full"})(h2||(h2={}));const vW={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Dd;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Dd||(Dd={}));var j3;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(j3||(j3={}));var tt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(tt||(tt={}));const MD={[tt.Left]:tt.Right,[tt.Right]:tt.Left,[tt.Top]:tt.Bottom,[tt.Bottom]:tt.Top};function wW(e){return e===null?null:e?"valid":"invalid"}const EW=e=>"id"in e&&"source"in e&&"target"in e,rhe=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),cA=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),kb=(e,t=[0,0])=>{const{width:n,height:r}=Of(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},ihe=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):cA(i)?i:t.nodeLookup.get(i.id));const a=o?B3(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return e7(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return t7(n)},Cb=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=e7(n,B3(i)),r=!0)}),r?t7(n):{x:0,y:0,width:0,height:0}},fA=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...Ab(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const f of e.values()){const{measured:c,selectable:d=!0,hidden:u=!1}=f;if(o&&!d||u)continue;const h=c.width??f.width??f.initialWidth??null,g=c.height??f.height??f.initialHeight??null,U=p2(a,Km(f)),y=(h??0)*(g??0),x=s&&U>0;(!f.internals.handleBounds||x||U>=y||f.dragging)&&l.push(f)}return l},she=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function ohe(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function ahe({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const a=ohe(e,o),l=Cb(a),f=dA(l,t,n,(o==null?void 0:o.minZoom)??i,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await r.setViewport(f,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)}function SW({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:l,y:f}=a?a.internals.positionAbsolute:{x:0,y:0},c=o.origin??r;let d=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!a)s==null||s("005",nc.error005());else{const h=a.measured.width,g=a.measured.height;h&&g&&(d=[[l,f],[l+h,f+g]])}else a&&Ym(o.extent)&&(d=[[o.extent[0][0]+l,o.extent[0][1]+f],[o.extent[1][0]+l,o.extent[1][1]+f]]);const u=Ym(d)?Ph(t,d,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(s==null||s("015",nc.error015())),{position:{x:u.x-l+(o.measured.width??0)*c[0],y:u.y-f+(o.measured.height??0)*c[1]},positionAbsolute:u}}async function lhe({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(u=>u.id)),o=[];for(const u of n){if(u.deletable===!1)continue;const h=s.has(u.id),g=!h&&u.parentId&&o.find(U=>U.id===u.parentId);(h||g)&&o.push(u)}const a=new Set(t.map(u=>u.id)),l=r.filter(u=>u.deletable!==!1),c=she(o,l);for(const u of l)a.has(u.id)&&!c.find(g=>g.id===u.id)&&c.push(u);if(!i)return{edges:c,nodes:o};const d=await i({nodes:o,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:o}:{edges:[],nodes:[]}:d}const Xm=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ph=(e={x:0,y:0},t,n)=>({x:Xm(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Xm(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function kW(e,t,n){const{width:r,height:i}=Of(n),{x:s,y:o}=n.internals.positionAbsolute;return Ph(e,[[s,o],[s+r,o+i]],t)}const AD=(e,t,n)=>e<t?Xm(Math.abs(e-t),1,t)/t:e>n?-Xm(Math.abs(e-n),1,t)/t:0,CW=(e,t,n=15,r=40)=>{const i=AD(e.x,r,t.width-r)*n,s=AD(e.y,r,t.height-r)*n;return[i,s]},e7=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ak=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),t7=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Km=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=cA(e)?e.internals.positionAbsolute:kb(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},B3=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=cA(e)?e.internals.positionAbsolute:kb(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},MW=(e,t)=>t7(e7(Ak(e),Ak(t))),p2=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},TD=e=>Ha(e.width)&&Ha(e.height)&&Ha(e.x)&&Ha(e.y),Ha=e=>!isNaN(e)&&isFinite(e),che=(e,t)=>{},Mb=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ab=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return s?Mb(a,o):a},F3=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function H1(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function fhe(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=H1(e,n),i=H1(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=H1(e.top??e.y??0,n),i=H1(e.bottom??e.y??0,n),s=H1(e.left??e.x??0,t),o=H1(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function dhe(e,t,n,r,i,s){const{x:o,y:a}=F3(e,[t,n,r]),{x:l,y:f}=F3({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,d=s-f;return{left:Math.floor(o),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}const dA=(e,t,n,r,i,s)=>{const o=fhe(s,t,n),a=(t-o.x)/e.width,l=(n-o.y)/e.height,f=Math.min(a,l),c=Xm(f,r,i),d=e.x+e.width/2,u=e.y+e.height/2,h=t/2-d*c,g=n/2-u*c,U=dhe(e,h,g,c,t,n),y={left:Math.min(U.left-o.left,0),top:Math.min(U.top-o.top,0),right:Math.min(U.right-o.right,0),bottom:Math.min(U.bottom-o.bottom,0)};return{x:h-y.left+y.right,y:g-y.top+y.bottom,zoom:c}},m2=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ym(e){return e!=null&&e!=="parent"}function Of(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function AW(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function TW(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function ID(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function uhe(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function hhe(e){return{...xW,...e||{}}}function v5(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Va(e),a=Ab({x:s-((i==null?void 0:i.left)??0),y:o-((i==null?void 0:i.top)??0)},r),{x:l,y:f}=n?Mb(a,t):a;return{xSnapped:l,ySnapped:f,...a}}const uA=e=>({width:e.offsetWidth,height:e.offsetHeight}),IW=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},phe=["INPUT","SELECT","TEXTAREA"];function NW(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:phe.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const RW=e=>"clientX"in e,Va=(e,t)=>{var s,o;const n=RW(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},ND=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...uA(o)}})};function _W({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=e*.125+i*.375+o*.375+n*.125,f=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),d=Math.abs(f-t);return[l,f,c,d]}function MU(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function RD({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case tt.Left:return[t-MU(t-r,s),n];case tt.Right:return[t+MU(r-t,s),n];case tt.Top:return[t,n-MU(n-i,s)];case tt.Bottom:return[t,n+MU(i-n,s)]}}function PW({sourceX:e,sourceY:t,sourcePosition:n=tt.Bottom,targetX:r,targetY:i,targetPosition:s=tt.Top,curvature:o=.25}){const[a,l]=RD({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[f,c]=RD({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,u,h,g]=_W({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:f,targetControlY:c});return[`M${e},${t} C${a},${l} ${f},${c} ${r},${i}`,d,u,h,g]}function DW({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function mhe({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:s="basic"}){if(s==="manual")return r;const o=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return o+a}function ghe({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=e7(B3(e),B3(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return p2(o,t7(s))>0}const bhe=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Uhe=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),yhe=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||bhe;let i;return EW(e)?i={...e}:i={...e,id:r(e)},Uhe(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function LW({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=DW({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const _D={[tt.Left]:{x:-1,y:0},[tt.Right]:{x:1,y:0},[tt.Top]:{x:0,y:-1},[tt.Bottom]:{x:0,y:1}},xhe=({source:e,sourcePosition:t=tt.Bottom,target:n})=>t===tt.Left||t===tt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},PD=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function vhe({source:e,sourcePosition:t=tt.Bottom,target:n,targetPosition:r=tt.Top,center:i,offset:s,stepPosition:o}){const a=_D[t],l=_D[r],f={x:e.x+a.x*s,y:e.y+a.y*s},c={x:n.x+l.x*s,y:n.y+l.y*s},d=xhe({source:f,sourcePosition:t,target:c}),u=d.x!==0?"x":"y",h=d[u];let g=[],U,y;const x={x:0,y:0},w={x:0,y:0},[,,E,S]=DW({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[u]*l[u]===-1){u==="x"?(U=i.x??f.x+(c.x-f.x)*o,y=i.y??(f.y+c.y)/2):(U=i.x??(f.x+c.x)/2,y=i.y??f.y+(c.y-f.y)*o);const A=[{x:U,y:f.y},{x:U,y:c.y}],C=[{x:f.x,y},{x:c.x,y}];a[u]===h?g=u==="x"?A:C:g=u==="x"?C:A}else{const A=[{x:f.x,y:c.y}],C=[{x:c.x,y:f.y}];if(u==="x"?g=a.x===h?C:A:g=a.y===h?A:C,t===r){const O=Math.abs(e[u]-n[u]);if(O<=s){const $=Math.min(s-1,s-O);a[u]===h?x[u]=(f[u]>e[u]?-1:1)*$:w[u]=(c[u]>n[u]?-1:1)*$}}if(t!==r){const O=u==="x"?"y":"x",$=a[u]===l[O],B=f[O]>c[O],F=f[O]<c[O];(a[u]===1&&(!$&&B||$&&F)||a[u]!==1&&(!$&&F||$&&B))&&(g=u==="x"?A:C)}const I={x:f.x+x.x,y:f.y+x.y},R={x:c.x+w.x,y:c.y+w.y},L=Math.max(Math.abs(I.x-g[0].x),Math.abs(R.x-g[0].x)),_=Math.max(Math.abs(I.y-g[0].y),Math.abs(R.y-g[0].y));L>=_?(U=(I.x+R.x)/2,y=g[0].y):(U=g[0].x,y=(I.y+R.y)/2)}return[[e,{x:f.x+x.x,y:f.y+x.y},...g,{x:c.x+w.x,y:c.y+w.y},n],U,y,E,S]}function whe(e,t,n,r){const i=Math.min(PD(e,t)/2,PD(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const f=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function Tk({sourceX:e,sourceY:t,sourcePosition:n=tt.Bottom,targetX:r,targetY:i,targetPosition:s=tt.Top,borderRadius:o=5,centerX:a,centerY:l,offset:f=20,stepPosition:c=.5}){const[d,u,h,g,U]=vhe({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:f,stepPosition:c});return[d.reduce((x,w,E)=>{let S="";return E>0&&E<d.length-1?S=whe(d[E-1],w,d[E+1],o):S=`${E===0?"M":"L"}${w.x} ${w.y}`,x+=S,x},""),u,h,g,U]}function DD(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Ehe(e){var d;const{sourceNode:t,targetNode:n}=e;if(!DD(t)||!DD(n))return null;const r=t.internals.handleBounds||LD(t.handles),i=n.internals.handleBounds||LD(n.handles),s=OD((r==null?void 0:r.source)??[],e.sourceHandle),o=OD(e.connectionMode===Gm.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!s||!o)return(d=e.onError)==null||d.call(e,"008",nc.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(s==null?void 0:s.position)||tt.Bottom,l=(o==null?void 0:o.position)||tt.Top,f=Dh(t,s,a),c=Dh(n,o,l);return{sourceX:f.x,sourceY:f.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function LD(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Dh(e,t,n=tt.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??Of(e);if(r)return{x:i+o/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case tt.Top:return{x:i+o/2,y:s};case tt.Right:return{x:i+o,y:s+a/2};case tt.Bottom:return{x:i+o/2,y:s+a};case tt.Left:return{x:i,y:s+a/2}}}function OD(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Ik(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function She(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const f=Ik(l,t);s.has(f)||(o.push({id:f,color:l.color||n,...l}),s.add(f))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const OW=1e3,khe=10,hA={nodeOrigin:[0,0],nodeExtent:u2,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Che={...hA,checkEquality:!0};function pA(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Mhe(e,t,n){const r=pA(hA,n);for(const i of e.values())if(i.parentId)gA(i,e,t,r);else{const s=kb(i,r.nodeOrigin),o=Ym(i.extent)?i.extent:r.nodeExtent,a=Ph(s,o,Of(i));i.internals.positionAbsolute=a}}function Ahe(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const s={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(s):i.type==="target"&&r.push(s)}return{source:n,target:r}}function mA(e){return e==="manual"}function Nk(e,t,n,r={}){var f,c;const i=pA(Che,r),s={i:0},o=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!mA(i.zIndexMode)?OW:0;let l=e.length>0;t.clear(),n.clear();for(const d of e){let u=o.get(d.id);if(i.checkEquality&&d===(u==null?void 0:u.internals.userNode))t.set(d.id,u);else{const h=kb(d,i.nodeOrigin),g=Ym(d.extent)?d.extent:i.nodeExtent,U=Ph(h,g,Of(d));u={...i.defaults,...d,measured:{width:(f=d.measured)==null?void 0:f.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:U,handleBounds:Ahe(d,u),z:jW(d,a,i.zIndexMode),userNode:d}},t.set(d.id,u)}(u.measured===void 0||u.measured.width===void 0||u.measured.height===void 0)&&!u.hidden&&(l=!1),d.parentId&&gA(u,t,n,r,s)}return l}function The(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function gA(e,t,n,r,i){const{elevateNodesOnSelect:s,nodeOrigin:o,nodeExtent:a,zIndexMode:l}=pA(hA,r),f=e.parentId,c=t.get(f);if(!c){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}The(e,n),i&&!c.parentId&&c.internals.rootParentIndex===void 0&&l==="auto"&&(c.internals.rootParentIndex=++i.i,c.internals.z=c.internals.z+i.i*khe),i&&c.internals.rootParentIndex!==void 0&&(i.i=c.internals.rootParentIndex);const d=s&&!mA(l)?OW:0,{x:u,y:h,z:g}=Ihe(e,c,o,a,d,l),{positionAbsolute:U}=e.internals,y=u!==U.x||h!==U.y;(y||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:u,y:h}:U,z:g}})}function jW(e,t,n){const r=Ha(e.zIndex)?e.zIndex:0;return mA(n)?r:r+(e.selected?t:0)}function Ihe(e,t,n,r,i,s){const{x:o,y:a}=t.internals.positionAbsolute,l=Of(e),f=kb(e,n),c=Ym(e.extent)?Ph(f,e.extent,l):f;let d=Ph({x:o+c.x,y:a+c.y},r,l);e.extent==="parent"&&(d=kW(d,l,t));const u=jW(e,i,s),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>=u?h+1:u}}function bA(e,t,n,r=[0,0]){var o;const i=[],s=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const f=((o=s.get(a.parentId))==null?void 0:o.expandedRect)??Km(l),c=MW(f,a.rect);s.set(a.parentId,{expandedRect:c,parent:l})}return s.size>0&&s.forEach(({expandedRect:a,parent:l},f)=>{var E;const c=l.internals.positionAbsolute,d=Of(l),u=l.origin??r,h=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,g=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,U=Math.max(d.width,Math.round(a.width)),y=Math.max(d.height,Math.round(a.height)),x=(U-d.width)*u[0],w=(y-d.height)*u[1];(h>0||g>0||x||w)&&(i.push({id:f,type:"position",position:{x:l.position.x-h+x,y:l.position.y-g+w}}),(E=n.get(f))==null||E.forEach(S=>{e.some(M=>M.id===S.id)||i.push({id:S.id,type:"position",position:{x:S.position.x+h,y:S.position.y+g}})})),(d.width<a.width||d.height<a.height||h||g)&&i.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:U+(h?u[0]*h-x:0),height:y+(g?u[1]*g-w:0)}})}),i}function Nhe(e,t,n,r,i,s,o){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const f=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const h of e.values()){const g=t.get(h.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),l=!0;continue}const U=uA(h.nodeElement),y=g.measured.width!==U.width||g.measured.height!==U.height;if(!!(U.width&&U.height&&(y||!g.internals.handleBounds||h.force))){const w=h.nodeElement.getBoundingClientRect(),E=Ym(g.extent)?g.extent:s;let{positionAbsolute:S}=g.internals;g.parentId&&g.extent==="parent"?S=kW(S,U,t.get(g.parentId)):E&&(S=Ph(S,E,U));const M={...g,measured:U,internals:{...g.internals,positionAbsolute:S,handleBounds:{source:ND("source",h.nodeElement,w,d,g.id),target:ND("target",h.nodeElement,w,d,g.id)}}};t.set(g.id,M),g.parentId&&gA(M,t,n,{nodeOrigin:i,zIndexMode:o}),l=!0,y&&(f.push({id:g.id,type:"dimensions",dimensions:U}),g.expandParent&&g.parentId&&u.push({id:g.id,parentId:g.parentId,rect:Km(M,i)}))}}if(u.length>0){const h=bA(u,t,n,i);f.push(...h)}return{changes:f,updatedInternals:l}}async function Rhe({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function jD(e,t,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${i}-${e}`;const l=r.get(o)||new Map;if(r.set(o,l.set(n,t)),s){o=`${i}-${e}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,t))}}function BW(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},f=`${i}-${o}--${s}-${a}`,c=`${s}-${a}--${i}-${o}`;jD("source",l,c,e,i,o),jD("target",l,f,e,s,a),t.set(r.id,r)}}function FW(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:FW(n,t):!1}function BD(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function _he(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!FW(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Rw({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,a,l;const i=[];for(const[f,c]of t){const d=(o=n.get(f))==null?void 0:o.internals.userNode;d&&i.push({...d,position:c.position,dragging:r})}if(!e)return[i[0],i];const s=(a=n.get(e))==null?void 0:a.internals.userNode;return[s?{...s,position:((l=t.get(e))==null?void 0:l.position)||s.position,dragging:r}:i[0],i]}function Phe({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Mb(s,t);return{x:o.x-s.x,y:o.y-s.y}}function Dhe({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,l=!1,f={x:0,y:0},c=null,d=!1,u=null,h=!1,g=!1,U=null;function y({noDragClassName:w,handleSelector:E,domNode:S,isSelectable:M,nodeId:A,nodeClickDistance:C=0}){u=ho(S);function I({x:O,y:$}){const{nodeLookup:B,nodeExtent:F,snapGrid:z,snapToGrid:H,nodeOrigin:G,onNodeDrag:V,onSelectionDrag:Y,onError:K,updateNodePositions:q}=t();s={x:O,y:$};let se=!1;const de=a.size>1,xe=de&&F?Ak(Cb(a)):null,ve=de&&H?Phe({dragItems:a,snapGrid:z,x:O,y:$}):null;for(const[ue,te]of a){if(!B.has(ue))continue;let le={x:O-te.distance.x,y:$-te.distance.y};H&&(le=ve?{x:Math.round(le.x+ve.x),y:Math.round(le.y+ve.y)}:Mb(le,z));let he=null;if(de&&F&&!te.extent&&xe){const{positionAbsolute:De}=te.internals,Ge=De.x-xe.x+F[0][0],ht=De.x+te.measured.width-xe.x2+F[1][0],st=De.y-xe.y+F[0][1],jt=De.y+te.measured.height-xe.y2+F[1][1];he=[[Ge,st],[ht,jt]]}const{position:we,positionAbsolute:Se}=SW({nodeId:ue,nextPosition:le,nodeLookup:B,nodeExtent:he||F,nodeOrigin:G,onError:K});se=se||te.position.x!==we.x||te.position.y!==we.y,te.position=we,te.internals.positionAbsolute=Se}if(g=g||se,!!se&&(q(a,!0),U&&(r||V||!A&&Y))){const[ue,te]=Rw({nodeId:A,dragItems:a,nodeLookup:B});r==null||r(U,a,ue,te),V==null||V(U,ue,te),A||Y==null||Y(U,te)}}async function R(){if(!c)return;const{transform:O,panBy:$,autoPanSpeed:B,autoPanOnNodeDrag:F}=t();if(!F){l=!1,cancelAnimationFrame(o);return}const[z,H]=CW(f,c,B);(z!==0||H!==0)&&(s.x=(s.x??0)-z/O[2],s.y=(s.y??0)-H/O[2],await $({x:z,y:H})&&I(s)),o=requestAnimationFrame(R)}function L(O){var de;const{nodeLookup:$,multiSelectionActive:B,nodesDraggable:F,transform:z,snapGrid:H,snapToGrid:G,selectNodesOnDrag:V,onNodeDragStart:Y,onSelectionDragStart:K,unselectNodesAndEdges:q}=t();d=!0,(!V||!M)&&!B&&A&&((de=$.get(A))!=null&&de.selected||q()),M&&V&&A&&(e==null||e(A));const se=v5(O.sourceEvent,{transform:z,snapGrid:H,snapToGrid:G,containerBounds:c});if(s=se,a=_he($,F,se,A),a.size>0&&(n||Y||!A&&K)){const[xe,ve]=Rw({nodeId:A,dragItems:a,nodeLookup:$});n==null||n(O.sourceEvent,a,xe,ve),Y==null||Y(O.sourceEvent,xe,ve),A||K==null||K(O.sourceEvent,ve)}}const _=nW().clickDistance(C).on("start",O=>{const{domNode:$,nodeDragThreshold:B,transform:F,snapGrid:z,snapToGrid:H}=t();c=($==null?void 0:$.getBoundingClientRect())||null,h=!1,g=!1,U=O.sourceEvent,B===0&&L(O),s=v5(O.sourceEvent,{transform:F,snapGrid:z,snapToGrid:H,containerBounds:c}),f=Va(O.sourceEvent,c)}).on("drag",O=>{const{autoPanOnNodeDrag:$,transform:B,snapGrid:F,snapToGrid:z,nodeDragThreshold:H,nodeLookup:G}=t(),V=v5(O.sourceEvent,{transform:B,snapGrid:F,snapToGrid:z,containerBounds:c});if(U=O.sourceEvent,(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1||A&&!G.has(A))&&(h=!0),!h){if(!l&&$&&d&&(l=!0,R()),!d){const Y=Va(O.sourceEvent,c),K=Y.x-f.x,q=Y.y-f.y;Math.sqrt(K*K+q*q)>H&&L(O)}(s.x!==V.xSnapped||s.y!==V.ySnapped)&&a&&d&&(f=Va(O.sourceEvent,c),I(V))}}).on("end",O=>{if(!(!d||h)&&(l=!1,d=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:$,updateNodePositions:B,onNodeDragStop:F,onSelectionDragStop:z}=t();if(g&&(B(a,!1),g=!1),i||F||!A&&z){const[H,G]=Rw({nodeId:A,dragItems:a,nodeLookup:$,dragging:!1});i==null||i(O.sourceEvent,a,H,G),F==null||F(O.sourceEvent,H,G),A||z==null||z(O.sourceEvent,G)}}}).filter(O=>{const $=O.target;return!O.button&&(!w||!BD($,`.${w}`,S))&&(!E||BD($,E,S))});u.call(_)}function x(){u==null||u.on(".drag",null)}return{update:y,destroy:x}}function Lhe(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())p2(i,Km(s))>0&&r.push(s);return r}const Ohe=250;function jhe(e,t,n,r){var a,l;let i=[],s=1/0;const o=Lhe(e,n,t+Ohe);for(const f of o){const c=[...((a=f.internals.handleBounds)==null?void 0:a.source)??[],...((l=f.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:u,y:h}=Dh(f,d,d.position,!0),g=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(h-e.y,2));g>t||(g<s?(i=[{...d,x:u,y:h}],s=g):g===s&&i.push({...d,x:u,y:h}))}}if(!i.length)return null;if(i.length>1){const f=r.type==="source"?"target":"source";return i.find(c=>c.type===f)??i[0]}return i[0]}function $W(e,t,n,r,i,s=!1){var f,c,d;const o=r.get(e);if(!o)return null;const a=i==="strict"?(f=o.internals.handleBounds)==null?void 0:f[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((d=o.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(u=>u.id===n):a==null?void 0:a[0])??null;return l&&s?{...l,...Dh(o,l,l.position,!0)}:l}function zW(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Bhe(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const HW=()=>!0;function Fhe(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:l,lib:f,autoPanOnConnect:c,flowId:d,panBy:u,cancelConnection:h,onConnectStart:g,onConnect:U,onConnectEnd:y,isValidConnection:x=HW,onReconnectEnd:w,updateConnection:E,getTransform:S,getFromHandle:M,autoPanSpeed:A,dragThreshold:C=1,handleDomNode:I}){const R=IW(e.target);let L=0,_;const{x:O,y:$}=Va(e),B=zW(s,I),F=a==null?void 0:a.getBoundingClientRect();let z=!1;if(!F||!B)return;const H=$W(i,B,r,l,t);if(!H)return;let G=Va(e,F),V=!1,Y=null,K=!1,q=null;function se(){if(!c||!F)return;const[we,Se]=CW(G,F,A);u({x:we,y:Se}),L=requestAnimationFrame(se)}const de={...H,nodeId:i,type:B,position:H.position},xe=l.get(i);let ue={inProgress:!0,isValid:null,from:Dh(xe,de,tt.Left,!0),fromHandle:de,fromPosition:de.position,fromNode:xe,to:G,toHandle:null,toPosition:MD[de.position],toNode:null,pointer:G};function te(){z=!0,E(ue),g==null||g(e,{nodeId:i,handleId:r,handleType:B})}C===0&&te();function le(we){if(!z){const{x:jt,y:En}=Va(we),cn=jt-O,hi=En-$;if(!(cn*cn+hi*hi>C*C))return;te()}if(!M()||!de){he(we);return}const Se=S();G=Va(we,F),_=jhe(Ab(G,Se,!1,[1,1]),n,l,de),V||(se(),V=!0);const De=VW(we,{handle:_,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:x,doc:R,lib:f,flowId:d,nodeLookup:l});q=De.handleDomNode,Y=De.connection,K=Bhe(!!_,De.isValid);const Ge=l.get(i),ht=Ge?Dh(Ge,de,tt.Left,!0):ue.from,st={...ue,from:ht,isValid:K,to:De.toHandle&&K?F3({x:De.toHandle.x,y:De.toHandle.y},Se):G,toHandle:De.toHandle,toPosition:K&&De.toHandle?De.toHandle.position:MD[de.position],toNode:De.toHandle?l.get(De.toHandle.nodeId):null,pointer:G};E(st),ue=st}function he(we){if(!("touches"in we&&we.touches.length>0)){if(z){(_||q)&&Y&&K&&(U==null||U(Y));const{inProgress:Se,...De}=ue,Ge={...De,toPosition:ue.toHandle?ue.toPosition:null};y==null||y(we,Ge),s&&(w==null||w(we,Ge))}h(),cancelAnimationFrame(L),V=!1,K=!1,Y=null,q=null,R.removeEventListener("mousemove",le),R.removeEventListener("mouseup",he),R.removeEventListener("touchmove",le),R.removeEventListener("touchend",he)}}R.addEventListener("mousemove",le),R.addEventListener("mouseup",he),R.addEventListener("touchmove",le),R.addEventListener("touchend",he)}function VW(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:l,isValidConnection:f=HW,nodeLookup:c}){const d=s==="target",u=t?o.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:g}=Va(e),U=o.elementFromPoint(h,g),y=U!=null&&U.classList.contains(`${a}-flow__handle`)?U:u,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const w=zW(void 0,y),E=y.getAttribute("data-nodeid"),S=y.getAttribute("data-handleid"),M=y.classList.contains("connectable"),A=y.classList.contains("connectableend");if(!E||!w)return x;const C={source:d?E:r,sourceHandle:d?S:i,target:d?r:E,targetHandle:d?i:S};x.connection=C;const R=M&&A&&(n===Gm.Strict?d&&w==="source"||!d&&w==="target":E!==r||S!==i);x.isValid=R&&f(C),x.toHandle=$W(E,w,S,c,n,!0)}return x}const Rk={onPointerDown:Fhe,isValid:VW};function $he({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=ho(e);function s({translateExtent:a,width:l,height:f,zoomStep:c=1,pannable:d=!0,zoomable:u=!0,inversePan:h=!1}){const g=E=>{if(E.sourceEvent.type!=="wheel"||!t)return;const S=n(),M=E.sourceEvent.ctrlKey&&m2()?10:1,A=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*c,C=S[2]*Math.pow(2,A*M);t.scaleTo(C)};let U=[0,0];const y=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(U=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},x=E=>{const S=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const M=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],A=[M[0]-U[0],M[1]-U[1]];U=M;const C=r()*Math.max(S[2],Math.log(S[2]))*(h?-1:1),I={x:S[0]-A[0]*C,y:S[1]-A[1]*C},R=[[0,0],[l,f]];t.setViewportConstrained({x:I.x,y:I.y,zoom:S[2]},R,a)},w=UW().on("start",y).on("zoom",d?x:null).on("zoom.wheel",u?g:null);i.call(w,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Oa}}const n7=e=>({x:e.x,y:e.y,zoom:e.k}),_w=({x:e,y:t,zoom:n})=>J9.translate(e,t).scale(n),Up=(e,t)=>e.target.closest(`.${t}`),WW=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),zhe=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Pw=(e,t=0,n=zhe,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},GW=e=>{const t=e.ctrlKey&&m2()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Hhe({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:f}){return c=>{if(Up(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&o){const y=Oa(c),x=GW(c),w=d*Math.pow(2,x);r.scaleTo(n,w,y,c);return}const u=c.deltaMode===1?20:1;let h=i===ph.Vertical?0:c.deltaX*u,g=i===ph.Horizontal?0:c.deltaY*u;!m2()&&c.shiftKey&&i!==ph.Vertical&&(h=c.deltaY*u,g=0),r.translateBy(n,-(h/d)*s,-(g/d)*s,{internal:!0});const U=n7(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l==null||l(c,U),e.panScrollTimeout=setTimeout(()=>{f==null||f(c,U),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(c,U))}}function Vhe({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,a=Up(r,e);if(r.ctrlKey&&s&&a&&r.preventDefault(),o||a)return null;r.preventDefault(),n.call(this,r,i)}}function Whe({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var s,o,a;if((s=r.sourceEvent)!=null&&s.internal)return;const i=n7(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Ghe({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{var o,a;e.usedRightMouseButton=!!(n&&WW(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!((a=s.sourceEvent)!=null&&a.internal)&&(i==null||i(s.sourceEvent,n7(s.transform)))}}function Xhe({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,s&&WW(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const l=n7(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(o.sourceEvent,l)},n?150:0)}}}function Khe({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:l,lib:f,connectionInProgress:c}){return d=>{var y;const u=e||t,h=n&&d.ctrlKey,g=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Up(d,`${f}-flow__node`)||Up(d,`${f}-flow__edge`)))return!0;if(!r&&!u&&!i&&!s&&!n||o||c&&!g||Up(d,a)&&g||Up(d,l)&&(!g||i&&g&&!e)||!n&&d.ctrlKey&&g)return!1;if(!n&&d.type==="touchstart"&&((y=d.touches)==null?void 0:y.length)>1)return d.preventDefault(),!1;if(!u&&!i&&!h&&g||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const U=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||g)&&U}}function Yhe({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:l}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),d=UW().scaleExtent([t,n]).translateExtent(r),u=ho(e).call(d);w({x:i.x,y:i.y,zoom:Xm(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const h=u.on("wheel.zoom"),g=u.on("dblclick.zoom");d.wheelDelta(GW);function U(_,O){return u?new Promise($=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?x5:Ny).transform(Pw(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>$(!0)),_)}):Promise.resolve(!1)}function y({noWheelClassName:_,noPanClassName:O,onPaneContextMenu:$,userSelectionActive:B,panOnScroll:F,panOnDrag:z,panOnScrollMode:H,panOnScrollSpeed:G,preventScrolling:V,zoomOnPinch:Y,zoomOnScroll:K,zoomOnDoubleClick:q,zoomActivationKeyPressed:se,lib:de,onTransformChange:xe,connectionInProgress:ve,paneClickDistance:ue,selectionOnDrag:te}){B&&!f.isZoomingOrPanning&&x();const le=F&&!se&&!B;d.clickDistance(te?1/0:!Ha(ue)||ue<0?0:ue);const he=le?Hhe({zoomPanValues:f,noWheelClassName:_,d3Selection:u,d3Zoom:d,panOnScrollMode:H,panOnScrollSpeed:G,zoomOnPinch:Y,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a}):Vhe({noWheelClassName:_,preventScrolling:V,d3ZoomHandler:h});if(u.on("wheel.zoom",he,{passive:!1}),!B){const Se=Whe({zoomPanValues:f,onDraggingChange:l,onPanZoomStart:o});d.on("start",Se);const De=Ghe({zoomPanValues:f,panOnDrag:z,onPaneContextMenu:!!$,onPanZoom:s,onTransformChange:xe});d.on("zoom",De);const Ge=Xhe({zoomPanValues:f,panOnDrag:z,panOnScroll:F,onPaneContextMenu:$,onPanZoomEnd:a,onDraggingChange:l});d.on("end",Ge)}const we=Khe({zoomActivationKeyPressed:se,panOnDrag:z,zoomOnScroll:K,panOnScroll:F,zoomOnDoubleClick:q,zoomOnPinch:Y,userSelectionActive:B,noPanClassName:O,noWheelClassName:_,lib:de,connectionInProgress:ve});d.filter(we),q?u.on("dblclick.zoom",g):u.on("dblclick.zoom",null)}function x(){d.on("zoom",null)}async function w(_,O,$){const B=_w(_),F=d==null?void 0:d.constrain()(B,O,$);return F&&await U(F),new Promise(z=>z(F))}async function E(_,O){const $=_w(_);return await U($,O),new Promise(B=>B($))}function S(_){if(u){const O=_w(_),$=u.property("__zoom");($.k!==_.zoom||$.x!==_.x||$.y!==_.y)&&(d==null||d.transform(u,O,null,{sync:!0}))}}function M(){const _=u?bW(u.node()):{x:0,y:0,k:1};return{x:_.x,y:_.y,zoom:_.k}}function A(_,O){return u?new Promise($=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?x5:Ny).scaleTo(Pw(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>$(!0)),_)}):Promise.resolve(!1)}function C(_,O){return u?new Promise($=>{d==null||d.interpolate((O==null?void 0:O.interpolate)==="linear"?x5:Ny).scaleBy(Pw(u,O==null?void 0:O.duration,O==null?void 0:O.ease,()=>$(!0)),_)}):Promise.resolve(!1)}function I(_){d==null||d.scaleExtent(_)}function R(_){d==null||d.translateExtent(_)}function L(_){const O=!Ha(_)||_<0?0:_;d==null||d.clickDistance(O)}return{update:y,destroy:x,setViewport:E,setViewportConstrained:w,getViewport:M,scaleTo:A,scaleBy:C,setScaleExtent:I,setTranslateExtent:R,syncViewport:S,setClickDistance:L}}var Zm;(function(e){e.Line="line",e.Handle="handle"})(Zm||(Zm={}));function Zhe({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}function FD(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function md(e,t){return Math.max(0,t-e)}function gd(e,t){return Math.max(0,e-t)}function AU(e,t,n){return Math.max(0,t-e,e-n)}function $D(e,t){return e?!t:t}function qhe(e,t,n,r,i,s,o,a){let{affectsX:l,affectsY:f}=t;const{isHorizontal:c,isVertical:d}=t,u=c&&d,{xSnapped:h,ySnapped:g}=n,{minWidth:U,maxWidth:y,minHeight:x,maxHeight:w}=r,{x:E,y:S,width:M,height:A,aspectRatio:C}=e;let I=Math.floor(c?h-e.pointerX:0),R=Math.floor(d?g-e.pointerY:0);const L=M+(l?-I:I),_=A+(f?-R:R),O=-s[0]*M,$=-s[1]*A;let B=AU(L,U,y),F=AU(_,x,w);if(o){let G=0,V=0;l&&I<0?G=md(E+I+O,o[0][0]):!l&&I>0&&(G=gd(E+L+O,o[1][0])),f&&R<0?V=md(S+R+$,o[0][1]):!f&&R>0&&(V=gd(S+_+$,o[1][1])),B=Math.max(B,G),F=Math.max(F,V)}if(a){let G=0,V=0;l&&I>0?G=gd(E+I,a[0][0]):!l&&I<0&&(G=md(E+L,a[1][0])),f&&R>0?V=gd(S+R,a[0][1]):!f&&R<0&&(V=md(S+_,a[1][1])),B=Math.max(B,G),F=Math.max(F,V)}if(i){if(c){const G=AU(L/C,x,w)*C;if(B=Math.max(B,G),o){let V=0;!l&&!f||l&&!f&&u?V=gd(S+$+L/C,o[1][1])*C:V=md(S+$+(l?I:-I)/C,o[0][1])*C,B=Math.max(B,V)}if(a){let V=0;!l&&!f||l&&!f&&u?V=md(S+L/C,a[1][1])*C:V=gd(S+(l?I:-I)/C,a[0][1])*C,B=Math.max(B,V)}}if(d){const G=AU(_*C,U,y)/C;if(F=Math.max(F,G),o){let V=0;!l&&!f||f&&!l&&u?V=gd(E+_*C+O,o[1][0])/C:V=md(E+(f?R:-R)*C+O,o[0][0])/C,F=Math.max(F,V)}if(a){let V=0;!l&&!f||f&&!l&&u?V=md(E+_*C,a[1][0])/C:V=gd(E+(f?R:-R)*C,a[0][0])/C,F=Math.max(F,V)}}}R=R+(R<0?F:-F),I=I+(I<0?B:-B),i&&(u?L>_*C?R=($D(l,f)?-I:I)/C:I=($D(l,f)?-R:R)*C:c?(R=I/C,f=l):(I=R*C,l=f));const z=l?E+I:E,H=f?S+R:S;return{width:M+(l?-I:I),height:A+(f?-R:R),x:s[0]*I*(l?-1:1)+z,y:s[1]*R*(f?-1:1)+H}}const XW={width:0,height:0,x:0,y:0},Qhe={...XW,pointerX:0,pointerY:0,aspectRatio:1};function Jhe(e){return[[0,0],[e.measured.width,e.measured.height]]}function e1e(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,a=n[0]*s,l=n[1]*o;return[[r-a,i-l],[r+s-a,i+o-l]]}function t1e({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=ho(e);let o={controlDirection:FD("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:f,boundaries:c,keepAspectRatio:d,resizeDirection:u,onResizeStart:h,onResize:g,onResizeEnd:U,shouldResize:y}){let x={...XW},w={...Qhe};o={boundaries:c,resizeDirection:u,keepAspectRatio:d,controlDirection:FD(f)};let E,S=null,M=[],A,C,I,R=!1;const L=nW().on("start",_=>{const{nodeLookup:O,transform:$,snapGrid:B,snapToGrid:F,nodeOrigin:z,paneDomNode:H}=n();if(E=O.get(t),!E)return;S=(H==null?void 0:H.getBoundingClientRect())??null;const{xSnapped:G,ySnapped:V}=v5(_.sourceEvent,{transform:$,snapGrid:B,snapToGrid:F,containerBounds:S});x={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},w={...x,pointerX:G,pointerY:V,aspectRatio:x.width/x.height},A=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(A=O.get(E.parentId),C=A&&E.extent==="parent"?Jhe(A):void 0),M=[],I=void 0;for(const[Y,K]of O)if(K.parentId===t&&(M.push({id:Y,position:{...K.position},extent:K.extent}),K.extent==="parent"||K.expandParent)){const q=e1e(K,E,K.origin??z);I?I=[[Math.min(q[0][0],I[0][0]),Math.min(q[0][1],I[0][1])],[Math.max(q[1][0],I[1][0]),Math.max(q[1][1],I[1][1])]]:I=q}h==null||h(_,{...x})}).on("drag",_=>{const{transform:O,snapGrid:$,snapToGrid:B,nodeOrigin:F}=n(),z=v5(_.sourceEvent,{transform:O,snapGrid:$,snapToGrid:B,containerBounds:S}),H=[];if(!E)return;const{x:G,y:V,width:Y,height:K}=x,q={},se=E.origin??F,{width:de,height:xe,x:ve,y:ue}=qhe(w,o.controlDirection,z,o.boundaries,o.keepAspectRatio,se,C,I),te=de!==Y,le=xe!==K,he=ve!==G&&te,we=ue!==V&&le;if(!he&&!we&&!te&&!le)return;if((he||we||se[0]===1||se[1]===1)&&(q.x=he?ve:x.x,q.y=we?ue:x.y,x.x=q.x,x.y=q.y,M.length>0)){const ht=ve-G,st=ue-V;for(const jt of M)jt.position={x:jt.position.x-ht+se[0]*(de-Y),y:jt.position.y-st+se[1]*(xe-K)},H.push(jt)}if((te||le)&&(q.width=te&&(!o.resizeDirection||o.resizeDirection==="horizontal")?de:x.width,q.height=le&&(!o.resizeDirection||o.resizeDirection==="vertical")?xe:x.height,x.width=q.width,x.height=q.height),A&&E.expandParent){const ht=se[0]*(q.width??0);q.x&&q.x<ht&&(x.x=ht,w.x=w.x-(q.x-ht));const st=se[1]*(q.height??0);q.y&&q.y<st&&(x.y=st,w.y=w.y-(q.y-st))}const Se=Zhe({width:x.width,prevWidth:Y,height:x.height,prevHeight:K,affectsX:o.controlDirection.affectsX,affectsY:o.controlDirection.affectsY}),De={...x,direction:Se};(y==null?void 0:y(_,De))!==!1&&(R=!0,g==null||g(_,De),r(q,H))}).on("end",_=>{R&&(U==null||U(_,{...x}),i==null||i({...x}),R=!1)});s.call(L)}function l(){s.on(".drag",null)}return{update:a,destroy:l}}var Dw={exports:{}},Lw={},Ow={exports:{}},jw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD;function n1e(){if(zD)return jw;zD=1;var e=gb();function t(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function a(d,u){var h=u(),g=r({inst:{value:h,getSnapshot:u}}),U=g[0].inst,y=g[1];return s(function(){U.value=h,U.getSnapshot=u,l(U)&&y({inst:U})},[d,h,u]),i(function(){return l(U)&&y({inst:U}),d(function(){l(U)&&y({inst:U})})},[d]),o(h),h}function l(d){var u=d.getSnapshot;d=d.value;try{var h=u();return!n(d,h)}catch{return!0}}function f(d,u){return u()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:a;return jw.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,jw}var HD;function KW(){return HD||(HD=1,Ow.exports=n1e()),Ow.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VD;function r1e(){if(VD)return Lw;VD=1;var e=gb(),t=KW();function n(f,c){return f===c&&(f!==0||1/f===1/c)||f!==f&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return Lw.useSyncExternalStoreWithSelector=function(f,c,d,u,h){var g=s(null);if(g.current===null){var U={hasValue:!1,value:null};g.current=U}else U=g.current;g=a(function(){function x(A){if(!w){if(w=!0,E=A,A=u(A),h!==void 0&&U.hasValue){var C=U.value;if(h(C,A))return S=C}return S=A}if(C=S,r(E,A))return C;var I=u(A);return h!==void 0&&h(C,I)?(E=A,C):(E=A,S=I)}var w=!1,E,S,M=d===void 0?null:d;return[function(){return x(c())},M===null?void 0:function(){return x(M())}]},[c,d,u,h]);var y=i(f,g[0],g[1]);return o(function(){U.hasValue=!0,U.value=y},[y]),l(y),y},Lw}var WD;function i1e(){return WD||(WD=1,Dw.exports=r1e()),Dw.exports}var YW=i1e();const ZW=hc(YW),GD=e=>{let t;const n=new Set,r=(c,d)=>{const u=typeof c=="function"?c(t):c;if(!Object.is(u,t)){const h=t;t=d??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(g=>g(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>f,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}},f=t=e(r,i,l);return l},qW=e=>e?GD(e):GD,{useDebugValue:s1e}=Te,{useSyncExternalStoreWithSelector:o1e}=ZW,a1e=e=>e;function QW(e,t=a1e,n){const r=o1e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return s1e(r),r}const XD=(e,t)=>{const n=qW(e),r=(i,s=t)=>QW(n,i,s);return Object.assign(r,n),r},l1e=(e,t)=>e?XD(e,t):XD;function Vn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var ii=Yz();const JW=hc(ii),r7=T.createContext(null),c1e=r7.Provider,eG=nc.error001();function Vt(e,t){const n=T.useContext(r7);if(n===null)throw new Error(eG);return QW(n,e,t)}function Wn(){const e=T.useContext(r7);if(e===null)throw new Error(eG);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const KD={display:"none"},f1e={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},tG="react-flow__node-desc",nG="react-flow__edge-desc",d1e="react-flow__aria-live",u1e=e=>e.ariaLiveMessage,h1e=e=>e.ariaLabelConfig;function p1e({rfId:e}){const t=Vt(u1e);return m.jsx("div",{id:`${d1e}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:f1e,children:t})}function m1e({rfId:e,disableKeyboardA11y:t}){const n=Vt(h1e);return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:`${tG}-${e}`,style:KD,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),m.jsx("div",{id:`${nG}-${e}`,style:KD,children:n["edge.a11yDescription.default"]}),!t&&m.jsx(p1e,{rfId:e})]})}const i7=T.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return m.jsx("div",{className:Dr(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});i7.displayName="Panel";function g1e({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m.jsx(i7,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const b1e=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},TU=e=>e.id;function U1e(e,t){return Vn(e.selectedNodes.map(TU),t.selectedNodes.map(TU))&&Vn(e.selectedEdges.map(TU),t.selectedEdges.map(TU))}function y1e({onSelectionChange:e}){const t=Wn(),{selectedNodes:n,selectedEdges:r}=Vt(b1e,U1e);return T.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const x1e=e=>!!e.onSelectionChangeHandlers;function v1e({onSelectionChange:e}){const t=Vt(x1e);return e||t?m.jsx(y1e,{onSelectionChange:e}):null}const rG=[0,0],w1e={x:0,y:0,zoom:1},E1e=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],YD=[...E1e,"rfId"],S1e=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),ZD={translateExtent:u2,nodeOrigin:rG,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function k1e(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:l}=Vt(S1e,Vn),f=Wn();T.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{c.current=ZD,a()}),[]);const c=T.useRef(ZD);return T.useEffect(()=>{for(const d of YD){const u=e[d],h=c.current[d];u!==h&&(typeof e[d]>"u"||(d==="nodes"?t(u):d==="edges"?n(u):d==="minZoom"?r(u):d==="maxZoom"?i(u):d==="translateExtent"?s(u):d==="nodeExtent"?o(u):d==="ariaLabelConfig"?f.setState({ariaLabelConfig:hhe(u)}):d==="fitView"?f.setState({fitViewQueued:u}):d==="fitViewOptions"?f.setState({fitViewOptions:u}):f.setState({[d]:u})))}c.current=e},YD.map(d=>e[d])),null}function qD(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function C1e(e){var r;const[t,n]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){n(e);return}const i=qD(),s=()=>n(i!=null&&i.matches?"dark":"light");return s(),i==null||i.addEventListener("change",s),()=>{i==null||i.removeEventListener("change",s)}},[e]),t!==null?t:(r=qD())!=null&&r.matches?"dark":"light"}const QD=typeof document<"u"?document:null;function g2(e=null,t={target:QD,actInsideInputWithModifier:!0}){const[n,r]=T.useState(!1),i=T.useRef(!1),s=T.useRef(new Set([])),[o,a]=T.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=f.reduce((d,u)=>d.concat(...u),[]);return[f,c]}return[[],[]]},[e]);return T.useEffect(()=>{const l=(t==null?void 0:t.target)??QD,f=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=h=>{var y,x;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!f)&&NW(h))return!1;const U=eL(h.code,a);if(s.current.add(h[U]),JD(o,s.current,!1)){const w=((x=(y=h.composedPath)==null?void 0:y.call(h))==null?void 0:x[0])||h.target,E=(w==null?void 0:w.nodeName)==="BUTTON"||(w==null?void 0:w.nodeName)==="A";t.preventDefault!==!1&&(i.current||!E)&&h.preventDefault(),r(!0)}},d=h=>{const g=eL(h.code,a);JD(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[g]),h.key==="Meta"&&s.current.clear(),i.current=!1},u=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,r]),n}function JD(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function eL(e,t){return t.includes(e)?"code":"key"}const M1e=()=>{const e=Wn();return T.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=e.getState(),l=dA(t,r,i,s,o,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:a,y:l}=o.getBoundingClientRect(),f={x:t.x-a,y:t.y-l},c=n.snapGrid??i,d=n.snapToGrid??s;return Ab(f,r,d,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=F3(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function iG(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const l of o)A1e(l,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function A1e(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function sG(e,t){return iG(e,t)}function oG(e,t){return iG(e,t)}function pu(e,t){return{id:e,type:"select",selected:t}}function yp(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(pu(s.id,o)))}return r}function tL({items:e=[],lookup:t}){var i;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,o]of e.entries()){const a=t.get(o.id),l=((i=a==null?void 0:a.internals)==null?void 0:i.userNode)??a;l!==void 0&&l!==o&&n.push({id:o.id,item:o,type:"replace"}),l===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function nL(e){return{id:e.id,type:"remove"}}const rL=e=>rhe(e),T1e=e=>EW(e);function aG(e){return T.forwardRef(e)}const I1e=typeof window<"u"?T.useLayoutEffect:T.useEffect;function iL(e){const[t,n]=T.useState(BigInt(0)),[r]=T.useState(()=>N1e(()=>n(i=>i+BigInt(1))));return I1e(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function N1e(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const lG=T.createContext(null);function R1e({children:e}){const t=Wn(),n=T.useCallback(a=>{const{nodes:l=[],setNodes:f,hasDefaultNodes:c,onNodesChange:d,nodeLookup:u,fitViewQueued:h,onNodesChangeMiddlewareMap:g}=t.getState();let U=l;for(const x of a)U=typeof x=="function"?x(U):x;let y=tL({items:U,lookup:u});for(const x of g.values())y=x(y);c&&f(U),y.length>0?d==null||d(y):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:w,setNodes:E}=t.getState();x&&E(w)})},[]),r=iL(n),i=T.useCallback(a=>{const{edges:l=[],setEdges:f,hasDefaultEdges:c,onEdgesChange:d,edgeLookup:u}=t.getState();let h=l;for(const g of a)h=typeof g=="function"?g(h):g;c?f(h):d&&d(tL({items:h,lookup:u}))},[]),s=iL(i),o=T.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return m.jsx(lG.Provider,{value:o,children:e})}function _1e(){const e=T.useContext(lG);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const P1e=e=>!!e.panZoom;function s7(){const e=M1e(),t=Wn(),n=_1e(),r=Vt(P1e),i=T.useMemo(()=>{const s=d=>t.getState().nodeLookup.get(d),o=d=>{n.nodeQueue.push(d)},a=d=>{n.edgeQueue.push(d)},l=d=>{var x,w;const{nodeLookup:u,nodeOrigin:h}=t.getState(),g=rL(d)?d:u.get(d.id),U=g.parentId?TW(g.position,g.measured,g.parentId,u,h):g.position,y={...g,position:U,width:((x=g.measured)==null?void 0:x.width)??g.width,height:((w=g.measured)==null?void 0:w.height)??g.height};return Km(y)},f=(d,u,h={replace:!1})=>{o(g=>g.map(U=>{if(U.id===d){const y=typeof u=="function"?u(U):u;return h.replace&&rL(y)?y:{...U,...y}}return U}))},c=(d,u,h={replace:!1})=>{a(g=>g.map(U=>{if(U.id===d){const y=typeof u=="function"?u(U):u;return h.replace&&T1e(y)?y:{...U,...y}}return U}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var u;return(u=s(d))==null?void 0:u.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(u=>({...u}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:o,setEdges:a,addNodes:d=>{const u=Array.isArray(d)?d:[d];n.nodeQueue.push(h=>[...h,...u])},addEdges:d=>{const u=Array.isArray(d)?d:[d];n.edgeQueue.push(h=>[...h,...u])},toObject:()=>{const{nodes:d=[],edges:u=[],transform:h}=t.getState(),[g,U,y]=h;return{nodes:d.map(x=>({...x})),edges:u.map(x=>({...x})),viewport:{x:g,y:U,zoom:y}}},deleteElements:async({nodes:d=[],edges:u=[]})=>{const{nodes:h,edges:g,onNodesDelete:U,onEdgesDelete:y,triggerNodeChanges:x,triggerEdgeChanges:w,onDelete:E,onBeforeDelete:S}=t.getState(),{nodes:M,edges:A}=await lhe({nodesToRemove:d,edgesToRemove:u,nodes:h,edges:g,onBeforeDelete:S}),C=A.length>0,I=M.length>0;if(C){const R=A.map(nL);y==null||y(A),w(R)}if(I){const R=M.map(nL);U==null||U(M),x(R)}return(I||C)&&(E==null||E({nodes:M,edges:A})),{deletedNodes:M,deletedEdges:A}},getIntersectingNodes:(d,u=!0,h)=>{const g=TD(d),U=g?d:l(d),y=h!==void 0;return U?(h||t.getState().nodes).filter(x=>{const w=t.getState().nodeLookup.get(x.id);if(w&&!g&&(x.id===d.id||!w.internals.positionAbsolute))return!1;const E=Km(y?x:w),S=p2(E,U);return u&&S>0||S>=E.width*E.height||S>=U.width*U.height}):[]},isNodeIntersecting:(d,u,h=!0)=>{const U=TD(d)?d:l(d);if(!U)return!1;const y=p2(U,u);return h&&y>0||y>=u.width*u.height||y>=U.width*U.height},updateNode:f,updateNodeData:(d,u,h={replace:!1})=>{f(d,g=>{const U=typeof u=="function"?u(g):u;return h.replace?{...g,data:U}:{...g,data:{...g.data,...U}}},h)},updateEdge:c,updateEdgeData:(d,u,h={replace:!1})=>{c(d,g=>{const U=typeof u=="function"?u(g):u;return h.replace?{...g,data:U}:{...g,data:{...g.data,...U}}},h)},getNodesBounds:d=>{const{nodeLookup:u,nodeOrigin:h}=t.getState();return ihe(d,{nodeLookup:u,nodeOrigin:h})},getHandleConnections:({type:d,id:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}-${d}${u?`-${u}`:""}`))==null?void 0:g.values())??[])},getNodeConnections:({type:d,handleId:u,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}${d?u?`-${d}-${u}`:`-${d}`:""}`))==null?void 0:g.values())??[])},fitView:async d=>{const u=t.getState().fitViewResolver??uhe();return t.setState({fitViewQueued:!0,fitViewOptions:d,fitViewResolver:u}),n.nodeQueue.push(h=>[...h]),u.promise}}},[]);return T.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const sL=e=>e.selected,D1e=typeof window<"u"?window:void 0;function L1e({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Wn(),{deleteElements:r}=s7(),i=g2(e,{actInsideInputWithModifier:!1}),s=g2(t,{target:D1e});T.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(sL),edges:o.filter(sL)}),n.setState({nodesSelectionActive:!1})}},[i]),T.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function O1e(e){const t=Wn();T.useEffect(()=>{const n=()=>{var i,s,o,a;if(!e.current||!(((s=(i=e.current).checkVisibility)==null?void 0:s.call(i))??!0))return!1;const r=uA(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",nc.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const o7={position:"absolute",width:"100%",height:"100%",top:0,left:0},j1e=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function B1e({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=ph.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:f,minZoom:c,maxZoom:d,zoomActivationKeyCode:u,preventScrolling:h=!0,children:g,noWheelClassName:U,noPanClassName:y,onViewportChange:x,isControlledViewport:w,paneClickDistance:E,selectionOnDrag:S}){const M=Wn(),A=T.useRef(null),{userSelectionActive:C,lib:I,connectionInProgress:R}=Vt(j1e,Vn),L=g2(u),_=T.useRef();O1e(A);const O=T.useCallback($=>{x==null||x({x:$[0],y:$[1],zoom:$[2]}),w||M.setState({transform:$})},[x,w]);return T.useEffect(()=>{if(A.current){_.current=Yhe({domNode:A.current,minZoom:c,maxZoom:d,translateExtent:f,viewport:l,onDraggingChange:z=>M.setState(H=>H.paneDragging===z?H:{paneDragging:z}),onPanZoomStart:(z,H)=>{const{onViewportChangeStart:G,onMoveStart:V}=M.getState();V==null||V(z,H),G==null||G(H)},onPanZoom:(z,H)=>{const{onViewportChange:G,onMove:V}=M.getState();V==null||V(z,H),G==null||G(H)},onPanZoomEnd:(z,H)=>{const{onViewportChangeEnd:G,onMoveEnd:V}=M.getState();V==null||V(z,H),G==null||G(H)}});const{x:$,y:B,zoom:F}=_.current.getViewport();return M.setState({panZoom:_.current,transform:[$,B,F],domNode:A.current.closest(".react-flow")}),()=>{var z;(z=_.current)==null||z.destroy()}}},[]),T.useEffect(()=>{var $;($=_.current)==null||$.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:L,preventScrolling:h,noPanClassName:y,userSelectionActive:C,noWheelClassName:U,lib:I,onTransformChange:O,connectionInProgress:R,selectionOnDrag:S,paneClickDistance:E})},[e,t,n,r,i,s,o,a,L,h,y,C,U,I,O,R,S,E]),m.jsx("div",{className:"react-flow__renderer",ref:A,style:o7,children:g})}const F1e=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function $1e(){const{userSelectionActive:e,userSelectionRect:t}=Vt(F1e,Vn);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Bw=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},z1e=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function H1e({isSelecting:e,selectionKeyPressed:t,selectionMode:n=h2.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:s,onSelectionStart:o,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:f,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:h,children:g}){const U=Wn(),{userSelectionActive:y,elementsSelectable:x,dragging:w,connectionInProgress:E}=Vt(z1e,Vn),S=x&&(e||y),M=T.useRef(null),A=T.useRef(),C=T.useRef(new Set),I=T.useRef(new Set),R=T.useRef(!1),L=G=>{if(R.current||E){R.current=!1;return}l==null||l(G),U.getState().resetSelectedElements(),U.setState({nodesSelectionActive:!1})},_=G=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){G.preventDefault();return}f==null||f(G)},O=c?G=>c(G):void 0,$=G=>{R.current&&(G.stopPropagation(),R.current=!1)},B=G=>{var xe,ve;const{domNode:V}=U.getState();if(A.current=V==null?void 0:V.getBoundingClientRect(),!A.current)return;const Y=G.target===M.current;if(!Y&&!!G.target.closest(".nokey")||!e||!(s&&Y||t)||G.button!==0||!G.isPrimary)return;(ve=(xe=G.target)==null?void 0:xe.setPointerCapture)==null||ve.call(xe,G.pointerId),R.current=!1;const{x:se,y:de}=Va(G.nativeEvent,A.current);U.setState({userSelectionRect:{width:0,height:0,startX:se,startY:de,x:se,y:de}}),Y||(G.stopPropagation(),G.preventDefault())},F=G=>{const{userSelectionRect:V,transform:Y,nodeLookup:K,edgeLookup:q,connectionLookup:se,triggerNodeChanges:de,triggerEdgeChanges:xe,defaultEdgeOptions:ve,resetSelectedElements:ue}=U.getState();if(!A.current||!V)return;const{x:te,y:le}=Va(G.nativeEvent,A.current),{startX:he,startY:we}=V;if(!R.current){const st=t?0:i;if(Math.hypot(te-he,le-we)<=st)return;ue(),o==null||o(G)}R.current=!0;const Se={startX:he,startY:we,x:te<he?te:he,y:le<we?le:we,width:Math.abs(te-he),height:Math.abs(le-we)},De=C.current,Ge=I.current;C.current=new Set(fA(K,Se,Y,n===h2.Partial,!0).map(st=>st.id)),I.current=new Set;const ht=(ve==null?void 0:ve.selectable)??!0;for(const st of C.current){const jt=se.get(st);if(jt)for(const{edgeId:En}of jt.values()){const cn=q.get(En);cn&&(cn.selectable??ht)&&I.current.add(En)}}if(!ID(De,C.current)){const st=yp(K,C.current,!0);de(st)}if(!ID(Ge,I.current)){const st=yp(q,I.current);xe(st)}U.setState({userSelectionRect:Se,userSelectionActive:!0,nodesSelectionActive:!1})},z=G=>{var V,Y;G.button===0&&((Y=(V=G.target)==null?void 0:V.releasePointerCapture)==null||Y.call(V,G.pointerId),!y&&G.target===M.current&&U.getState().userSelectionRect&&(L==null||L(G)),U.setState({userSelectionActive:!1,userSelectionRect:null}),R.current&&(a==null||a(G),U.setState({nodesSelectionActive:C.current.size>0})))},H=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:Dr(["react-flow__pane",{draggable:H,dragging:w,selection:e}]),onClick:S?void 0:Bw(L,M),onContextMenu:Bw(_,M),onWheel:Bw(O,M),onPointerEnter:S?void 0:d,onPointerMove:S?F:u,onPointerUp:S?z:void 0,onPointerDownCapture:S?B:void 0,onClickCapture:S?$:void 0,onPointerLeave:h,ref:M,style:o7,children:[g,m.jsx($1e,{})]})}function _k({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:l}=t.getState(),f=a.get(e);if(!f){l==null||l("012",nc.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function cG({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=Wn(),[l,f]=T.useState(!1),c=T.useRef();return T.useEffect(()=>{c.current=Dhe({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{_k({id:d,store:a,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),T.useEffect(()=>{if(!(t||!e.current||!c.current))return c.current.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{var d;(d=c.current)==null||d.destroy()}},[n,r,t,s,e,i,o]),l}const V1e=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function fG(){const e=Wn();return T.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:l,nodeLookup:f,nodeOrigin:c}=e.getState(),d=new Map,u=V1e(o),h=i?s[0]:5,g=i?s[1]:5,U=n.direction.x*h*n.factor,y=n.direction.y*g*n.factor;for(const[,x]of f){if(!u(x))continue;let w={x:x.internals.positionAbsolute.x+U,y:x.internals.positionAbsolute.y+y};i&&(w=Mb(w,s));const{position:E,positionAbsolute:S}=SW({nodeId:x.id,nextPosition:w,nodeLookup:f,nodeExtent:r,nodeOrigin:c,onError:a});x.position=E,x.internals.positionAbsolute=S,d.set(x.id,x)}l(d)},[])}const UA=T.createContext(null),W1e=UA.Provider;UA.Consumer;const dG=()=>T.useContext(UA),G1e=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),X1e=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:l,isValid:f}=o,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:s===Gm.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&f}};function K1e({type:e="source",position:t=tt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:f,onMouseDown:c,onTouchStart:d,...u},h){var F,z;const g=o||null,U=e==="target",y=Wn(),x=dG(),{connectOnClick:w,noPanClassName:E,rfId:S}=Vt(G1e,Vn),{connectingFrom:M,connectingTo:A,clickConnecting:C,isPossibleEndHandle:I,connectionInProcess:R,clickConnectionInProcess:L,valid:_}=Vt(X1e(x,g,e),Vn);x||(z=(F=y.getState()).onError)==null||z.call(F,"010",nc.error010());const O=H=>{const{defaultEdgeOptions:G,onConnect:V,hasDefaultEdges:Y}=y.getState(),K={...G,...H};if(Y){const{edges:q,setEdges:se}=y.getState();se(yhe(K,q))}V==null||V(K),a==null||a(K)},$=H=>{if(!x)return;const G=RW(H.nativeEvent);if(i&&(G&&H.button===0||!G)){const V=y.getState();Rk.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:U,handleId:g,nodeId:x,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:(...Y)=>{var K,q;return(q=(K=y.getState()).onConnectEnd)==null?void 0:q.call(K,...Y)},updateConnection:V.updateConnection,onConnect:O,isValidConnection:n||((...Y)=>{var K,q;return((q=(K=y.getState()).isValidConnection)==null?void 0:q.call(K,...Y))??!0}),getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}G?c==null||c(H):d==null||d(H)},B=H=>{const{onClickConnectStart:G,onClickConnectEnd:V,connectionClickStartHandle:Y,connectionMode:K,isValidConnection:q,lib:se,rfId:de,nodeLookup:xe,connection:ve}=y.getState();if(!x||!Y&&!i)return;if(!Y){G==null||G(H.nativeEvent,{nodeId:x,handleId:g,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:x,type:e,id:g}});return}const ue=IW(H.target),te=n||q,{connection:le,isValid:he}=Rk.isValid(H.nativeEvent,{handle:{nodeId:x,id:g,type:e},connectionMode:K,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:te,flowId:de,doc:ue,lib:se,nodeLookup:xe});he&&le&&O(le);const we=structuredClone(ve);delete we.inProgress,we.toPosition=we.toHandle?we.toHandle.position:null,V==null||V(H,we),y.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${S}-${x}-${g}-${e}`,className:Dr(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,f,{source:!U,target:U,connectable:r,connectablestart:i,connectableend:s,clickconnecting:C,connectingfrom:M,connectingto:A,valid:_,connectionindicator:r&&(!R||I)&&(R||L?s:i)}]),onMouseDown:$,onTouchStart:$,onClick:w?B:void 0,ref:h,...u,children:l})}const Go=T.memo(aG(K1e));function Y1e({data:e,isConnectable:t,sourcePosition:n=tt.Bottom}){return m.jsxs(m.Fragment,{children:[e==null?void 0:e.label,m.jsx(Go,{type:"source",position:n,isConnectable:t})]})}function Z1e({data:e,isConnectable:t,targetPosition:n=tt.Top,sourcePosition:r=tt.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(Go,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m.jsx(Go,{type:"source",position:r,isConnectable:t})]})}function q1e(){return null}function Q1e({data:e,isConnectable:t,targetPosition:n=tt.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(Go,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const $3={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},oL={input:Y1e,default:Z1e,output:Q1e,group:q1e};function J1e(e){var t,n,r,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const epe=e=>{const{width:t,height:n,x:r,y:i}=Cb(e.nodeLookup,{filter:s=>!!s.selected});return{width:Ha(t)?t:null,height:Ha(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function tpe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Wn(),{width:i,height:s,transformString:o,userSelectionActive:a}=Vt(epe,Vn),l=fG(),f=T.useRef(null);T.useEffect(()=>{var h;n||(h=f.current)==null||h.focus({preventScroll:!0})},[n]);const c=!a&&i!==null&&s!==null;if(cG({nodeRef:f,disabled:!c}),!c)return null;const d=e?h=>{const g=r.getState().nodes.filter(U=>U.selected);e(h,g)}:void 0,u=h=>{Object.prototype.hasOwnProperty.call($3,h.key)&&(h.preventDefault(),l({direction:$3[h.key],factor:h.shiftKey?4:1}))};return m.jsx("div",{className:Dr(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:m.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:u,style:{width:i,height:s}})})}const aL=typeof window<"u"?window:void 0,npe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function uG({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:f,selectionOnDrag:c,selectionMode:d,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:U,zoomActivationKeyCode:y,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:S,panOnScrollSpeed:M,panOnScrollMode:A,zoomOnDoubleClick:C,panOnDrag:I,defaultViewport:R,translateExtent:L,minZoom:_,maxZoom:O,preventScrolling:$,onSelectionContextMenu:B,noWheelClassName:F,noPanClassName:z,disableKeyboardA11y:H,onViewportChange:G,isControlledViewport:V}){const{nodesSelectionActive:Y,userSelectionActive:K}=Vt(npe,Vn),q=g2(f,{target:aL}),se=g2(U,{target:aL}),de=se||I,xe=se||S,ve=c&&de!==!0,ue=q||K||ve;return L1e({deleteKeyCode:l,multiSelectionKeyCode:g}),m.jsx(B1e,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:E,panOnScroll:xe,panOnScrollSpeed:M,panOnScrollMode:A,zoomOnDoubleClick:C,panOnDrag:!q&&de,defaultViewport:R,translateExtent:L,minZoom:_,maxZoom:O,zoomActivationKeyCode:y,preventScrolling:$,noWheelClassName:F,noPanClassName:z,onViewportChange:G,isControlledViewport:V,paneClickDistance:a,selectionOnDrag:ve,children:m.jsxs(H1e,{onSelectionStart:u,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:de,isSelecting:!!ue,selectionMode:d,selectionKeyPressed:q,paneClickDistance:a,selectionOnDrag:ve,children:[e,Y&&m.jsx(tpe,{onSelectionContextMenu:B,noPanClassName:z,disableKeyboardA11y:H})]})})}uG.displayName="FlowRenderer";const rpe=T.memo(uG),ipe=e=>t=>e?fA(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function spe(e){return Vt(T.useCallback(ipe(e),[e]),Vn)}const ope=e=>e.updateNodeInternals;function ape(){const e=Vt(ope),[t]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return T.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function lpe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=Wn(),s=T.useRef(null),o=T.useRef(null),a=T.useRef(e.sourcePosition),l=T.useRef(e.targetPosition),f=T.useRef(t),c=n&&!!e.internals.handleBounds;return T.useEffect(()=>{s.current&&!e.hidden&&(!c||o.current!==s.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(s.current),o.current=s.current)},[c,e.hidden]),T.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),T.useEffect(()=>{if(s.current){const d=f.current!==t,u=a.current!==e.sourcePosition,h=l.current!==e.targetPosition;(d||u||h)&&(f.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function cpe({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:l,nodesConnectable:f,nodesFocusable:c,resizeObserver:d,noDragClassName:u,noPanClassName:h,disableKeyboardA11y:g,rfId:U,nodeTypes:y,nodeClickDistance:x,onError:w}){const{node:E,internals:S,isParent:M}=Vt(te=>{const le=te.nodeLookup.get(e),he=te.parentLookup.has(e);return{node:le,internals:le.internals,isParent:he}},Vn);let A=E.type||"default",C=(y==null?void 0:y[A])||oL[A];C===void 0&&(w==null||w("003",nc.error003(A)),A="default",C=(y==null?void 0:y.default)||oL.default);const I=!!(E.draggable||a&&typeof E.draggable>"u"),R=!!(E.selectable||l&&typeof E.selectable>"u"),L=!!(E.connectable||f&&typeof E.connectable>"u"),_=!!(E.focusable||c&&typeof E.focusable>"u"),O=Wn(),$=AW(E),B=lpe({node:E,nodeType:A,hasDimensions:$,resizeObserver:d}),F=cG({nodeRef:B,disabled:E.hidden||!I,noDragClassName:u,handleSelector:E.dragHandle,nodeId:e,isSelectable:R,nodeClickDistance:x}),z=fG();if(E.hidden)return null;const H=Of(E),G=J1e(E),V=R||I||t||n||r||i,Y=n?te=>n(te,{...S.userNode}):void 0,K=r?te=>r(te,{...S.userNode}):void 0,q=i?te=>i(te,{...S.userNode}):void 0,se=s?te=>s(te,{...S.userNode}):void 0,de=o?te=>o(te,{...S.userNode}):void 0,xe=te=>{const{selectNodesOnDrag:le,nodeDragThreshold:he}=O.getState();R&&(!le||!I||he>0)&&_k({id:e,store:O,nodeRef:B}),t&&t(te,{...S.userNode})},ve=te=>{if(!(NW(te.nativeEvent)||g)){if(yW.includes(te.key)&&R){const le=te.key==="Escape";_k({id:e,store:O,unselect:le,nodeRef:B})}else if(I&&E.selected&&Object.prototype.hasOwnProperty.call($3,te.key)){te.preventDefault();const{ariaLabelConfig:le}=O.getState();O.setState({ariaLiveMessage:le["node.a11yDescription.ariaLiveMessage"]({direction:te.key.replace("Arrow","").toLowerCase(),x:~~S.positionAbsolute.x,y:~~S.positionAbsolute.y})}),z({direction:$3[te.key],factor:te.shiftKey?4:1})}}},ue=()=>{var Ge;if(g||!((Ge=B.current)!=null&&Ge.matches(":focus-visible")))return;const{transform:te,width:le,height:he,autoPanOnNodeFocus:we,setCenter:Se}=O.getState();if(!we)return;fA(new Map([[e,E]]),{x:0,y:0,width:le,height:he},te,!0).length>0||Se(E.position.x+H.width/2,E.position.y+H.height/2,{zoom:te[2]})};return m.jsx("div",{className:Dr(["react-flow__node",`react-flow__node-${A}`,{[h]:I},E.className,{selected:E.selected,selectable:R,parent:M,draggable:I,dragging:F}]),ref:B,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:V?"all":"none",visibility:$?"visible":"hidden",...E.style,...G},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Y,onMouseMove:K,onMouseLeave:q,onContextMenu:se,onClick:xe,onDoubleClick:de,onKeyDown:_?ve:void 0,tabIndex:_?0:void 0,onFocus:_?ue:void 0,role:E.ariaRole??(_?"group":void 0),"aria-roledescription":"node","aria-describedby":g?void 0:`${tG}-${U}`,"aria-label":E.ariaLabel,...E.domAttributes,children:m.jsx(W1e,{value:e,children:m.jsx(C,{id:e,data:E.data,type:A,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:E.selected??!1,selectable:R,draggable:I,deletable:E.deletable??!0,isConnectable:L,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:F,dragHandle:E.dragHandle,zIndex:S.z,parentId:E.parentId,...H})})})}var fpe=T.memo(cpe);const dpe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function hG(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Vt(dpe,Vn),o=spe(e.onlyRenderVisibleElements),a=ape();return m.jsx("div",{className:"react-flow__nodes",style:o7,children:o.map(l=>m.jsx(fpe,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},l))})}hG.displayName="NodeRenderer";const upe=T.memo(hG);function hpe(e){return Vt(T.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&ghe({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Vn)}const ppe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return m.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},mpe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return m.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},lL={[j3.Arrow]:ppe,[j3.ArrowClosed]:mpe};function gpe(e){const t=Wn();return T.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(lL,e)?lL[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",nc.error009(e)),null)},[e])}const bpe=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=gpe(t);return l?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:m.jsx(l,{color:n,strokeWidth:o})}):null},pG=({defaultColor:e,rfId:t})=>{const n=Vt(s=>s.edges),r=Vt(s=>s.defaultEdgeOptions),i=T.useMemo(()=>She(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?m.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:m.jsx("defs",{children:i.map(s=>m.jsx(bpe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};pG.displayName="MarkerDefinitions";var Upe=T.memo(pG);function mG({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:f,...c}){const[d,u]=T.useState({x:1,y:0,width:0,height:0}),h=Dr(["react-flow__edge-textwrapper",f]),g=T.useRef(null);return T.useEffect(()=>{if(g.current){const U=g.current.getBBox();u({x:U.x,y:U.y,width:U.width,height:U.height})}},[n]),n?m.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...c,children:[i&&m.jsx("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),m.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:g,style:r,children:n}),l]}):null}mG.displayName="EdgeText";const ype=T.memo(mG);function a7({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:f=20,...c}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...c,d:e,fill:"none",className:Dr(["react-flow__edge-path",c.className])}),f?m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,r&&Ha(t)&&Ha(n)?m.jsx(ype,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function cL({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===tt.Left||e===tt.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function gG({sourceX:e,sourceY:t,sourcePosition:n=tt.Bottom,targetX:r,targetY:i,targetPosition:s=tt.Top}){const[o,a]=cL({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,f]=cL({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,d,u,h]=_W({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:f});return[`M${e},${t} C${o},${a} ${l},${f} ${r},${i}`,c,d,u,h]}function bG(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:a,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:U,markerStart:y,interactionWidth:x})=>{const[w,E,S]=gG({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),M=e.isInternal?void 0:t;return m.jsx(a7,{id:M,path:w,labelX:E,labelY:S,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:U,markerStart:y,interactionWidth:x})})}const xpe=bG({isInternal:!1}),UG=bG({isInternal:!0});xpe.displayName="SimpleBezierEdge";UG.displayName="SimpleBezierEdgeInternal";function yG(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,sourcePosition:h=tt.Bottom,targetPosition:g=tt.Top,markerEnd:U,markerStart:y,pathOptions:x,interactionWidth:w})=>{const[E,S,M]=Tk({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:s,targetPosition:g,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset,stepPosition:x==null?void 0:x.stepPosition}),A=e.isInternal?void 0:t;return m.jsx(a7,{id:A,path:E,labelX:S,labelY:M,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:U,markerStart:y,interactionWidth:w})})}const xG=yG({isInternal:!1}),vG=yG({isInternal:!0});xG.displayName="SmoothStepEdge";vG.displayName="SmoothStepEdgeInternal";function wG(e){return T.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return m.jsx(xG,{...n,id:r,pathOptions:T.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const vpe=wG({isInternal:!1}),EG=wG({isInternal:!0});vpe.displayName="StepEdge";EG.displayName="StepEdgeInternal";function SG(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:U})=>{const[y,x,w]=LW({sourceX:n,sourceY:r,targetX:i,targetY:s}),E=e.isInternal?void 0:t;return m.jsx(a7,{id:E,path:y,labelX:x,labelY:w,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:h,markerStart:g,interactionWidth:U})})}const wpe=SG({isInternal:!1}),kG=SG({isInternal:!0});wpe.displayName="StraightEdge";kG.displayName="StraightEdgeInternal";function CG(e){return T.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=tt.Bottom,targetPosition:a=tt.Top,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:U,markerStart:y,pathOptions:x,interactionWidth:w})=>{const[E,S,M]=PW({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:x==null?void 0:x.curvature}),A=e.isInternal?void 0:t;return m.jsx(a7,{id:A,path:E,labelX:S,labelY:M,label:l,labelStyle:f,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:g,markerEnd:U,markerStart:y,interactionWidth:w})})}const Epe=CG({isInternal:!1}),MG=CG({isInternal:!0});Epe.displayName="BezierEdge";MG.displayName="BezierEdgeInternal";const fL={default:MG,straight:kG,step:EG,smoothstep:vG,simplebezier:UG},dL={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Spe=(e,t,n)=>n===tt.Left?e-t:n===tt.Right?e+t:e,kpe=(e,t,n)=>n===tt.Top?e-t:n===tt.Bottom?e+t:e,uL="react-flow__edgeupdater";function hL({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return m.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Dr([uL,`${uL}-${a}`]),cx:Spe(t,r,e),cy:kpe(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Cpe({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,onReconnect:f,onReconnectStart:c,onReconnectEnd:d,setReconnecting:u,setUpdateHover:h}){const g=Wn(),U=(S,M)=>{if(S.button!==0)return;const{autoPanOnConnect:A,domNode:C,connectionMode:I,connectionRadius:R,lib:L,onConnectStart:_,cancelConnection:O,nodeLookup:$,rfId:B,panBy:F,updateConnection:z}=g.getState(),H=M.type==="target",G=(K,q)=>{u(!1),d==null||d(K,n,M.type,q)},V=K=>f==null?void 0:f(n,K),Y=(K,q)=>{u(!0),c==null||c(S,n,M.type),_==null||_(K,q)};Rk.onPointerDown(S.nativeEvent,{autoPanOnConnect:A,connectionMode:I,connectionRadius:R,domNode:C,handleId:M.id,nodeId:M.nodeId,nodeLookup:$,isTarget:H,edgeUpdaterType:M.type,lib:L,flowId:B,cancelConnection:O,panBy:F,isValidConnection:(...K)=>{var q,se;return((se=(q=g.getState()).isValidConnection)==null?void 0:se.call(q,...K))??!0},onConnect:V,onConnectStart:Y,onConnectEnd:(...K)=>{var q,se;return(se=(q=g.getState()).onConnectEnd)==null?void 0:se.call(q,...K)},onReconnectEnd:G,updateConnection:z,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,dragThreshold:g.getState().connectionDragThreshold,handleDomNode:S.currentTarget})},y=S=>U(S,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=S=>U(S,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>h(!0),E=()=>h(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(hL,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:y,onMouseEnter:w,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&m.jsx(hL,{position:l,centerX:s,centerY:o,radius:t,onMouseDown:x,onMouseEnter:w,onMouseOut:E,type:"target"})]})}function Mpe({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:f,reconnectRadius:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,rfId:g,edgeTypes:U,noPanClassName:y,onError:x,disableKeyboardA11y:w}){let E=Vt(Se=>Se.edgeLookup.get(e));const S=Vt(Se=>Se.defaultEdgeOptions);E=S?{...S,...E}:E;let M=E.type||"default",A=(U==null?void 0:U[M])||fL[M];A===void 0&&(x==null||x("011",nc.error011(M)),M="default",A=(U==null?void 0:U.default)||fL.default);const C=!!(E.focusable||t&&typeof E.focusable>"u"),I=typeof d<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),R=!!(E.selectable||r&&typeof E.selectable>"u"),L=T.useRef(null),[_,O]=T.useState(!1),[$,B]=T.useState(!1),F=Wn(),{zIndex:z,sourceX:H,sourceY:G,targetX:V,targetY:Y,sourcePosition:K,targetPosition:q}=Vt(T.useCallback(Se=>{const De=Se.nodeLookup.get(E.source),Ge=Se.nodeLookup.get(E.target);if(!De||!Ge)return{zIndex:E.zIndex,...dL};const ht=Ehe({id:e,sourceNode:De,targetNode:Ge,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Se.connectionMode,onError:x});return{zIndex:mhe({selected:E.selected,zIndex:E.zIndex,sourceNode:De,targetNode:Ge,elevateOnSelect:Se.elevateEdgesOnSelect,zIndexMode:Se.zIndexMode}),...ht||dL}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),Vn),se=T.useMemo(()=>E.markerStart?`url('#${Ik(E.markerStart,g)}')`:void 0,[E.markerStart,g]),de=T.useMemo(()=>E.markerEnd?`url('#${Ik(E.markerEnd,g)}')`:void 0,[E.markerEnd,g]);if(E.hidden||H===null||G===null||V===null||Y===null)return null;const xe=Se=>{var st;const{addSelectedEdges:De,unselectNodesAndEdges:Ge,multiSelectionActive:ht}=F.getState();R&&(F.setState({nodesSelectionActive:!1}),E.selected&&ht?(Ge({nodes:[],edges:[E]}),(st=L.current)==null||st.blur()):De([e])),i&&i(Se,E)},ve=s?Se=>{s(Se,{...E})}:void 0,ue=o?Se=>{o(Se,{...E})}:void 0,te=a?Se=>{a(Se,{...E})}:void 0,le=l?Se=>{l(Se,{...E})}:void 0,he=f?Se=>{f(Se,{...E})}:void 0,we=Se=>{var De;if(!w&&yW.includes(Se.key)&&R){const{unselectNodesAndEdges:Ge,addSelectedEdges:ht}=F.getState();Se.key==="Escape"?((De=L.current)==null||De.blur(),Ge({edges:[E]})):ht([e])}};return m.jsx("svg",{style:{zIndex:z},children:m.jsxs("g",{className:Dr(["react-flow__edge",`react-flow__edge-${M}`,E.className,y,{selected:E.selected,animated:E.animated,inactive:!R&&!i,updating:_,selectable:R}]),onClick:xe,onDoubleClick:ve,onContextMenu:ue,onMouseEnter:te,onMouseMove:le,onMouseLeave:he,onKeyDown:C?we:void 0,tabIndex:C?0:void 0,role:E.ariaRole??(C?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":C?`${nG}-${g}`:void 0,ref:L,...E.domAttributes,children:[!$&&m.jsx(A,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:R,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:H,sourceY:G,targetX:V,targetY:Y,sourcePosition:K,targetPosition:q,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:se,markerEnd:de,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),I&&m.jsx(Cpe,{edge:E,isReconnectable:I,reconnectRadius:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,sourceX:H,sourceY:G,targetX:V,targetY:Y,sourcePosition:K,targetPosition:q,setUpdateHover:O,setReconnecting:B})]})})}var Ape=T.memo(Mpe);const Tpe=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function AG({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:f,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:U}){const{edgesFocusable:y,edgesReconnectable:x,elementsSelectable:w,onError:E}=Vt(Tpe,Vn),S=hpe(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(Upe,{defaultColor:e,rfId:n}),S.map(M=>m.jsx(Ape,{id:M,edgesFocusable:y,edgesReconnectable:x,elementsSelectable:w,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:f,onClick:c,reconnectRadius:d,onDoubleClick:u,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:U},M))]})}AG.displayName="EdgeRenderer";const Ipe=T.memo(AG),Npe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Rpe({children:e}){const t=Vt(Npe);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function _pe(e){const t=s7(),n=T.useRef(!1);T.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Ppe=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Dpe(e){const t=Vt(Ppe),n=Wn();return T.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Lpe(e){return e.connection.inProgress?{...e.connection,to:Ab(e.connection.to,e.transform)}:{...e.connection}}function Ope(e){return Lpe}function jpe(e){const t=Ope();return Vt(t,Vn)}const Bpe=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Fpe({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:l}=Vt(Bpe,Vn);return!(s&&i&&l)?null:m.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:Dr(["react-flow__connection",wW(a)]),children:m.jsx(TG,{style:t,type:n,CustomComponent:r,isValid:a})})})}const TG=({style:e,type:t=Dd.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:l,to:f,toNode:c,toHandle:d,toPosition:u,pointer:h}=jpe();if(!i)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:l,toPosition:u,connectionStatus:wW(r),toNode:c,toHandle:d,pointer:h});let g="";const U={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:f.x,targetY:f.y,targetPosition:u};switch(t){case Dd.Bezier:[g]=PW(U);break;case Dd.SimpleBezier:[g]=gG(U);break;case Dd.Step:[g]=Tk({...U,borderRadius:0});break;case Dd.SmoothStep:[g]=Tk(U);break;default:[g]=LW(U)}return m.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};TG.displayName="ConnectionLine";const $pe={};function pL(e=$pe){T.useRef(e),Wn(),T.useEffect(()=>{},[e])}function zpe(){Wn(),T.useRef(!1),T.useEffect(()=>{},[])}function IG({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:u,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:U,connectionLineComponent:y,connectionLineContainerStyle:x,selectionKeyCode:w,selectionOnDrag:E,selectionMode:S,multiSelectionKeyCode:M,panActivationKeyCode:A,zoomActivationKeyCode:C,deleteKeyCode:I,onlyRenderVisibleElements:R,elementsSelectable:L,defaultViewport:_,translateExtent:O,minZoom:$,maxZoom:B,preventScrolling:F,defaultMarkerColor:z,zoomOnScroll:H,zoomOnPinch:G,panOnScroll:V,panOnScrollSpeed:Y,panOnScrollMode:K,zoomOnDoubleClick:q,panOnDrag:se,onPaneClick:de,onPaneMouseEnter:xe,onPaneMouseMove:ve,onPaneMouseLeave:ue,onPaneScroll:te,onPaneContextMenu:le,paneClickDistance:he,nodeClickDistance:we,onEdgeContextMenu:Se,onEdgeMouseEnter:De,onEdgeMouseMove:Ge,onEdgeMouseLeave:ht,reconnectRadius:st,onReconnect:jt,onReconnectStart:En,onReconnectEnd:cn,noDragClassName:hi,noWheelClassName:Mi,noPanClassName:qi,disableKeyboardA11y:Xs,nodeExtent:Ks,rfId:Qi,viewport:sr,onViewportChange:yn}){return pL(e),pL(t),zpe(),_pe(n),Dpe(sr),m.jsx(rpe,{onPaneClick:de,onPaneMouseEnter:xe,onPaneMouseMove:ve,onPaneMouseLeave:ue,onPaneContextMenu:le,onPaneScroll:te,paneClickDistance:he,deleteKeyCode:I,selectionKeyCode:w,selectionOnDrag:E,selectionMode:S,onSelectionStart:u,onSelectionEnd:h,multiSelectionKeyCode:M,panActivationKeyCode:A,zoomActivationKeyCode:C,elementsSelectable:L,zoomOnScroll:H,zoomOnPinch:G,zoomOnDoubleClick:q,panOnScroll:V,panOnScrollSpeed:Y,panOnScrollMode:K,panOnDrag:se,defaultViewport:_,translateExtent:O,minZoom:$,maxZoom:B,onSelectionContextMenu:d,preventScrolling:F,noDragClassName:hi,noWheelClassName:Mi,noPanClassName:qi,disableKeyboardA11y:Xs,onViewportChange:yn,isControlledViewport:!!sr,children:m.jsxs(Rpe,{children:[m.jsx(Ipe,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:jt,onReconnectStart:En,onReconnectEnd:cn,onlyRenderVisibleElements:R,onEdgeContextMenu:Se,onEdgeMouseEnter:De,onEdgeMouseMove:Ge,onEdgeMouseLeave:ht,reconnectRadius:st,defaultMarkerColor:z,noPanClassName:qi,disableKeyboardA11y:Xs,rfId:Qi}),m.jsx(Fpe,{style:U,type:g,component:y,containerStyle:x}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(upe,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:f,onNodeContextMenu:c,nodeClickDistance:we,onlyRenderVisibleElements:R,noPanClassName:qi,noDragClassName:hi,disableKeyboardA11y:Xs,nodeExtent:Ks,rfId:Qi}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}IG.displayName="GraphView";const Hpe=T.memo(IG),mL=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l=.5,maxZoom:f=2,nodeOrigin:c,nodeExtent:d,zIndexMode:u="basic"}={})=>{const h=new Map,g=new Map,U=new Map,y=new Map,x=r??t??[],w=n??e??[],E=c??[0,0],S=d??u2;BW(U,y,x);const M=Nk(w,h,g,{nodeOrigin:E,nodeExtent:S,zIndexMode:u});let A=[0,0,1];if(o&&i&&s){const C=Cb(h,{filter:_=>!!((_.width||_.initialWidth)&&(_.height||_.initialHeight))}),{x:I,y:R,zoom:L}=dA(C,i,s,l,f,(a==null?void 0:a.padding)??.1);A=[I,R,L]}return{rfId:"1",width:i??0,height:s??0,transform:A,nodes:w,nodesInitialized:M,nodeLookup:h,parentLookup:g,edges:x,edgeLookup:y,connectionLookup:U,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:l,maxZoom:f,translateExtent:u2,nodeExtent:S,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Gm.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:a,fitViewResolver:null,connection:{...vW},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:che,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:xW,zIndexMode:u,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},Vpe=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:f,nodeOrigin:c,nodeExtent:d,zIndexMode:u})=>l1e((h,g)=>{async function U(){const{nodeLookup:y,panZoom:x,fitViewOptions:w,fitViewResolver:E,width:S,height:M,minZoom:A,maxZoom:C}=g();x&&(await ahe({nodes:y,width:S,height:M,panZoom:x,minZoom:A,maxZoom:C},w),E==null||E.resolve(!0),h({fitViewResolver:null}))}return{...mL({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:a,minZoom:l,maxZoom:f,nodeOrigin:c,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:u}),setNodes:y=>{const{nodeLookup:x,parentLookup:w,nodeOrigin:E,elevateNodesOnSelect:S,fitViewQueued:M,zIndexMode:A}=g(),C=Nk(y,x,w,{nodeOrigin:E,nodeExtent:d,elevateNodesOnSelect:S,checkEquality:!0,zIndexMode:A});M&&C?(U(),h({nodes:y,nodesInitialized:C,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:y,nodesInitialized:C})},setEdges:y=>{const{connectionLookup:x,edgeLookup:w}=g();BW(x,w,y),h({edges:y})},setDefaultNodesAndEdges:(y,x)=>{if(y){const{setNodes:w}=g();w(y),h({hasDefaultNodes:!0})}if(x){const{setEdges:w}=g();w(x),h({hasDefaultEdges:!0})}},updateNodeInternals:y=>{const{triggerNodeChanges:x,nodeLookup:w,parentLookup:E,domNode:S,nodeOrigin:M,nodeExtent:A,debug:C,fitViewQueued:I,zIndexMode:R}=g(),{changes:L,updatedInternals:_}=Nhe(y,w,E,S,M,A,R);_&&(Mhe(w,E,{nodeOrigin:M,nodeExtent:A,zIndexMode:R}),I?(U(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(L==null?void 0:L.length)>0&&(C&&console.log("React Flow: trigger node changes",L),x==null||x(L)))},updateNodePositions:(y,x=!1)=>{const w=[];let E=[];const{nodeLookup:S,triggerNodeChanges:M,connection:A,updateConnection:C,onNodesChangeMiddlewareMap:I}=g();for(const[R,L]of y){const _=S.get(R),O=!!(_!=null&&_.expandParent&&(_!=null&&_.parentId)&&(L!=null&&L.position)),$={id:R,type:"position",position:O?{x:Math.max(0,L.position.x),y:Math.max(0,L.position.y)}:L.position,dragging:x};if(_&&A.inProgress&&A.fromNode.id===_.id){const B=Dh(_,A.fromHandle,tt.Left,!0);C({...A,from:B})}O&&_.parentId&&w.push({id:R,parentId:_.parentId,rect:{...L.internals.positionAbsolute,width:L.measured.width??0,height:L.measured.height??0}}),E.push($)}if(w.length>0){const{parentLookup:R,nodeOrigin:L}=g(),_=bA(w,S,R,L);E.push(..._)}for(const R of I.values())E=R(E);M(E)},triggerNodeChanges:y=>{const{onNodesChange:x,setNodes:w,nodes:E,hasDefaultNodes:S,debug:M}=g();if(y!=null&&y.length){if(S){const A=sG(y,E);w(A)}M&&console.log("React Flow: trigger node changes",y),x==null||x(y)}},triggerEdgeChanges:y=>{const{onEdgesChange:x,setEdges:w,edges:E,hasDefaultEdges:S,debug:M}=g();if(y!=null&&y.length){if(S){const A=oG(y,E);w(A)}M&&console.log("React Flow: trigger edge changes",y),x==null||x(y)}},addSelectedNodes:y=>{const{multiSelectionActive:x,edgeLookup:w,nodeLookup:E,triggerNodeChanges:S,triggerEdgeChanges:M}=g();if(x){const A=y.map(C=>pu(C,!0));S(A);return}S(yp(E,new Set([...y]),!0)),M(yp(w))},addSelectedEdges:y=>{const{multiSelectionActive:x,edgeLookup:w,nodeLookup:E,triggerNodeChanges:S,triggerEdgeChanges:M}=g();if(x){const A=y.map(C=>pu(C,!0));M(A);return}M(yp(w,new Set([...y]))),S(yp(E,new Set,!0))},unselectNodesAndEdges:({nodes:y,edges:x}={})=>{const{edges:w,nodes:E,nodeLookup:S,triggerNodeChanges:M,triggerEdgeChanges:A}=g(),C=y||E,I=x||w,R=[];for(const _ of C){if(!_.selected)continue;const O=S.get(_.id);O&&(O.selected=!1),R.push(pu(_.id,!1))}const L=[];for(const _ of I)_.selected&&L.push(pu(_.id,!1));M(R),A(L)},setMinZoom:y=>{const{panZoom:x,maxZoom:w}=g();x==null||x.setScaleExtent([y,w]),h({minZoom:y})},setMaxZoom:y=>{const{panZoom:x,minZoom:w}=g();x==null||x.setScaleExtent([w,y]),h({maxZoom:y})},setTranslateExtent:y=>{var x;(x=g().panZoom)==null||x.setTranslateExtent(y),h({translateExtent:y})},resetSelectedElements:()=>{const{edges:y,nodes:x,triggerNodeChanges:w,triggerEdgeChanges:E,elementsSelectable:S}=g();if(!S)return;const M=x.reduce((C,I)=>I.selected?[...C,pu(I.id,!1)]:C,[]),A=y.reduce((C,I)=>I.selected?[...C,pu(I.id,!1)]:C,[]);w(M),E(A)},setNodeExtent:y=>{const{nodes:x,nodeLookup:w,parentLookup:E,nodeOrigin:S,elevateNodesOnSelect:M,nodeExtent:A,zIndexMode:C}=g();y[0][0]===A[0][0]&&y[0][1]===A[0][1]&&y[1][0]===A[1][0]&&y[1][1]===A[1][1]||(Nk(x,w,E,{nodeOrigin:S,nodeExtent:y,elevateNodesOnSelect:M,checkEquality:!1,zIndexMode:C}),h({nodeExtent:y}))},panBy:y=>{const{transform:x,width:w,height:E,panZoom:S,translateExtent:M}=g();return Rhe({delta:y,panZoom:S,transform:x,translateExtent:M,width:w,height:E})},setCenter:async(y,x,w)=>{const{width:E,height:S,maxZoom:M,panZoom:A}=g();if(!A)return Promise.resolve(!1);const C=typeof(w==null?void 0:w.zoom)<"u"?w.zoom:M;return await A.setViewport({x:E/2-y*C,y:S/2-x*C,zoom:C},{duration:w==null?void 0:w.duration,ease:w==null?void 0:w.ease,interpolate:w==null?void 0:w.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...vW}})},updateConnection:y=>{h({connection:y})},reset:()=>h({...mL()})}},Object.is);function NG({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:a,initialFitViewOptions:l,fitView:f,nodeOrigin:c,nodeExtent:d,zIndexMode:u,children:h}){const[g]=T.useState(()=>Vpe({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:f,minZoom:o,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:d,zIndexMode:u}));return m.jsx(c1e,{value:g,children:m.jsx(R1e,{children:h})})}function Wpe({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,fitViewOptions:l,minZoom:f,maxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h}){return T.useContext(r7)?m.jsx(m.Fragment,{children:e}):m.jsx(NG,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,initialFitViewOptions:l,initialMinZoom:f,initialMaxZoom:c,nodeOrigin:d,nodeExtent:u,zIndexMode:h,children:e})}const Gpe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Xpe({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:l,onInit:f,onMove:c,onMoveStart:d,onMoveEnd:u,onConnect:h,onConnectStart:g,onConnectEnd:U,onClickConnectStart:y,onClickConnectEnd:x,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:S,onNodeContextMenu:M,onNodeDoubleClick:A,onNodeDragStart:C,onNodeDrag:I,onNodeDragStop:R,onNodesDelete:L,onEdgesDelete:_,onDelete:O,onSelectionChange:$,onSelectionDragStart:B,onSelectionDrag:F,onSelectionDragStop:z,onSelectionContextMenu:H,onSelectionStart:G,onSelectionEnd:V,onBeforeDelete:Y,connectionMode:K,connectionLineType:q=Dd.Bezier,connectionLineStyle:se,connectionLineComponent:de,connectionLineContainerStyle:xe,deleteKeyCode:ve="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:te=!1,selectionMode:le=h2.Full,panActivationKeyCode:he="Space",multiSelectionKeyCode:we=m2()?"Meta":"Control",zoomActivationKeyCode:Se=m2()?"Meta":"Control",snapToGrid:De,snapGrid:Ge,onlyRenderVisibleElements:ht=!1,selectNodesOnDrag:st,nodesDraggable:jt,autoPanOnNodeFocus:En,nodesConnectable:cn,nodesFocusable:hi,nodeOrigin:Mi=rG,edgesFocusable:qi,edgesReconnectable:Xs,elementsSelectable:Ks=!0,defaultViewport:Qi=w1e,minZoom:sr=.5,maxZoom:yn=2,translateExtent:un=u2,preventScrolling:Xr=!0,nodeExtent:kr,defaultMarkerColor:Ai="#b1b1b7",zoomOnScroll:Vf=!0,zoomOnPinch:ua=!0,panOnScroll:ha=!1,panOnScrollSpeed:yc=.5,panOnScrollMode:pa=ph.Free,zoomOnDoubleClick:wo=!0,panOnDrag:hl=!0,onPaneClick:Eo,onPaneMouseEnter:ma,onPaneMouseMove:ga,onPaneMouseLeave:Me,onPaneScroll:ot,onPaneContextMenu:Be,paneClickDistance:Wt=1,nodeClickDistance:or=0,children:kt,onReconnect:Tn,onReconnectStart:Ys,onReconnectEnd:Kr,onEdgeContextMenu:xc,onEdgeDoubleClick:So,onEdgeMouseEnter:Wf,onEdgeMouseMove:Zs,onEdgeMouseLeave:qs,reconnectRadius:ko=10,onNodesChange:Gn,onEdgesChange:Dn,noDragClassName:pi="nodrag",noWheelClassName:Lr="nowheel",noPanClassName:ys="nopan",fitView:H0,fitViewOptions:V0,connectOnClick:Ux,attributionPosition:n8,proOptions:r8,defaultEdgeOptions:i8,elevateNodesOnSelect:s8=!0,elevateEdgesOnSelect:yx=!1,disableKeyboardA11y:o8=!1,autoPanOnConnect:Xn,autoPanOnNodeDrag:xx,autoPanSpeed:j6,connectionRadius:a8,isValidConnection:u1,onError:vx,style:l8,id:W0,nodeDragThreshold:Co,connectionDragThreshold:wx,viewport:Qs,onViewportChange:Ex,width:Sx,height:kx,colorMode:h1="light",debug:p1,onScroll:pl,ariaLabelConfig:m1,zIndexMode:c8="basic",...Cx},B6){const g1=W0||"1",F6=C1e(h1),G0=T.useCallback(f8=>{f8.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),pl==null||pl(f8)},[pl]);return m.jsx("div",{"data-testid":"rf__wrapper",...Cx,onScroll:G0,style:{...l8,...Gpe},ref:B6,className:Dr(["react-flow",i,F6]),id:W0,role:"application",children:m.jsxs(Wpe,{nodes:e,edges:t,width:Sx,height:kx,fitView:H0,fitViewOptions:V0,minZoom:sr,maxZoom:yn,nodeOrigin:Mi,nodeExtent:kr,zIndexMode:c8,children:[m.jsx(Hpe,{onInit:f,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:S,onNodeContextMenu:M,onNodeDoubleClick:A,nodeTypes:s,edgeTypes:o,connectionLineType:q,connectionLineStyle:se,connectionLineComponent:de,connectionLineContainerStyle:xe,selectionKeyCode:ue,selectionOnDrag:te,selectionMode:le,deleteKeyCode:ve,multiSelectionKeyCode:we,panActivationKeyCode:he,zoomActivationKeyCode:Se,onlyRenderVisibleElements:ht,defaultViewport:Qi,translateExtent:un,minZoom:sr,maxZoom:yn,preventScrolling:Xr,zoomOnScroll:Vf,zoomOnPinch:ua,zoomOnDoubleClick:wo,panOnScroll:ha,panOnScrollSpeed:yc,panOnScrollMode:pa,panOnDrag:hl,onPaneClick:Eo,onPaneMouseEnter:ma,onPaneMouseMove:ga,onPaneMouseLeave:Me,onPaneScroll:ot,onPaneContextMenu:Be,paneClickDistance:Wt,nodeClickDistance:or,onSelectionContextMenu:H,onSelectionStart:G,onSelectionEnd:V,onReconnect:Tn,onReconnectStart:Ys,onReconnectEnd:Kr,onEdgeContextMenu:xc,onEdgeDoubleClick:So,onEdgeMouseEnter:Wf,onEdgeMouseMove:Zs,onEdgeMouseLeave:qs,reconnectRadius:ko,defaultMarkerColor:Ai,noDragClassName:pi,noWheelClassName:Lr,noPanClassName:ys,rfId:g1,disableKeyboardA11y:o8,nodeExtent:kr,viewport:Qs,onViewportChange:Ex}),m.jsx(k1e,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:U,onClickConnectStart:y,onClickConnectEnd:x,nodesDraggable:jt,autoPanOnNodeFocus:En,nodesConnectable:cn,nodesFocusable:hi,edgesFocusable:qi,edgesReconnectable:Xs,elementsSelectable:Ks,elevateNodesOnSelect:s8,elevateEdgesOnSelect:yx,minZoom:sr,maxZoom:yn,nodeExtent:kr,onNodesChange:Gn,onEdgesChange:Dn,snapToGrid:De,snapGrid:Ge,connectionMode:K,translateExtent:un,connectOnClick:Ux,defaultEdgeOptions:i8,fitView:H0,fitViewOptions:V0,onNodesDelete:L,onEdgesDelete:_,onDelete:O,onNodeDragStart:C,onNodeDrag:I,onNodeDragStop:R,onSelectionDrag:F,onSelectionDragStart:B,onSelectionDragStop:z,onMove:c,onMoveStart:d,onMoveEnd:u,noPanClassName:ys,nodeOrigin:Mi,rfId:g1,autoPanOnConnect:Xn,autoPanOnNodeDrag:xx,autoPanSpeed:j6,onError:vx,connectionRadius:a8,isValidConnection:u1,selectNodesOnDrag:st,nodeDragThreshold:Co,connectionDragThreshold:wx,onBeforeDelete:Y,debug:p1,ariaLabelConfig:m1,zIndexMode:c8}),m.jsx(v1e,{onSelectionChange:$}),kt,m.jsx(g1e,{proOptions:r8,position:n8}),m.jsx(m1e,{rfId:g1,disableKeyboardA11y:o8})]})})}var Kpe=aG(Xpe);function Ype(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(s=>sG(i,s)),[]);return[t,n,r]}function Zpe(e){const[t,n]=T.useState(e),r=T.useCallback(i=>n(s=>oG(i,s)),[]);return[t,n,r]}function qpe({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Dr(["react-flow__background-pattern",n,r])})}function Qpe({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:Dr(["react-flow__background-pattern","dots",t])})}var u0;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(u0||(u0={}));const Jpe={[u0.Dots]:1,[u0.Lines]:1,[u0.Cross]:6},eme=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function RG({id:e,variant:t=u0.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:l,className:f,patternClassName:c}){const d=T.useRef(null),{transform:u,patternId:h}=Vt(eme,Vn),g=r||Jpe[t],U=t===u0.Dots,y=t===u0.Cross,x=Array.isArray(n)?n:[n,n],w=[x[0]*u[2]||1,x[1]*u[2]||1],E=g*u[2],S=Array.isArray(s)?s:[s,s],M=y?[E,E]:w,A=[S[0]*u[2]||1+M[0]/2,S[1]*u[2]||1+M[1]/2],C=`${h}${e||""}`;return m.jsxs("svg",{className:Dr(["react-flow__background",f]),style:{...l,...o7,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:d,"data-testid":"rf__background",children:[m.jsx("pattern",{id:C,x:u[0]%w[0],y:u[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${A[0]},-${A[1]})`,children:U?m.jsx(Qpe,{radius:E/2,className:c}):m.jsx(qpe,{dimensions:M,lineWidth:i,variant:t,className:c})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}RG.displayName="Background";const tme=T.memo(RG);function nme(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function rme(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ime(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sme(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ome(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function IU({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:Dr(["react-flow__controls-button",t]),...n,children:e})}const ame=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function _G({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:f,children:c,position:d="bottom-left",orientation:u="vertical","aria-label":h}){const g=Wn(),{isInteractive:U,minZoomReached:y,maxZoomReached:x,ariaLabelConfig:w}=Vt(ame,Vn),{zoomIn:E,zoomOut:S,fitView:M}=s7(),A=()=>{E(),s==null||s()},C=()=>{S(),o==null||o()},I=()=>{M(i),a==null||a()},R=()=>{g.setState({nodesDraggable:!U,nodesConnectable:!U,elementsSelectable:!U}),l==null||l(!U)},L=u==="horizontal"?"horizontal":"vertical";return m.jsxs(i7,{className:Dr(["react-flow__controls",L,f]),position:d,style:e,"data-testid":"rf__controls","aria-label":h??w["controls.ariaLabel"],children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(IU,{onClick:A,className:"react-flow__controls-zoomin",title:w["controls.zoomIn.ariaLabel"],"aria-label":w["controls.zoomIn.ariaLabel"],disabled:x,children:m.jsx(nme,{})}),m.jsx(IU,{onClick:C,className:"react-flow__controls-zoomout",title:w["controls.zoomOut.ariaLabel"],"aria-label":w["controls.zoomOut.ariaLabel"],disabled:y,children:m.jsx(rme,{})})]}),n&&m.jsx(IU,{className:"react-flow__controls-fitview",onClick:I,title:w["controls.fitView.ariaLabel"],"aria-label":w["controls.fitView.ariaLabel"],children:m.jsx(ime,{})}),r&&m.jsx(IU,{className:"react-flow__controls-interactive",onClick:R,title:w["controls.interactive.ariaLabel"],"aria-label":w["controls.interactive.ariaLabel"],children:U?m.jsx(ome,{}):m.jsx(sme,{})}),c]})}_G.displayName="Controls";T.memo(_G);function lme({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:f,borderRadius:c,shapeRendering:d,selected:u,onClick:h}){const{background:g,backgroundColor:U}=s||{},y=o||g||U;return m.jsx("rect",{className:Dr(["react-flow__minimap-node",{selected:u},f]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:y,stroke:a,strokeWidth:l},shapeRendering:d,onClick:h?x=>h(x,e):void 0})}const cme=T.memo(lme),fme=e=>e.nodes.map(t=>t.id),Fw=e=>e instanceof Function?e:()=>e;function dme({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=cme,onClick:o}){const a=Vt(fme,Vn),l=Fw(t),f=Fw(e),c=Fw(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:a.map(u=>m.jsx(hme,{id:u,nodeColorFunc:l,nodeStrokeColorFunc:f,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:d},u))})}function ume({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:l}){const{node:f,x:c,y:d,width:u,height:h}=Vt(g=>{const U=g.nodeLookup.get(e);if(!U)return{node:void 0,x:0,y:0,width:0,height:0};const y=U.internals.userNode,{x,y:w}=U.internals.positionAbsolute,{width:E,height:S}=Of(y);return{node:y,x,y:w,width:E,height:S}},Vn);return!f||f.hidden||!AW(f)?null:m.jsx(a,{x:c,y:d,width:u,height:h,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:l,id:f.id})}const hme=T.memo(ume);var pme=T.memo(dme);const mme=200,gme=150,bme=e=>!e.hidden,Ume=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?MW(Cb(e.nodeLookup,{filter:bme}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},yme="react-flow__minimap-desc";function PG({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:l,maskColor:f,maskStrokeColor:c,maskStrokeWidth:d,position:u="bottom-right",onClick:h,onNodeClick:g,pannable:U=!1,zoomable:y=!1,ariaLabel:x,inversePan:w,zoomStep:E=1,offsetScale:S=5}){const M=Wn(),A=T.useRef(null),{boundingRect:C,viewBB:I,rfId:R,panZoom:L,translateExtent:_,flowWidth:O,flowHeight:$,ariaLabelConfig:B}=Vt(Ume,Vn),F=(e==null?void 0:e.width)??mme,z=(e==null?void 0:e.height)??gme,H=C.width/F,G=C.height/z,V=Math.max(H,G),Y=V*F,K=V*z,q=S*V,se=C.x-(Y-C.width)/2-q,de=C.y-(K-C.height)/2-q,xe=Y+q*2,ve=K+q*2,ue=`${yme}-${R}`,te=T.useRef(0),le=T.useRef();te.current=V,T.useEffect(()=>{if(A.current&&L)return le.current=$he({domNode:A.current,panZoom:L,getTransform:()=>M.getState().transform,getViewScale:()=>te.current}),()=>{var De;(De=le.current)==null||De.destroy()}},[L]),T.useEffect(()=>{var De;(De=le.current)==null||De.update({translateExtent:_,width:O,height:$,inversePan:w,pannable:U,zoomStep:E,zoomable:y})},[U,y,w,E,_,O,$]);const he=h?De=>{var st;const[Ge,ht]=((st=le.current)==null?void 0:st.pointer(De))||[0,0];h(De,{x:Ge,y:ht})}:void 0,we=g?T.useCallback((De,Ge)=>{const ht=M.getState().nodeLookup.get(Ge).internals.userNode;g(De,ht)},[]):void 0,Se=x??B["minimap.ariaLabel"];return m.jsx(i7,{position:u,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*V:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Dr(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:F,height:z,viewBox:`${se} ${de} ${xe} ${ve}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:A,onClick:he,children:[Se&&m.jsx("title",{id:ue,children:Se}),m.jsx(pme,{onClick:we,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${se-q},${de-q}h${xe+q*2}v${ve+q*2}h${-xe-q*2}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}PG.displayName="MiniMap";T.memo(PG);const xme=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,vme={[Zm.Line]:"right",[Zm.Handle]:"bottom-right"};function wme({nodeId:e,position:t,variant:n=Zm.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:f=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,resizeDirection:u,autoScale:h=!0,shouldResize:g,onResizeStart:U,onResize:y,onResizeEnd:x}){const w=dG(),E=typeof e=="string"?e:w,S=Wn(),M=T.useRef(null),A=n===Zm.Handle,C=Vt(T.useCallback(xme(A&&h),[A,h]),Vn),I=T.useRef(null),R=t??vme[n];T.useEffect(()=>{if(!(!M.current||!E))return I.current||(I.current=t1e({domNode:M.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:_,transform:O,snapGrid:$,snapToGrid:B,nodeOrigin:F,domNode:z}=S.getState();return{nodeLookup:_,transform:O,snapGrid:$,snapToGrid:B,nodeOrigin:F,paneDomNode:z}},onChange:(_,O)=>{const{triggerNodeChanges:$,nodeLookup:B,parentLookup:F,nodeOrigin:z}=S.getState(),H=[],G={x:_.x,y:_.y},V=B.get(E);if(V&&V.expandParent&&V.parentId){const Y=V.origin??z,K=_.width??V.measured.width??0,q=_.height??V.measured.height??0,se={id:V.id,parentId:V.parentId,rect:{width:K,height:q,...TW({x:_.x??V.position.x,y:_.y??V.position.y},{width:K,height:q},V.parentId,B,Y)}},de=bA([se],B,F,z);H.push(...de),G.x=_.x?Math.max(Y[0]*K,_.x):void 0,G.y=_.y?Math.max(Y[1]*q,_.y):void 0}if(G.x!==void 0&&G.y!==void 0){const Y={id:E,type:"position",position:{...G}};H.push(Y)}if(_.width!==void 0&&_.height!==void 0){const K={id:E,type:"dimensions",resizing:!0,setAttributes:u?u==="horizontal"?"width":"height":!0,dimensions:{width:_.width,height:_.height}};H.push(K)}for(const Y of O){const K={...Y,type:"position"};H.push(K)}$(H)},onEnd:({width:_,height:O})=>{const $={id:E,type:"dimensions",resizing:!1,dimensions:{width:_,height:O}};S.getState().triggerNodeChanges([$])}})),I.current.update({controlPosition:R,boundaries:{minWidth:a,minHeight:l,maxWidth:f,maxHeight:c},keepAspectRatio:d,resizeDirection:u,onResizeStart:U,onResize:y,onResizeEnd:x,shouldResize:g}),()=>{var _;(_=I.current)==null||_.destroy()}},[R,a,l,f,c,d,U,y,x,g]);const L=R.split("-");return m.jsx("div",{className:Dr(["react-flow__resize-control","nodrag",...L,n,r]),ref:M,style:{...i,scale:C,...o&&{[A?"backgroundColor":"borderColor"]:o}},children:s})}T.memo(wme);const Qr="/api",Bi={async getThreads(){const e=await fetch(`${Qr}/threads`);if(!e.ok)throw new Error("Failed to fetch threads");return e.json()},async createThread({title:e,description:t,content:n,metadata:r}){const i=await fetch(`${Qr}/threads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:t,content:n,metadata:r})});if(!i.ok)throw new Error("Failed to create thread");return i.json()},async searchThreads(e){const t=await fetch(`${Qr}/threads/search?query=${encodeURIComponent(e)}`);if(!t.ok)throw new Error("Failed to search threads");return t.json()},async generateThread(e){const t=await fetch(`${Qr}/threads/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:e})});if(!t.ok)throw new Error("Failed to generate thread");return t.json()},async getThreadNodes(e){const t=await fetch(`${Qr}/threads/${e}/nodes`);if(!t.ok)throw new Error("Failed to fetch nodes");return t.json()},async createNode({threadId:e,title:t,content:n,nodeType:r,parentId:i,metadata:s}){console.log("API createNode request:",{threadId:e,title:t,content:n,nodeType:r,parentId:i,metadata:s});const o=await fetch(`${Qr}/threads/${e}/nodes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,content:n,nodeType:r,parentId:i,metadata:s})});if(!o.ok)throw new Error("Failed to create node");const a=await o.json();return console.log("API createNode response:",a),a},async createEdge({sourceId:e,targetId:t,relationshipType:n,metadata:r}){const i=await fetch(`${Qr}/edges`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceId:e,targetId:t,relationshipType:n,metadata:r})});if(!i.ok)throw new Error("Failed to create edge");return i.json()},async saveThreadLayout(e,t){const n=await fetch(`${Qr}/threads/${e}/layout`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout:t})});if(!n.ok)throw new Error("Failed to save thread layout");return n.json()},async loadThreadLayout(e){const t=await fetch(`${Qr}/threads/${e}/layout`);if(!t.ok)throw new Error("Failed to load thread layout");return t.json()},async deleteThreadLayout(e){const t=await fetch(`${Qr}/threads/${e}/layout`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete thread layout");return t.json()},async saveThreadCanvas(e,t){const n=await fetch(`${Qr}/threads/${e}/canvas`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({canvas:t})});if(!n.ok)throw new Error(`Failed to save thread canvas: ${n.status}`);return n.json()},async loadThreadCanvas(e){const t=await fetch(`${Qr}/threads/${e}/canvas`);return t.ok?t.json():null},async deleteThreadCanvas(e){const t=await fetch(`${Qr}/threads/${e}/canvas`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete thread canvas");return t.json()},async updateThreadContent(e,t){const n=await fetch(`${Qr}/threads/${e}/content`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})});if(!n.ok)throw new Error("Failed to update thread content");return n.json()},async saveArticleSequence(e,t){const n=await fetch(`${Qr}/threads/${e}/sequence`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sequence:t})});if(!n.ok)throw new Error("Failed to save article sequence");return n.json()},async loadArticleSequence(e){const t=await fetch(`${Qr}/threads/${e}/sequence`);return t.ok?t.json():null},async deleteArticleSequence(e){const t=await fetch(`${Qr}/threads/${e}/sequence`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete article sequence");return t.json()},async generateNodeSuggestions({nodeId:e,nodeType:t,content:n,title:r}){const i=await fetch(`${Qr}/nodes/suggest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nodeId:e,nodeType:t,content:n,title:r})});if(!i.ok)throw new Error("Failed to generate suggestions");return i.json()}},ou=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],kg={ROOT:"#ffd700",EVIDENCE:"#ff6b6b",REFERENCE:"#4ecdc4",CONTEXT:"#45b7d1",EXAMPLE:"#96ceb4",COUNTERPOINT:"#ff7f50",SYNTHESIS:"#9b59b6",thread:"#00ff9d"};function Eme({data:e}){const t=e.nodeColor||"#666",n=e.isThread,r=n?25:15,i=e.isMatteMode?"matte":"";return m.jsxs("div",{className:`graph-node ${i} ${n?"thread-node":""}`,style:{position:"relative",width:r*2,height:r*2},children:[m.jsx(Go,{type:"target",position:tt.Top,id:"t-top",style:{opacity:0,pointerEvents:"none"}}),m.jsx(Go,{type:"target",position:tt.Bottom,id:"t-bottom",style:{opacity:0,pointerEvents:"none"}}),m.jsx(Go,{type:"target",position:tt.Left,id:"t-left",style:{opacity:0,pointerEvents:"none"}}),m.jsx(Go,{type:"target",position:tt.Right,id:"t-right",style:{opacity:0,pointerEvents:"none"}}),m.jsx(Go,{type:"source",position:tt.Top,id:"s-top",style:{opacity:0,pointerEvents:"none"}}),m.jsx(Go,{type:"source",position:tt.Bottom,id:"s-bottom",style:{opacity:0,pointerEvents:"none"}}),m.jsx(Go,{type:"source",position:tt.Left,id:"s-left",style:{opacity:0,pointerEvents:"none"}}),m.jsx(Go,{type:"source",position:tt.Right,id:"s-right",style:{opacity:0,pointerEvents:"none"}}),m.jsx("div",{className:"graph-node-circle",style:{width:r*2,height:r*2,borderRadius:"50%",background:t,border:"2px solid #fff",cursor:"pointer"}}),m.jsx("div",{className:"graph-node-label",children:e.label})]})}const Sme={graphNode:Eme},kme=({threads:e,onNodeClick:t,onAddNode:n,onOpenEditor:r,onSelectedNodeChange:i,loading:s})=>{var de,xe,ve,ue;const[o,a,l]=Ype([]),[f,c,d]=Zpe([]),[u,h]=T.useState(null),[g,U]=T.useState(!0),[y,x]=T.useState(!0),[w,E]=T.useState(!0),[S,M]=T.useState(!1),{fitView:A}=s7();T.useEffect(()=>{s!==void 0&&U(s)},[s]);function C(te,le){const he=le.x-te.x,we=le.y-te.y;return Math.abs(he)>Math.abs(we)?he>0?{sourceHandle:"s-right",targetHandle:"t-left"}:{sourceHandle:"s-left",targetHandle:"t-right"}:we>0?{sourceHandle:"s-bottom",targetHandle:"t-top"}:{sourceHandle:"s-top",targetHandle:"t-bottom"}}const I=T.useRef(null),R=T.useRef(null),L=T.useRef(!1);T.useEffect(()=>{if(!e||e.length===0)return;const te=e[0].id;R.current===te&&I.current||(R.current=te,L.current=!1,(async()=>{var le;try{const he=await Bi.loadThreadLayout(te);I.current=he,((le=he==null?void 0:he.settings)==null?void 0:le.isMatteMode)!==void 0&&x(he.settings.isMatteMode),_(e,he)}catch{I.current=null,_(e,null)}L.current||(L.current=!0,setTimeout(()=>A({padding:.2}),50))})())},[e]);const _=T.useCallback((te,le)=>{if(!te||te.length===0)return;const he={};o.forEach(Ge=>{he[Ge.id]=Ge.position});const we=[],Se=[];let De=0;te.forEach(Ge=>{var Xs,Ks,Qi,sr,yn;const ht=((Xs=Ge.metadata)==null?void 0:Xs.title)||Ge.title||`Thread ${Ge.id}`,st=(ht||"").split(/\s+/),jt=st.length>2?st.slice(0,2).join(" ")+"...":ht,En=`thread-${Ge.id}`,cn=(Ks=le==null?void 0:le.nodes)==null?void 0:Ks[En],hi=he[En];we.push({id:En,type:"graphNode",position:cn?{x:cn.x,y:cn.y}:hi||{x:400,y:300+De},data:{label:jt,isThread:!0,nodeColor:kg.thread,isMatteMode:y,originalData:{...Ge,type:"thread",title:ht,metadata:{...Ge.metadata,title:ht}}},draggable:!0});const Mi=((Qi=Ge.nodes)==null?void 0:Qi.length)||0;(sr=Ge.nodes)==null||sr.forEach((un,Xr)=>{var hl;const kr=typeof un.type=="number"?un.type:ou.indexOf(un.node_type),Ai=ou[kr]||"",Vf=kg[Ai]||"#666";let ua=un.content;try{typeof un.content=="string"&&(un.content.startsWith("{")||un.content.startsWith("["))&&(ua=JSON.parse(un.content))}catch{}const ha=`node-${un.id}`,yc=(hl=le==null?void 0:le.nodes)==null?void 0:hl[ha],pa=he[ha];let wo;if(yc)wo={x:yc.x,y:yc.y};else if(pa)wo=pa;else{const Eo=2*Math.PI*Xr/Math.max(Mi,1)-Math.PI/2,ma=180;wo={x:400+ma*Math.cos(Eo),y:300+De+ma*Math.sin(Eo)}}we.push({id:ha,type:"graphNode",position:wo,data:{label:Ai,isThread:!1,nodeColor:Vf,isMatteMode:y,originalData:{...un,type:kr,content:ua}},draggable:!0})});const qi={};we.forEach(un=>{qi[un.id]=un.position}),(yn=Ge.nodes)==null||yn.forEach(un=>{let Xr,kr;kr=`node-${un.id}`,un.parent_id?Xr=Ge.nodes.some(ua=>ua.id===un.parent_id)?`node-${un.parent_id}`:`thread-${Ge.id}`:Xr=`thread-${Ge.id}`;const Ai=C(qi[Xr]||{x:0,y:0},qi[kr]||{x:0,y:0});Se.push({id:`e-${Xr}-${kr}`,source:Xr,target:kr,sourceHandle:Ai.sourceHandle,targetHandle:Ai.targetHandle,style:{stroke:"rgba(0, 255, 157, 0.3)",strokeWidth:2},animated:!1})})}),a(we),c(Se),U(!1)},[o,y]);T.useEffect(()=>{if(!e||e.length===0)return;const te=e[0].id;R.current===te&&I.current!==void 0&&_(e,I.current)},[e]),T.useEffect(()=>{a(te=>te.map(le=>({...le,data:{...le.data,isMatteMode:y}})))},[y]);const O=T.useCallback(te=>{h(te),i&&i((te==null?void 0:te.type)==="thread"?null:(te==null?void 0:te.id)??null)},[i]),$=T.useCallback((te,le)=>{O(le.data.originalData)},[O]),B=()=>{h(null),i&&i(null)},F=te=>{if(!e.length)return[];const le=e[0];if(te.startsWith("thread-"))return(le.nodes||[]).filter(he=>!he.parentId);{const he=parseInt(te.replace("node-",""));return(le.nodes||[]).filter(we=>we.parentId===he)}},z=te=>{O(te)},H=te=>te==="thread"?kg.thread:kg[ou[te]]||"#666",G=T.useRef(null),V=T.useCallback(async()=>{if(!e||e.length===0)return;const te=e[0].id,le={nodes:{},settings:{isMatteMode:y}};o.forEach(he=>{le.nodes[he.id]={x:he.position.x,y:he.position.y}}),I.current=le;try{M(!0),await Bi.saveThreadLayout(te,le)}catch(he){console.error("Failed to save layout:",he)}finally{M(!1)}},[e,o,y]),Y=T.useCallback(()=>{G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{V()},500)},[V]),K=async()=>{if(!e||e.length===0)return;const te=e[0].id;try{M(!0),await Bi.deleteThreadLayout(te),a(le=>{const he=le.length-1;return le.map((we,Se)=>{if(we.id.startsWith("thread-"))return{...we,position:{x:400,y:300}};const De=Se-1,Ge=2*Math.PI*De/Math.max(he,1)-Math.PI/2,ht=180;return{...we,position:{x:400+ht*Math.cos(Ge),y:300+ht*Math.sin(Ge)}}})})}catch(le){console.error("Failed to reset layout:",le)}finally{M(!1)}},q=te=>{if(!te)return null;const le=String(te);return/<[a-z][\s\S]*>/i.test(le)?m.jsx("span",{dangerouslySetInnerHTML:{__html:le}}):le},se=(te,le)=>{if(!te)return"No content available";try{let he=te.content||te;if(typeof he=="string"&&(he.startsWith("{")||he.startsWith("[")))try{he=JSON.parse(he)}catch{}if(["ROOT","EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(le)){const Se=typeof he=="object"?he:typeof he=="string"&&he.startsWith("{")?JSON.parse(he):null;if(Se)switch(le){case"ROOT":return m.jsxs("div",{className:"root-content",children:[m.jsx("h4",{className:"root-title",children:q(Se.title)}),m.jsx("div",{className:"root-description",children:q(Se.description)}),Se.keywords&&m.jsxs("div",{className:"root-keywords",children:[m.jsx("strong",{children:"Keywords: "}),Array.isArray(Se.keywords)?Se.keywords.join(", "):q(Se.keywords)]})]});case"EVIDENCE":return m.jsxs("div",{className:"evidence-content",children:[m.jsx("div",{className:"evidence-point",children:q(Se.point)}),m.jsx("p",{className:"evidence-source",children:m.jsxs("em",{children:["Source: ",q(Se.source)]})})]});case"EXAMPLE":return m.jsxs("div",{className:"example-content",children:[m.jsx("h4",{className:"example-title",children:q(Se.title)}),m.jsx("div",{className:"example-description",children:q(Se.description)})]});case"COUNTERPOINT":return m.jsxs("div",{className:"counterpoint-content",children:[m.jsx("h4",{className:"counterpoint-argument",children:q(Se.argument)}),m.jsx("div",{className:"counterpoint-explanation",children:q(Se.explanation)})]})}}const we=typeof he=="object"?JSON.stringify(he,null,2):String(he);return/<[a-z][\s\S]*>/i.test(we)?m.jsx("div",{dangerouslySetInnerHTML:{__html:we}}):we.split(`
`).map((Se,De)=>m.jsx("p",{className:"content-paragraph",children:Se},De))}catch{return"Error displaying content"}};return m.jsxs("div",{className:`thread-graph ${y?"matte":""}`,children:[m.jsxs("div",{className:`graph-container ${u?"with-sidebar":""}`,children:[m.jsx(Kpe,{nodes:o,edges:f,onNodesChange:l,onEdgesChange:d,onNodeClick:$,onNodeDragStop:Y,nodeTypes:Sme,minZoom:.3,maxZoom:2,proOptions:{hideAttribution:!0},style:{background:"#1d1d1d"},children:m.jsx(tme,{variant:w?"dots":"lines",gap:w?40:0,size:w?1:0,color:w?"rgba(255, 255, 255, 0.08)":"transparent"})}),g&&m.jsx("div",{className:"loading-overlay",children:m.jsx("div",{className:"loading-spinner"})}),m.jsxs("div",{className:"bottom-right-controls",children:[m.jsx("button",{className:`control-button ${y?"active":""}`,onClick:()=>x(!y),title:y?"Switch to Glossy mode":"Switch to Matte mode",children:"M"}),m.jsx("button",{className:`control-button ${w?"active":""}`,onClick:()=>E(!w),title:w?"Switch to solid background":"Switch to dotted background",children:"D"}),m.jsx("button",{className:"control-button",onClick:()=>A({padding:.2,duration:300}),title:"Fit view",children:"F"}),m.jsx("button",{className:"control-button",onClick:K,disabled:S,title:"Reset layout",children:"R"})]})]}),m.jsx("div",{className:`content-sidebar ${u?"open":""}`,children:u&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"content-sidebar-header",children:[u.type!=="thread"&&m.jsx("button",{className:"back-button",onClick:()=>{var le;if(u.parentId){const he=e[0].nodes.find(we=>we.id===u.parentId);if(he){O(he);return}}const te=e[0];O({...te,type:"thread",metadata:{...te.metadata,title:((le=te.metadata)==null?void 0:le.title)||te.title||`Thread ${te.id}`}})},"aria-label":"Back to parent",children:""}),m.jsx("h2",{children:u.type==="thread"?((xe=(de=u.originalData)==null?void 0:de.metadata)==null?void 0:xe.title)||((ve=u.originalData)==null?void 0:ve.title)||u.title||`Thread ${u.id}`:((ue=u.metadata)==null?void 0:ue.title)||u.title||`Node ${u.id}`}),m.jsxs("div",{className:"header-actions",children:[m.jsx("button",{className:"add-node-button",onClick:()=>r&&r(u),children:"Add Node"}),m.jsx("button",{className:"content-sidebar-close",onClick:B,children:""})]})]}),m.jsxs("div",{className:"content-sidebar-body",children:[m.jsxs("div",{className:"child-nodes-list",children:[m.jsx("h3",{children:"Connected Nodes"}),F(`${u.type==="thread"?"thread-":"node-"}${u.id}`).length>0?m.jsx("div",{className:"nodes-grid",children:F(`${u.type==="thread"?"thread-":"node-"}${u.id}`).map(te=>{var le;return m.jsxs("div",{className:"node-card",onClick:()=>z(te),children:[m.jsx("div",{className:"node-card-type",style:{backgroundColor:kg[ou[te.type]]},children:ou[te.type]}),m.jsx("div",{className:"node-card-title",children:((le=te.metadata)==null?void 0:le.title)||`Node ${te.id}`})]},te.id)})}):m.jsx("p",{className:"no-nodes-message",children:"No nodes connected yet"})]}),m.jsxs("div",{className:"content-sidebar-metadata",children:[m.jsx("div",{className:"type-badge",style:{backgroundColor:H(u.type)},children:u.type==="thread"?"THREAD":ou[u.type]}),m.jsxs("div",{className:"voting-stats",children:[m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Votes For:"}),m.jsx("span",{children:u.votesFor||"0"})]}),m.jsxs("div",{className:"stat",children:[m.jsx("label",{children:"Votes Against:"}),m.jsx("span",{children:u.votesAgainst||"0"})]})]})]}),m.jsx("div",{className:"content-sidebar-content",children:se(u.content,u.type==="thread"?"thread":ou[u.type])})]})]})})]})},Cme=({node:e,onClose:t,onVote:n,onCreateProposal:r,onAddNode:i,loading:s,voteAmount:o,setVoteAmount:a})=>{T.useState(!1);const l=(c,d)=>{try{return d==="EVIDENCE"&&c.startsWith("{")&&JSON.parse(c).source||c}catch{return c}},f=(c,d)=>{if(!c)return console.log("No content provided for node type:",d),"No content available";console.log("Formatting content for node type:",d),console.log("Raw content:",c),console.log("Content type:",typeof c);let u=c.content||c;if(typeof u=="string"&&(u.startsWith("{")||u.startsWith("[")))try{u=JSON.parse(u)}catch(h){console.log("Failed to parse JSON content:",h)}try{if(["EVIDENCE","EXAMPLE","COUNTERPOINT"].includes(d)){const g=typeof u=="object"?u:typeof u=="string"&&u.startsWith("{")?JSON.parse(u):null;if(g)switch(d){case"EVIDENCE":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"evidence-content",children:[m.jsx("p",{className:"evidence-point",children:g.point}),m.jsx("p",{className:"evidence-source",children:m.jsxs("em",{children:["Source: ",g.source]})})]})});case"EXAMPLE":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"example-content",children:[m.jsx("h4",{className:"example-title",children:g.title}),m.jsx("p",{className:"example-description",children:g.description})]})});case"COUNTERPOINT":return m.jsx("div",{className:"json-content",children:m.jsxs("div",{className:"counterpoint-content",children:[m.jsx("h4",{className:"counterpoint-argument",children:g.argument}),m.jsx("p",{className:"counterpoint-explanation",children:g.explanation})]})})}}if(["SYNTHESIS","CONTEXT"].includes(d)){const g=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:g.split(`
`).map((U,y)=>m.jsx("p",{className:"content-paragraph",children:U},y))})}const h=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:h})}catch(h){console.error("Error formatting content:",h);const g=typeof u=="object"?JSON.stringify(u,null,2):u;return m.jsx("div",{className:"text-content",children:g.split(`
`).map((U,y)=>m.jsx("p",{className:"content-paragraph",children:U},y))})}};return m.jsx("div",{className:"modal-overlay",onClick:t,children:m.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsxs("div",{className:"modal-title",children:[m.jsx("h3",{children:l(e.title,e.node_type)}),m.jsx("div",{className:"node-type-badge",children:e.node_type})]}),m.jsx("button",{className:"close-button",onClick:t,children:""})]}),m.jsx("div",{className:"modal-body",children:m.jsx("div",{className:"node-content",children:f(e.content,e.node_type)})})]})})};var DG=KW();function Ui(e){this.content=e}Ui.prototype={constructor:Ui,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Ui(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Ui(n)},addToStart:function(e,t){return new Ui([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Ui(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Ui(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ui.from(e),e.size?new Ui(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ui.from(e),e.size?new Ui(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ui.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Ui.from=function(e){if(e instanceof Ui)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Ui(t)};function LG(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=LG(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function OG(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),a=t.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let f=0,c=Math.min(o.text.length,a.text.length);for(;f<c&&o.text[o.text.length-f-1]==a.text[a.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let f=OG(o.content,a.content,n-1,r-1);if(f)return f}n-=l,r-=l}}class Ae{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],f=a+l.nodeSize;if(f>t&&r(l,i+a,s||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,i+c)}a=f}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(a,l)=>{let f=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&f||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=f},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new Ae(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>t&&((o<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,t-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ae(r,i)}cutByIndex(t,n){return t==n?Ae.empty:t==0&&n==this.content.length?this:new Ae(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new Ae(i,s)}addToStart(t){return new Ae([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Ae(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return LG(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return OG(this,t,n,r)}findIndex(t){if(t==0)return NU(0,t);if(t==this.size)return NU(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?NU(n+1,s):NU(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Ae.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ae(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Ae.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ae(n||t,r)}static from(t){if(!t)return Ae.empty;if(t instanceof Ae)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Ae([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ae.empty=new Ae([],0);const $w={index:0,offset:0};function NU(e,t){return $w.index=e,$w.offset=t,$w}function z3(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!z3(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!z3(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let wn=class Pk{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&z3(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Pk.none;if(t instanceof Pk)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};wn.none=[];class H3 extends Error{}class We{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=BG(this.content,t+this.openStart,n);return r&&new We(r,this.openStart,this.openEnd)}removeBetween(t,n){return new We(jG(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return We.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new We(Ae.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new We(t,r,i)}}We.empty=new We(Ae.empty,0,0);function jG(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(i==t||s.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(jG(s.content,t-i-1,n-i-1)))}function BG(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=BG(o.content,t-s-1,n,o);return a&&e.replaceChild(i,o.copy(a))}function Mme(e,t,n){if(n.openStart>e.depth)throw new H3("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new H3("Inconsistent open depths");return FG(e,t,n,0)}function FG(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=FG(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,a=o.content;return gh(o,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:o,end:a}=Ame(n,e);return gh(s,zG(e,o,a,t,r))}else return gh(s,V3(e,t,r))}function $G(e,t){if(!t.type.compatibleContent(e.type))throw new H3("Cannot join "+t.type.name+" onto "+e.type.name)}function Dk(e,t,n){let r=e.node(n);return $G(r,t.node(n)),r}function mh(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function w5(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(mh(e.nodeAfter,r),s++));for(let a=s;a<o;a++)mh(i.child(a),r);t&&t.depth==n&&t.textOffset&&mh(t.nodeBefore,r)}function gh(e,t){return e.type.checkContent(t),e.copy(t)}function zG(e,t,n,r,i){let s=e.depth>i&&Dk(e,t,i+1),o=r.depth>i&&Dk(n,r,i+1),a=[];return w5(null,e,i,a),s&&o&&t.index(i)==n.index(i)?($G(s,o),mh(gh(s,zG(e,t,n,r,i+1)),a)):(s&&mh(gh(s,V3(e,t,i+1)),a),w5(t,n,i,a),o&&mh(gh(o,V3(n,r,i+1)),a)),w5(r,null,i,a),new Ae(a)}function V3(e,t,n){let r=[];if(w5(null,e,n,r),e.depth>n){let i=Dk(e,t,n+1);mh(gh(i,V3(e,t,n+1)),r)}return w5(t,null,n,r),new Ae(r)}function Ame(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(Ae.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class b2{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return wn.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new W3(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:a,offset:l}=o.content.findIndex(s),f=s-l;if(r.push(o,a,i+l),!f||(o=o.child(a),o.isText))break;s=f-1,i+=l+1}return new b2(n,r,s)}static resolveCached(t,n){let r=gL.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else gL.set(t,r=new Tme);let i=r.elts[r.i]=b2.resolve(t,n);return r.i=(r.i+1)%Ime,i}}class Tme{constructor(){this.elts=[],this.i=0}}const Ime=12,gL=new WeakMap;class W3{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Nme=Object.create(null);let h0=class Lk{constructor(t,n,r,i=wn.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||Ae.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&z3(this.attrs,n||t.defaultAttrs||Nme)&&wn.sameSet(this.marks,r||wn.none)}copy(t=null){return t==this.content?this:new Lk(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Lk(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return We.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),f=i.node(o).content.cut(i.pos-a,s.pos-a);return new We(f,i.depth-o,s.depth-o)}replace(t,n,r){return Mme(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return b2.resolveCached(this,t)}resolveNoCache(t){return b2.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),HG(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=Ae.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=wn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!wn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=Ae.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};h0.prototype.text=void 0;class G3 extends h0{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):HG(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new G3(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new G3(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function HG(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Lh{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new Rme(t,n);if(r.next==null)return Lh.empty;let i=VG(r);r.next&&r.err("Unexpected trailing text");let s=Bme(jme(i));return Fme(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(t,r);if(l&&(!n||l.validEnd))return Ae.from(a.map(f=>f.createAndFill()));for(let f=0;f<o.next.length;f++){let{type:c,next:d}=o.next[f];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let u=s(d,a.concat(c));if(u)return u}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}Lh.empty=new Lh(!0);class Rme{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function VG(e){let t=[];do t.push(_me(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function _me(e){let t=[];do t.push(Pme(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function Pme(e){let t=Ome(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=Dme(e,t);else break;return t}function bL(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Dme(e,t){let n=bL(e),r=n;return e.eat(",")&&(e.next!="}"?r=bL(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Lme(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function Ome(e){if(e.eat("(")){let t=VG(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=Lme(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function jme(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,a,l){let f={term:l,to:a};return t[o].push(f),f}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,f)=>l.concat(s(f,a)),[]);if(o.type=="seq")for(let l=0;;l++){let f=s(o.exprs[l],a);if(l==o.exprs.length-1)return f;i(f,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let f=0;f<o.min;f++){let c=n();i(s(o.expr,l),c),l=c}if(o.max==-1)i(s(o.expr,l),l);else for(let f=o.min;f<o.max;f++){let c=n();r(l,c),i(s(o.expr,l),c),l=c}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function WG(e,t){return t-e}function UL(e,t){let n=[];return r(t),n.sort(WG);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Bme(e){let t=Object.create(null);return n(UL(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:a,to:l})=>{if(!a)return;let f;for(let c=0;c<i.length;c++)i[c][0]==a&&(f=i[c][1]);UL(e,l).forEach(c=>{f||i.push([a,f=[]]),f.indexOf(c)==-1&&f.push(c)})})});let s=t[r.join(",")]=new Lh(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(WG);s.next.push({type:i[o][0],next:t[a.join(",")]||n(a)})}return s}}function Fme(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:f}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function GG(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function XG(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function KG(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function YG(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new zme(e,r,t[r]);return n}let yL=class ZG{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=YG(t,r.attrs),this.defaultAttrs=GG(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Lh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:XG(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new h0(this,this.computeAttrs(t),Ae.from(n),wn.setFrom(r))}createChecked(t=null,n,r){return n=Ae.from(n),this.checkContent(n),new h0(this,this.computeAttrs(t),n,wn.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=Ae.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ae.empty,!0);return s?new h0(this,t,n.append(s),wn.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){KG(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:wn.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new ZG(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function $me(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class zme{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?$me(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class l7{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=YG(t,i.attrs),this.excluded=null;let s=GG(this.attrs);this.instance=s?new wn(this,s):null}create(t=null){return!t&&this.instance?this.instance:new wn(this,XG(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new l7(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){KG(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class qG{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Ui.from(t.nodes),n.marks=Ui.from(t.marks||{}),this.nodes=yL.compile(this.spec.nodes,this),this.marks=l7.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Lh.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?xL(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:xL(this,o.split(" "))}this.nodeFromJSON=i=>h0.fromJSON(this,i),this.markFromJSON=i=>wn.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof yL){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new G3(r,r.defaultAttrs,t,wn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function xL(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let a in e.marks){let l=e.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function Hme(e){return e.tag!=null}function Vme(e){return e.style!=null}let E5=class Ok{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(Hme(i))this.tags.push(i);else if(Vme(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new wL(this,n,!1);return r.addAll(t,wn.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new wL(this,n,!0);return r.addAll(t,wn.none,n.from,n.to),We.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Xme(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=EL(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=EL(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Ok(t,Ok.schemaRules(t)))}};const QG={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Wme={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},JG={ol:!0,ul:!0},U2=1,jk=2,S5=4;function vL(e,t,n){return t!=null?(t?U2:0)|(t==="full"?jk:0):e&&e.whitespace=="pre"?U2|jk:n&~S5}class RU{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=wn.none,this.match=s||(o&S5?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ae.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&U2)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ae.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Ae.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!QG.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class wL{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=vL(null,n.preserveWhitespace,0)|(r?S5:0);i?s=new RU(i.type,i.attrs,wn.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new RU(null,null,wn.none,!0,null,o):s=new RU(t.schema.topNodeType,null,wn.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&jk?"full":this.localPreserveWS||(i.options&U2)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=t.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),a;JG.hasOwnProperty(o)&&this.parser.normalizeLists&&Gme(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:Wme.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let f,c=this.needsBlock;if(QG.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let d=l&&l.skip?n:this.readStyles(t,n);d&&this.addAll(t,d),f&&this.sync(s),this.needsBlock=c}else{let f=this.readStyles(t,n);f&&this.addElementByRule(t,l,f,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(f=>!l.clearMark(f)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}s&&this.sync(a)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,a=i==null?null:t.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],f=l.findWrapping(t);if(f&&(!i||i.length>f.length+a)&&(i=f,s=l,!f.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=wn.none;for(let a of i.concat(t.marks))(s.type?s.type.allowsMarkType(a.type):SL(a.type,t.type))&&(o=a.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let a=vL(t,s,o.options);o.options&S5&&o.content.length==0&&(a|=S5);let l=wn.none;return r=r.filter(f=>(o.type?o.type.allowsMarkType(f.type):SL(f.type,t))?(l=f.addToSet(l),!1):!0),this.nodes.push(new RU(t,n,l,i,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=U2)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let f=n[a];if(f==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!c||c.name!=f&&!c.isInGroup(f))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Gme(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&JG.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function Xme(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function EL(e){let t={};for(let n in e)t[n]=e[n];return t}function SL(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:f,next:c}=a.edge(l);if(f==t||s.indexOf(c)<0&&o(c))return!0}};if(o(i.contentMatch))return!0}}class s1{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=zw(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let f=o.marks[l];if(!this.marks[f.type.name]){l++;continue}if(!f.eq(s[a][0])||f.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let f=o.marks[l++],c=this.serializeMark(f,o.isInline,n);c&&(s.push([f,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=Dy(zw(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&Dy(zw(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return Dy(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new s1(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=kL(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return kL(t.marks)}}function kL(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function zw(e){return e.document||window.document}const CL=new WeakMap;function Kme(e){let t=CL.get(e);return t===void 0&&CL.set(e,t=Yme(e)),t}function Yme(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function Dy(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Kme(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?e.createElementNS(n,i):e.createElement(i),f=t[1],c=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){c=2;for(let d in f)if(f[d]!=null){let u=d.indexOf(" ");u>0?l.setAttributeNS(d.slice(0,u),d.slice(u+1),f[d]):d=="style"&&l.style?l.style.cssText=f[d]:l.setAttribute(d,f[d])}}for(let d=c;d<t.length;d++){let u=t[d];if(u===0){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:g}=Dy(e,u,n,r);if(l.appendChild(h),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const eX=65535,tX=Math.pow(2,16);function Zme(e,t){return e+t*tX}function ML(e){return e&eX}function qme(e){return(e-(e&eX))/tX}const nX=1,rX=2,Ly=4,iX=8;class Bk{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&iX)>0}get deletedBefore(){return(this.delInfo&(nX|Ly))>0}get deletedAfter(){return(this.delInfo&(rX|Ly))>0}get deletedAcross(){return(this.delInfo&Ly)>0}}class po{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&po.empty)return po.empty}recover(t){let n=0,r=ML(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+qme(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let f=this.ranges[a+s],c=this.ranges[a+o],d=l+f;if(t<=d){let u=f?t==l?-1:t==d?1:n:n,h=l+i+(u<0?0:c);if(r)return h;let g=t==(n<0?l:d)?null:Zme(a/3,t-l),U=t==l?rX:t==d?nX:Ly;return(n<0?t!=l:t!=d)&&(U|=iX),new Bk(h,U,g)}i+=c-f}return r?t+i:new Bk(t+i,0,null)}touches(t,n){let r=0,i=ML(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let f=this.ranges[a+s],c=l+f;if(t<=c&&a==i*3)return!0;r+=this.ranges[a+o]-f}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),f=this.ranges[i+n],c=this.ranges[i+r];t(a,a+f,l,l+c),s+=c-f}}invert(){return new po(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?po.empty:new po(t<0?[0,-t,0]:[0,0,t])}}po.empty=new po([]);class y2{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new y2(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new y2;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,t=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return r?t:new Bk(t,i,null)}}const Hw=Object.create(null);class Yi{getMap(){return po.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Hw[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Hw)throw new RangeError("Duplicate use of step JSON ID "+t);return Hw[t]=n,n.prototype.jsonID=t,n}}class Ir{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Ir(t,null)}static fail(t){return new Ir(null,t)}static fromReplace(t,n,r,i){try{return Ir.ok(t.replace(n,r,i))}catch(s){if(s instanceof H3)return Ir.fail(s.message);throw s}}}function yA(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(yA(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return Ae.fromArray(r)}class r0 extends Yi{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new We(yA(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Ir.fromReplace(t,this.from,this.to,s)}invert(){return new Wa(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new r0(n.pos,r.pos,this.mark)}merge(t){return t instanceof r0&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new r0(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new r0(n.from,n.to,t.markFromJSON(n.mark))}}Yi.jsonID("addMark",r0);class Wa extends Yi{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new We(yA(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Ir.fromReplace(t,this.from,this.to,r)}invert(){return new r0(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Wa(n.pos,r.pos,this.mark)}merge(t){return t instanceof Wa&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Wa(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Wa(n.from,n.to,t.markFromJSON(n.mark))}}Yi.jsonID("removeMark",Wa);class i0 extends Yi{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ir.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ir.fromReplace(t,this.pos,this.pos+1,new We(Ae.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new i0(this.pos,n.marks[i]);return new i0(this.pos,this.mark)}}return new Oh(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new i0(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new i0(n.pos,t.markFromJSON(n.mark))}}Yi.jsonID("addNodeMark",i0);class Oh extends Yi{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ir.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ir.fromReplace(t,this.pos,this.pos+1,new We(Ae.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new i0(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Oh(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Oh(n.pos,t.markFromJSON(n.mark))}}Yi.jsonID("removeNodeMark",Oh);class si extends Yi{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&Fk(t,this.from,this.to)?Ir.fail("Structure replace would overwrite content"):Ir.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new po([this.from,this.to-this.from,this.slice.size])}invert(t){return new si(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new si(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof si)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?We.empty:new We(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new si(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?We.empty:new We(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new si(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new si(n.from,n.to,We.fromJSON(t,n.slice),!!n.structure)}}Yi.jsonID("replace",si);class ci extends Yi{constructor(t,n,r,i,s,o,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(t){if(this.structure&&(Fk(t,this.from,this.gapFrom)||Fk(t,this.gapTo,this.to)))return Ir.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ir.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ir.fromReplace(t,this.from,this.to,r):Ir.fail("Content does not fit in gap")}getMap(){return new po([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new ci(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new ci(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ci(n.from,n.to,n.gapFrom,n.gapTo,We.fromJSON(t,n.slice),n.insert,!!n.structure)}}Yi.jsonID("replaceAround",ci);function Fk(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Qme(e,t,n,r){let i=[],s=[],o,a;e.doc.nodesBetween(t,n,(l,f,c)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let u=Math.max(f,t),h=Math.min(f+l.nodeSize,n),g=r.addToSet(d);for(let U=0;U<d.length;U++)d[U].isInSet(g)||(o&&o.to==u&&o.mark.eq(d[U])?o.to=h:i.push(o=new Wa(u,h,d[U])));a&&a.to==u?a.to=h:s.push(a=new r0(u,h,r))}}),i.forEach(l=>e.step(l)),s.forEach(l=>e.step(l))}function Jme(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof l7){let f=o.marks,c;for(;c=r.isInSet(f);)(l||(l=[])).push(c),f=c.removeFromSet(f)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let f=Math.min(a+o.nodeSize,n);for(let c=0;c<l.length;c++){let d=l[c],u;for(let h=0;h<i.length;h++){let g=i[h];g.step==s-1&&d.eq(i[h].style)&&(u=g)}u?(u.to=f,u.step=s):i.push({style:d,from:Math.max(a,t),to:f,step:s})}}}),i.forEach(o=>e.step(new Wa(o.from,o.to,o.style)))}function xA(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<s.childCount;l++){let f=s.child(l),c=a+f.nodeSize,d=r.matchType(f.type);if(!d)o.push(new si(a,c,We.empty));else{r=d;for(let u=0;u<f.marks.length;u++)n.allowsMarkType(f.marks[u].type)||e.step(new Wa(a,c,f.marks[u]));if(i&&f.isText&&n.whitespace!="pre"){let u,h=/\r?\n|\r/g,g;for(;u=h.exec(f.text);)g||(g=new We(Ae.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),o.push(new si(a+u.index,a+u.index+u[0].length,g))}}a=c}if(!r.validEnd){let l=r.fillBefore(Ae.empty,!0);e.replace(a,a,new We(l,0,0))}for(let l=o.length-1;l>=0;l--)e.step(o[l])}function e6e(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function k6(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,i=0,s=0;;--r){let o=e.$from.node(r),a=e.$from.index(r)+i,l=e.$to.indexAfter(r)-s;if(r<e.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!e6e(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function t6e(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),a=i.after(s+1),l=o,f=a,c=Ae.empty,d=0;for(let g=s,U=!1;g>n;g--)U||r.index(g)>0?(U=!0,c=Ae.from(r.node(g).copy(c)),d++):l--;let u=Ae.empty,h=0;for(let g=s,U=!1;g>n;g--)U||i.after(g+1)<i.end(g)?(U=!0,u=Ae.from(i.node(g).copy(u)),h++):f++;e.step(new ci(l,f,o,a,new We(c.append(u),d,h),c.size-d,!0))}function vA(e,t,n=null,r=e){let i=n6e(e,t),s=i&&r6e(r,t);return s?i.map(AL).concat({type:t,attrs:n}).concat(s.map(AL)):null}function AL(e){return{type:e,attrs:null}}function n6e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function r6e(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let f=r;l&&f<i;f++)l=l.matchType(n.child(f).type);return!l||!l.validEnd?null:o}function i6e(e,t,n){let r=Ae.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ae.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new ci(i,s,i,s,new We(r,0,0),n.length,!0))}function s6e(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&o6e(e.doc,e.mapping.slice(s).map(a),r)){let f=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!g?f=!1:!h&&g&&(f=!0)}f===!1&&oX(e,o,a,s),xA(e,e.mapping.slice(s).map(a,1),r,void 0,f===null);let c=e.mapping.slice(s),d=c.map(a,1),u=c.map(a+o.nodeSize,1);return e.step(new ci(d,u,d+1,u-1,new We(Ae.from(r.create(l,null,o.marks)),0,0),1,!0)),f===!0&&sX(e,o,a,s),!1}})}function sX(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function oX(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function o6e(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function a6e(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new ci(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new We(Ae.from(o),0,0),1,!0))}function Fp(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,c=n-2;f>s;f--,c--){let d=i.node(f),u=i.index(f);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(u,d.childCount),g=r&&r[c+1];g&&(h=h.replaceChild(0,g.type.create(g.attrs)));let U=r&&r[c]||d;if(!d.canReplace(u+1,d.childCount)||!U.type.validContent(h))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function l6e(e,t,n=1,r){let i=e.doc.resolve(t),s=Ae.empty,o=Ae.empty;for(let a=i.depth,l=i.depth-n,f=n-1;a>l;a--,f--){s=Ae.from(i.node(a).copy(s));let c=r&&r[f];o=Ae.from(c?c.type.create(c.attrs,o):i.node(a).copy(o))}e.step(new si(t,t,new We(s.append(o),n,n),!0))}function D0(e,t){let n=e.resolve(t),r=n.index();return aX(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function c6e(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function aX(e,t){return!!(e&&t&&!e.isLeaf&&c6e(e,t))}function c7(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&aX(s,o)&&r.node(i).canReplace(a,a+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function f6e(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);c&&!d?r=!1:!c&&d&&(r=!0)}let a=e.steps.length;if(r===!1){let c=e.doc.resolve(t+n);oX(e,c.node(),c.before(),a)}o.inlineContent&&xA(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=e.mapping.slice(a),f=l.map(t-n);if(e.step(new si(f,l.map(t+n,-1),We.empty,!0)),r===!0){let c=e.doc.resolve(f);sX(e,c.node(),c.before(),e.steps.length)}return e}function d6e(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function lX(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),f=r.node(o),c=!1;if(s==1)c=f.canReplace(l,l,i);else{let d=f.contentMatchAt(l).findWrapping(i.firstChild.type);c=d&&f.canReplaceWith(l,l,d[0])}if(c)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function f7(e,t,n=t,r=We.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return cX(i,s,r)?new si(t,n,r):new u6e(i,s,r).fit()}function cX(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class u6e{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ae.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=Ae.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new We(s,o,a);return t>-1?new ci(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new si(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Vw(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:f}=this.frontier[a],c,d=null;if(n==1&&(o?f.matchType(o.type)||(d=f.fillBefore(Ae.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(c=f.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:c};if(s&&f.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Vw(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new We(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=Vw(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new We(t5(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new We(t5(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let U=0;U<s.length;U++)this.openFrontierNode(s[U]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-t,f=0,c=[],{match:d,type:u}=this.frontier[n];if(i){for(let U=0;U<i.childCount;U++)c.push(i.child(U));d=d.matchFragment(i)}let h=a.size+t-(o.content.size-o.openEnd);for(;f<a.childCount;){let U=a.child(f),y=d.matchType(U.type);if(!y)break;f++,(f>1||l==0||U.content.size)&&(d=y,c.push(fX(U.mark(u.allowedMarks(U.marks)),f==1?l:0,f==a.childCount?h:-1)))}let g=f==a.childCount;g||(h=-1),this.placed=n5(this.placed,n,Ae.from(c)),this.frontier[n].match=d,g&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let U=0,y=a;U<h;U++){let x=y.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),y=x.content}this.unplaced=g?t==0?We.empty:new We(t5(o.content,t-1,1),t-1,h<0?o.openEnd:t-1):new We(t5(o.content,t,f),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Ww(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=Ww(t,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:f}=this.frontier[a],c=Ww(t,a,f,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=n5(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=n5(this.placed,this.depth,Ae.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ae.empty,!0);n.childCount&&(this.placed=n5(this.placed,this.frontier.length,n))}}function t5(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(t5(e.firstChild.content,t-1,n)))}function n5(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(n5(e.lastChild.content,t-1,n)))}function Vw(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function fX(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,fX(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Ae.empty,!0)))),e.copy(r)}function Ww(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!h6e(n,s.content,o)?a:null}function h6e(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function p6e(e){return e.spec.defining||e.spec.definingForContent}function m6e(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(cX(i,s,r))return e.step(new si(t,n,r));let o=uX(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let u=i.depth,h=i.pos-1;u>0;u--,h--){let g=i.node(u).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;o.indexOf(u)>-1?a=u:i.before(u)==h&&o.splice(1,0,-u)}let l=o.indexOf(a),f=[],c=r.openStart;for(let u=r.content,h=0;;h++){let g=u.firstChild;if(f.push(g),h==r.openStart)break;u=g.content}for(let u=c-1;u>=0;u--){let h=f[u],g=p6e(h.type);if(g&&!h.sameMarkup(i.node(Math.abs(a)-1)))c=u;else if(g||!h.type.isTextblock)break}for(let u=r.openStart;u>=0;u--){let h=(u+c+1)%(r.openStart+1),g=f[h];if(g)for(let U=0;U<o.length;U++){let y=o[(U+l)%o.length],x=!0;y<0&&(x=!1,y=-y);let w=i.node(y-1),E=i.index(y-1);if(w.canReplaceWith(E,E,g.type,g.marks))return e.replace(i.before(y),x?s.after(y):n,new We(dX(r.content,0,r.openStart,h),h,r.openEnd))}}let d=e.steps.length;for(let u=o.length-1;u>=0&&(e.replace(t,n,r),!(e.steps.length>d));u--){let h=o[u];h<0||(t=i.before(h),n=s.after(h))}}function dX(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(dX(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(Ae.empty,!0))}return e}function g6e(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=d6e(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new We(Ae.from(r),0,0))}function b6e(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=uX(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return e.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function uX(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class $p extends Yi{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ir.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ir.fromReplace(t,this.pos,this.pos+1,new We(Ae.from(i),0,n.isLeaf?0:1))}getMap(){return po.empty}invert(t){return new $p(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new $p(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $p(n.pos,n.attr,n.value)}}Yi.jsonID("attr",$p);class x2 extends Yi{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Ir.ok(r)}getMap(){return po.empty}invert(t){return new x2(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new x2(n.attr,n.value)}}Yi.jsonID("docAttr",x2);let qm=class extends Error{};qm=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};qm.prototype=Object.create(Error.prototype);qm.prototype.constructor=qm;qm.prototype.name="TransformError";class hX{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new y2}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new qm(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let t=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(t=i.map(t,1),n=i.map(n,-1)),i.forEach((s,o,a,l)=>{t=Math.min(t,a),n=Math.max(n,l)})}return t==1e9?null:{from:t,to:n}}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=We.empty){let i=f7(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new We(Ae.from(r),0,0))}delete(t,n){return this.replace(t,n,We.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return m6e(this,t,n,r),this}replaceRangeWith(t,n,r){return g6e(this,t,n,r),this}deleteRange(t,n){return b6e(this,t,n),this}lift(t,n){return t6e(this,t,n),this}join(t,n=1){return f6e(this,t,n),this}wrap(t,n){return i6e(this,t,n),this}setBlockType(t,n=t,r,i=null){return s6e(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return a6e(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new $p(t,n,r)),this}setDocAttribute(t,n){return this.step(new x2(t,n)),this}addNodeMark(t,n){return this.step(new i0(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof wn)n.isInSet(r.marks)&&this.step(new Oh(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Oh(t,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(t,n=1,r){return l6e(this,t,n,r),this}addMark(t,n,r){return Qme(this,t,n,r),this}removeMark(t,n,r){return Jme(this,t,n,r),this}clearIncompatible(t,n,r){return xA(this,t,n,r),this}}const Gw=Object.create(null);class Pt{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new U6e(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=We.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:f}=o[a],c=t.mapping.slice(s);t.replaceRange(c.map(l.pos),c.map(f.pos),a?We.empty:n),a==0&&NL(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=t.mapping.slice(r),f=l.map(o.pos),c=l.map(a.pos);s?t.deleteRange(f,c):(t.replaceRangeWith(f,c,n),NL(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new St(t):lp(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?lp(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):lp(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new ea(t.node(0))}static atStart(t){return lp(t,t,0,0,1)||new ea(t)}static atEnd(t){return lp(t,t,t.content.size,t.childCount,-1)||new ea(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Gw[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Gw)throw new RangeError("Duplicate use of selection JSON ID "+t);return Gw[t]=n,n.prototype.jsonID=t,n}getBookmark(){return St.between(this.$anchor,this.$head).getBookmark()}}Pt.prototype.visible=!0;class U6e{constructor(t,n){this.$from=t,this.$to=n}}let TL=!1;function IL(e){!TL&&!e.parent.inlineContent&&(TL=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class St extends Pt{constructor(t,n=t){IL(t),IL(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Pt.near(r);let i=t.resolve(n.map(this.anchor));return new St(i.parent.inlineContent?i:r,r)}replace(t,n=We.empty){if(super.replace(t,n),n==We.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof St&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new d7(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new St(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Pt.findFrom(n,r,!0)||Pt.findFrom(n,-r,!0);if(s)n=s.$head;else return Pt.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Pt.findFrom(t,-r,!0)||Pt.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new St(t,n)}}Pt.jsonID("text",St);class d7{constructor(t,n){this.anchor=t,this.head=n}map(t){return new d7(t.map(this.anchor),t.map(this.head))}resolve(t){return St.between(t.resolve(this.anchor),t.resolve(this.head))}}class lt extends Pt{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Pt.near(s):new lt(s)}content(){return new We(Ae.from(this.node),0,0)}eq(t){return t instanceof lt&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new wA(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new lt(t.resolve(n.anchor))}static create(t,n){return new lt(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}lt.prototype.visible=!1;Pt.jsonID("node",lt);class wA{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new d7(r,r):new wA(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&lt.isSelectable(r)?new lt(n):Pt.near(n)}}class ea extends Pt{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=We.empty){if(n==We.empty){t.delete(0,t.doc.content.size);let r=Pt.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new ea(t)}map(t){return new ea(t)}eq(t){return t instanceof ea}getBookmark(){return y6e}}Pt.jsonID("all",ea);const y6e={map(){return this},resolve(e){return new ea(e)}};function lp(e,t,n,r,i,s=!1){if(t.inlineContent)return St.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let a=t.child(o);if(a.isAtom){if(!s&&lt.isSelectable(a))return lt.create(e,n-(i<0?a.nodeSize:0))}else{let l=lp(e,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function NL(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof si||i instanceof ci))return;let s=e.mapping.maps[r],o;s.forEach((a,l,f,c)=>{o==null&&(o=c)}),e.setSelection(Pt.near(e.doc.resolve(o),n))}const RL=1,_U=2,_L=4;class x6e extends hX{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|RL)&~_U,this.storedMarks=null,this}get selectionSet(){return(this.updated&RL)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=_U,this}ensureMarks(t){return wn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&_U)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~_U,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||wn.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Pt.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_L,this}get scrolledIntoView(){return(this.updated&_L)>0}}function PL(e,t){return!t||!e?e:e.bind(t)}class r5{constructor(t,n,r){this.name=t,this.init=PL(n.init,r),this.apply=PL(n.apply,r)}}const v6e=[new r5("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new r5("selection",{init(e,t){return e.selection||Pt.atStart(t.doc)},apply(e){return e.selection}}),new r5("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new r5("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Xw{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=v6e.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new r5(r.key,r.spec.state,r))})}}class xp{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,f=i?i[o].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,f,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new xp(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new x6e(this)}static create(t){let n=new Xw(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new xp(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new Xw(this.schema,t.plugins),r=n.fields,i=new xp(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Xw(t.schema,t.plugins),s=new xp(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=h0.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Pt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],f=l.spec.state;if(l.key==o.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=f.fromJSON.call(l,t,n[a],s);return}}s[o.name]=o.init(t,s)}}),s}}function pX(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=pX(i,t,{})),n[r]=i}return n}class ir{constructor(t){this.spec=t,this.props={},t.props&&pX(t.props,this,this.props),this.key=t.key?t.key.key:mX("plugin")}getState(t){return t[this.key]}}const Kw=Object.create(null);function mX(e){return e in Kw?e+"$"+ ++Kw[e]:(Kw[e]=0,e+"$")}class Vr{constructor(t="key"){this.key=mX(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const w6e=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function gX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const E6e=(e,t,n)=>{let r=gX(e,n);if(!r)return!1;let i=EA(r);if(!i){let o=r.blockRange(),a=o&&k6(o);return a==null?!1:(t&&t(e.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(xX(e,i,t,-1))return!0;if(r.parent.content.size==0&&(Qm(s,"end")||lt.isSelectable(s)))for(let o=r.depth;;o--){let a=f7(e.doc,r.before(o),r.after(o),We.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(Qm(s,"end")?Pt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):lt.create(l.doc,i.pos-s.nodeSize)),t(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},S6e=(e,t,n)=>{let r=gX(e,n);if(!r)return!1;let i=EA(r);return i?bX(e,i,t):!1},k6e=(e,t,n)=>{let r=UX(e,n);if(!r)return!1;let i=SA(r);return i?bX(e,i,t):!1};function bX(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let o=t.nodeAfter,a=o,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let f=f7(e.doc,s,l,We.empty);if(!f||f.from!=s||f instanceof si&&f.slice.size>=l-s)return!1;if(n){let c=e.tr.step(f);c.setSelection(St.create(c.doc,s)),n(c.scrollIntoView())}return!0}function Qm(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const C6e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=EA(r)}let o=s&&s.nodeBefore;return!o||!lt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(lt.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function EA(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function UX(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const M6e=(e,t,n)=>{let r=UX(e,n);if(!r)return!1;let i=SA(r);if(!i)return!1;let s=i.nodeAfter;if(xX(e,i,t,1))return!0;if(r.parent.content.size==0&&(Qm(s,"start")||lt.isSelectable(s))){let o=f7(e.doc,r.before(),r.after(),We.empty);if(o&&o.slice.size<o.to-o.from){if(t){let a=e.tr.step(o);a.setSelection(Qm(s,"start")?Pt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):lt.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},A6e=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=SA(r)}let o=s&&s.nodeAfter;return!o||!lt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(lt.create(e.doc,s.pos)).scrollIntoView()),!0)};function SA(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const T6e=(e,t)=>{let n=e.selection,r=n instanceof lt,i;if(r){if(n.node.isTextblock||!D0(e.doc,n.from))return!1;i=n.from}else if(i=c7(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(lt.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},I6e=(e,t)=>{let n=e.selection,r;if(n instanceof lt){if(n.node.isTextblock||!D0(e.doc,n.to))return!1;r=n.to}else if(r=c7(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},N6e=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&k6(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},R6e=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function yX(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const _6e=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=yX(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Pt.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},P6e=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof ea||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=yX(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(St.create(a.doc,o+1)),t(a.scrollIntoView())}return!0},D6e=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Fp(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&k6(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},L6e=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(lt.create(e.doc,i))),!0)};function O6e(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||D0(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function xX(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&O6e(e,t,n))return!0;let f=!l&&t.parent.canReplace(t.index(),t.index()+1);if(f&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let h=t.pos+s.nodeSize,g=Ae.empty;for(let x=o.length-1;x>=0;x--)g=Ae.from(o[x].create(null,g));g=Ae.from(i.copy(g));let U=e.tr.step(new ci(t.pos-1,h,t.pos,h,new We(g,1,0),o.length,!0)),y=U.doc.resolve(h+2*o.length);y.nodeAfter&&y.nodeAfter.type==i.type&&D0(U.doc,y.pos)&&U.join(y.pos),n(U.scrollIntoView())}return!0}let c=s.type.spec.isolating||r>0&&l?null:Pt.findFrom(t,1),d=c&&c.$from.blockRange(c.$to),u=d&&k6(d);if(u!=null&&u>=t.depth)return n&&n(e.tr.lift(d,u).scrollIntoView()),!0;if(f&&Qm(s,"start",!0)&&Qm(i,"end")){let h=i,g=[];for(;g.push(h),!h.isTextblock;)h=h.lastChild;let U=s,y=1;for(;!U.isTextblock;U=U.firstChild)y++;if(h.canReplace(h.childCount,h.childCount,U.content)){if(n){let x=Ae.empty;for(let E=g.length-1;E>=0;E--)x=Ae.from(g[E].copy(x));let w=e.tr.step(new ci(t.pos-g.length,t.pos+s.nodeSize,t.pos+y,t.pos+s.nodeSize-y,new We(x,g.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function vX(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(St.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const j6e=vX(-1),B6e=vX(1);function F6e(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&vA(o,e,t);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function DL(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,f)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let c=n.doc.resolve(f),d=c.index();i=c.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,e,t)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function $6e(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return z6e(a,o,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function z6e(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=o.resolve(t.start-2);s=new W3(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new W3(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=vA(s,n,r,t);return a?(e&&H6e(e,t,a,i,n),!0):!1}function H6e(e,t,n,r,i){let s=Ae.empty;for(let c=n.length-1;c>=0;c--)s=Ae.from(n[c].type.create(n[c].attrs,s));e.step(new ci(t.start-(r?2:0),t.end,t.start,t.end,new We(s,0,0),n.length,!0));let o=0;for(let c=0;c<n.length;c++)n[c].type==i&&(o=c+1);let a=n.length-o,l=t.start+n.length-(r?2:0),f=t.parent;for(let c=t.startIndex,d=t.endIndex,u=!0;c<d;c++,u=!1)!u&&Fp(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=f.child(c).nodeSize;return e}function V6e(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?W6e(t,n,e,s):G6e(t,n,s):!0:!1}}function W6e(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new ci(s-1,o,s,o,new We(Ae.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new W3(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=k6(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return D0(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function G6e(e,t,n){let r=e.tr,i=n.parent;for(let h=n.end,g=n.endIndex-1,U=n.startIndex;g>U;g--)h-=i.child(g).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,f=s.node(-1),c=s.index(-1);if(!f.canReplace(c+(a?0:1),c+1,o.content.append(l?Ae.empty:Ae.from(i))))return!1;let d=s.pos,u=d+o.nodeSize;return r.step(new ci(d-(a?1:0),u+(l?1:0),d+1,u-1,new We((a?Ae.empty:Ae.from(i.copy(Ae.empty))).append(l?Ae.empty:Ae.from(i.copy(Ae.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function X6e(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=e)return!1;if(n){let f=l.lastChild&&l.lastChild.type==a.type,c=Ae.from(f?e.create():null),d=new We(Ae.from(e.create(null,Ae.from(a.type.create(null,c)))),f?3:1,0),u=s.start,h=s.end;n(t.tr.step(new ci(u-(f?3:1),h,u,h,d,1,!0)).scrollIntoView())}return!0}}const vi=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Jm=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let $k=null;const $c=function(e,t,n){let r=$k||($k=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},K6e=function(){$k=null},jh=function(e,t,n,r){return n&&(LL(e,t,n,r,-1)||LL(e,t,n,r,1))},Y6e=/^(img|br|input|textarea|hr)$/i;function LL(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:qo(e))){let o=e.parentNode;if(!o||o.nodeType!=1||Tb(e)||Y6e.test(e.nodeName)||e.contentEditable=="false")return!1;t=vi(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?qo(e):0}else return!1}}function qo(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Z6e(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=qo(e)}else if(e.parentNode&&!Tb(e))t=vi(e),e=e.parentNode;else return null}}function q6e(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Tb(e))t=vi(e)+1,e=e.parentNode;else return null}}function Q6e(e,t,n){for(let r=t==0,i=t==qo(e);r||i;){if(e==n)return!0;let s=vi(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==qo(e)}}function Tb(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const u7=function(e){return e.focusNode&&jh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function wu(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function J6e(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function ege(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(qo(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(qo(r.startContainer),r.startOffset)}}}const rc=typeof navigator<"u"?navigator:null,OL=typeof document<"u"?document:null,L0=rc&&rc.userAgent||"",zk=/Edge\/(\d+)/.exec(L0),wX=/MSIE \d/.exec(L0),Hk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(L0),$s=!!(wX||Hk||zk),p0=wX?document.documentMode:Hk?+Hk[1]:zk?+zk[1]:0,ta=!$s&&/gecko\/(\d+)/i.test(L0);ta&&+(/Firefox\/(\d+)/.exec(L0)||[0,0])[1];const Vk=!$s&&/Chrome\/(\d+)/.exec(L0),Ei=!!Vk,EX=Vk?+Vk[1]:0,Ki=!$s&&!!rc&&/Apple Computer/.test(rc.vendor),e6=Ki&&(/Mobile\/\w+/.test(L0)||!!rc&&rc.maxTouchPoints>2),Ko=e6||(rc?/Mac/.test(rc.platform):!1),SX=rc?/Win/.test(rc.platform):!1,uf=/Android \d/.test(L0),Ib=!!OL&&"webkitFontSmoothing"in OL.documentElement.style,tge=Ib?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function nge(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Nc(e,t){return typeof e=="number"?e:e[t]}function rge(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function jL(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=Jm(o);continue}let a=o,l=a==s.body,f=l?nge(s):rge(a),c=0,d=0;if(t.top<f.top+Nc(r,"top")?d=-(f.top-t.top+Nc(i,"top")):t.bottom>f.bottom-Nc(r,"bottom")&&(d=t.bottom-t.top>f.bottom-f.top?t.top+Nc(i,"top")-f.top:t.bottom-f.bottom+Nc(i,"bottom")),t.left<f.left+Nc(r,"left")?c=-(f.left-t.left+Nc(i,"left")):t.right>f.right-Nc(r,"right")&&(c=t.right-f.right+Nc(i,"right")),c||d)if(l)s.defaultView.scrollBy(c,d);else{let h=a.scrollLeft,g=a.scrollTop;d&&(a.scrollTop+=d),c&&(a.scrollLeft+=c);let U=a.scrollLeft-h,y=a.scrollTop-g;t={left:t.left-U,top:t.top-y,right:t.right-U,bottom:t.bottom-y}}let u=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(u))break;o=u=="absolute"?o.offsetParent:Jm(o)}}function ige(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let a=e.root.elementFromPoint(s,o);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:kX(e.dom)}}function kX(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Jm(r));return t}function sge({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;CX(n,r==0?0:r-t)}function CX(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let V1=null;function oge(e){if(e.setActive)return e.setActive();if(V1)return e.focus(V1);let t=kX(e);e.focus(V1==null?{get preventScroll(){return V1={preventScroll:!0},!0}}:void 0),V1||(V1=!1,CX(t,0))}function MX(e,t){let n,r=2e8,i,s=0,o=t.top,a=t.top,l,f;for(let c=e.firstChild,d=0;c;c=c.nextSibling,d++){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=$c(c).getClientRects();else continue;for(let h=0;h<u.length;h++){let g=u[h];if(g.top<=o&&g.bottom>=a){o=Math.max(g.bottom,o),a=Math.min(g.top,a);let U=g.left>t.left?g.left-t.left:g.right<t.left?t.left-g.right:0;if(U<r){n=c,r=U,i=U&&n.nodeType==3?{left:g.right<t.left?g.right:g.left,top:t.top}:t,c.nodeType==1&&U&&(s=d+(t.left>=(g.left+g.right)/2?1:0));continue}}else g.top>t.top&&!l&&g.left<=t.left&&g.right>=t.left&&(l=c,f={left:Math.max(g.left,Math.min(g.right,t.left)),top:g.top});!n&&(t.left>=g.right&&t.top>=g.top||t.left>=g.left&&t.top>=g.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=f,r=0),n&&n.nodeType==3?age(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:MX(n,i)}function age(e,t){let n=e.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let o=Ed(r,1);if(o.top!=o.bottom&&kA(t,o)){i={node:e,offset:s+(t.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:e,offset:0}}function kA(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function lge(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function cge(e,t,n){let{node:r,offset:i}=MX(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function fge(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let a=e.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function AX(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let f=a[l];if(kA(t,f))return AX(o,t,f)}}if((s=(s+1)%r)==i)break}return e}function dge(e,t){let n=e.dom.ownerDocument,r,i=0,s=ege(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let f=e.dom.getBoundingClientRect();if(!kA(t,f)||(o=AX(e.dom,t,f),!o))return null}if(Ki)for(let f=o;r&&f;f=Jm(f))f.draggable&&(r=void 0);if(o=lge(o,t),r){if(ta&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let f;Ib&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=fge(e,r,i,t))}a==null&&(a=cge(e,o,t));let l=e.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function BL(e){return e.top<e.bottom||e.left<e.right}function Ed(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(BL(r))return r}return Array.prototype.find.call(n,BL)||e.getBoundingClientRect()}const uge=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function TX(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=Ib||ta;if(r.nodeType==3)if(o&&(uge.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Ed($c(r,i,i),n);if(ta&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=Ed($c(r,i-1,i-1),-1);if(f.top==l.top){let c=Ed($c(r,i,i+1),-1);if(c.top!=l.top)return Cg(c,c.left<f.left)}}return l}else{let l=i,f=i,c=n<0?1:-1;return n<0&&!i?(f++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:f++,Cg(Ed($c(r,l,f),c),c<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==qo(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Yw(l.getBoundingClientRect(),!1)}if(s==null&&i<qo(r)){let l=r.childNodes[i];if(l.nodeType==1)return Yw(l.getBoundingClientRect(),!0)}return Yw(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==qo(r))){let l=r.childNodes[i-1],f=l.nodeType==3?$c(l,qo(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(f)return Cg(Ed(f,1),!1)}if(s==null&&i<qo(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let f=l?l.nodeType==3?$c(l,0,o?0:1):l.nodeType==1?l:null:null;if(f)return Cg(Ed(f,-1),!0)}return Cg(Ed(r.nodeType==3?$c(r):r,-n),n>=0)}function Cg(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Yw(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function IX(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function hge(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return IX(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=TX(e,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=$c(a,0,a.nodeValue.length).getClientRects();else continue;for(let f=0;f<l.length;f++){let c=l[f];if(c.bottom>c.top+1&&(n=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const pge=/[\u0590-\u08ac]/;function mge(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=e.domSelection();return a?!pge.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:IX(e,t,()=>{let{focusNode:l,focusOffset:f,anchorNode:c,anchorOffset:d}=e.domSelectionRange(),u=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:g,focusOffset:U}=e.domSelectionRange(),y=g&&!h.contains(g.nodeType==1?g:g.parentNode)||l==g&&f==U;try{a.collapse(c,d),l&&(l!=c||f!=d)&&a.extend&&a.extend(l,f)}catch{}return u!=null&&(a.caretBidiLevel=u),y}):r.pos==r.start()||r.pos==r.end()}let FL=null,$L=null,zL=!1;function gge(e,t,n){return FL==t&&$L==n?zL:(FL=t,$L=n,zL=n=="up"||n=="down"?hge(e,t,n):mge(e,t,n))}const na=0,HL=1,Pu=2,ic=3;class Nb{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=na,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>vi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>t||o instanceof RX){i=t-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof NX&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?vi(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?vi(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],f=o+l.size;if(i==-1&&t<=f){let c=o+l.border;if(t>=c&&n<=f-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,c);t=o;for(let d=a;d>0;d--){let u=this.children[d-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){i=vi(u.dom)+1;break}t-=u.size}i==-1&&(i=0)}if(i>-1&&(f>n||a==this.children.length-1)){n=f;for(let c=a+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=vi(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=f}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let h=0,g=0;h<this.children.length;h++){let U=this.children[h],y=g+U.size;if(s>g&&o<y)return U.setSelection(t-g-U.border,n-g-U.border,r,i);g=y}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((ta||Ki)&&t==n){let{node:h,offset:g}=a;if(h.nodeType==3){if(d=!!(g&&h.nodeValue[g-1]==`
`),d&&g==h.nodeValue.length)for(let U=h,y;U;U=U.parentNode){if(y=U.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:vi(y)+1});break}let x=U.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let U=h.childNodes[g-1];d=U&&(U.nodeName=="BR"||U.contentEditable=="false")}}if(ta&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&Ki)&&jh(a.node,a.offset,c.anchorNode,c.anchorOffset)&&jh(l.node,l.offset,c.focusNode,c.focusOffset))return;let u=!1;if((f.extend||t==n)&&!(d&&ta)){f.collapse(a.node,a.offset);try{t!=n&&f.extend(l.node,l.offset),u=!0}catch{}}if(!u){if(t>n){let g=a;a=l,l=g}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let a=r+s.border,l=o-s.border;if(t>=a&&n<=l){this.dirty=t==r||n==o?Pu:HL,t==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ic:s.markDirty(t-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Pu:ic}r=o}this.dirty=Pu}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Pu:HL;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class NX extends Nb{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==na&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class bge extends Nb{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Bh extends Nb{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=s1.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Bh(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ic||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=ic&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=na){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=na}}slice(t,n,r){let i=Bh.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Gk(s,n,o,r)),t>0&&(s=Gk(s,0,t,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class m0 extends Nb{constructor(t,n,r,i,s,o,a,l,f){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(t,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,f=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=f&&f.dom,d=f&&f.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=s1.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let u=c;return c=DX(c,r,n),f?l=new Uge(t,n,r,i,c,d||null,u,f,s,o+1):n.isText?new h7(t,n,r,i,c,u,s):new m0(t,n,r,i,c,d||null,u,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Ae.empty)}return t}matchesNode(t,n,r){return this.dirty==na&&t.eq(this.node)&&X3(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new xge(this,o&&o.node,t);Ege(this.node,this.innerDeco,(f,c,d)=>{f.spec.marks?l.syncToMarks(f.spec.marks,r,t,c):f.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?wn.none:this.node.child(c).marks,r,t,c),l.placeWidget(f,t,i)},(f,c,d,u)=>{l.syncToMarks(f.marks,r,t,u);let h;l.findNodeMatch(f,c,d,u)||a&&t.state.selection.from>i&&t.state.selection.to<i+f.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(f,c,d,h,t)||l.updateNextNode(f,c,d,t,u,i)||l.addNode(f,c,d,t,i),i+=f.nodeSize}),l.syncToMarks([],r,t,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Pu)&&(o&&this.protectLocalComposition(t,o),_X(this.contentDOM,this.children,t),e6&&Sge(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof St)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=kge(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new bge(this,s,n,i);t.input.compositionNodes.push(o),this.children=Gk(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==ic||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=na}updateOuterDeco(t){if(X3(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=PX(this.dom,this.nodeDOM,Wk(this.outerDeco,this.node,n),Wk(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function VL(e,t,n,r,i){DX(r,t,e);let s=new m0(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class h7 extends m0{constructor(t,n,r,i,s,o,a){super(t,n,r,i,s,null,o,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==ic||this.dirty!=na&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=na||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=na,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new h7(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ic)}get domAtom(){return!1}isText(t){return this.node.text==t}}class RX extends Nb{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==na&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Uge extends m0{constructor(t,n,r,i,s,o,a,l,f,c){super(t,n,r,i,s,o,a,f,c),this.spec=l}update(t,n,r,i){if(this.dirty==ic)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function _X(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=r;)r=WL(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(o instanceof Bh){let l=r?r.previousSibling:e.lastChild;_X(o.contentDOM,o.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=WL(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const k5=function(e){e&&(this.nodeName=e)};k5.prototype=Object.create(null);const Du=[new k5];function Wk(e,t,n){if(e.length==0)return Du;let r=n?Du[0]:new k5,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new k5(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new k5(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function PX(e,t,n,r){if(n==Du&&r==Du)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Du[0]),i=l}yge(i,a||Du[0],o)}return i}function yge(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function DX(e,t,n){return PX(e,e,Du,Wk(t,n,e.nodeType!=1))}function X3(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function WL(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class xge{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=vge(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r,i){let s=0,o=this.stack.length>>1,a=Math.min(o,t.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=na,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let l=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let c=this.index;c<f;c++){let d=this.top.children[c];if(d.matchesMark(t[o])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=Bh.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let f=this.top.children[a];if(f.matchesNode(t,n,r)&&!this.preMatch.matched.has(f)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==ic&&o.dom==o.contentDOM&&(o.dirty=Pu),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof m0){let f=this.preMatch.matched.get(l);if(f!=null&&f!=s)return!1;let c=l.dom,d,u=this.isLocked(c)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=ic&&X3(n,l.outerDeco));if(!u&&l.update(t,n,r,i))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!u&&(d=this.recreateWrapper(l,t,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Pu,d.updateChildren(i,o+1),d.dirty=na),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!X3(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let a=m0.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,i,s){let o=m0.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new NX(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Bh;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof h7)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Ki||Ei)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new RX(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function vge(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let f=n.children[r-1];if(f instanceof Bh)n=f,r=f.children.length;else{a=f,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function wge(e,t){return e.type.side-t.type.side}function Ege(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let f=0;f<e.childCount;f++){let c=e.child(f);r(c,i,t.forChild(s,c),f),s+=c.nodeSize}return}let o=0,a=[],l=null;for(let f=0;;){let c,d;for(;o<i.length&&i[o].to==s;){let y=i[o++];y.widget&&(c?(d||(d=[c])).push(y):c=y)}if(c)if(d){d.sort(wge);for(let y=0;y<d.length;y++)n(d[y],f,!!l)}else n(c,f,!!l);let u,h;if(l)h=-1,u=l,l=null;else if(f<e.childCount)h=f,u=e.child(f++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let g=s+u.nodeSize;if(u.isText){let y=g;o<i.length&&i[o].from<y&&(y=i[o].from);for(let x=0;x<a.length;x++)a[x].to<y&&(y=a[x].to);y<g&&(l=u.cut(y-s),u=u.cut(0,y-s),g=y,h=-1)}else for(;o<i.length&&i[o].to<g;)o++;let U=u.isInline&&!u.isLeaf?a.filter(y=>!y.inline):a.slice();r(u,U,t.forChild(s,u),h),s=g}}function Sge(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function kge(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let f=e.child(i++);if(s+=f.nodeSize,!f.isText)break;l+=f.text}if(s>=n){if(s>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let f=a<r?l.lastIndexOf(t,r-a-1):-1;if(f>=0&&f+t.length+a>=n)return a+f;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function Gk(e,t,n,r,i){let s=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],f=a,c=a+=l.size;f>=n||c<=t?s.push(l):(f<t&&s.push(l.slice(0,t-f,r)),i&&(s.push(i),i=void 0),c>n&&s.push(l.slice(n-f,l.size,r)))}return s}function CA(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,f;if(u7(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&lt.isSelectable(d)&&i.parent&&!(d.isInline&&Q6e(n.focusNode,n.focusOffset,i.dom))){let u=i.posBefore;f=new lt(o==u?a:r.resolve(u))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,u=o;for(let h=0;h<n.rangeCount;h++){let g=n.getRangeAt(h);d=Math.min(d,e.docView.posFromDOM(g.startContainer,g.startOffset,1)),u=Math.max(u,e.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[l,o]=u==e.state.selection.anchor?[u,d]:[d,u],a=r.resolve(o)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let c=r.resolve(l);if(!f){let d=t=="pointer"||e.state.selection.head<a.pos&&!s?1:-1;f=MA(e,c,a,d)}return f}function LX(e){return e.editable?e.hasFocus():jX(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Uf(e,t=!1){let n=e.state.selection;if(OX(e,n),!!LX(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Ei){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&jh(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)Mge(e);else{let{anchor:r,head:i}=n,s,o;GL&&!(n instanceof St)&&(n.$from.parent.inlineContent||(s=XL(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=XL(e,n.to))),e.docView.setSelection(r,i,e,t),GL&&(s&&KL(s),o&&KL(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Cge(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const GL=Ki||Ei&&EX<63;function XL(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ki&&i&&i.contentEditable=="false")return Zw(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Zw(i);if(s)return Zw(s)}}function Zw(e){return e.contentEditable="true",Ki&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function KL(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Cge(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!LX(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function Mge(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,vi(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&$s&&p0<=11&&(n.disabled=!0,n.disabled=!1)}function OX(e,t){if(t instanceof lt){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(YL(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else YL(e)}function YL(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function MA(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||St.between(t,n,r)}function ZL(e){return e.editable&&!e.hasFocus()?!1:jX(e)}function jX(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Age(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return jh(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Xk(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Pt.findFrom(s,t)}function Td(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function qL(e,t,n){let r=e.state.selection;if(r instanceof St)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Td(e,new St(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=Xk(e.state,t);return i&&i instanceof lt?Td(e,i):!1}else if(!(Ko&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(a))&&!o.contentDOM?lt.isSelectable(s)?Td(e,new lt(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):Ib?Td(e,new St(e.state.doc.resolve(t<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof lt&&r.node.isInline)return Td(e,new St(t>0?r.$to:r.$from));{let i=Xk(e.state,t);return i?Td(e,i):!1}}}function K3(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function C5(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function W1(e,t){return t<0?Tge(e):Ige(e)}function Tge(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(ta&&n.nodeType==1&&r<K3(n)&&C5(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(C5(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(BX(n))break;{let a=n.previousSibling;for(;a&&C5(a,-1);)i=n.parentNode,s=vi(a),a=a.previousSibling;if(a)n=a,r=K3(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?Kk(e,n,r):i&&Kk(e,i,s)}function Ige(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=K3(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(C5(a,1))s=n,o=++r;else break}else{if(BX(n))break;{let a=n.nextSibling;for(;a&&C5(a,1);)s=a.parentNode,o=vi(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=K3(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&Kk(e,s,o)}function BX(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Nge(e,t){for(;e&&t==e.childNodes.length&&!Tb(e);)t=vi(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function Rge(e,t){for(;e&&!t&&!Tb(e);)t=vi(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function Kk(e,t,n){if(t.nodeType!=3){let s,o;(o=Nge(t,n))?(t=o,n=0):(s=Rge(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(u7(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Uf(e)},50)}function QL(e,t){let n=e.state.doc.resolve(t);if(!(Ei||SX)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function JL(e,t,n){let r=e.state.selection;if(r instanceof St&&!r.empty||n.indexOf("s")>-1||Ko&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=Xk(e.state,t);if(o&&o instanceof lt)return Td(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,a=r instanceof ea?Pt.near(o,t):Pt.findFrom(o,t);return a?Td(e,a):!1}return!1}function eO(e,t){if(!(e.state.selection instanceof St))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function tO(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function _ge(e){if(!Ki||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;tO(e,r,"true"),setTimeout(()=>tO(e,r,"false"),20)}return!1}function Pge(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Dge(e,t){let n=t.keyCode,r=Pge(t);if(n==8||Ko&&n==72&&r=="c")return eO(e,-1)||W1(e,-1);if(n==46&&!t.shiftKey||Ko&&n==68&&r=="c")return eO(e,1)||W1(e,1);if(n==13||n==27)return!0;if(n==37||Ko&&n==66&&r=="c"){let i=n==37?QL(e,e.state.selection.from)=="ltr"?-1:1:-1;return qL(e,i,r)||W1(e,i)}else if(n==39||Ko&&n==70&&r=="c"){let i=n==39?QL(e,e.state.selection.from)=="ltr"?1:-1:1;return qL(e,i,r)||W1(e,i)}else{if(n==38||Ko&&n==80&&r=="c")return JL(e,-1,r)||W1(e,-1);if(n==40||Ko&&n==78&&r=="c")return _ge(e)||JL(e,1,r)||W1(e,1);if(r==(Ko?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function AA(e,t){e.someProp("transformCopied",h=>{t=h(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=e.someProp("clipboardSerializer")||s1.fromSchema(e.state.schema),a=WX(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let f=l.firstChild,c,d=0;for(;f&&f.nodeType==1&&(c=VX[f.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let g=a.createElement(c[h]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),d++}f=l.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let u=e.someProp("clipboardTextSerializer",h=>h(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:u,slice:t}}function FX(e,t,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!t)return null;let l=!!t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",u=>{t=u(t,s||r,e)}),s)return a=new We(Ae.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",u=>{a=u(a,e,!0)}),a;let d=e.someProp("clipboardTextParser",u=>u(t,i,r,e));if(d)a=d;else{let u=i.marks(),{schema:h}=e.state,g=s1.fromSchema(h);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(U=>{let y=o.appendChild(document.createElement("p"));U&&y.appendChild(g.serializeNode(h.text(U,u)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),o=Bge(n),Ib&&Fge(o);let f=o&&o.querySelector("[data-pm-slice]"),c=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let u=o.firstChild;for(;u&&u.nodeType!=1;)u=u.nextSibling;if(!u)break;o=u}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||E5.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(u){return u.nodeName=="BR"&&!u.nextSibling&&u.parentNode&&!Lge.test(u.parentNode.nodeName)?{ignore:!0}:null}})),c)a=$ge(nO(a,+c[1],+c[2]),c[4]);else if(a=We.maxOpen(Oge(a.content,i),!0),a.openStart||a.openEnd){let d=0,u=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;u<a.openEnd&&!h.type.spec.isolating;u++,h=h.lastChild);a=nO(a,d,u)}return e.someProp("transformPasted",d=>{a=d(a,e,l)}),a}const Lge=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Oge(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),f;if(!l)return o=null;if(f=o.length&&s.length&&zX(l,s,a,o[o.length-1],0))o[o.length-1]=f;else{o.length&&(o[o.length-1]=HX(o[o.length-1],s.length));let c=$X(a,l);o.push(c),i=i.matchType(c.type),s=l}}),o)return Ae.from(o)}return e}function $X(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Ae.from(e));return e}function zX(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=zX(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(Ae.from($X(n,e,i+1))))}}function HX(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,HX(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Ae.empty,!0);return e.copy(n.append(r))}function Yk(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(s=0),i<r-1&&(a=Yk(a,t,n,r,i+1,s)),i>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ae.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function nO(e,t,n){return t<e.openStart&&(e=new We(Yk(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new We(Yk(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const VX={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let rO=null;function WX(){return rO||(rO=document.implementation.createHTMLDocument("title"))}let qw=null;function jge(e){let t=window.trustedTypes;return t?(qw||(qw=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),qw.createHTML(e)):e}function Bge(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=WX().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&VX[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=jge(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Fge(e){let t=e.querySelectorAll(Ei?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function $ge(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Ae.from(l.create(r[a+1],i)),s++,o++}return new We(i,s,o)}const hs={},ps={},zge={touchstart:!0,touchmove:!0};class Hge{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Vge(e){for(let t in hs){let n=hs[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{Gge(e,r)&&!TA(e,r)&&(e.editable||!(r.type in ps))&&n(e,r)},zge[t]?{passive:!0}:void 0)}Ki&&e.dom.addEventListener("input",()=>null),Zk(e)}function s0(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Wge(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function Zk(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>TA(e,r))})}function TA(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function Gge(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Xge(e,t){!TA(e,t)&&hs[t.type]&&(e.editable||!(t.type in ps))&&hs[t.type](e,t)}ps.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!XX(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(uf&&Ei&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),e6&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,wu(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||Dge(e,n)?n.preventDefault():s0(e,"key")};ps.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};ps.keypress=(e,t)=>{let n=t;if(XX(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ko&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof St)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function p7(e){return{left:e.clientX,top:e.clientY}}function Kge(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function IA(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,a=>o>s.depth?a(e,n,s.nodeAfter,s.before(o),i,!0):a(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function zp(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function Yge(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&lt.isSelectable(r)?(zp(e,new lt(n)),!0):!1}function Zge(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof lt&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(lt.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(zp(e,lt.create(e.state.doc,i)),!0):!1}function qge(e,t,n,r,i){return IA(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?Zge(e,n):Yge(e,n))}function Qge(e,t,n,r){return IA(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function Jge(e,t,n,r){return IA(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||e5e(e,n,r)}function e5e(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(zp(e,St.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)zp(e,St.create(r,a+1,a+1+o.content.size));else if(lt.isSelectable(o))zp(e,lt.create(r,a));else continue;return!0}}function NA(e){return Y3(e)}const GX=Ko?"metaKey":"ctrlKey";hs.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=NA(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&Kge(n,e.input.lastClick)&&!n[GX]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(p7(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new t5e(e,o,n,!!r)):(s=="doubleClick"?Qge:Jge)(e,o.pos,o.inside,n)?n.preventDefault():s0(e,"pointer"))};class t5e{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[GX],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let c=t.state.doc.resolve(n.pos);s=c.parent,o=c.depth?c.before():0}const a=i?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:f}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof lt&&f.from<=o&&f.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ta&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),s0(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Uf(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(p7(t))),this.updateAllowDefault(t),this.allowDefault||!n?s0(this.view,"pointer"):qge(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Ki&&this.mightDrag&&!this.mightDrag.node.isAtom||Ei&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(zp(this.view,Pt.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):s0(this.view,"pointer")}move(t){this.updateAllowDefault(t),s0(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}hs.touchstart=e=>{e.input.lastTouch=Date.now(),NA(e),s0(e,"pointer")};hs.touchmove=e=>{e.input.lastTouch=Date.now(),s0(e,"pointer")};hs.contextmenu=e=>NA(e);function XX(e,t){return e.composing?!0:Ki&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const n5e=uf?5e3:-1;ps.compositionstart=ps.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof St&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ei&&SX&&r5e(e)))e.markCursor=e.state.storedMarks||n.marks(),Y3(e,!0),e.markCursor=null;else if(Y3(e,!t.selection.empty),ta&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=e.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}KX(e,n5e)};function r5e(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}ps.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.badSafariComposition?e.domObserver.forceFlush():e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,KX(e,20))};function KX(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Y3(e),t))}function YX(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=s5e());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function i5e(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Z6e(t.focusNode,t.focusOffset),r=q6e(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function s5e(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Y3(e,t=!1){if(!(uf&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),YX(e),t||e.docView&&e.docView.dirty){let n=CA(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function o5e(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const v2=$s&&p0<15||e6&&tge<604;hs.copy=ps.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=v2?null:n.clipboardData,o=r.content(),{dom:a,text:l}=AA(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):o5e(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function a5e(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function l5e(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?w2(e,r.value,null,i,t):w2(e,r.textContent,r.innerHTML,i,t)},50)}function w2(e,t,n,r,i){let s=FX(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,s||We.empty)))return!0;if(!s)return!1;let o=a5e(s),a=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ZX(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ps.paste=(e,t)=>{let n=t;if(e.composing&&!uf)return;let r=v2?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&w2(e,ZX(r),r.getData("text/html"),i,n)?n.preventDefault():l5e(e,n)};class qX{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const c5e=Ko?"altKey":"ctrlKey";function QX(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[c5e]}hs.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(p7(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof lt?i.to-1:i.to))){if(r&&r.mightDrag)o=lt.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(o=lt.create(e.state.doc,d.posBefore))}}let a=(o||e.state.selection).content(),{dom:l,text:f,slice:c}=AA(e,a);(!n.dataTransfer.files.length||!Ei||EX>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(v2?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",v2||n.dataTransfer.setData("text/plain",f),e.dragging=new qX(c,QX(e,n),o)};hs.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};ps.dragover=ps.dragenter=(e,t)=>t.preventDefault();ps.drop=(e,t)=>{try{f5e(e,t,e.dragging)}finally{e.dragging=null}};function f5e(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(p7(t));if(!r)return;let i=e.state.doc.resolve(r.pos),s=n&&n.slice;s?e.someProp("transformPasted",h=>{s=h(s,e,!1)}):s=FX(e,ZX(t.dataTransfer),v2?null:t.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&QX(e,t));if(e.someProp("handleDrop",h=>h(e,t,s||We.empty,o))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?lX(e.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=e.state.tr;if(o){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let f=l.mapping.map(a),c=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=l.doc;if(c?l.replaceRangeWith(f,f,s.content.firstChild):l.replaceRange(f,f,s),l.doc.eq(d))return;let u=l.doc.resolve(f);if(c&&lt.isSelectable(s.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new lt(u));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((g,U,y,x)=>h=x),l.setSelection(MA(e,u,l.doc.resolve(h)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}hs.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Uf(e)},20))};hs.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};hs.beforeinput=(e,t)=>{if(Ei&&uf&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,wu(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in ps)hs[e]=ps[e];function E2(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Z3{constructor(t,n){this.toDOM=t,this.spec=n||bh,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new us(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Z3&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&E2(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class g0{constructor(t,n){this.attrs=t,this.spec=n||bh}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new us(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof g0&&E2(this.attrs,t.attrs)&&E2(this.spec,t.spec)}static is(t){return t.type instanceof g0}destroy(){}}class RA{constructor(t,n){this.attrs=t,this.spec=n||bh}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new us(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof RA&&E2(this.attrs,t.attrs)&&E2(this.spec,t.spec)}destroy(){}}class us{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new us(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new us(t,t,new Z3(n,r))}static inline(t,n,r,i){return new us(t,n,new g0(r,i))}static node(t,n,r,i){return new us(t,n,new RA(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof g0}get widget(){return this.type instanceof Z3}}const cp=[],bh={};class Qn{constructor(t,n){this.local=t.length?t:cp,this.children=n.length?n:cp}static create(t,n){return n.length?q3(n,t,0,bh):Oi}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=t&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let a=this.children[o]+1;this.children[o+2].findInner(t-a,n-a,r,i+a,s)}}map(t,n,r){return this==Oi||t.maps.length==0?this:this.mapInner(t,n,0,0,r||bh)}mapInner(t,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?d5e(this.children,o||[],t,n,r,i,s):o?new Qn(o.sort(Uh),cp):Oi}add(t,n){return n.length?this==Oi?Qn.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((a,l)=>{let f=l+r,c;if(c=eK(n,a,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,c,f+1):i.splice(s,0,l,l+a.nodeSize,q3(c,a,f+1,bh)),s+=3}});let o=JX(s?tK(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||o.splice(a--,1);return new Qn(o.length?this.local.concat(o).sort(Uh):this.local,i||this.children)}remove(t){return t.length==0||this==Oi?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let c=0,d;c<t.length;c++)(d=t[c])&&d.from>a&&d.to<l&&(t[c]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(o,a+1);f!=Oi?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Qn(i,r):Oi}forChild(t,n){if(this==Oi)return this;if(n.isLeaf)return Qn.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let s=t+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof g0){let f=Math.max(s,l.from)-s,c=Math.min(o,l.to)-s;f<c&&(i||(i=[])).push(l.copy(f,c))}}if(i){let a=new Qn(i.sort(Uh),cp);return r?new Ld([a,r]):a}return r||Oi}eq(t){if(this==t)return!0;if(!(t instanceof Qn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return _A(this.localsInner(t))}localsInner(t){if(this==Oi)return cp;if(t.inlineContent||!this.local.some(g0.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof g0||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Qn.empty=new Qn([],[]);Qn.removeOverlap=_A;const Oi=Qn.empty;class Ld{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,bh));return Ld.from(r)}forChild(t,n){if(n.isLeaf)return Qn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=Oi&&(s instanceof Ld?r=r.concat(s.members):r.push(s))}return Ld.from(r)}eq(t){if(!(t instanceof Ld)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?_A(r?n:n.sort(Uh)):cp}static from(t){switch(t.length){case 0:return Oi;case 1:return t[0];default:return new Ld(t.every(n=>n instanceof Qn)?t:t.reduce((n,r)=>n.concat(r instanceof Qn?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function d5e(e,t,n,r,i,s,o){let a=e.slice();for(let f=0,c=s;f<n.maps.length;f++){let d=0;n.maps[f].forEach((u,h,g,U)=>{let y=U-g-(h-u);for(let x=0;x<a.length;x+=3){let w=a[x+1];if(w<0||u>w+c-d)continue;let E=a[x]+c-d;h>=E?a[x+1]=u<=E?-2:-1:u>=c&&y&&(a[x]+=y,a[x+1]+=y)}d+=y}),c=n.maps[f].map(c,-1)}let l=!1;for(let f=0;f<a.length;f+=3)if(a[f+1]<0){if(a[f+1]==-2){l=!0,a[f+1]=-1;continue}let c=n.map(e[f]+s),d=c-i;if(d<0||d>=r.content.size){l=!0;continue}let u=n.map(e[f+1]+s,-1),h=u-i,{index:g,offset:U}=r.content.findIndex(d),y=r.maybeChild(g);if(y&&U==d&&U+y.nodeSize==h){let x=a[f+2].mapInner(n,y,c+1,e[f]+s+1,o);x!=Oi?(a[f]=d,a[f+1]=h,a[f+2]=x):(a[f+1]=-2,l=!0)}else l=!0}if(l){let f=u5e(a,e,t,n,i,s,o),c=q3(f,r,0,o);t=c.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,u=0;d<c.children.length;d+=3){let h=c.children[d];for(;u<a.length&&a[u]<h;)u+=3;a.splice(u,0,c.children[d],c.children[d+1],c.children[d+2])}}return new Qn(t.sort(Uh),a)}function JX(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new us(i.from+t,i.to+t,i.type))}return n}function u5e(e,t,n,r,i,s,o){function a(l,f){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(r,i,f);d?n.push(d):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+f+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+s+1);return n}function eK(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function tK(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function q3(e,t,n,r){let i=[],s=!1;t.forEach((a,l)=>{let f=eK(e,a,l+n);if(f){s=!0;let c=q3(f,a,n+l+1,r);c!=Oi&&i.push(l,l+a.nodeSize,c)}});let o=JX(s?tK(e):e,-n).sort(Uh);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Qn(o,i):Oi}function Uh(e,t){return e.from-t.from||e.to-t.to}function _A(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),iO(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),iO(t,i,r.copy(s.from,r.to)));break}}}return t}function iO(e,t,n){for(;t<e.length&&Uh(n,e[t])>0;)t++;e.splice(t,0,n)}function Qw(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Oi&&t.push(r)}),e.cursorWrapper&&t.push(Qn.create(e.state.doc,[e.cursorWrapper.deco])),Ld.from(t)}const h5e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},p5e=$s&&p0<=11;class m5e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class g5e{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new m5e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);$s&&p0<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Ki&&t.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(t.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),p5e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,h5e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ZL(this.view)){if(this.suppressingSelectionUpdates)return Uf(this.view);if($s&&p0<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&jh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Jm(s))n.add(s);for(let s=t.anchorNode;s;s=Jm(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ZL(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(l.some(c=>c.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let c of l)if(c.nodeName=="BR"&&c.parentNode){let d=c.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&c.parentNode.removeChild(c)}}else if(ta&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,u]=c;d.parentNode&&d.parentNode.parentNode==u.parentNode?u.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let u of c){let h=u.parentNode;h&&h.nodeName=="LI"&&(!d||y5e(t,d)!=h)&&u.remove()}}}let f=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&u7(r)&&(f=CA(t))&&f.eq(Pt.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Uf(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),b5e(t)),t.input.badSafariComposition&&(t.input.badSafariComposition=!1,x5e(t,l)),this.handleDOMChange(s,o,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Uf(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++){let d=t.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if($s&&p0<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:d,nextSibling:u}=t.addedNodes[c];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(s=u)}let o=i&&i.parentNode==t.target?vi(i)+1:0,a=r.localPosFromDOM(t.target,o,-1),l=s&&s.parentNode==t.target?vi(s):t.target.childNodes.length,f=r.localPosFromDOM(t.target,l,1);return{from:a,to:f}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let sO=new WeakMap,oO=!1;function b5e(e){if(!sO.has(e)&&(sO.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=ta,oO)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),oO=!0}}function aO(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return jh(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function U5e(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return aO(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?aO(e,n):null}function y5e(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function x5e(e,t){var n;let{focusNode:r,focusOffset:i}=e.domSelectionRange();for(let s of t)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(s,a.firstChild),r==s&&e.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function v5e(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),f,c=l.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(f=[{node:c,offset:l.anchorOffset}],u7(l)||f.push({node:l.focusNode,offset:l.focusOffset})),Ei&&e.input.lastKeyCode===8)for(let y=s;y>i;y--){let x=r.childNodes[y-1],w=x.pmViewDesc;if(x.nodeName=="BR"&&!w){s=y;break}if(!w||w.size)break}let d=e.state.doc,u=e.someProp("domParser")||E5.fromSchema(e.state.schema),h=d.resolve(o),g=null,U=u.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:w5e,context:h});if(f&&f[0].pos!=null){let y=f[0].pos,x=f[1]&&f[1].pos;x==null&&(x=y),g={anchor:y+o,head:x+o}}return{doc:U,sel:g,from:o,to:a}}function w5e(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Ki&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Ki&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const E5e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function S5e(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let C=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,I=CA(e,C);if(I&&!e.state.selection.eq(I)){if(Ei&&uf&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",L=>L(e,wu(13,"Enter"))))return;let R=e.state.tr.setSelection(I);C=="pointer"?R.setMeta("pointer",!0):C=="key"&&R.scrollIntoView(),s&&R.setMeta("composition",s),e.dispatch(R)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(n);t=o.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,f=v5e(e,t,n),c=e.state.doc,d=c.slice(f.from,f.to),u,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(u=e.state.selection.to,h="end"):(u=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let g=M5e(d.content,f.doc.content,f.from,u,h);if(g&&e.input.domChangeCount++,(e6&&e.input.lastIOSEnter>Date.now()-225||uf)&&i.some(C=>C.nodeType==1&&!E5e.test(C.nodeName))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",C=>C(e,wu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!g)if(r&&l instanceof St&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(f.sel){let C=lO(e,e.state.doc,f.sel);if(C&&!C.eq(e.state.selection)){let I=e.state.tr.setSelection(C);s&&I.setMeta("composition",s),e.dispatch(I)}}return}e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof St&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=f.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=f.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),$s&&p0<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>f.from&&f.doc.textBetween(g.start-f.from-1,g.start-f.from+1)==" "&&(g.start--,g.endA--,g.endB--);let U=f.doc.resolveNoCache(g.start-f.from),y=f.doc.resolveNoCache(g.endB-f.from),x=c.resolve(g.start),w=U.sameParent(y)&&U.parent.inlineContent&&x.end()>=g.endA;if((e6&&e.input.lastIOSEnter>Date.now()-225&&(!w||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!w&&U.pos<f.doc.content.size&&(!U.sameParent(y)||!U.parent.inlineContent)&&U.pos<y.pos&&!/\S/.test(f.doc.textBetween(U.pos,y.pos,"","")))&&e.someProp("handleKeyDown",C=>C(e,wu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>g.start&&C5e(c,g.start,g.endA,U,y)&&e.someProp("handleKeyDown",C=>C(e,wu(8,"Backspace")))){uf&&Ei&&e.domObserver.suppressSelectionUpdates();return}Ei&&g.endB==g.start&&(e.input.lastChromeDelete=Date.now()),uf&&!w&&U.start()!=y.start()&&y.parentOffset==0&&U.depth==y.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==g.endA&&(g.endB-=2,y=f.doc.resolveNoCache(g.endB-f.from),setTimeout(()=>{e.someProp("handleKeyDown",function(C){return C(e,wu(13,"Enter"))})},20));let E=g.start,S=g.endA,M=C=>{let I=C||e.state.tr.replace(E,S,f.doc.slice(g.start-f.from,g.endB-f.from));if(f.sel){let R=lO(e,I.doc,f.sel);R&&!(Ei&&e.composing&&R.empty&&(g.start!=g.endB||e.input.lastChromeDelete<Date.now()-100)&&(R.head==E||R.head==I.mapping.map(S)-1)||$s&&R.empty&&R.head==E)&&I.setSelection(R)}return s&&I.setMeta("composition",s),I.scrollIntoView()},A;if(w)if(U.pos==y.pos){$s&&p0<=11&&U.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Uf(e),20));let C=M(e.state.tr.delete(E,S)),I=c.resolve(g.start).marksAcross(c.resolve(g.endA));I&&C.ensureMarks(I),e.dispatch(C)}else if(g.endA==g.endB&&(A=k5e(U.parent.content.cut(U.parentOffset,y.parentOffset),x.parent.content.cut(x.parentOffset,g.endA-x.start())))){let C=M(e.state.tr);A.type=="add"?C.addMark(E,S,A.mark):C.removeMark(E,S,A.mark),e.dispatch(C)}else if(U.parent.child(U.index()).isText&&U.index()==y.index()-(y.textOffset?0:1)){let C=U.parent.textBetween(U.parentOffset,y.parentOffset),I=()=>M(e.state.tr.insertText(C,E,S));e.someProp("handleTextInput",R=>R(e,E,S,C,I))||e.dispatch(I())}else e.dispatch(M());else e.dispatch(M())}function lO(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:MA(e,t.resolve(n.anchor),t.resolve(n.head))}function k5e(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,a,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let f=[];for(let c=0;c<t.childCount;c++)f.push(l(t.child(c)));if(Ae.from(f).eq(e))return{mark:a,type:o}}function C5e(e,t,n,r,i){if(n-t<=i.pos-r.pos||Jw(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==t+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(Jw(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Jw(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Jw(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function M5e(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&e.size<t.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<t.size&&cO(t.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<e.size&&cO(e.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function cO(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class nK{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Hge,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(pO),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=uO(this),dO(this),this.nodeViews=hO(this),this.docView=VL(this.state.doc,fO(this),Qw(this),this.dom,this),this.domObserver=new g5e(this,(r,i,s,o)=>S5e(this,r,i,s,o)),this.domObserver.start(),Vge(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Zk(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(pO),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(YX(this),o=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=hO(this);T5e(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Zk(this),this.editable=uO(this),dO(this);let l=Qw(this),f=fO(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,f,l);(d||!t.selection.eq(i.selection))&&(o=!0);let u=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&ige(this);if(o){this.domObserver.stop();let h=d&&($s||Ei)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&A5e(i.selection,t.selection);if(d){let g=Ei?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=i5e(this)),(s||!this.docView.update(t.doc,f,l,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=VL(t.doc,f,l,this.dom,this)),g&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Age(this))?Uf(this,h):(OX(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():u&&sge(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof lt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&jL(this,n.getBoundingClientRect(),t)}else jL(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new qX(t.slice,t.move,i<0?void 0:lt.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[t];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[t];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if($s){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&oge(this.dom),Uf(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return dge(this,t)}coordsAtPos(t,n=1){return TX(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return gge(this,n||this.state,t)}pasteHTML(t,n){return w2(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return w2(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return AA(this,t)}destroy(){this.docView&&(Wge(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Qw(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,K6e())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Xge(this,t)}domSelectionRange(){let t=this.domSelection();return t?Ki&&this.root.nodeType===11&&J6e(this.dom.ownerDocument)==this.dom&&U5e(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}nK.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function fO(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[us.node(0,e.state.doc.content.size,t)]}function dO(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:us.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function uO(e){return!e.someProp("editable",t=>t(e.state)===!1)}function A5e(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function hO(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function T5e(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function pO(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var S0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Q3={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},I5e=typeof navigator<"u"&&/Mac/.test(navigator.platform),N5e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var wi=0;wi<10;wi++)S0[48+wi]=S0[96+wi]=String(wi);for(var wi=1;wi<=24;wi++)S0[wi+111]="F"+wi;for(var wi=65;wi<=90;wi++)S0[wi]=String.fromCharCode(wi+32),Q3[wi]=String.fromCharCode(wi);for(var eE in S0)Q3.hasOwnProperty(eE)||(Q3[eE]=S0[eE]);function R5e(e){var t=I5e&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||N5e&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Q3:S0)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const _5e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),P5e=typeof navigator<"u"&&/Win/.test(navigator.platform);function D5e(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))_5e?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function L5e(e){let t=Object.create(null);for(let n in e)t[D5e(n)]=e[n];return t}function tE(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function O5e(e){return new ir({props:{handleKeyDown:rK(e)}})}function rK(e){let t=L5e(e);return function(n,r){let i=R5e(r),s,o=t[tE(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=t[tE(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(P5e&&r.ctrlKey&&r.altKey)&&(s=S0[r.keyCode])&&s!=i){let a=t[tE(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var j5e=Object.defineProperty,PA=(e,t)=>{for(var n in t)j5e(e,n,{get:t[n],enumerable:!0})};function m7(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var g7=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,a])=>[o,(...f)=>{const c=a(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!e,l=e||i.tr,f=()=>(!a&&t&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(n).map(([d,u])=>[d,(...g)=>{const U=this.buildProps(l,t),y=u(...g)(U);return o.push(y),c}])),run:f};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...f)=>l(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:m7({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...f)=>l(...f)(o)]))}};return o}},iK={};PA(iK,{blur:()=>B5e,clearContent:()=>F5e,clearNodes:()=>$5e,command:()=>z5e,createParagraphNear:()=>H5e,cut:()=>V5e,deleteCurrentNode:()=>W5e,deleteNode:()=>G5e,deleteRange:()=>X5e,deleteSelection:()=>K5e,enter:()=>Y5e,exitCode:()=>Z5e,extendMarkRange:()=>q5e,first:()=>Q5e,focus:()=>e2e,forEach:()=>t2e,insertContent:()=>n2e,insertContentAt:()=>s2e,joinBackward:()=>l2e,joinDown:()=>a2e,joinForward:()=>c2e,joinItemBackward:()=>f2e,joinItemForward:()=>d2e,joinTextblockBackward:()=>u2e,joinTextblockForward:()=>h2e,joinUp:()=>o2e,keyboardShortcut:()=>m2e,lift:()=>g2e,liftEmptyBlock:()=>b2e,liftListItem:()=>U2e,newlineInCode:()=>y2e,resetAttributes:()=>x2e,scrollIntoView:()=>v2e,selectAll:()=>w2e,selectNodeBackward:()=>E2e,selectNodeForward:()=>S2e,selectParentNode:()=>k2e,selectTextblockEnd:()=>C2e,selectTextblockStart:()=>M2e,setContent:()=>A2e,setMark:()=>K2e,setMeta:()=>Y2e,setNode:()=>Z2e,setNodeSelection:()=>q2e,setTextDirection:()=>Q2e,setTextSelection:()=>J2e,sinkListItem:()=>ebe,splitBlock:()=>tbe,splitListItem:()=>nbe,toggleList:()=>rbe,toggleMark:()=>ibe,toggleNode:()=>sbe,toggleWrap:()=>obe,undoInputRule:()=>abe,unsetAllMarks:()=>lbe,unsetMark:()=>cbe,unsetTextDirection:()=>fbe,updateAttributes:()=>dbe,wrapIn:()=>ube,wrapInList:()=>hbe});var B5e=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),F5e=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),$5e=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:f,mapping:c}=t,d=f.resolve(c.map(l)),u=f.resolve(c.map(l+a.nodeSize)),h=d.blockRange(u);if(!h)return;const g=k6(h);if(a.type.isTextblock){const{defaultType:U}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(h.start,U)}(g||g===0)&&t.lift(h,g)})}),!0},z5e=e=>t=>e(t),H5e=()=>({state:e,dispatch:t})=>P6e(e,t),V5e=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new St(r.doc.resolve(Math.max(o-1,0)))),!0},W5e=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const a=i.before(s),l=i.after(s);e.delete(a,l).scrollIntoView()}return!0}return!1};function Pr(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var G5e=e=>({tr:t,state:n,dispatch:r})=>{const i=Pr(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),f=s.after(o);t.delete(l,f).scrollIntoView()}return!0}return!1},X5e=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},K5e=()=>({state:e,dispatch:t})=>w6e(e,t),Y5e=()=>({commands:e})=>e.keyboardShortcut("Enter"),Z5e=()=>({state:e,dispatch:t})=>_6e(e,t);function DA(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function J3(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:DA(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function sK(e,t,n={}){return e.find(r=>r.type===t&&J3(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function mO(e,t,n={}){return!!sK(e,t,n)}function LA(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!sK([...i.node.marks],t,n)))return;let o=i.index,a=e.start()+i.offset,l=o+1,f=a+i.node.nodeSize;for(;o>0&&mO([...e.parent.child(o-1).marks],t,n);)o-=1,a-=e.parent.child(o).nodeSize;for(;l<e.parent.childCount&&mO([...e.parent.child(l).marks],t,n);)f+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:f}}function jf(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var q5e=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=jf(e,r.schema),{doc:o,selection:a}=n,{$from:l,from:f,to:c}=a;if(i){const d=LA(l,s,t);if(d&&d.from<=f&&d.to>=c){const u=St.create(o,d.from,d.to);n.setSelection(u)}}return!0},Q5e=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function oK(e){return e instanceof St}function Lu(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function aK(e,t=null){if(!t)return null;const n=Pt.atStart(e),r=Pt.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?St.create(e,Lu(0,i,s),Lu(e.content.size,i,s)):St.create(e,Lu(t,i,s),Lu(t,i,s))}function gO(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function e4(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function J5e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var e2e=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(e4()||gO())&&r.dom.focus(),J5e()&&!e4()&&!gO()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&e===null||e===!1)return!0}catch{return!1}if(s&&e===null&&!oK(n.state.selection))return o(),!0;const a=aK(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},t2e=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),n2e=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),lK=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&lK(r)}return e};function PU(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return lK(n)}function S2(e,t,n){if(e instanceof h0||e instanceof Ae)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return Ae.fromArray(e.map(a=>t.nodeFromJSON(a)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),S2("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new qG({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(o=!0,a=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?E5.fromSchema(l).parseSlice(PU(e),n.parseOptions):E5.fromSchema(l).parse(PU(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=E5.fromSchema(t);return n.slice?s.parseSlice(PU(e),n.parseOptions).content:s.parse(PU(e),n.parseOptions)}return S2("",t,n)}function r2e(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof si||i instanceof ci))return;const s=e.mapping.maps[r];let o=0;s.forEach((a,l,f,c)=>{o===0&&(o=c)}),e.setSelection(Pt.near(e.doc.resolve(o),n))}var i2e=e=>!("type"in e),s2e=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{S2(t,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=S2(t,s.schema,{parseOptions:f,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(y){return l(y),!1}let{from:c,to:d}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},u=!0,h=!0;if((i2e(a)?a:[a]).forEach(y=>{y.check(),u=u?y.isText&&y.marks.length===0:!1,h=h?y.isBlock:!1}),c===d&&h){const{parent:y}=r.doc.resolve(c);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(c-=1,d+=1)}let U;if(u){if(Array.isArray(t))U=t.map(y=>y.text||"").join("");else if(t instanceof Ae){let y="";t.forEach(x=>{x.text&&(y+=x.text)}),U=y}else typeof t=="object"&&t&&t.text?U=t.text:U=t;r.insertText(U,c,d)}else{U=a;const y=r.doc.resolve(c),x=y.node(),w=y.parentOffset===0,E=x.isText||x.isTextblock,S=x.content.size>0;w&&E&&S&&(c=Math.max(0,c-1)),r.replaceWith(c,d,U)}n.updateSelection&&r2e(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:U}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:U})}return!0},o2e=()=>({state:e,dispatch:t})=>T6e(e,t),a2e=()=>({state:e,dispatch:t})=>I6e(e,t),l2e=()=>({state:e,dispatch:t})=>E6e(e,t),c2e=()=>({state:e,dispatch:t})=>M6e(e,t),f2e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=c7(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},d2e=()=>({state:e,dispatch:t,tr:n})=>{try{const r=c7(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},u2e=()=>({state:e,dispatch:t})=>S6e(e,t),h2e=()=>({state:e,dispatch:t})=>k6e(e,t);function cK(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function p2e(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))e4()||cK()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var m2e=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=p2e(e).split(/-(?!$)/),o=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,a))});return l==null||l.steps.forEach(f=>{const c=f.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function k0(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Pr(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,(d,u)=>{if(d.isText)return;const h=Math.max(r,u),g=Math.min(i,u+d.nodeSize);a.push({node:d,from:h,to:g})});const l=i-r,f=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>J3(d.node.attrs,n,{strict:!1}));return s?!!f.length:f.reduce((d,u)=>d+u.to-u.from,0)>=l}var g2e=(e,t={})=>({state:n,dispatch:r})=>{const i=Pr(e,n.schema);return k0(n,i,t)?N6e(n,r):!1},b2e=()=>({state:e,dispatch:t})=>D6e(e,t),U2e=e=>({state:t,dispatch:n})=>{const r=Pr(e,t.schema);return V6e(r)(t,n)},y2e=()=>({state:e,dispatch:t})=>R6e(e,t);function b7(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function bO(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var x2e=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=b7(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=Pr(e,r.schema)),a==="mark"&&(o=jf(e,r.schema));let l=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(c,d)=>{s&&s===c.type&&(l=!0,i&&n.setNodeMarkup(d,void 0,bO(c.attrs,t))),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&(l=!0,i&&n.addMark(d,d+c.nodeSize,o.create(bO(u.attrs,t))))})})}),l},v2e=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),w2e=()=>({tr:e,dispatch:t})=>{if(t){const n=new ea(e.doc);e.setSelection(n)}return!0},E2e=()=>({state:e,dispatch:t})=>C6e(e,t),S2e=()=>({state:e,dispatch:t})=>A6e(e,t),k2e=()=>({state:e,dispatch:t})=>L6e(e,t),C2e=()=>({state:e,dispatch:t})=>B6e(e,t),M2e=()=>({state:e,dispatch:t})=>j6e(e,t);function qk(e,t,n={},r={}){return S2(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var A2e=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const f=qk(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,f).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function fK(e,t){const n=jf(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function dK(e,t){const n=new hX(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function T2e(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function I2e(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function N2e(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function U7(e){return t=>N2e(t.$from,e)}function it(e,t,n){return e.config[t]===void 0&&e.parent?it(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?it(e.parent,t,n):null}):e.config[t]}function OA(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=it(t,"addExtensions",n);return r?[t,...OA(r())]:t}).flat(10)}function jA(e,t){const n=s1.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function uK(e){return typeof e=="function"}function rn(e,t=void 0,...n){return uK(e)?t?e.bind(t)(...n):e(...n):e}function R2e(e={}){return Object.keys(e).length===0&&e.constructor===Object}function t6(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function hK(e){const t=[],{nodeExtensions:n,markExtensions:r}=t6(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1},o=n.filter(f=>f.name!=="text").map(f=>f.name),a=r.map(f=>f.name),l=[...o,...a];return e.forEach(f=>{const c={name:f.name,options:f.options,storage:f.storage,extensions:i},d=it(f,"addGlobalAttributes",c);if(!d)return;d().forEach(h=>{let g;Array.isArray(h.types)?g=h.types:h.types==="*"?g=l:h.types==="nodes"?g=o:h.types==="marks"?g=a:g=[],g.forEach(U=>{Object.entries(h.attributes).forEach(([y,x])=>{t.push({type:U,name:y,attribute:{...s,...x}})})})})}),i.forEach(f=>{const c={name:f.name,options:f.options,storage:f.storage},d=it(f,"addAttributes",c);if(!d)return;const u=d();Object.entries(u).forEach(([h,g])=>{const U={...s,...g};typeof(U==null?void 0:U.default)=="function"&&(U.default=U.default()),U!=null&&U.isRequired&&(U==null?void 0:U.default)===void 0&&delete U.default,t.push({type:f.name,name:h,attribute:U})})}),t}function Er(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],f=a.filter(c=>!l.includes(c));r[i]=[...l,...f].join(" ")}else if(i==="style"){const a=s?s.split(";").map(c=>c.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(c=>c.trim()).filter(Boolean):[],f=new Map;l.forEach(c=>{const[d,u]=c.split(":").map(h=>h.trim());f.set(d,u)}),a.forEach(c=>{const[d,u]=c.split(":").map(h=>h.trim());f.set(d,u)}),r[i]=Array.from(f.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[i]=s}),r},{})}function k2(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Er(n,r),{})}function _2e(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function UO(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):_2e(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function yO(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&R2e(n)?!1:n!=null))}function xO(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function P2e(e,t){var n;const r=hK(e),{nodeExtensions:i,markExtensions:s}=t6(e),o=(n=i.find(f=>it(f,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(f=>{const c=r.filter(x=>x.type===f.name),d={name:f.name,options:f.options,storage:f.storage,editor:t},u=e.reduce((x,w)=>{const E=it(w,"extendNodeSchema",d);return{...x,...E?E(f):{}}},{}),h=yO({...u,content:rn(it(f,"content",d)),marks:rn(it(f,"marks",d)),group:rn(it(f,"group",d)),inline:rn(it(f,"inline",d)),atom:rn(it(f,"atom",d)),selectable:rn(it(f,"selectable",d)),draggable:rn(it(f,"draggable",d)),code:rn(it(f,"code",d)),whitespace:rn(it(f,"whitespace",d)),linebreakReplacement:rn(it(f,"linebreakReplacement",d)),defining:rn(it(f,"defining",d)),isolating:rn(it(f,"isolating",d)),attrs:Object.fromEntries(c.map(xO))}),g=rn(it(f,"parseHTML",d));g&&(h.parseDOM=g.map(x=>UO(x,c)));const U=it(f,"renderHTML",d);U&&(h.toDOM=x=>U({node:x,HTMLAttributes:k2(x,c)}));const y=it(f,"renderText",d);return y&&(h.toText=y),[f.name,h]})),l=Object.fromEntries(s.map(f=>{const c=r.filter(y=>y.type===f.name),d={name:f.name,options:f.options,storage:f.storage,editor:t},u=e.reduce((y,x)=>{const w=it(x,"extendMarkSchema",d);return{...y,...w?w(f):{}}},{}),h=yO({...u,inclusive:rn(it(f,"inclusive",d)),excludes:rn(it(f,"excludes",d)),group:rn(it(f,"group",d)),spanning:rn(it(f,"spanning",d)),code:rn(it(f,"code",d)),attrs:Object.fromEntries(c.map(xO))}),g=rn(it(f,"parseHTML",d));g&&(h.parseDOM=g.map(y=>UO(y,c)));const U=it(f,"renderHTML",d);return U&&(h.toDOM=y=>U({mark:y,HTMLAttributes:k2(y,c)})),[f.name,h]}));return new qG({topNode:o,nodes:a,marks:l})}function D2e(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function M5(e){return e.sort((n,r)=>{const i=it(n,"priority")||100,s=it(r,"priority")||100;return i>s?-1:i<s?1:0})}function pK(e){const t=M5(OA(e)),n=D2e(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function mK(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return e.nodesBetween(r,i,(l,f,c,d)=>{var u;l.isBlock&&f>r&&(a+=s);const h=o==null?void 0:o[l.type.name];if(h)return c&&(a+=h({node:l,pos:f,parent:c,index:d,range:t})),!1;l.isText&&(a+=(u=l==null?void 0:l.text)==null?void 0:u.slice(Math.max(r,f)-f,i-f))}),a}function L2e(e,t){const n={from:0,to:e.content.size};return mK(e,n,t)}function gK(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function O2e(e,t){const n=Pr(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function bK(e,t){const n=b7(typeof t=="string"?t:t.name,e.schema);return n==="node"?O2e(e,t):n==="mark"?fK(e,t):{}}function j2e(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function B2e(e){const t=j2e(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function UK(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const f=t.slice(s).map(a,-1),c=t.slice(s).map(l),d=t.invert().map(f,-1),u=t.invert().map(c);r.push({oldRange:{from:d,to:u},newRange:{from:f,to:c}})})}),B2e(r)}function BA(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=LA(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var F2e=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===t?o=a:s-=1}return[o,s]};function Mg(e,t){return t.nodes[e]||t.marks[e]||null}function Oy(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var $2e=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,a)=>{var l,f;const c=((f=(l=i.type.spec).toText)==null?void 0:f.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,r-s))}),n};function Qk(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?jf(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>J3(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:u})=>{const h=d.pos,g=u.pos;e.doc.nodesBetween(h,g,(U,y)=>{if(s&&U.inlineContent&&!U.type.allowsMarkType(s))return!1;if(!U.isText&&!U.marks.length)return;const x=Math.max(h,y),w=Math.min(g,y+U.nodeSize),E=w-x;o+=E,a.push(...U.marks.map(S=>({mark:S,from:x,to:w})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>J3(d.mark.attrs,n,{strict:!1})).reduce((d,u)=>d+u.to-u.from,0),f=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,u)=>d+u.to-u.from,0);return(l>0?l+f:l)>=o}function z2e(e,t,n={}){if(!t)return k0(e,null,n)||Qk(e,null,n);const r=b7(t,e.schema);return r==="node"?k0(e,t,n):r==="mark"?Qk(e,t,n):!1}var H2e=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=U7(a=>a.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},V2e=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function vO(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function wO(e,t){const{nodeExtensions:n}=t6(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=rn(it(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function y7(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(y7(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function yK(e){return e instanceof lt}var xK=class vK{constructor(t){this.position=t}static fromJSON(t){return new vK(t.position)}toJSON(){return{position:this.position}}};function W2e(e,t){const n=t.mapping.mapResult(e.position);return{position:new xK(n.pos),mapResult:n}}function G2e(e){return new xK(e)}function X2e(e,t,n){var r;const{selection:i}=t;let s=null;if(oK(i)&&(s=i.$cursor),s){const a=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(f=>f.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let f=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(c,d,u)=>{if(f)return!1;if(c.isInline){const h=!u||u.type.allowsMarkType(n),g=!!n.isInSet(c.marks)||!c.marks.some(U=>U.type.excludes(n));f=h&&g}return!f}),f})}var K2e=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=jf(e,r.schema);if(i)if(o){const f=fK(r,l);n.addStoredMark(l.create({...f,...t}))}else a.forEach(f=>{const c=f.$from.pos,d=f.$to.pos;r.doc.nodesBetween(c,d,(u,h)=>{const g=Math.max(h,c),U=Math.min(h+u.nodeSize,d);u.marks.find(x=>x.type===l)?u.marks.forEach(x=>{l===x.type&&n.addMark(g,U,l.create({...x.attrs,...t}))}):n.addMark(g,U,l.create(t))})});return X2e(r,n,l)},Y2e=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),Z2e=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Pr(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>DL(s,{...o,...t})(n)?!0:a.clearNodes()).command(({state:a})=>DL(s,{...o,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},q2e=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Lu(e,0,r.content.size),s=lt.create(r,i);t.setSelection(s)}return!0},Q2e=(e,t)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let o,a;return typeof t=="number"?(o=t,a=t):t&&"from"in t&&"to"in t?(o=t.from,a=t.to):(o=s.from,a=s.to),i&&n.doc.nodesBetween(o,a,(l,f)=>{l.isText||n.setNodeMarkup(f,void 0,{...l.attrs,dir:e})}),!0},J2e=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=St.atStart(r).from,a=St.atEnd(r).to,l=Lu(i,o,a),f=Lu(s,o,a),c=St.create(r,l,f);t.setSelection(c)}return!0},ebe=e=>({state:t,dispatch:n})=>{const r=Pr(e,t.schema);return X6e(r)(t,n)};function EO(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}var tbe=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:a,$to:l}=s,f=i.extensionManager.attributes,c=Oy(f,a.node().type.name,a.node().attrs);if(s instanceof lt&&s.node.isBlock)return!a.parentOffset||!Fp(o,a.pos)?!1:(r&&(e&&EO(n,i.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,u=a.depth===0?void 0:T2e(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&u?[{type:u,attrs:c}]:void 0,g=Fp(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!g&&Fp(t.doc,t.mapping.map(a.pos),1,u?[{type:u}]:void 0)&&(g=!0,h=u?[{type:u,attrs:c}]:void 0),r){if(g&&(s instanceof St&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,h),u&&!d&&!a.parentOffset&&a.parent.type!==u)){const U=t.mapping.map(a.before()),y=t.doc.resolve(U);a.node(-1).canReplaceWith(y.index(),y.index()+1,u)&&t.setNodeMarkup(t.mapping.map(a.before()),u)}e&&EO(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return g},nbe=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Pr(e,r.schema),{$from:l,$to:f}=r.selection,c=r.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(f))return!1;const d=l.node(-1);if(d.type!==a)return!1;const u=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let x=Ae.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let I=l.depth-w;I>=l.depth-3;I-=1)x=Ae.from(l.node(I).copy(x));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...Oy(u,l.node().type.name,l.node().attrs),...t},M=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;x=x.append(Ae.from(a.createAndFill(null,M)||void 0));const A=l.before(l.depth-(w-1));n.replace(A,l.after(-E),new We(x,4-w,0));let C=-1;n.doc.nodesBetween(A,n.doc.content.size,(I,R)=>{if(C>-1)return!1;I.isTextblock&&I.content.size===0&&(C=R+1)}),C>-1&&n.setSelection(St.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=f.pos===l.end()?d.contentMatchAt(0).defaultType:null,g={...Oy(u,d.type.name,d.attrs),...t},U={...Oy(u,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,f.pos);const y=h?[{type:a,attrs:g},{type:h,attrs:U}]:[{type:a,attrs:g}];if(!Fp(n.doc,l.pos,2))return!1;if(i){const{selection:x,storedMarks:w}=r,{splittableMarks:E}=s.extensionManager,S=w||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!S||!i)return!0;const M=S.filter(A=>E.includes(A.type.name));n.ensureMarks(M)}return!0},nE=(e,t)=>{const n=U7(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&D0(e.doc,n.pos)&&e.join(n.pos),!0},rE=(e,t)=>{const n=U7(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&D0(e.doc,r)&&e.join(r),!0},rbe=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:f,can:c})=>{const{extensions:d,splittableMarks:u}=i.extensionManager,h=Pr(e,o.schema),g=Pr(t,o.schema),{selection:U,storedMarks:y}=o,{$from:x,$to:w}=U,E=x.blockRange(w),S=y||U.$to.parentOffset&&U.$from.marks();if(!E)return!1;const M=U7(A=>wO(A.type.name,d))(U);if(E.depth>=1&&M&&E.depth-M.depth<=1){if(M.node.type===h)return f.liftListItem(g);if(wO(M.node.type.name,d)&&h.validContent(M.node.content)&&a)return l().command(()=>(s.setNodeMarkup(M.pos,h),!0)).command(()=>nE(s,h)).command(()=>rE(s,h)).run()}return!n||!S||!a?l().command(()=>c().wrapInList(h,r)?!0:f.clearNodes()).wrapInList(h,r).command(()=>nE(s,h)).command(()=>rE(s,h)).run():l().command(()=>{const A=c().wrapInList(h,r),C=S.filter(I=>u.includes(I.type.name));return s.ensureMarks(C),A?!0:f.clearNodes()}).wrapInList(h,r).command(()=>nE(s,h)).command(()=>rE(s,h)).run()},ibe=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=jf(e,r.schema);return Qk(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},sbe=(e,t,n={})=>({state:r,commands:i})=>{const s=Pr(e,r.schema),o=Pr(t,r.schema),a=k0(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},obe=(e,t={})=>({state:n,commands:r})=>{const i=Pr(e,n.schema);return k0(n,i,t)?r.lift(i):r.wrapIn(i,t)},abe=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},lbe=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},cbe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=n,l=jf(e,r.schema),{$from:f,empty:c,ranges:d}=a;if(!i)return!0;if(c&&o){let{from:u,to:h}=a;const g=(s=f.marks().find(y=>y.type===l))==null?void 0:s.attrs,U=LA(f,l,g);U&&(u=U.from,h=U.to),n.removeMark(u,h,l)}else d.forEach(u=>{n.removeMark(u.$from.pos,u.$to.pos,l)});return n.removeStoredMark(l),!0},fbe=e=>({tr:t,state:n,dispatch:r})=>{const{selection:i}=n;let s,o;return typeof e=="number"?(s=e,o=e):e&&"from"in e&&"to"in e?(s=e.from,o=e.to):(s=i.from,o=i.to),r&&t.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const f={...a.attrs};delete f.dir,t.setNodeMarkup(l,void 0,f)}),!0},dbe=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=b7(typeof e=="string"?e:e.name,r.schema);if(!a)return!1;a==="node"&&(s=Pr(e,r.schema)),a==="mark"&&(o=jf(e,r.schema));let l=!1;return n.selection.ranges.forEach(f=>{const c=f.$from.pos,d=f.$to.pos;let u,h,g,U;n.selection.empty?r.doc.nodesBetween(c,d,(y,x)=>{s&&s===y.type&&(l=!0,g=Math.max(x,c),U=Math.min(x+y.nodeSize,d),u=x,h=y)}):r.doc.nodesBetween(c,d,(y,x)=>{x<c&&s&&s===y.type&&(l=!0,g=Math.max(x,c),U=Math.min(x+y.nodeSize,d),u=x,h=y),x>=c&&x<=d&&(s&&s===y.type&&(l=!0,i&&n.setNodeMarkup(x,void 0,{...y.attrs,...t})),o&&y.marks.length&&y.marks.forEach(w=>{if(o===w.type&&(l=!0,i)){const E=Math.max(x,c),S=Math.min(x+y.nodeSize,d);n.addMark(E,S,o.create({...w.attrs,...t}))}}))}),h&&(u!==void 0&&i&&n.setNodeMarkup(u,void 0,{...h.attrs,...t}),o&&h.marks.length&&h.marks.forEach(y=>{o===y.type&&i&&n.addMark(g,U,o.create({...y.attrs,...t}))}))}),l},ube=(e,t={})=>({state:n,dispatch:r})=>{const i=Pr(e,n.schema);return F6e(i,t)(n,r)},hbe=(e,t={})=>({state:n,dispatch:r})=>{const i=Pr(e,n.schema);return $6e(i,t)(n,r)},pbe=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},x7=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},mbe=(e,t)=>{if(DA(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function DU(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const f=l.state.doc.resolve(r);if(f.parent.type.spec.code||(t=f.nodeBefore||f.nodeAfter)!=null&&t.marks.find(u=>u.type.spec.code))return!1;let c=!1;const d=$2e(f)+s;return o.forEach(u=>{if(c)return;const h=mbe(d,u.find);if(!h)return;const g=l.state.tr,U=m7({state:l.state,transaction:g}),y={from:r-(h[0].length-s.length),to:i},{commands:x,chain:w,can:E}=new g7({editor:n,state:U});u.handler({state:U,range:y,match:h,commands:x,chain:w,can:E})===null||!g.steps.length||(u.undoable&&g.setMeta(a,{transform:g,from:r,to:i,text:s}),l.dispatch(g),c=!0)}),c}function gbe(e){const{editor:t,rules:n}=e,r=new ir({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=jA(Ae.from(c),o.schema);const{from:d}=l,u=d+c.length;DU({editor:t,from:d,to:u,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return DU({editor:t,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&DU({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?DU({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function bbe(e){return Object.prototype.toString.call(e).slice(8,-1)}function LU(e){return bbe(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function wK(e,t){const n={...e};return LU(e)&&LU(t)&&Object.keys(t).forEach(r=>{LU(t[r])&&LU(e[r])?n[r]=wK(e[r],t[r]):n[r]=t[r]}),n}var FA=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...rn(it(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...rn(it(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>wK(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},o1=class EK extends FA{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new EK(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const l=o.find(f=>(f==null?void 0:f.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Ube(e){return typeof e=="number"}var SK=class{constructor(e){this.find=e.find,this.handler=e.handler}},ybe=(e,t,n)=>{if(DA(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function xbe(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=e,{commands:l,chain:f,can:c}=new g7({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,g)=>{var U,y,x,w,E;if((y=(U=h.type)==null?void 0:U.spec)!=null&&y.code||!(h.isText||h.isTextblock||h.isInline))return;const S=(E=(w=(x=h.content)==null?void 0:x.size)!=null?w:h.nodeSize)!=null?E:0,M=Math.max(r,g),A=Math.min(i,g+S);if(M>=A)return;const C=h.isText?h.text||"":h.textBetween(M-g,A-g,void 0,"");ybe(C,s.find,o).forEach(R=>{if(R.index===void 0)return;const L=M+R.index+1,_=L+R[0].length,O={from:n.tr.mapping.map(L),to:n.tr.mapping.map(_)},$=s.handler({state:n,range:O,match:R,commands:l,chain:f,can:c,pasteEvent:o,dropEvent:a});d.push($)})}),d.every(h=>h!==null)}var OU=null,vbe=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function wbe(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:d,to:u,rule:h,pasteEvt:g})=>{const U=c.tr,y=m7({state:c,transaction:U});if(!(!xbe({editor:t,state:y,from:Math.max(d-1,0),to:u.b-1,rule:h,pasteEvent:g,dropEvent:a})||!U.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,U}};return n.map(c=>new ir({view(d){const u=g=>{var U;r=(U=d.dom.parentElement)!=null&&U.contains(g.target)?d.dom.parentElement:null,r&&(OU=t)},h=()=>{OU&&(OU=null)};return window.addEventListener("dragstart",u),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",u),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,u)=>{if(s=r===d.dom.parentElement,a=u,!s){const h=OU;h!=null&&h.isEditable&&setTimeout(()=>{const g=h.state.selection;g&&h.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,u)=>{var h;const g=(h=u.clipboardData)==null?void 0:h.getData("text/html");return o=u,i=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,u,h)=>{const g=d[0],U=g.getMeta("uiEvent")==="paste"&&!i,y=g.getMeta("uiEvent")==="drop"&&!s,x=g.getMeta("applyPasteRules"),w=!!x;if(!U&&!y&&!w)return;if(w){let{text:M}=x;typeof M=="string"?M=M:M=jA(Ae.from(M),h.schema);const{from:A}=x,C=A+M.length,I=vbe(M);return l({rule:c,state:h,from:A,to:{b:C},pasteEvt:I})}const E=u.doc.content.findDiffStart(h.doc.content),S=u.doc.content.findDiffEnd(h.doc.content);if(!(!Ube(E)||!S||E===S.b))return l({rule:c,state:h,from:E,to:S,pasteEvt:o})}}))}var v7=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=pK(e),this.schema=P2e(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Mg(t.name,this.schema)},r=it(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return M5([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:Mg(r.name,this.schema)},s=[],o=it(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&it(r,"exitable",i)&&(a.ArrowRight=()=>o1.handleExit({editor:e,mark:r})),o){const u=Object.fromEntries(Object.entries(o()).map(([h,g])=>[h,()=>g({editor:e})]));a={...a,...u}}const l=O5e(a);s.push(l);const f=it(r,"addInputRules",i);if(vO(r,e.options.enableInputRules)&&f){const u=f();if(u&&u.length){const h=gbe({editor:e,rules:u}),g=Array.isArray(h)?h:[h];s.push(...g)}}const c=it(r,"addPasteRules",i);if(vO(r,e.options.enablePasteRules)&&c){const u=c();if(u&&u.length){const h=wbe({editor:e,rules:u});s.push(...h)}}const d=it(r,"addProseMirrorPlugins",i);if(d){const u=d();s.push(...u)}return s})}get attributes(){return hK(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=t6(this.extensions);return Object.fromEntries(t.filter(n=>!!it(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Pr(n.name,this.schema)},s=it(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,f,c,d,u)=>{const h=k2(l,r);return o({node:l,view:f,getPos:c,decorations:d,innerDecorations:u,editor:e,extension:n,HTMLAttributes:h})};return[n.name,a]}))}dispatchTransaction(e){const{editor:t}=this;return M5([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Mg(i.name,this.schema)},o=it(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:r})}:r},e)}transformPastedHTML(e){const{editor:t}=this;return M5([...this.extensions]).reduce((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Mg(i.name,this.schema)},o=it(i,"transformPastedHTML",s);return o?(a,l)=>{const f=r(a,l);return o.call(s,f)}:r},e||(r=>r))}get markViews(){const{editor:e}=this,{markExtensions:t}=t6(this.extensions);return Object.fromEntries(t.filter(n=>!!it(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:jf(n.name,this.schema)},s=it(n,"addMarkView",i);if(!s)return[];const o=(a,l,f)=>{const c=k2(a,r);return s()({mark:a,view:l,inline:f,editor:e,extension:n,HTMLAttributes:c,updateAttributes:d=>{Dbe(a,e,d)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Mg(t.name,this.schema)};t.type==="mark"&&((n=rn(it(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=it(t,"onBeforeCreate",r),s=it(t,"onCreate",r),o=it(t,"onUpdate",r),a=it(t,"onSelectionUpdate",r),l=it(t,"onTransaction",r),f=it(t,"onFocus",r),c=it(t,"onBlur",r),d=it(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),f&&this.editor.on("focus",f),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};v7.resolve=pK;v7.sort=M5;v7.flatten=OA;var Ebe={};PA(Ebe,{ClipboardTextSerializer:()=>CK,Commands:()=>MK,Delete:()=>AK,Drop:()=>TK,Editable:()=>IK,FocusEvents:()=>RK,Keymap:()=>_K,Paste:()=>PK,Tabindex:()=>DK,TextDirection:()=>LK,focusEventsPluginKey:()=>NK});var Sr=class kK extends FA{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new kK(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},CK=Sr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ir({key:new Vr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(c=>c.$from.pos)),a=Math.max(...s.map(c=>c.$to.pos)),l=gK(n);return mK(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),MK=Sr.create({name:"commands",addCommands(){return{...iK}}}),AK=Sr.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,a,l,f;if((f=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,e))!=null?f:e.getMeta("y-sync$"))return;const c=dK(e.before,[e,...t]);UK(c).forEach(h=>{c.mapping.mapResult(h.oldRange.from).deletedAfter&&c.mapping.mapResult(h.oldRange.to).deletedBefore&&c.before.nodesBetween(h.oldRange.from,h.oldRange.to,(g,U)=>{const y=U+g.nodeSize-2,x=h.oldRange.from<=U&&y<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:g,from:U,to:y,newFrom:c.mapping.map(U),newTo:c.mapping.map(y),deletedRange:h.oldRange,newRange:h.newRange,partial:!x,editor:this.editor,transaction:e,combinedTransform:c})})});const u=c.mapping;c.steps.forEach((h,g)=>{var U,y;if(h instanceof Wa){const x=u.slice(g).map(h.from,-1),w=u.slice(g).map(h.to),E=u.invert().map(x,-1),S=u.invert().map(w),M=(U=c.doc.nodeAt(x-1))==null?void 0:U.marks.some(C=>C.eq(h.mark)),A=(y=c.doc.nodeAt(w))==null?void 0:y.marks.some(C=>C.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:E,to:S},newRange:{from:x,to:w},partial:!!(A||M),editor:this.editor,transaction:e,combinedTransform:c})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),TK=Sr.create({name:"drop",addProseMirrorPlugins(){return[new ir({key:new Vr("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),IK=Sr.create({name:"editable",addProseMirrorPlugins(){return[new ir({key:new Vr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),NK=new Vr("focusEvents"),RK=Sr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new ir({key:NK,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),_K=Sr.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:f}=a,{empty:c,$anchor:d}=l,{pos:u,parent:h}=d,g=d.parent.isTextblock&&u>0?a.doc.resolve(u-1):d,U=g.parent.type.spec.isolating,y=d.pos-d.parentOffset,x=U&&g.parent.childCount===1?y===d.pos:Pt.atStart(f).from===u;return!c||!h.type.isTextblock||h.textContent.length||!x||x&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return e4()||cK()?s:i},addProseMirrorPlugins(){return[new ir({key:new Vr("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(U=>U.getMeta("composition")))return;const r=e.some(U=>U.docChanged)&&!t.doc.eq(n.doc),i=e.some(U=>U.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=t.selection,l=Pt.atStart(t.doc).from,f=Pt.atEnd(t.doc).to;if(s||!(o===l&&a===f)||!y7(n.doc))return;const u=n.tr,h=m7({state:n,transaction:u}),{commands:g}=new g7({editor:this.editor,state:h});if(g.clearNodes(),!!u.steps.length)return u}})]}}),PK=Sr.create({name:"paste",addProseMirrorPlugins(){return[new ir({key:new Vr("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),DK=Sr.create({name:"tabindex",addProseMirrorPlugins(){return[new ir({key:new Vr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),LK=Sr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=t6(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new ir({key:new Vr("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),Sbe=class i5{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new i5(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new i5(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new i5(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=n.isInline,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!i&&!o&&l.depth<=this.depth)return;const f=new i5(l,this.editor,i,i||o?n:null);i&&(f.actualDepth=this.depth+1),t.push(f)}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},kbe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Cbe(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var Mbe=class extends pbe{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:W2e,createMappablePosition:G2e},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=aK(t,this.options.autofocus);this.editorState=xp.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Cbe(kbe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=uK(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[IK,CK.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),MK,RK,_K,DK,TK,PK,AK,LK.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new v7(r,this)}createCommandManager(){this.commandManager=new g7({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=qk(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=qk(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){const{editorProps:t,enableExtensionDispatchTransaction:n}=this.options,r=t.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r,s=t.transformPastedHTML,o=this.extensionManager.transformPastedHTML(s);this.editorView=new nK(e,{...t,attributes:{role:"textbox",...t==null?void 0:t.attributes},dispatchTransaction:i,transformPastedHTML:o,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(f=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(f)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return bK(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return z2e(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return jA(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return L2e(this.state.doc,{blockSeparator:t,textSerializers:{...gK(this.schema),...n}})}get isEmpty(){return y7(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Sbe(t,this)}get $doc(){return this.$pos(0)}};function n6(e){return new x7({find:e.find,handler:({state:t,range:n,match:r})=>{const i=rn(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),f=n.from+a.indexOf(o),c=f+o.length;if(BA(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(U=>U===e.type&&U!==h.mark.type)).filter(h=>h.to>f).length)return null;c<n.to&&s.delete(c,n.to),f>n.from&&s.delete(n.from+l,f);const u=n.from+l+o.length;s.addMark(n.from+l,u,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function Abe(e){return new x7({find:e.find,handler:({state:t,range:n,match:r})=>{const i=rn(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let a=n.to;const l=e.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let c=o+f;c>a?c=a:a=c+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(c,a,l)}else if(r[0]){const f=e.type.isInline?o:o-1;s.insert(f,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:e.undoable})}function Jk(e){return new x7({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=rn(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function r6(e){return new x7({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=rn(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),f=l&&vA(l,e.type,s);if(!f)return null;if(o.wrap(l,f),e.keepMarks&&e.editor){const{selection:d,storedMarks:u}=t,{splittableMarks:h}=e.editor.extensionManager,g=u||d.$to.parentOffset&&d.$from.marks();if(g){const U=g.filter(y=>h.includes(y.type.name));o.ensureMarks(U)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&D0(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&o.join(n.from-1)},undoable:e.undoable})}function Tbe(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof lt){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}var Ibe={};PA(Ibe,{createAtomBlockMarkdownSpec:()=>OK,createBlockMarkdownSpec:()=>Nbe,createInlineMarkdownSpec:()=>Pbe,parseAttributes:()=>$A,parseIndentedBlocks:()=>eC,renderNestedMarkdownContent:()=>HA,serializeAttributes:()=>zA});function $A(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(c=>c.trim().slice(1));t.class=f.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(t.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,f,c])=>{var d;const u=parseInt(((d=c.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),h=n[u];h&&(t[f]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(t[c]=!0)}),t}function zA(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function OK(e){const{nodeName:t,name:n,parseAttributes:r=$A,serializeAttributes:i=zA,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=e,l=n||t,f=c=>{if(!a)return c;const d={};return a.forEach(u=>{u in c&&(d[u]=c[u])}),d};return{parseMarkdown:(c,d)=>{const u={...s,...c.attributes};return d.createNode(t,u,[])},markdownTokenizer:{name:t,level:"block",start(c){var d;const u=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(d=c.match(u))==null?void 0:d.index;return h!==void 0?h:-1},tokenize(c,d,u){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),g=c.match(h);if(!g)return;const U=g[1]||"",y=r(U);if(!o.find(w=>!(w in y)))return{type:t,raw:g[0],attributes:y}}},renderMarkdown:c=>{const d=f(c.attrs||{}),u=i(d),h=u?` {${u}}`:"";return`:::${l}${h} :::`}}}function Nbe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=$A,serializeAttributes:s=zA,defaultAttributes:o={},content:a="block",allowedAttributes:l}=e,f=n||t,c=d=>{if(!l)return d;const u={};return l.forEach(h=>{h in d&&(u[h]=d[h])}),u};return{parseMarkdown:(d,u)=>{let h;if(r){const U=r(d);h=typeof U=="string"?[{type:"text",text:U}]:U}else a==="block"?h=u.parseChildren(d.tokens||[]):h=u.parseInline(d.tokens||[]);const g={...o,...d.attributes};return u.createNode(t,g,h)},markdownTokenizer:{name:t,level:"block",start(d){var u;const h=new RegExp(`^:::${f}`,"m"),g=(u=d.match(h))==null?void 0:u.index;return g!==void 0?g:-1},tokenize(d,u,h){var g;const U=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=d.match(U);if(!y)return;const[x,w=""]=y,E=i(w);let S=1;const M=x.length;let A="";const C=/^:::([\w-]*)(\s.*)?/gm,I=d.slice(M);for(C.lastIndex=0;;){const R=C.exec(I);if(R===null)break;const L=R.index,_=R[1];if(!((g=R[2])!=null&&g.endsWith(":::"))){if(_)S+=1;else if(S-=1,S===0){const O=I.slice(0,L);A=O.trim();const $=d.slice(0,M+L+R[0].length);let B=[];if(A)if(a==="block")for(B=h.blockTokens(O),B.forEach(F=>{F.text&&(!F.tokens||F.tokens.length===0)&&(F.tokens=h.inlineTokens(F.text))});B.length>0;){const F=B[B.length-1];if(F.type==="paragraph"&&(!F.text||F.text.trim()===""))B.pop();else break}else B=h.inlineTokens(A);return{type:t,raw:$,attributes:E,content:A,tokens:B}}}}}},renderMarkdown:(d,u)=>{const h=c(d.attrs||{}),g=s(h),U=g?` {${g}}`:"",y=u.renderChildren(d.content||[],`

`);return`:::${f}${U}

${y}

:::`}}}function Rbe(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,i,s,o]=r;t[i]=s||o,r=n.exec(e)}return t}function _be(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function Pbe(e){const{nodeName:t,name:n,getContent:r,parseAttributes:i=Rbe,serializeAttributes:s=_be,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=e,f=n||t,c=u=>{if(!l)return u;const h={};return l.forEach(g=>{const U=typeof g=="string"?g:g.name,y=typeof g=="string"?void 0:g.skipIfDefault;if(U in u){const x=u[U];if(y!==void 0&&x===y)return;h[U]=x}}),h},d=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(u,h)=>{const g={...o,...u.attributes};if(a)return h.createNode(t,g);const U=r?r(u):u.content||"";return U?h.createNode(t,g,[h.createTextNode(U)]):h.createNode(t,g,[])},markdownTokenizer:{name:t,level:"inline",start(u){const h=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),g=u.match(h),U=g==null?void 0:g.index;return U!==void 0?U:-1},tokenize(u,h,g){const U=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),y=u.match(U);if(!y)return;let x="",w="";if(a){const[,S]=y;w=S}else{const[,S,M]=y;w=S,x=M||""}const E=i(w.trim());return{type:t,raw:y[0],content:x.trim(),attributes:E}}},renderMarkdown:u=>{let h="";r?h=r(u):u.content&&u.content.length>0&&(h=u.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const g=c(u.attrs||{}),U=s(g),y=U?` ${U}`:"";return a?`[${f}${y}]`:`[${f}${y}]${h}[/${f}]`}}}function eC(e,t,n){var r,i,s,o;const a=e.split(`
`),l=[];let f="",c=0;const d=t.baseIndentSize||2;for(;c<a.length;){const u=a[c],h=u.match(t.itemPattern);if(!h){if(l.length>0)break;if(u.trim()===""){c+=1,f=`${f}${u}
`;continue}else return}const g=t.extractItemData(h),{indentLevel:U,mainContent:y}=g;f=`${f}${u}
`;const x=[y];for(c+=1;c<a.length;){const M=a[c];if(M.trim()===""){const C=a.slice(c+1).findIndex(L=>L.trim()!=="");if(C===-1)break;if((((i=(r=a[c+1+C].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>U){x.push(M),f=`${f}${M}
`,c+=1;continue}else break}if((((o=(s=M.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>U)x.push(M),f=`${f}${M}
`,c+=1;else break}let w;const E=x.slice(1);if(E.length>0){const M=E.map(A=>A.slice(U+d)).join(`
`);M.trim()&&(t.customNestedParser?w=t.customNestedParser(M):w=n.blockTokens(M))}const S=t.createToken(g,w);l.push(S)}if(l.length!==0)return{items:l,raw:f}}function HA(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=e.content,a=t.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(f=>{const c=t.renderChildren([f]);if(c){const d=c.split(`
`).map(u=>u?t.indent(u):"").join(`
`);l.push(d)}}),l.join(`
`)}function Dbe(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((a,l)=>{const f=s.mapping.map(l),c=s.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(h=>{if(h!==o)return!1;d=h}),!d)return;let u=!1;if(Object.keys(n).forEach(h=>{n[h]!==d.attrs[h]&&(u=!0)}),u){const h=e.type.create({...e.attrs,...n});s.removeMark(f,c,e.type),s.addMark(f,c,h)}}),s.docChanged&&t.view.dispatch(s)}var Ws=class jK extends FA{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new jK(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Fh(e){return new SK({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=rn(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,a=r[r.length-1],l=r[0];let f=n.to;if(a){const c=l.search(/\S/),d=n.from+l.indexOf(a),u=d+a.length;if(BA(n.from,n.to,t.doc).filter(g=>g.mark.type.excluded.find(y=>y===e.type&&y!==g.mark.type)).filter(g=>g.to>d).length)return null;u<n.to&&o.delete(u,n.to),d>n.from&&o.delete(n.from+c,d),f=n.from+c+a.length,o.addMark(n.from+c,f,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function Lbe(e){return new SK({find:e.find,handler({match:t,chain:n,range:r,pasteEvent:i}){const s=rn(e.getAttributes,void 0,t,i),o=rn(e.getContent,void 0,s);if(s===!1||s===null)return null;const a={type:e.type.name,attrs:s};o&&(a.content=o),t.input&&n().deleteRange(r).insertContentAt(r.from,a)}})}const{getOwnPropertyNames:Obe,getOwnPropertySymbols:jbe}=Object,{hasOwnProperty:Bbe}=Object.prototype;function iE(e,t){return function(r,i,s){return e(r,i,s)&&t(r,i,s)}}function jU(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const l=e(n,r,i);return s.delete(n),s.delete(r),l}}function Fbe(e){return e!=null?e[Symbol.toStringTag]:void 0}function SO(e){return Obe(e).concat(jbe(e))}const $be=Object.hasOwn||((e,t)=>Bbe.call(e,t));function a1(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const zbe="__v",Hbe="__o",Vbe="_owner",{getOwnPropertyDescriptor:kO,keys:CO}=Object;function Wbe(e,t){return e.byteLength===t.byteLength&&t4(new Uint8Array(e),new Uint8Array(t))}function Gbe(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Xbe(e,t){return e.byteLength===t.byteLength&&t4(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Kbe(e,t){return a1(e.getTime(),t.getTime())}function Ybe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Zbe(e,t){return e===t}function MO(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const f=t.entries();let c=!1,d=0;for(;(a=f.next())&&!a.done;){if(i[d]){d++;continue}const u=o.value,h=a.value;if(n.equals(u[0],h[0],l,d,e,t,n)&&n.equals(u[1],h[1],u[0],h[0],e,t,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const qbe=a1;function Qbe(e,t,n){const r=CO(e);let i=r.length;if(CO(t).length!==i)return!1;for(;i-- >0;)if(!BK(e,t,n,r[i]))return!1;return!0}function Ag(e,t,n){const r=SO(e);let i=r.length;if(SO(t).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!BK(e,t,n,s)||(o=kO(e,s),a=kO(t,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Jbe(e,t){return a1(e.valueOf(),t.valueOf())}function e8e(e,t){return e.source===t.source&&e.flags===t.flags}function AO(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),s=e.values();let o,a;for(;(o=s.next())&&!o.done;){const l=t.values();let f=!1,c=0;for(;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(o.value,a.value,o.value,a.value,e,t,n)){f=i[c]=!0;break}c++}if(!f)return!1}return!0}function t4(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function t8e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function BK(e,t,n,r){return(r===Vbe||r===Hbe||r===zbe)&&(e.$$typeof||t.$$typeof)?!0:$be(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const n8e="[object ArrayBuffer]",r8e="[object Arguments]",i8e="[object Boolean]",s8e="[object DataView]",o8e="[object Date]",a8e="[object Error]",l8e="[object Map]",c8e="[object Number]",f8e="[object Object]",d8e="[object RegExp]",u8e="[object Set]",h8e="[object String]",p8e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},m8e="[object URL]",g8e=Object.prototype.toString;function b8e({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:f,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:u,areUrlsEqual:h,unknownTagComparators:g}){return function(y,x,w){if(y===x)return!0;if(y==null||x==null)return!1;const E=typeof y;if(E!==typeof x)return!1;if(E!=="object")return E==="number"?a(y,x,w):E==="function"?s(y,x,w):!1;const S=y.constructor;if(S!==x.constructor)return!1;if(S===Object)return l(y,x,w);if(Array.isArray(y))return t(y,x,w);if(S===Date)return r(y,x,w);if(S===RegExp)return c(y,x,w);if(S===Map)return o(y,x,w);if(S===Set)return d(y,x,w);const M=g8e.call(y);if(M===o8e)return r(y,x,w);if(M===d8e)return c(y,x,w);if(M===l8e)return o(y,x,w);if(M===u8e)return d(y,x,w);if(M===f8e)return typeof y.then!="function"&&typeof x.then!="function"&&l(y,x,w);if(M===m8e)return h(y,x,w);if(M===a8e)return i(y,x,w);if(M===r8e)return l(y,x,w);if(p8e[M])return u(y,x,w);if(M===n8e)return e(y,x,w);if(M===s8e)return n(y,x,w);if(M===i8e||M===c8e||M===h8e)return f(y,x,w);if(g){let A=g[M];if(!A){const C=Fbe(y);C&&(A=g[C])}if(A)return A(y,x,w)}return!1}}function U8e({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:Wbe,areArraysEqual:n?Ag:Gbe,areDataViewsEqual:Xbe,areDatesEqual:Kbe,areErrorsEqual:Ybe,areFunctionsEqual:Zbe,areMapsEqual:n?iE(MO,Ag):MO,areNumbersEqual:qbe,areObjectsEqual:n?Ag:Qbe,arePrimitiveWrappersEqual:Jbe,areRegExpsEqual:e8e,areSetsEqual:n?iE(AO,Ag):AO,areTypedArraysEqual:n?iE(t4,Ag):t4,areUrlsEqual:t8e,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const i=jU(r.areArraysEqual),s=jU(r.areMapsEqual),o=jU(r.areObjectsEqual),a=jU(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function y8e(e){return function(t,n,r,i,s,o,a){return e(t,n,a)}}function x8e({circular:e,comparator:t,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:f=e?new WeakMap:void 0,meta:c}=n();return t(a,l,{cache:f,equals:r,meta:c,strict:i})};if(e)return function(a,l){return t(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return t(a,l,s)}}const v8e=O0();O0({strict:!0});O0({circular:!0});O0({circular:!0,strict:!0});O0({createInternalComparator:()=>a1});O0({strict:!0,createInternalComparator:()=>a1});O0({circular:!0,createInternalComparator:()=>a1});O0({circular:!0,createInternalComparator:()=>a1,strict:!0});function O0(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:i=!1}=e,s=U8e(e),o=b8e(s),a=n?n(o):y8e(o);return x8e({circular:t,comparator:o,createState:r,equals:a,strict:i})}var w8e=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},E8e=({contentComponent:e})=>{const t=DG.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(t)})};function S8e(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:JW.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var k8e=class extends Te.Component{constructor(e){var t;super(e),this.editorContentRef=Te.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var e;const t=this.props.editor;if(t&&!t.isDestroyed&&((e=t.view.dom)!=null&&e.parentNode)){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n}),t.contentComponent=S8e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.parentNode))return;const n=document.createElement("div");n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:w8e(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&m.jsx(E8e,{contentComponent:e.contentComponent})]})}},C8e=T.forwardRef((e,t)=>{const n=Te.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Te.createElement(k8e,{key:n,innerRef:t,...e})}),VA=Te.memo(C8e),M8e=typeof window<"u"?T.useLayoutEffect:T.useEffect,A8e=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function T8e(e){var t;const[n]=T.useState(()=>new A8e(e.editor)),r=YW.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:v8e);return M8e(()=>n.watch(e.editor),[e.editor,n]),T.useDebugValue(r),r}var I8e=!1,tC=typeof window>"u",N8e=tC||!!(typeof window<"u"&&window.next),R8e=class FK{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?tC||N8e?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new Mbe(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?FK.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function $K(e={},t=[]){const n=T.useRef(e);n.current=e;const[r]=T.useState(()=>new R8e(n)),i=DG.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return T.useDebugValue(i),T.useEffect(r.onRender(t)),T8e({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var zK=T.createContext({editor:null});zK.Consumer;var _8e=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),P8e=()=>T.useContext(_8e);Te.forwardRef((e,t)=>{const{onDragStart:n}=P8e(),r=e.as||"div";return m.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Te.createContext({markViewContentRef:()=>{}});var WA=T.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});WA.displayName="TiptapContext";var D8e=()=>T.useContext(WA);function HK({editor:e,instance:t,children:n}){const r=e??t;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=T.useMemo(()=>({editor:r}),[r]),s=T.useMemo(()=>({editor:r}),[r]);return m.jsx(zK.Provider,{value:s,children:m.jsx(WA.Provider,{value:i,children:n})})}HK.displayName="Tiptap";function VK({...e}){const{editor:t}=D8e();return m.jsx(VA,{editor:t,...e})}VK.displayName="Tiptap.Content";Object.assign(HK,{Content:VK});var n4=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},L8e=/^\s*>\s$/,O8e=Ws.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return n4("blockquote",{...Er(this.options.HTMLAttributes,e),children:n4("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(i=>{const a=t.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[r6({find:L8e,type:this.type})]}}),j8e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,B8e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,F8e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,$8e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,z8e=o1.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return n4("strong",{...Er(this.options.HTMLAttributes,e),children:n4("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[n6({find:j8e,type:this.type}),n6({find:F8e,type:this.type})]},addPasteRules(){return[Fh({find:B8e,type:this.type}),Fh({find:$8e,type:this.type})]}}),H8e=/(^|[^`])`([^`]+)`(?!`)$/,V8e=/(^|[^`])`([^`]+)`(?!`)/g,W8e=o1.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Er(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[n6({find:H8e,type:this.type})]},addPasteRules(){return[Fh({find:V8e,type:this.type})]}}),sE=4,G8e=/^```([a-z]+)?[\s\n]$/,X8e=/^~~~([a-z]+)?[\s\n]$/,K8e=Ws.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:sE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Er(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const i=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${i}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:sE,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?e.commands.insertContent(a):e.commands.command(({tr:l})=>{const{from:f,to:c}=i,h=r.doc.textBetween(f,c,`
`,`
`).split(`
`).map(g=>a+g).join(`
`);return l.replaceWith(f,c,r.schema.text(h)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:sE,{state:r}=e,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?e.commands.command(({tr:a})=>{var l;const{pos:f}=s,c=s.start(),d=s.end(),h=r.doc.textBetween(c,d,`
`,`
`).split(`
`);let g=0,U=0;const y=f-c;for(let A=0;A<h.length;A+=1){if(U+h[A].length>=y){g=A;break}U+=h[A].length+1}const w=((l=h[g].match(/^ */))==null?void 0:l[0])||"",E=Math.min(w.length,n);if(E===0)return!0;let S=c;for(let A=0;A<g;A+=1)S+=h[A].length+1;return a.delete(S,S+E),f-S<=E&&a.setSelection(St.create(a.doc,S)),!0}):e.commands.command(({tr:a})=>{const{from:l,to:f}=i,u=r.doc.textBetween(l,f,`
`,`
`).split(`
`).map(h=>{var g;const U=((g=h.match(/^ */))==null?void 0:g[0])||"",y=Math.min(U.length,n);return h.slice(y)}).join(`
`);return a.replaceWith(l,f,r.schema.text(u)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:f})=>(f.setSelection(Pt.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[Jk({find:G8e,type:this.type,getAttributes:e=>({language:e[1]})}),Jk({find:X8e,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new ir({key:new Vr("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(St.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),Y8e=Ws.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),Z8e=Ws.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Er(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:f,dispatch:c})=>{if(c&&l&&o){const d=l.filter(u=>a.includes(u.type.name));f.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),q8e=Ws.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Er(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,i="#".repeat(r);return e.content?`${i} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Jk({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),Q8e=Ws.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Er(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!Tbe(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return yK(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,f=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(St.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(lt.create(o.doc,l.pos)):o.setSelection(St.create(o.doc,l.pos));else{const c=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=c==null?void 0:c.create();d&&(o.insert(f,d),o.setSelection(St.create(o.doc,f+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Abe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),J8e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,eUe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,tUe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,nUe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,rUe=o1.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Er(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[n6({find:J8e,type:this.type}),n6({find:tUe,type:this.type})]},addPasteRules(){return[Fh({find:eUe,type:this.type}),Fh({find:nUe,type:this.type})]}});const iUe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",sUe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",nC="numeric",rC="ascii",iC="alpha",A5="asciinumeric",s5="alphanumeric",sC="domain",WK="emoji",oUe="scheme",aUe="slashscheme",oE="whitespace";function lUe(e,t){return e in t||(t[e]=[]),t[e]}function Ou(e,t,n){t[nC]&&(t[A5]=!0,t[s5]=!0),t[rC]&&(t[A5]=!0,t[iC]=!0),t[A5]&&(t[s5]=!0),t[iC]&&(t[s5]=!0),t[s5]&&(t[sC]=!0),t[WK]&&(t[sC]=!0);for(const r in t){const i=lUe(r,n);i.indexOf(e)<0&&i.push(e)}}function cUe(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Ds(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Ds.groups={};Ds.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Ds.groups;let i;return t&&t.j?i=t:(i=new Ds(t),n&&r&&Ou(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Ds.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,a=i.go(e);if(a?(o=new Ds,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Ds,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(cUe(o.t,r),n);Ou(s,l,r)}else n&&Ou(s,n,r);o.t=s}return i.j[e]=o,o}};const Rt=(e,t,n,r,i)=>e.ta(t,n,r,i),lr=(e,t,n,r,i)=>e.tr(t,n,r,i),TO=(e,t,n,r,i)=>e.ts(t,n,r,i),Re=(e,t,n,r,i)=>e.tt(t,n,r,i),jc="WORD",oC="UWORD",GK="ASCIINUMERICAL",XK="ALPHANUMERICAL",C2="LOCALHOST",aC="TLD",lC="UTLD",jy="SCHEME",fp="SLASH_SCHEME",GA="NUM",cC="WS",XA="NL",T5="OPENBRACE",I5="CLOSEBRACE",r4="OPENBRACKET",i4="CLOSEBRACKET",s4="OPENPAREN",o4="CLOSEPAREN",a4="OPENANGLEBRACKET",l4="CLOSEANGLEBRACKET",c4="FULLWIDTHLEFTPAREN",f4="FULLWIDTHRIGHTPAREN",d4="LEFTCORNERBRACKET",u4="RIGHTCORNERBRACKET",h4="LEFTWHITECORNERBRACKET",p4="RIGHTWHITECORNERBRACKET",m4="FULLWIDTHLESSTHAN",g4="FULLWIDTHGREATERTHAN",b4="AMPERSAND",U4="APOSTROPHE",y4="ASTERISK",Id="AT",x4="BACKSLASH",v4="BACKTICK",w4="CARET",Od="COLON",KA="COMMA",E4="DOLLAR",kl="DOT",S4="EQUALS",YA="EXCLAMATION",Do="HYPHEN",N5="PERCENT",k4="PIPE",C4="PLUS",M4="POUND",R5="QUERY",ZA="QUOTE",KK="FULLWIDTHMIDDLEDOT",qA="SEMI",Cl="SLASH",_5="TILDE",A4="UNDERSCORE",YK="EMOJI",T4="SYM";var ZK=Object.freeze({__proto__:null,ALPHANUMERICAL:XK,AMPERSAND:b4,APOSTROPHE:U4,ASCIINUMERICAL:GK,ASTERISK:y4,AT:Id,BACKSLASH:x4,BACKTICK:v4,CARET:w4,CLOSEANGLEBRACKET:l4,CLOSEBRACE:I5,CLOSEBRACKET:i4,CLOSEPAREN:o4,COLON:Od,COMMA:KA,DOLLAR:E4,DOT:kl,EMOJI:YK,EQUALS:S4,EXCLAMATION:YA,FULLWIDTHGREATERTHAN:g4,FULLWIDTHLEFTPAREN:c4,FULLWIDTHLESSTHAN:m4,FULLWIDTHMIDDLEDOT:KK,FULLWIDTHRIGHTPAREN:f4,HYPHEN:Do,LEFTCORNERBRACKET:d4,LEFTWHITECORNERBRACKET:h4,LOCALHOST:C2,NL:XA,NUM:GA,OPENANGLEBRACKET:a4,OPENBRACE:T5,OPENBRACKET:r4,OPENPAREN:s4,PERCENT:N5,PIPE:k4,PLUS:C4,POUND:M4,QUERY:R5,QUOTE:ZA,RIGHTCORNERBRACKET:u4,RIGHTWHITECORNERBRACKET:p4,SCHEME:jy,SEMI:qA,SLASH:Cl,SLASH_SCHEME:fp,SYM:T4,TILDE:_5,TLD:aC,UNDERSCORE:A4,UTLD:lC,UWORD:oC,WORD:jc,WS:cC});const Rc=/[a-z]/,Tg=new RegExp("\\p{L}","u"),aE=new RegExp("\\p{Emoji}","u"),_c=/\d/,lE=/\s/,IO="\r",cE=`
`,fUe="",dUe="",fE="";let BU=null,FU=null;function uUe(e=[]){const t={};Ds.groups=t;const n=new Ds;BU==null&&(BU=NO(iUe)),FU==null&&(FU=NO(sUe)),Re(n,"'",U4),Re(n,"{",T5),Re(n,"}",I5),Re(n,"[",r4),Re(n,"]",i4),Re(n,"(",s4),Re(n,")",o4),Re(n,"<",a4),Re(n,">",l4),Re(n,"",c4),Re(n,"",f4),Re(n,"",d4),Re(n,"",u4),Re(n,"",h4),Re(n,"",p4),Re(n,"",m4),Re(n,"",g4),Re(n,"&",b4),Re(n,"*",y4),Re(n,"@",Id),Re(n,"`",v4),Re(n,"^",w4),Re(n,":",Od),Re(n,",",KA),Re(n,"$",E4),Re(n,".",kl),Re(n,"=",S4),Re(n,"!",YA),Re(n,"-",Do),Re(n,"%",N5),Re(n,"|",k4),Re(n,"+",C4),Re(n,"#",M4),Re(n,"?",R5),Re(n,'"',ZA),Re(n,"/",Cl),Re(n,";",qA),Re(n,"~",_5),Re(n,"_",A4),Re(n,"\\",x4),Re(n,"",KK);const r=lr(n,_c,GA,{[nC]:!0});lr(r,_c,r);const i=lr(r,Rc,GK,{[A5]:!0}),s=lr(r,Tg,XK,{[s5]:!0}),o=lr(n,Rc,jc,{[rC]:!0});lr(o,_c,i),lr(o,Rc,o),lr(i,_c,i),lr(i,Rc,i);const a=lr(n,Tg,oC,{[iC]:!0});lr(a,Rc),lr(a,_c,s),lr(a,Tg,a),lr(s,_c,s),lr(s,Rc),lr(s,Tg,s);const l=Re(n,cE,XA,{[oE]:!0}),f=Re(n,IO,cC,{[oE]:!0}),c=lr(n,lE,cC,{[oE]:!0});Re(n,fE,c),Re(f,cE,l),Re(f,fE,c),lr(f,lE,c),Re(c,IO),Re(c,cE),lr(c,lE,c),Re(c,fE,c);const d=lr(n,aE,YK,{[WK]:!0});Re(d,"#"),lr(d,aE,d),Re(d,fUe,d);const u=Re(d,dUe);Re(u,"#"),lr(u,aE,d);const h=[[Rc,o],[_c,i]],g=[[Rc,null],[Tg,a],[_c,s]];for(let U=0;U<BU.length;U++)bd(n,BU[U],aC,jc,h);for(let U=0;U<FU.length;U++)bd(n,FU[U],lC,oC,g);Ou(aC,{tld:!0,ascii:!0},t),Ou(lC,{utld:!0,alpha:!0},t),bd(n,"file",jy,jc,h),bd(n,"mailto",jy,jc,h),bd(n,"http",fp,jc,h),bd(n,"https",fp,jc,h),bd(n,"ftp",fp,jc,h),bd(n,"ftps",fp,jc,h),Ou(jy,{scheme:!0,ascii:!0},t),Ou(fp,{slashscheme:!0,ascii:!0},t),e=e.sort((U,y)=>U[0]>y[0]?1:-1);for(let U=0;U<e.length;U++){const y=e[U][0],w=e[U][1]?{[oUe]:!0}:{[aUe]:!0};y.indexOf("-")>=0?w[sC]=!0:Rc.test(y)?_c.test(y)?w[A5]=!0:w[rC]=!0:w[nC]=!0,TO(n,y,y,w)}return TO(n,"localhost",C2,{ascii:!0}),n.jd=new Ds(T4),{start:n,tokens:Object.assign({groups:t},ZK)}}function qK(e,t){const n=hUe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=e,l=null,f=0,c=null,d=-1,u=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,u=0,c=a):d>=0&&(d+=n[o].length,u++),f+=n[o].length,s+=n[o].length,o++;s-=d,o-=u,f-=d,i.push({t:c.t,v:t.slice(s-f,s),s:s-f,e:s})}return i}function hUe(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function bd(e,t,n,r,i){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];e.j[l]?s=e.j[l]:(s=new Ds(r),s.jr=i.slice(),e.j[l]=s),e=s}return s=new Ds(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function NO(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const M2={defaultProtocol:"http",events:null,format:RO,formatHref:RO,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function QA(e,t=null){let n=Object.assign({},M2);e&&(n=Object.assign(n,e instanceof QA?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}QA.prototype={o:M2,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:M2[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function RO(e){return e}function QK(e,t){this.t="token",this.v=e,this.tk=t}QK.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=M2.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},a=e.get("className",n,t),l=e.get("target",n,t),f=e.get("rel",n,t),c=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return o.href=r,a&&(o.class=a),l&&(o.target=l),f&&(o.rel=f),c&&Object.assign(o,c),{tagName:i,attributes:o,content:s,eventListeners:d}}};function w7(e,t){class n extends QK{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const _O=w7("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),PO=w7("text"),pUe=w7("nl"),$U=w7("url",{isLink:!0,toHref(e=M2.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==C2&&e[1].t===Od}}),Po=e=>new Ds(e);function mUe({groups:e}){const t=e.domain.concat([b4,y4,Id,x4,v4,w4,E4,S4,Do,GA,N5,k4,C4,M4,Cl,T4,_5,A4]),n=[U4,Od,KA,kl,YA,N5,R5,ZA,qA,a4,l4,T5,I5,i4,r4,s4,o4,c4,f4,d4,u4,h4,p4,m4,g4],r=[b4,U4,y4,x4,v4,w4,E4,S4,Do,T5,I5,N5,k4,C4,M4,R5,Cl,T4,_5,A4],i=Po(),s=Re(i,_5);Rt(s,r,s),Rt(s,e.domain,s);const o=Po(),a=Po(),l=Po();Rt(i,e.domain,o),Rt(i,e.scheme,a),Rt(i,e.slashscheme,l),Rt(o,r,s),Rt(o,e.domain,o);const f=Re(o,Id);Re(s,Id,f),Re(a,Id,f),Re(l,Id,f);const c=Re(s,kl);Rt(c,r,s),Rt(c,e.domain,s);const d=Po();Rt(f,e.domain,d),Rt(d,e.domain,d);const u=Re(d,kl);Rt(u,e.domain,d);const h=Po(_O);Rt(u,e.tld,h),Rt(u,e.utld,h),Re(f,C2,h);const g=Re(d,Do);Re(g,Do,g),Rt(g,e.domain,d),Rt(h,e.domain,d),Re(h,kl,u),Re(h,Do,g);const U=Re(h,Od);Rt(U,e.numeric,_O);const y=Re(o,Do),x=Re(o,kl);Re(y,Do,y),Rt(y,e.domain,o),Rt(x,r,s),Rt(x,e.domain,o);const w=Po($U);Rt(x,e.tld,w),Rt(x,e.utld,w),Rt(w,e.domain,o),Rt(w,r,s),Re(w,kl,x),Re(w,Do,y),Re(w,Id,f);const E=Re(w,Od),S=Po($U);Rt(E,e.numeric,S);const M=Po($U),A=Po();Rt(M,t,M),Rt(M,n,A),Rt(A,t,M),Rt(A,n,A),Re(w,Cl,M),Re(S,Cl,M);const C=Re(a,Od),I=Re(l,Od),R=Re(I,Cl),L=Re(R,Cl);Rt(a,e.domain,o),Re(a,kl,x),Re(a,Do,y),Rt(l,e.domain,o),Re(l,kl,x),Re(l,Do,y),Rt(C,e.domain,M),Re(C,Cl,M),Re(C,R5,M),Rt(L,e.domain,M),Rt(L,t,M),Re(L,Cl,M);const _=[[T5,I5],[r4,i4],[s4,o4],[a4,l4],[c4,f4],[d4,u4],[h4,p4],[m4,g4]];for(let O=0;O<_.length;O++){const[$,B]=_[O],F=Re(M,$);Re(A,$,F),Re(F,B,M);const z=Po($U);Rt(F,t,z);const H=Po();Rt(F,n),Rt(z,t,z),Rt(z,n,H),Rt(H,t,z),Rt(H,n,H),Re(z,B,M),Re(H,B,M)}return Re(i,C2,w),Re(i,XA,pUe),{start:i,tokens:ZK}}function gUe(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=e,l=null,f=null,c=0,d=null,u=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(f=l||a.go(n[i].t));)l=null,a=f,a.accepts()?(u=0,d=a):u>=0&&u++,i++,c++;if(u<0)i-=c,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(dE(PO,t,o)),o=[]),i-=u,c-=u;const h=d.t,g=n.slice(i-c,i);s.push(dE(h,t,g))}}return o.length>0&&s.push(dE(PO,t,o)),s}function dE(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const bUe=typeof console<"u"&&console&&console.warn||(()=>{}),UUe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Rn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function yUe(){return Ds.groups={},Rn.scanner=null,Rn.parser=null,Rn.tokenQueue=[],Rn.pluginQueue=[],Rn.customSchemes=[],Rn.initialized=!1,Rn}function DO(e,t=!1){if(Rn.initialized&&bUe(`linkifyjs: already initialized - will not register custom scheme "${e}" ${UUe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Rn.customSchemes.push([e,t])}function xUe(){Rn.scanner=uUe(Rn.customSchemes);for(let e=0;e<Rn.tokenQueue.length;e++)Rn.tokenQueue[e][1]({scanner:Rn.scanner});Rn.parser=mUe(Rn.scanner.tokens);for(let e=0;e<Rn.pluginQueue.length;e++)Rn.pluginQueue[e][1]({scanner:Rn.scanner,parser:Rn.parser});return Rn.initialized=!0,Rn}function JA(e){return Rn.initialized||xUe(),gUe(Rn.parser.start,e,qK(Rn.scanner.start,e))}JA.scan=qK;function JK(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new QA(n),i=JA(e),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!t||a.t===t)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var eT="[\0- -\u2029]",vUe=new RegExp(eT),wUe=new RegExp(`${eT}$`),EUe=new RegExp(eT,"g");function SUe(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function kUe(e){return new ir({key:new Vr("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(f=>f.docChanged)&&!n.doc.eq(r.doc),s=t.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=dK(n.doc,[...t]);if(UK(a).forEach(({newRange:f})=>{const c=I2e(r.doc,f,h=>h.isTextblock);let d,u;if(c.length>1)d=c[0],u=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const h=r.doc.textBetween(f.from,f.to," "," ");if(!wUe.test(h))return;d=c[0],u=r.doc.textBetween(d.pos,f.to,void 0," ")}if(d&&u){const h=u.split(vUe).filter(Boolean);if(h.length<=0)return!1;const g=h[h.length-1],U=d.pos+u.lastIndexOf(g);if(!g)return!1;const y=JA(g).map(x=>x.toObject(e.defaultProtocol));if(!SUe(y))return!1;y.filter(x=>x.isLink).map(x=>({...x,from:U+x.start+1,to:U+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{BA(x.from,x.to,r.doc).some(w=>w.mark.type===e.type)||o.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!o.steps.length)return o}})}function CUe(e){return new ir({key:new Vr("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const l=r.target;if(!l)return!1;const f=e.editor.view.dom;o=l.closest("a"),o&&!f.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(e.enableClickSelection&&(a=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){const l=bK(t.state,e.type.name),f=(i=o.href)!=null?i:l.href,c=(s=o.target)!=null?s:l.target;f&&(window.open(f,c),a=!0)}return a}}})}function MUe(e){return new ir({key:new Vr("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:i}=e,{state:s}=t,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(c=>{l+=c.textContent});const f=JK(l,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!f||i!==void 0&&!i(f.value)?!1:e.editor.commands.setMark(e.type,{href:f.href})}}})}function au(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(EUe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var eY=o1.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){DO(e);return}DO(e.scheme,e.optionalSlashes)})},onDestroy(){yUe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!au(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>{const t=/^[a-z][a-z0-9+.-]*:\/\//i.test(e),n=/^[a-z][a-z0-9+.-]*:/i.test(e);if(t||n&&!e.includes("@"))return!0;const i=(e.includes("@")?e.split("@").pop():e).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!au(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!au(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Er(this.options.HTMLAttributes,e),0]:["a",Er(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n,r,i,s;const o=(r=(n=e.attrs)==null?void 0:n.href)!=null?r:"",a=(s=(i=e.attrs)==null?void 0:i.title)!=null?s:"",l=t.renderChildren(e);return a?`[${l}](${o} "${a}")`:`[${l}](${o})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!au(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!au(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Fh({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=JK(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!au(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&t.push({text:s.value,data:{href:s.href},index:s.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(kUe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!au(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(CUe({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(MUe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),tY=eY,AUe=Object.defineProperty,TUe=(e,t)=>{for(var n in t)AUe(e,n,{get:t[n],enumerable:!0})},IUe="listItem",LO="textStyle",OO=/^\s*([-+*])\s$/,nY=Ws.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Er(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(IUe,this.editor.getAttributes(LO)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=r6({find:OO,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=r6({find:OO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(LO),editor:this.editor})),[e]}}),rY=Ws.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Er(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(i=>i.type==="paragraph"))n=t.parseChildren(e.tokens);else{const i=e.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(i.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),a=t.parseChildren(o);n.push(...a)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>HA(e,t,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),NUe={};TUe(NUe,{findListItemPos:()=>Rb,getNextListDepth:()=>tT,handleBackspace:()=>fC,handleDelete:()=>dC,hasListBefore:()=>iY,hasListItemAfter:()=>RUe,hasListItemBefore:()=>sY,listItemHasSubList:()=>oY,nextListIsDeeper:()=>aY,nextListIsHigher:()=>lY});var Rb=(e,t)=>{const{$from:n}=t.selection,r=Pr(e,t.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:t.doc.resolve(o),depth:a}},tT=(e,t)=>{const n=Rb(e,t);if(!n)return!1;const[,r]=F2e(t,e,n.$pos.pos+4);return r},iY=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},sY=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},oY=(e,t,n)=>{if(!n)return!1;const r=Pr(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},fC=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!k0(e.state,t)&&iY(e.state,t,n)){const{$anchor:a}=e.state.selection,l=e.state.doc.resolve(a.before()-1),f=[];l.node().descendants((u,h)=>{u.type.name===t&&f.push({node:u,pos:h})});const c=f.at(-1);if(!c)return!1;const d=e.state.doc.resolve(l.start()+c.pos+1);return e.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!k0(e.state,t)||!V2e(e.state))return!1;const r=Rb(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=oY(t,e.state,s);return sY(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},aY=(e,t)=>{const n=tT(e,t),r=Rb(e,t);return!r||!n?!1:n>r.depth},lY=(e,t)=>{const n=tT(e,t),r=Rb(e,t);return!r||!n?!1:n<r.depth},dC=(e,t)=>{if(!k0(e.state,t)||!H2e(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:aY(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():lY(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},RUe=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},cY=Sr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&dC(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&dC(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&fC(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&fC(e,n,r)&&(t=!0)}),t}}}}),jO=/^(\s*)(\d+)\.\s+(.*)$/,_Ue=/^\s/;function PUe(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n],s=i.match(jO);if(!s)break;const[,o,a,l]=s,f=o.length;let c=l,d=n+1;const u=[i];for(;d<e.length;){const h=e[d];if(h.match(jO))break;if(h.trim()==="")u.push(h),c+=`
`,d+=1;else if(h.match(_Ue))u.push(h),c+=`
${h.slice(f+2)}`,d+=1;else break}t.push({indent:f,number:parseInt(a,10),content:c.trim(),raw:u.join(`
`)}),r=d,n=d}return[t,r]}function fY(e,t,n){var r;const i=[];let s=0;for(;s<e.length;){const o=e[s];if(o.indent===t){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",f=[];l&&f.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const c=a.slice(1).join(`
`).trim();if(c){const h=n.blockTokens(c);f.push(...h)}let d=s+1;const u=[];for(;d<e.length&&e[d].indent>t;)u.push(e[d]),d+=1;if(u.length>0){const h=Math.min(...u.map(U=>U.indent)),g=fY(u,h,n);f.push({type:"list",ordered:!0,start:u[0].number,items:g,raw:u.map(U=>U.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:f}),s=d}else s+=1}return i}function DUe(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=t.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=t.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var LUe="listItem",BO="textStyle",FO=/^(\d+)\.\s$/,dY=Ws.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Er(this.options.HTMLAttributes,n),0]:["ol",Er(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?DUe(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const i=e.split(`
`),[s,o]=PUe(i);if(s.length===0)return;const a=fY(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(LUe,this.editor.getAttributes(BO)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=r6({find:FO,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=r6({find:FO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(BO)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),OUe=/^\s*(\[([( |x])?\])\s$/,jUe=Ws.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Er(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const i=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return HA(e,t,i)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),f=d=>{var u,h;a.ariaLabel=((h=(u=this.options.a11y)==null?void 0:u.checkboxLabel)==null?void 0:h.call(u,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};f(e),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:u}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const g=n();if(typeof g!="number")return!1;const U=h.doc.nodeAt(g);return h.setNodeMarkup(g,void 0,{...U==null?void 0:U.attrs,checked:u}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,u)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,u])=>{i.setAttribute(d,u)}),i.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(t).forEach(([d,u])=>{i.setAttribute(d,u)});let c=new Set(Object.keys(t));return{dom:i,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;i.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,f(d);const u=r.extensionManager.attributes,h=k2(d,u),g=new Set(Object.keys(h)),U=this.options.HTMLAttributes;return c.forEach(y=>{g.has(y)||(y in U?i.setAttribute(y,U[y]):i.removeAttribute(y))}),Object.entries(h).forEach(([y,x])=>{x==null?y in U?i.setAttribute(y,U[y]):i.removeAttribute(y):i.setAttribute(y,x)}),c=g,!0}}}},addInputRules(){return[r6({find:OUe,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),BUe=Ws.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Er(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=s=>{const o=eC(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=eC(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Sr.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(nY.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(rY.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(cY.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(dY.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(jUe.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(BUe.configure(this.options.taskList)),e}});var $O="&nbsp;",FUe="",$Ue=Ws.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Er(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];if(n.length===1&&n[0].type==="image")return t.parseChildren([n[0]]);const r=t.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===$O||r[0].text===FUe)?t.createNode("paragraph",void 0,[]):t.createNode("paragraph",void 0,r)},renderMarkdown:(e,t)=>{if(!e)return"";const n=Array.isArray(e.content)?e.content:[];return n.length===0?$O:t.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),zUe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,HUe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,VUe=o1.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Er(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[n6({find:zUe,type:this.type})]},addPasteRules(){return[Fh({find:HUe,type:this.type})]}}),WUe=Ws.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),GUe=o1.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Er(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function XUe(e={}){return new ir({view(t){return new KUe(t,e)}})}class KUe{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=t.nodeBefore,u=t.nodeAfter;if(d||u){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let g=h.getBoundingClientRect(),U=d?g.bottom:g.top;d&&u&&(U=(U+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:g.left,right:g.right,top:U-y,bottom:U+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),u=this.width/2*o;r={left:d.left-u,right:d.left+u,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")f=-pageXOffset,c=-pageYOffset;else{let d=l.getBoundingClientRect(),u=d.width/l.offsetWidth,h=d.height/l.offsetHeight;f=d.left-l.scrollLeft*u,c=d.top-l.scrollTop*h}this.element.style.left=(r.left-f)/o+"px",this.element.style.top=(r.top-c)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=lX(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class mr extends Pt{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return mr.valid(r)?new mr(r):Pt.near(r)}content(){return We.empty}eq(t){return t instanceof mr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new mr(t.resolve(n.pos))}getBookmark(){return new nT(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!YUe(t)||!ZUe(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&mr.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let a=t.node(o);if(n>0?t.indexAfter(o)<a.childCount:t.index(o)>0){s=a.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let l=t.doc.resolve(i);if(mr.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!lt.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=t.doc.resolve(i);if(mr.valid(a))return a}return null}}}mr.prototype.visible=!1;mr.findFrom=mr.findGapCursorFrom;Pt.jsonID("gapcursor",mr);class nT{constructor(t){this.pos=t}map(t){return new nT(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return mr.valid(n)?new mr(n):Pt.near(n)}}function uY(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function YUe(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||uY(i.type))return!0;if(i.inlineContent)return!1}}return!0}function ZUe(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||uY(i.type))return!0;if(i.inlineContent)return!1}}return!0}function qUe(){return new ir({props:{decorations:tye,createSelectionBetween(e,t,n){return t.pos==n.pos&&mr.valid(n)?new mr(n):null},handleClick:JUe,handleKeyDown:QUe,handleDOMEvents:{beforeinput:eye}}})}const QUe=rK({ArrowLeft:zU("horiz",-1),ArrowRight:zU("horiz",1),ArrowUp:zU("vert",-1),ArrowDown:zU("vert",1)});function zU(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,a=t>0?o.$to:o.$from,l=o.empty;if(o instanceof St){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let f=mr.findGapCursorFrom(a,t,l);return f?(i&&i(r.tr.setSelection(new mr(f))),!0):!1}}function JUe(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!mr.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&lt.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new mr(r))),!0)}function eye(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof mr))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=Ae.empty;for(let o=r.length-1;o>=0;o--)i=Ae.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new We(i,0,0));return s.setSelection(St.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function tye(e){if(!(e.selection instanceof mr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Qn.create(e.doc,[us.widget(e.selection.head,t,{key:"gapcursor"})])}var I4=200,fi=function(){};fi.prototype.append=function(t){return t.length?(t=fi.from(t),!this.length&&t||t.length<I4&&this.leafAppend(t)||this.length<I4&&t.leafPrepend(this)||this.appendInner(t)):this};fi.prototype.prepend=function(t){return t.length?fi.from(t).append(this):this};fi.prototype.appendInner=function(t){return new nye(this,t)};fi.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?fi.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};fi.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};fi.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};fi.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};fi.from=function(t){return t instanceof fi?t:t&&t.length?new hY(t):fi.empty};var hY=function(e){function t(r){e.call(this),this.values=r}t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=I4)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=I4)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(fi);fi.empty=new hY([]);var nye=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t.__proto__=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(fi);const rye=500;class $a{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,a,l,f=[],c=[];return this.items.forEach((d,u)=>{if(!d.step){i||(i=this.remapping(r,u+1),s=i.maps.length),s--,c.push(d);return}if(i){c.push(new Ml(d.map));let h=d.step.map(i.slice(s)),g;h&&o.maybeStep(h).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],f.push(new Ml(g,void 0,void 0,f.length+c.length))),s--,g&&i.appendMap(g,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new $a(this.items.slice(0,r).append(c.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(t,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let c=0;c<t.steps.length;c++){let d=t.steps[c].invert(t.docs[c]),u=new Ml(t.mapping.maps[c],d,n),h;(h=l&&l.merge(u))&&(u=h,c?s.pop():a=a.slice(0,a.length-1)),s.push(u),n&&(o++,n=void 0),i||(l=u)}let f=o-r.depth;return f>sye&&(a=iye(a,f),o-=f),new $a(a.append(s),o)}remapping(t,n){let r=new y2;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new $a(this.items.append(t.map(n=>new Ml(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,a=this.eventCount;this.items.forEach(u=>{u.selection&&a--},i);let l=n;this.items.forEach(u=>{let h=s.getMirror(--l);if(h==null)return;o=Math.min(o,h);let g=s.maps[h];if(u.step){let U=t.steps[h].invert(t.docs[h]),y=u.selection&&u.selection.map(s.slice(l+1,h));y&&a++,r.push(new Ml(g,U,y))}else r.push(new Ml(g))},i);let f=[];for(let u=n;u<o;u++)f.push(new Ml(s.maps[u]));let c=this.items.slice(0,i).append(f).append(r),d=new $a(c,a);return d.emptyItemCount()>rye&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=t)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),f=l&&l.getMap();if(r--,f&&n.appendMap(f,r),l){let c=o.selection&&o.selection.map(n.slice(r));c&&s++;let d=new Ml(f.invert(),l,c),u,h=i.length-1;(u=i.length&&i[h].merge(d))?i[h]=u:i.push(d)}}else o.map&&r--},this.items.length,0),new $a(fi.from(i.reverse()),s)}}$a.empty=new $a(fi.empty,0);function iye(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Ml{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Ml(n.getMap().invert(),n,this.selection)}}}class Nd{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const sye=20;function oye(e,t,n,r){let i=n.getMeta(yh),s;if(i)return i.historyState;n.getMeta(cye)&&(e=new Nd(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(yh))return o.getMeta(yh).redo?new Nd(e.done.addTransform(n,void 0,r,By(t)),e.undone,zO(n.mapping.maps),e.prevTime,e.prevComposition):new Nd(e.done,e.undone.addTransform(n,void 0,r,By(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!o&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!aye(n,e.prevRanges)),f=o?uE(e.prevRanges,n.mapping):zO(n.mapping.maps);return new Nd(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,By(t)),$a.empty,f,n.time,a??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Nd(e.done.rebased(n,s),e.undone.rebased(n,s),uE(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Nd(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),uE(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function aye(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function zO(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function uE(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function lye(e,t,n){let r=By(t),i=yh.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),l=new Nd(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(yh,{redo:n,historyState:l})}let hE=!1,HO=null;function By(e){let t=e.plugins;if(HO!=t){hE=!1,HO=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){hE=!0;break}}return hE}const yh=new Vr("history"),cye=new Vr("closeHistory");function fye(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new ir({key:yh,state:{init(){return new Nd($a.empty,$a.empty,null,0,-1)},apply(t,n,r){return oye(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?mY:r=="historyRedo"?gY:null;return!i||!t.editable?!1:(n.preventDefault(),i(t.state,t.dispatch))}}}})}function pY(e,t){return(n,r)=>{let i=yh.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=lye(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const mY=pY(!1,!0),gY=pY(!0,!0);Sr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new ir({key:new Vr("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(a,l);return e=!0,f}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,l=s-r,f=a-l,c=a;return t.deleteRange(f,c),!(this.storage.characters({node:t.doc})>r)}})]}});var dye=Sr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[XUe(this.options)]}});Sr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new ir({key:new Vr("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Qn.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((l,f)=>{if(l.isText)return;if(!(i>=f&&i<=f+l.nodeSize-1))return!1;o+=1});let a=0;return e.descendants((l,f)=>{if(l.isText||!(i>=f&&i<=f+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(us.node(f,f+l.nodeSize,{class:this.options.className}))}),Qn.create(e,s)}}})]}});var uye=Sr.create({name:"gapCursor",addProseMirrorPlugins(){return[qUe()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=rn(it(e,"allowGapCursor",n)))!=null?t:null}}}),VO="placeholder";function hye(e){return e.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var pye=Sr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:VO,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const e=this.options.dataAttribute?`data-${hye(this.options.dataAttribute)}`:`data-${VO}`;return[new ir({key:new Vr("placeholder"),props:{decorations:({doc:t,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,s=[];if(!r)return null;const o=this.editor.isEmpty;return t.descendants((a,l)=>{const f=i>=l&&i<=l+a.nodeSize,c=!a.isLeaf&&y7(a);if((f||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const u=us.node(l,l+a.nodeSize,{class:d.join(" "),[e]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:f}):this.options.placeholder});s.push(u)}return this.options.includeChildren}),Qn.create(t,s)}}})]}});Sr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new ir({key:new Vr("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||yK(n.selection)||e.view.dragging?null:Qn.create(n.doc,[us.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function WO({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var mye=Sr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new Vr(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new ir({key:t,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:f}=o,c=t.getState(o),d=a.content.size,u=f.nodes[n];if(c)return l.insert(d,u.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!WO({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!WO({node:o,types:r})}}})]}}),gye=Sr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>mY(e,t),redo:()=>({state:e,dispatch:t})=>gY(e,t)}},addProseMirrorPlugins(){return[fye(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),bye=Sr.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(z8e.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(O8e.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(nY.configure(this.options.bulletList)),this.options.code!==!1&&i.push(W8e.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(K8e.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Y8e.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(dye.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(uye.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Z8e.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(q8e.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(gye.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Q8e.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(rUe.configure(this.options.italic)),this.options.listItem!==!1&&i.push(rY.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(cY.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(eY.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(dY.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push($Ue.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(VUe.configure(this.options.strike)),this.options.text!==!1&&i.push(WUe.configure(this.options.text)),this.options.underline!==!1&&i.push(GUe.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(mye.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),bY=bye,Uye=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,yye=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,UY=e=>e.match(Uye),GO=(e,t)=>t?"https://www.youtube-nocookie.com/embed/videoseries?list=":e?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",xye=e=>{const{url:t,allowFullscreen:n,autoplay:r,ccLanguage:i,ccLoadPolicy:s,controls:o,disableKBcontrols:a,enableIFrameApi:l,endTime:f,interfaceLanguage:c,ivLoadPolicy:d,loop:u,modestBranding:h,nocookie:g,origin:U,playlist:y,progressBarColor:x,startAt:w,rel:E}=e;if(!UY(t))return null;if(t.includes("/embed/"))return t;if(t.includes("youtu.be")){const I=t.split("/").pop();return I?`${GO(g)}${I}`:null}const M=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(t);if(!M||!M[2])return null;let A=`${GO(g,M[1]==="list")}${M[2]}`;const C=[];return n===!1&&C.push("fs=0"),r&&C.push("autoplay=1"),i&&C.push(`cc_lang_pref=${i}`),s&&C.push("cc_load_policy=1"),o||C.push("controls=0"),a&&C.push("disablekb=1"),l&&C.push("enablejsapi=1"),f&&C.push(`end=${f}`),c&&C.push(`hl=${c}`),d&&C.push(`iv_load_policy=${d}`),u&&C.push("loop=1"),h&&C.push("modestbranding=1"),U&&C.push(`origin=${U}`),y&&C.push(`playlist=${y}`),w&&C.push(`start=${w}`),x&&C.push(`color=${x}`),E!==void 0&&C.push(`rel=${E}`),C.length&&(A+=`${M[1]==="list"?"&":"?"}${C.join("&")}`),A},vye=Ws.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:e=>({commands:t})=>UY(e.src)?t.insertContent({type:this.name,attrs:e}):!1}},addPasteRules(){return this.options.addPasteHandler?[Lbe({find:yye,type:this.type,getAttributes:e=>({src:e.input})})]:[]},renderHTML({HTMLAttributes:e}){const t=xye({url:e.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:e.start||0,rel:this.options.rel});return e.src=t,["div",{"data-youtube-video":""},["iframe",Er(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},e)]]},...OK({nodeName:"youtube",allowedAttributes:["src","width","height","start"]})}),yY=vye,xY=pye;const wye=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],Eye={ROOT:"#888",EVIDENCE:"#4fc3f7",REFERENCE:"#ab47bc",CONTEXT:"#ff8a65",EXAMPLE:"#66bb6a",COUNTERPOINT:"#ef5350",SYNTHESIS:"#fdd835"},Sye=({editor:e})=>{if(!e)return null;const t=T.useCallback(()=>{const s=window.prompt("URL:");s&&e.chain().focus().extendMarkRange("link").setLink({href:s}).run()},[e]),n=T.useCallback(()=>{const s=window.prompt("YouTube URL:");s&&e.commands.setYoutubeVideo({src:s})},[e]),r=({onClick:s,active:o,children:a})=>m.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:a}),i=()=>m.jsx("span",{className:"ar-toolbar-divider"});return m.jsxs("div",{className:"ar-toolbar",children:[m.jsx(r,{onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold"),children:"B"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic"),children:"I"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike"),children:"S"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),active:e.isActive("heading",{level:1}),children:"H1"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2}),children:"H2"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3}),children:"H3"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList"),children:"Bullet"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList"),children:"Ordered"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote"),children:"Quote"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock"),children:"Code"}),m.jsx(i,{}),m.jsx(r,{onClick:t,active:e.isActive("link"),children:"Link"}),m.jsx(r,{onClick:n,children:"YouTube"})]})},kye=e=>{if(!e)return m.jsx("p",{className:"ar-empty",children:"No content available."});let t=e;if(typeof t=="object"&&(t=t.content||t.text||JSON.stringify(t,null,2)),typeof t!="string")return m.jsx("p",{className:"ar-empty",children:"No content available."});if(t.trim().startsWith("<"))return m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:t}});const n=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11})/,r=/https?:\/\/[^\s<>"]+/g;return t.split(/\n{2,}/).flatMap(s=>s.includes(`
`)?s.split(`
`):[s]).filter(s=>s.trim()!=="").map((s,o)=>{const a=s.trim().match(n);if(a)return m.jsx("div",{className:"ar-youtube",children:m.jsx("iframe",{src:`https://www.youtube.com/embed/${a[1]}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:`video-${o}`})},o);const l=[];let f=0,c;for(r.lastIndex=0;(c=r.exec(s))!==null;)c.index>f&&l.push(s.slice(f,c.index)),l.push(m.jsx("a",{href:c[0],target:"_blank",rel:"noopener noreferrer",children:c[0]},c.index)),f=c.index+c[0].length;return f<s.length&&l.push(s.slice(f)),m.jsx("p",{children:l.length?l:s},o)})},Cye=e=>e.node_type?e.node_type:typeof e.type=="number"?wye[e.type]||"ROOT":e.type||"ROOT",HU=e=>{if(!e)return null;const t=String(e);return/<[a-z][\s\S]*>/i.test(t)?m.jsx("div",{className:"ar-html",dangerouslySetInnerHTML:{__html:t}}):m.jsx("p",{children:t})},Mye=e=>{var n;let t=e.content;if(!t)return null;if(typeof t=="string")try{const r=JSON.parse(t);typeof r=="object"&&(t=r)}catch{}return typeof t=="object"?t.title&&t.description&&"keywords"in t?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.title}),HU(t.description),((n=t.keywords)==null?void 0:n.length)>0&&m.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.9rem",marginTop:16},children:m.jsxs("em",{children:["Keywords: ",Array.isArray(t.keywords)?t.keywords.join(", "):t.keywords]})})]}):t.point?m.jsxs("div",{children:[HU(t.point),t.source&&m.jsxs("p",{style:{color:"rgba(255,255,255,0.5)",fontStyle:"italic",marginTop:16},children:["Source: ",t.source]})]}):t.title&&t.description?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.title}),HU(t.description)]}):t.argument?m.jsxs("div",{children:[m.jsx("h3",{style:{color:"#fff",margin:"0 0 12px"},children:t.argument}),t.explanation&&HU(t.explanation)]}):t.content?t.content:t.text?t.text:JSON.stringify(t,null,2):t},Aye=({thread:e,onContentChange:t})=>{var l,f;const n=T.useRef(null),[r,i]=T.useState(null),s=$K({extensions:[bY,tY.configure({openOnClick:!1}),yY.configure({width:640,height:360}),xY.configure({placeholder:"Start writing your thread content here..."})],content:e.content||"",onUpdate:({editor:c})=>{const d=c.getHTML();n.current&&clearTimeout(n.current),i("saving"),n.current=setTimeout(async()=>{try{await Bi.updateThreadContent(e.id,d),i("saved"),t&&t(d),setTimeout(()=>i(null),2e3)}catch(u){console.error("Failed to save content:",u),i(null)}},800)}});T.useEffect(()=>{s&&e.content!==void 0&&s.getHTML()==="<p></p>"&&e.content&&e.content!=="<p></p>"&&s.commands.setContent(e.content)},[e.id]);const o=((l=e.metadata)==null?void 0:l.title)||e.title||`Thread ${e.id}`,a=((f=e.metadata)==null?void 0:f.description)||e.description||"";return m.jsxs("article",{className:"ar-article",children:[m.jsx("h1",{className:"ar-title",children:o}),a&&m.jsx("p",{className:"ar-description",children:a}),m.jsx("hr",{className:"ar-divider"}),m.jsxs("div",{className:"ar-editor-section",children:[m.jsx(Sye,{editor:s}),m.jsx("div",{className:"ar-editor-wrapper",children:m.jsx(VA,{editor:s})}),r&&m.jsx("div",{className:"ar-save-status",children:r==="saving"?"Saving...":"Saved"})]})]})},Tye=({thread:e,initialNodeId:t})=>{const[n,r]=T.useState(0),[i,s]=T.useState([]),[o,a]=T.useState(!0);T.useEffect(()=>{e!=null&&e.id&&l()},[e==null?void 0:e.id]),T.useEffect(()=>{if(!t||i.length===0)return;const d=i.findIndex(u=>u.id===t);d>=0&&r(d+1)},[t,i]);const l=async()=>{a(!0);try{const d=e.nodes||[],u=await Bi.loadArticleSequence(e.id);let h;if(u&&Array.isArray(u)){const g=new Set(u),U=u.map(x=>d.find(w=>w.id===x)).filter(Boolean),y=d.filter(x=>!g.has(x.id));h=[...U,...y]}else h=[...d];if(s(h),t){const g=h.findIndex(U=>U.id===t);r(g>=0?g+1:0)}else r(0)}catch(d){console.error("Failed to load article sequence:",d);const u=[...e.nodes||[]];if(s(u),t){const h=u.findIndex(g=>g.id===t);r(h>=0?h+1:0)}else r(0)}finally{a(!1)}};if(!e)return null;const f=1+i.length,c=()=>{if(n===0)return m.jsx(Aye,{thread:e});const d=i[n-1];if(!d)return m.jsx("p",{className:"ar-empty",children:"Node not found."});const u=Cye(d),h=Eye[u]||"#888",g=d.title||`Node ${d.id}`,U=Mye(d),y=Te.isValidElement(U);return m.jsxs("article",{className:"ar-article",children:[m.jsx("div",{className:"ar-node-badge",style:{background:h},children:u}),m.jsx("h1",{className:"ar-title",children:g}),m.jsx("hr",{className:"ar-divider"}),m.jsx("div",{className:"ar-content",children:y?U:kye(U)})]})};return m.jsxs("div",{className:"ar-page",children:[m.jsx("main",{className:"ar-body",children:o?m.jsx("div",{className:"ar-loading",children:"Loading..."}):c()}),!o&&f>1&&m.jsxs("div",{className:"ar-nav",children:[m.jsx("button",{className:"ar-nav-btn",disabled:n===0,onClick:()=>r(d=>d-1),children:" Prev"}),m.jsxs("span",{className:"ar-nav-info",children:[n+1," / ",f]}),m.jsx("button",{className:"ar-nav-btn",disabled:n>=f-1,onClick:()=>r(d=>d+1),children:"Next "})]})]})},Iye="modulepreload",Nye=function(e){return"/"+e},XO={},Ve=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Nye(l),l in XO)return;XO[l]=!0;const f=l.endsWith(".css"),c=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":Iye,f||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),f)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var vt={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"false",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",PKG_NAME:"@excalidraw/excalidraw",PKG_VERSION:"0.18.0",PROD:!0},vY=Object.defineProperty,Rye=(e,t,n)=>t in e?vY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MHe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),_ye=e=>t=>{var n=e[t];if(n)return n();throw new Error("Module not found in bundle: "+t)},wY=(e,t)=>{for(var n in t)vY(e,n,{get:t[n],enumerable:!0})},Z=(e,t,n)=>(Rye(e,typeof t!="symbol"?t+"":t,n),n),pE={},KO;function Pye(){return KO||(KO=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var f=0,c=new Array(256),d=0;d!=256;++d)f=d,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,c[d]=f;return typeof Int32Array<"u"?new Int32Array(c):c}var r=n(),i=typeof Buffer<"u";function s(f){if(f.length>32768&&i)return a(new Buffer(f));for(var c=-1,d=f.length-1,u=0;u<d;)c=r[(c^f.charCodeAt(u++))&255]^c>>>8,c=r[(c^f.charCodeAt(u++))&255]^c>>>8;return u===d&&(c=c>>>8^r[(c^f.charCodeAt(u))&255]),c^-1}function o(f){if(f.length>1e4)return a(f);for(var c=-1,d=0,u=f.length-3;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+3;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function a(f){for(var c=-1,d=0,u=f.length-7;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+7;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function l(f){for(var c=-1,d=0,u=f.length,h,g;d<u;)h=f.charCodeAt(d++),h<128?c=c>>>8^r[(c^h)&255]:h<2048?(c=c>>>8^r[(c^(192|h>>6&31))&255],c=c>>>8^r[(c^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,g=f.charCodeAt(d++)&1023,c=c>>>8^r[(c^(240|h>>8&7))&255],c=c>>>8^r[(c^(128|h>>2&63))&255],c=c>>>8^r[(c^(128|g>>6&15|h&3))&255],c=c>>>8^r[(c^(128|g&63))&255]):(c=c>>>8^r[(c^(224|h>>12&15))&255],c=c>>>8^r[(c^(128|h>>6&63))&255],c=c>>>8^r[(c^(128|h&63))&255]);return c^-1}t.table=r,t.bstr=s,t.buf=o,t.str=l})}(pE)),pE}var mE,YO;function Dye(){if(YO)return mE;YO=1;var e=Pye();mE=i;var t=new Uint8Array(4),n=new Int32Array(t.buffer),r=new Uint32Array(t.buffer);function i(s){if(s[0]!==137)throw new Error("Invalid .png file header");if(s[1]!==80)throw new Error("Invalid .png file header");if(s[2]!==78)throw new Error("Invalid .png file header");if(s[3]!==71)throw new Error("Invalid .png file header");if(s[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(s[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(s[6]!==26)throw new Error("Invalid .png file header");if(s[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var o=!1,a=[],l=8;l<s.length;){t[3]=s[l++],t[2]=s[l++],t[1]=s[l++],t[0]=s[l++];var f=r[0]+4,c=new Uint8Array(f);c[0]=s[l++],c[1]=s[l++],c[2]=s[l++],c[3]=s[l++];var d=String.fromCharCode(c[0])+String.fromCharCode(c[1])+String.fromCharCode(c[2])+String.fromCharCode(c[3]);if(!a.length&&d!=="IHDR")throw new Error("IHDR header missing");if(d==="IEND"){o=!0,a.push({name:d,data:new Uint8Array(0)});break}for(var u=4;u<f;u++)c[u]=s[l++];t[3]=s[l++],t[2]=s[l++],t[1]=s[l++],t[0]=s[l++];var h=n[0],g=e.buf(c);if(g!==h)throw new Error("CRC values for "+d+" header do not match, PNG file is likely corrupted");var U=new Uint8Array(c.buffer.slice(4));a.push({name:d,data:U})}if(!o)throw new Error(".png file ended prematurely: no IEND header was found");return a}return mE}var Lye=Dye();const EY=hc(Lye);var VU={},gE,ZO;function Oye(){if(ZO)return gE;ZO=1,gE=e;function e(t,n){if(t=String(t),n=String(n),!/^[\x00-\xFF]+$/.test(t)||!/^[\x00-\xFF]+$/.test(n))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(t.length>=80)throw new Error('Keyword "'+t+'" is longer than the 79-character limit imposed by the PNG specification');for(var r=t.length+n.length+1,i=new Uint8Array(r),s=0,o,a=0;a<t.length;a++){if(!(o=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt keywords");i[s++]=o}i[s++]=0;for(var l=0;l<n.length;l++){if(!(o=n.charCodeAt(l)))throw new Error("0x00 character is not permitted in tEXt content");i[s++]=o}return{name:"tEXt",data:i}}return gE}var bE,qO;function jye(){if(qO)return bE;qO=1,bE=e;function e(t){t.data&&t.name&&(t=t.data);for(var n=!0,r="",i="",s=0;s<t.length;s++){var o=t[s];if(n)o?i+=String.fromCharCode(o):n=!1;else if(o)r+=String.fromCharCode(o);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:r}}return bE}var QO;function Bye(){return QO||(QO=1,VU.encode=Oye(),VU.decode=jye()),VU}var Fye=Bye();const SY=hc(Fye);var UE,JO;function $ye(){return JO||(JO=1,UE=function(e,t,n){var r=[],i=e.length;if(i===0)return r;var s=t<0?Math.max(0,t+i):t||0;for(n!==void 0&&(i=n<0?n+i:n);i-- >s;)r[i-s]=e[i];return r}),UE}var yE={},ej;function zye(){return ej||(ej=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var f=0,c=new Array(256),d=0;d!=256;++d)f=d,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,c[d]=f;return typeof Int32Array<"u"?new Int32Array(c):c}var r=n(),i=typeof Buffer<"u";function s(f){if(f.length>32768&&i)return a(new Buffer(f));for(var c=-1,d=f.length-1,u=0;u<d;)c=r[(c^f.charCodeAt(u++))&255]^c>>>8,c=r[(c^f.charCodeAt(u++))&255]^c>>>8;return u===d&&(c=c>>>8^r[(c^f.charCodeAt(u))&255]),c^-1}function o(f){if(f.length>1e4)return a(f);for(var c=-1,d=0,u=f.length-3;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+3;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function a(f){for(var c=-1,d=0,u=f.length-7;d<u;)c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255],c=c>>>8^r[(c^f[d++])&255];for(;d<u+7;)c=c>>>8^r[(c^f[d++])&255];return c^-1}function l(f){for(var c=-1,d=0,u=f.length,h,g;d<u;)h=f.charCodeAt(d++),h<128?c=c>>>8^r[(c^h)&255]:h<2048?(c=c>>>8^r[(c^(192|h>>6&31))&255],c=c>>>8^r[(c^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,g=f.charCodeAt(d++)&1023,c=c>>>8^r[(c^(240|h>>8&7))&255],c=c>>>8^r[(c^(128|h>>2&63))&255],c=c>>>8^r[(c^(128|g>>6&15|h&3))&255],c=c>>>8^r[(c^(128|g&63))&255]):(c=c>>>8^r[(c^(224|h>>12&15))&255],c=c>>>8^r[(c^(128|h>>6&63))&255],c=c>>>8^r[(c^(128|h&63))&255]);return c^-1}t.table=r,t.bstr=s,t.buf=o,t.str=l})}(yE)),yE}var xE,tj;function Hye(){if(tj)return xE;tj=1;var e=$ye(),t=zye();xE=s;var n=new Uint8Array(4),r=new Int32Array(n.buffer),i=new Uint32Array(n.buffer);function s(o){var a=8,l=a,f;for(f=0;f<o.length;f++)a+=o[f].data.length,a+=12;var c=new Uint8Array(a);for(c[0]=137,c[1]=80,c[2]=78,c[3]=71,c[4]=13,c[5]=10,c[6]=26,c[7]=10,f=0;f<o.length;f++){var d=o[f],u=d.name,h=d.data,g=h.length,U=[u.charCodeAt(0),u.charCodeAt(1),u.charCodeAt(2),u.charCodeAt(3)];i[0]=g,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0],c[l++]=U[0],c[l++]=U[1],c[l++]=U[2],c[l++]=U[3];for(var y=0;y<g;)c[l++]=h[y++];var x=U.concat(e(h)),w=t.buf(x);r[0]=w,c[l++]=n[3],c[l++]=n[2],c[l++]=n[1],c[l++]=n[0]}return c}return xE}var Vye=Hye();const Wye=hc(Vye);/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Gye=4,nj=0,rj=1,Xye=2;function C6(e){let t=e.length;for(;--t>=0;)e[t]=0}const Kye=0,kY=1,Yye=2,Zye=3,qye=258,rT=29,_b=256,A2=_b+1+rT,Hp=30,iT=19,CY=2*A2+1,ju=15,vE=16,Qye=7,sT=256,MY=16,AY=17,TY=18,uC=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Fy=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Jye=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),IY=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e3e=512,Gc=new Array((A2+2)*2);C6(Gc);const P5=new Array(Hp*2);C6(P5);const T2=new Array(e3e);C6(T2);const I2=new Array(qye-Zye+1);C6(I2);const oT=new Array(rT);C6(oT);const N4=new Array(Hp);C6(N4);function wE(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let NY,RY,_Y;function EE(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const PY=e=>e<256?T2[e]:T2[256+(e>>>7)],N2=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Bs=(e,t,n)=>{e.bi_valid>vE-n?(e.bi_buf|=t<<e.bi_valid&65535,N2(e,e.bi_buf),e.bi_buf=t>>vE-e.bi_valid,e.bi_valid+=n-vE):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Wl=(e,t,n)=>{Bs(e,n[t*2],n[t*2+1])},DY=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},t3e=e=>{e.bi_valid===16?(N2(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},n3e=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let f,c,d,u,h,g,U=0;for(u=0;u<=ju;u++)e.bl_count[u]=0;for(n[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<CY;f++)c=e.heap[f],u=n[n[c*2+1]*2+1]+1,u>l&&(u=l,U++),n[c*2+1]=u,!(c>r)&&(e.bl_count[u]++,h=0,c>=a&&(h=o[c-a]),g=n[c*2],e.opt_len+=g*(u+h),s&&(e.static_len+=g*(i[c*2+1]+h)));if(U!==0){do{for(u=l-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,U-=2}while(U>0);for(u=l;u!==0;u--)for(c=e.bl_count[u];c!==0;)d=e.heap[--f],!(d>r)&&(n[d*2+1]!==u&&(e.opt_len+=(u-n[d*2+1])*n[d*2],n[d*2+1]=u),c--)}},LY=(e,t,n)=>{const r=new Array(ju+1);let i=0,s,o;for(s=1;s<=ju;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=DY(r[a]++,a))}},r3e=()=>{let e,t,n,r,i;const s=new Array(ju+1);for(n=0,r=0;r<rT-1;r++)for(oT[r]=n,e=0;e<1<<uC[r];e++)I2[n++]=r;for(I2[n-1]=r,i=0,r=0;r<16;r++)for(N4[r]=i,e=0;e<1<<Fy[r];e++)T2[i++]=r;for(i>>=7;r<Hp;r++)for(N4[r]=i<<7,e=0;e<1<<Fy[r]-7;e++)T2[256+i++]=r;for(t=0;t<=ju;t++)s[t]=0;for(e=0;e<=143;)Gc[e*2+1]=8,e++,s[8]++;for(;e<=255;)Gc[e*2+1]=9,e++,s[9]++;for(;e<=279;)Gc[e*2+1]=7,e++,s[7]++;for(;e<=287;)Gc[e*2+1]=8,e++,s[8]++;for(LY(Gc,A2+1,s),e=0;e<Hp;e++)P5[e*2+1]=5,P5[e*2]=DY(e,5);NY=new wE(Gc,uC,_b+1,A2,ju),RY=new wE(P5,Fy,0,Hp,ju),_Y=new wE(new Array(0),Jye,0,iT,Qye)},OY=e=>{let t;for(t=0;t<A2;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Hp;t++)e.dyn_dtree[t*2]=0;for(t=0;t<iT;t++)e.bl_tree[t*2]=0;e.dyn_ltree[sT*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},jY=e=>{e.bi_valid>8?N2(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},i3e=(e,t,n,r)=>{jY(e),N2(e,n),N2(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},ij=(e,t,n,r)=>{const i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},SE=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&ij(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!ij(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},sj=(e,t,n)=>{let r,i,s=0,o,a;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,r===0?Wl(e,i,t):(o=I2[i],Wl(e,o+_b+1,t),a=uC[o],a!==0&&(i-=oT[o],Bs(e,i,a)),r--,o=PY(r),Wl(e,o,n),a=Fy[o],a!==0&&(r-=N4[o],Bs(e,r,a)));while(s<e.last_lit);Wl(e,sT,t)},hC=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,f;for(e.heap_len=0,e.heap_max=CY,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=l<2?++l:0,n[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=r[f*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)SE(e,n,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],SE(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[f*2]=n[o*2]+n[a*2],e.depth[f]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=f,e.heap[1]=f++,SE(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],n3e(e,t),LY(n,l,e.bl_count)},oj=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)&&(a<f?e.bl_tree[s*2]+=a:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[MY*2]++):a<=10?e.bl_tree[AY*2]++:e.bl_tree[TY*2]++,a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4))},aj=(e,t,n)=>{let r,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),r=0;r<=n;r++)if(s=o,o=t[(r+1)*2+1],!(++a<l&&s===o)){if(a<f)do Wl(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==i&&(Wl(e,s,e.bl_tree),a--),Wl(e,MY,e.bl_tree),Bs(e,a-3,2)):a<=10?(Wl(e,AY,e.bl_tree),Bs(e,a-3,3)):(Wl(e,TY,e.bl_tree),Bs(e,a-11,7));a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4)}},s3e=e=>{let t;for(oj(e,e.dyn_ltree,e.l_desc.max_code),oj(e,e.dyn_dtree,e.d_desc.max_code),hC(e,e.bl_desc),t=iT-1;t>=3&&e.bl_tree[IY[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},o3e=(e,t,n,r)=>{let i;for(Bs(e,t-257,5),Bs(e,n-1,5),Bs(e,r-4,4),i=0;i<r;i++)Bs(e,e.bl_tree[IY[i]*2+1],3);aj(e,e.dyn_ltree,t-1),aj(e,e.dyn_dtree,n-1)},a3e=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return nj;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return rj;for(n=32;n<_b;n++)if(e.dyn_ltree[n*2]!==0)return rj;return nj};let lj=!1;const l3e=e=>{lj||(r3e(),lj=!0),e.l_desc=new EE(e.dyn_ltree,NY),e.d_desc=new EE(e.dyn_dtree,RY),e.bl_desc=new EE(e.bl_tree,_Y),e.bi_buf=0,e.bi_valid=0,OY(e)},BY=(e,t,n,r)=>{Bs(e,(Kye<<1)+(r?1:0),3),i3e(e,t,n)},c3e=e=>{Bs(e,kY<<1,3),Wl(e,sT,Gc),t3e(e)},f3e=(e,t,n,r)=>{let i,s,o=0;e.level>0?(e.strm.data_type===Xye&&(e.strm.data_type=a3e(e)),hC(e,e.l_desc),hC(e,e.d_desc),o=s3e(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?BY(e,t,n,r):e.strategy===Gye||s===i?(Bs(e,(kY<<1)+(r?1:0),3),sj(e,Gc,P5)):(Bs(e,(Yye<<1)+(r?1:0),3),o3e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),sj(e,e.dyn_ltree,e.dyn_dtree)),OY(e),r&&jY(e)},d3e=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(I2[n]+_b+1)*2]++,e.dyn_dtree[PY(t)*2]++),e.last_lit===e.lit_bufsize-1);var u3e=l3e,h3e=BY,p3e=f3e,m3e=d3e,g3e=c3e,b3e={_tr_init:u3e,_tr_stored_block:h3e,_tr_flush_block:p3e,_tr_tally:m3e,_tr_align:g3e};const U3e=(e,t,n,r)=>{let i=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var R2=U3e;const y3e=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},x3e=new Uint32Array(y3e()),v3e=(e,t,n,r)=>{const i=x3e,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var ti=v3e,$h={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},M6={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:w3e,_tr_stored_block:E3e,_tr_flush_block:S3e,_tr_tally:b0,_tr_align:k3e}=b3e,{Z_NO_FLUSH:l1,Z_PARTIAL_FLUSH:C3e,Z_FULL_FLUSH:M3e,Z_FINISH:U0,Z_BLOCK:cj,Z_OK:Gl,Z_STREAM_END:fj,Z_STREAM_ERROR:ra,Z_DATA_ERROR:A3e,Z_BUF_ERROR:kE,Z_DEFAULT_COMPRESSION:T3e,Z_FILTERED:I3e,Z_HUFFMAN_ONLY:WU,Z_RLE:N3e,Z_FIXED:R3e,Z_DEFAULT_STRATEGY:_3e,Z_UNKNOWN:P3e,Z_DEFLATED:E7}=M6,D3e=9,L3e=15,O3e=8,j3e=29,B3e=256,pC=B3e+1+j3e,F3e=30,$3e=19,z3e=2*pC+1,H3e=15,Bt=3,o0=258,qa=o0+Bt+1,V3e=32,S7=42,mC=69,$y=73,zy=91,Hy=103,Bu=113,o5=666,zr=1,Pb=2,zh=3,A6=4,W3e=3,a0=(e,t)=>(e.msg=$h[t],t),dj=e=>(e<<1)-(e>4?9:0),jd=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let G3e=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,y0=G3e;const Sd=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Si=(e,t)=>{S3e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Sd(e.strm)},Jt=(e,t)=>{e.pending_buf[e.pending++]=t},Ig=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},X3e=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=R2(e.adler,t,i,n):e.state.wrap===2&&(e.adler=ti(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},FY=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-qa?e.strstart-(e.w_size-qa):0,f=e.window,c=e.w_mask,d=e.prev,u=e.strstart+o0;let h=f[r+o-1],g=f[r+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(f[i+o]!==g||f[i+o-1]!==h||f[i]!==f[r]||f[++i]!==f[r+1])){r+=2,i++;do;while(f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&r<u);if(s=o0-(u-r),r=u-o0,s>o){if(e.match_start=t,o=s,s>=a)break;h=f[r+o-1],g=f[r+o]}}while((t=d[t&c])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},Hh=e=>{const t=e.w_size;let n,r,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-qa)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);s+=t}if(e.strm.avail_in===0)break;if(r=X3e(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r,e.lookahead+e.insert>=Bt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=y0(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=y0(e,e.ins_h,e.window[o+Bt-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<Bt)););}while(e.lookahead<qa&&e.strm.avail_in!==0)},K3e=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Hh(e),e.lookahead===0&&t===l1)return zr;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((e.strstart===0||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,Si(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-qa&&(Si(e,!1),e.strm.avail_out===0))return zr}return e.insert=0,t===U0?(Si(e,!0),e.strm.avail_out===0?zh:A6):(e.strstart>e.block_start&&(Si(e,!1),e.strm.avail_out===0),zr)},CE=(e,t)=>{let n,r;for(;;){if(e.lookahead<qa){if(Hh(e),e.lookahead<qa&&t===l1)return zr;if(e.lookahead===0)break}if(n=0,e.lookahead>=Bt&&(e.ins_h=y0(e,e.ins_h,e.window[e.strstart+Bt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-qa&&(e.match_length=FY(e,n)),e.match_length>=Bt)if(r=b0(e,e.strstart-e.match_start,e.match_length-Bt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Bt){e.match_length--;do e.strstart++,e.ins_h=y0(e,e.ins_h,e.window[e.strstart+Bt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=y0(e,e.ins_h,e.window[e.strstart+1]);else r=b0(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Si(e,!1),e.strm.avail_out===0))return zr}return e.insert=e.strstart<Bt-1?e.strstart:Bt-1,t===U0?(Si(e,!0),e.strm.avail_out===0?zh:A6):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?zr:Pb},G1=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<qa){if(Hh(e),e.lookahead<qa&&t===l1)return zr;if(e.lookahead===0)break}if(n=0,e.lookahead>=Bt&&(e.ins_h=y0(e,e.ins_h,e.window[e.strstart+Bt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Bt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-qa&&(e.match_length=FY(e,n),e.match_length<=5&&(e.strategy===I3e||e.match_length===Bt&&e.strstart-e.match_start>4096)&&(e.match_length=Bt-1)),e.prev_length>=Bt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Bt,r=b0(e,e.strstart-1-e.prev_match,e.prev_length-Bt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=y0(e,e.ins_h,e.window[e.strstart+Bt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Bt-1,e.strstart++,r&&(Si(e,!1),e.strm.avail_out===0))return zr}else if(e.match_available){if(r=b0(e,0,e.window[e.strstart-1]),r&&Si(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return zr}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=b0(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Bt-1?e.strstart:Bt-1,t===U0?(Si(e,!0),e.strm.avail_out===0?zh:A6):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?zr:Pb},Y3e=(e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=o0){if(Hh(e),e.lookahead<=o0&&t===l1)return zr;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Bt&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+o0;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=o0-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Bt?(n=b0(e,1,e.match_length-Bt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=b0(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Si(e,!1),e.strm.avail_out===0))return zr}return e.insert=0,t===U0?(Si(e,!0),e.strm.avail_out===0?zh:A6):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?zr:Pb},Z3e=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Hh(e),e.lookahead===0)){if(t===l1)return zr;break}if(e.match_length=0,n=b0(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Si(e,!1),e.strm.avail_out===0))return zr}return e.insert=0,t===U0?(Si(e,!0),e.strm.avail_out===0?zh:A6):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?zr:Pb};function xl(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const a5=[new xl(0,0,0,0,K3e),new xl(4,4,8,4,CE),new xl(4,5,16,8,CE),new xl(4,6,32,32,CE),new xl(4,4,16,16,G1),new xl(8,16,32,32,G1),new xl(8,16,128,128,G1),new xl(8,32,128,256,G1),new xl(32,128,258,1024,G1),new xl(32,258,258,4096,G1)],q3e=e=>{e.window_size=2*e.w_size,jd(e.head),e.max_lazy_match=a5[e.level].max_lazy,e.good_match=a5[e.level].good_length,e.nice_match=a5[e.level].nice_length,e.max_chain_length=a5[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Bt-1,e.match_available=0,e.ins_h=0};function Q3e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E7,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(z3e*2),this.dyn_dtree=new Uint16Array((2*F3e+1)*2),this.bl_tree=new Uint16Array((2*$3e+1)*2),jd(this.dyn_ltree),jd(this.dyn_dtree),jd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(H3e+1),this.heap=new Uint16Array(2*pC+1),jd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*pC+1),jd(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const $Y=e=>{if(!e||!e.state)return a0(e,ra);e.total_in=e.total_out=0,e.data_type=P3e;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?S7:Bu,e.adler=t.wrap===2?0:1,t.last_flush=l1,w3e(t),Gl},zY=e=>{const t=$Y(e);return t===Gl&&q3e(e.state),t},J3e=(e,t)=>!e||!e.state||e.state.wrap!==2?ra:(e.state.gzhead=t,Gl),HY=(e,t,n,r,i,s)=>{if(!e)return ra;let o=1;if(t===T3e&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>D3e||n!==E7||r<8||r>15||t<0||t>9||s<0||s>R3e)return a0(e,ra);r===8&&(r=9);const a=new Q3e;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Bt-1)/Bt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,zY(e)},e4e=(e,t)=>HY(e,t,E7,L3e,O3e,_3e),t4e=(e,t)=>{let n,r;if(!e||!e.state||t>cj||t<0)return e?a0(e,ra):ra;const i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===o5&&t!==U0)return a0(e,e.avail_out===0?kE:ra);i.strm=e;const s=i.last_flush;if(i.last_flush=t,i.status===S7)if(i.wrap===2)e.adler=0,Jt(i,31),Jt(i,139),Jt(i,8),i.gzhead?(Jt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Jt(i,i.gzhead.time&255),Jt(i,i.gzhead.time>>8&255),Jt(i,i.gzhead.time>>16&255),Jt(i,i.gzhead.time>>24&255),Jt(i,i.level===9?2:i.strategy>=WU||i.level<2?4:0),Jt(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Jt(i,i.gzhead.extra.length&255),Jt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=ti(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=mC):(Jt(i,0),Jt(i,0),Jt(i,0),Jt(i,0),Jt(i,0),Jt(i,i.level===9?2:i.strategy>=WU||i.level<2?4:0),Jt(i,W3e),i.status=Bu);else{let o=E7+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=WU||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,o|=a<<6,i.strstart!==0&&(o|=V3e),o+=31-o%31,i.status=Bu,Ig(i,o),i.strstart!==0&&(Ig(i,e.adler>>>16),Ig(i,e.adler&65535)),e.adler=1}if(i.status===mC)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ti(e.adler,i.pending_buf,i.pending-n,n)),Sd(e),n=i.pending,i.pending===i.pending_buf_size));)Jt(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=ti(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=$y)}else i.status=$y;if(i.status===$y)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ti(e.adler,i.pending_buf,i.pending-n,n)),Sd(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.name.length?r=i.gzhead.name.charCodeAt(i.gzindex++)&255:r=0,Jt(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=ti(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.gzindex=0,i.status=zy)}else i.status=zy;if(i.status===zy)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ti(e.adler,i.pending_buf,i.pending-n,n)),Sd(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}i.gzindex<i.gzhead.comment.length?r=i.gzhead.comment.charCodeAt(i.gzindex++)&255:r=0,Jt(i,r)}while(r!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=ti(e.adler,i.pending_buf,i.pending-n,n)),r===0&&(i.status=Hy)}else i.status=Hy;if(i.status===Hy&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Sd(e),i.pending+2<=i.pending_buf_size&&(Jt(i,e.adler&255),Jt(i,e.adler>>8&255),e.adler=0,i.status=Bu)):i.status=Bu),i.pending!==0){if(Sd(e),e.avail_out===0)return i.last_flush=-1,Gl}else if(e.avail_in===0&&dj(t)<=dj(s)&&t!==U0)return a0(e,kE);if(i.status===o5&&e.avail_in!==0)return a0(e,kE);if(e.avail_in!==0||i.lookahead!==0||t!==l1&&i.status!==o5){let o=i.strategy===WU?Z3e(i,t):i.strategy===N3e?Y3e(i,t):a5[i.level].func(i,t);if((o===zh||o===A6)&&(i.status=o5),o===zr||o===zh)return e.avail_out===0&&(i.last_flush=-1),Gl;if(o===Pb&&(t===C3e?k3e(i):t!==cj&&(E3e(i,0,0,!1),t===M3e&&(jd(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),Sd(e),e.avail_out===0))return i.last_flush=-1,Gl}return t!==U0?Gl:i.wrap<=0?fj:(i.wrap===2?(Jt(i,e.adler&255),Jt(i,e.adler>>8&255),Jt(i,e.adler>>16&255),Jt(i,e.adler>>24&255),Jt(i,e.total_in&255),Jt(i,e.total_in>>8&255),Jt(i,e.total_in>>16&255),Jt(i,e.total_in>>24&255)):(Ig(i,e.adler>>>16),Ig(i,e.adler&65535)),Sd(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Gl:fj)},n4e=e=>{if(!e||!e.state)return ra;const t=e.state.status;return t!==S7&&t!==mC&&t!==$y&&t!==zy&&t!==Hy&&t!==Bu&&t!==o5?a0(e,ra):(e.state=null,t===Bu?a0(e,A3e):Gl)},r4e=(e,t)=>{let n=t.length;if(!e||!e.state)return ra;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==S7||r.lookahead)return ra;if(i===1&&(e.adler=R2(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(jd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Hh(r);r.lookahead>=Bt;){let l=r.strstart,f=r.lookahead-(Bt-1);do r.ins_h=y0(r,r.ins_h,r.window[l+Bt-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--f);r.strstart=l,r.lookahead=Bt-1,Hh(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Bt-1,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,Gl};var i4e=e4e,s4e=HY,o4e=zY,a4e=$Y,l4e=J3e,c4e=t4e,f4e=n4e,d4e=r4e,u4e="pako deflate (from Nodeca project)",D5={deflateInit:i4e,deflateInit2:s4e,deflateReset:o4e,deflateResetKeep:a4e,deflateSetHeader:l4e,deflate:c4e,deflateEnd:f4e,deflateSetDictionary:d4e,deflateInfo:u4e};const h4e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var p4e=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)h4e(n,r)&&(e[r]=n[r])}}return e},m4e=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let o=e[r];n.set(o,i),i+=o.length}return n},k7={assign:p4e,flattenChunks:m4e};let VY=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{VY=!1}const _2=new Uint8Array(256);for(let e=0;e<256;e++)_2[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_2[254]=_2[254]=1;var g4e=e=>{let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const b4e=(e,t)=>{if(t<65534&&e.subarray&&VY)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var U4e=(e,t)=>{let n,r;const i=t||e.length,s=new Array(i*2);for(r=0,n=0;n<i;){let o=e[n++];if(o<128){s[r++]=o;continue}let a=_2[o];if(a>4){s[r++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<i;)o=o<<6|e[n++]&63,a--;if(a>1){s[r++]=65533;continue}o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|o&1023)}return b4e(s,r)},y4e=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+_2[e[n]]>t?n:t},P2={string2buf:g4e,buf2string:U4e,utf8border:y4e};function x4e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var WY=x4e;const GY=Object.prototype.toString,{Z_NO_FLUSH:v4e,Z_SYNC_FLUSH:w4e,Z_FULL_FLUSH:E4e,Z_FINISH:S4e,Z_OK:R4,Z_STREAM_END:k4e,Z_DEFAULT_COMPRESSION:C4e,Z_DEFAULT_STRATEGY:M4e,Z_DEFLATED:A4e}=M6;function Db(e){this.options=k7.assign({level:C4e,method:A4e,chunkSize:16384,windowBits:15,memLevel:8,strategy:M4e},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new WY,this.strm.avail_out=0;let n=D5.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==R4)throw new Error($h[n]);if(t.header&&D5.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=P2.string2buf(t.dictionary):GY.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=D5.deflateSetDictionary(this.strm,r),n!==R4)throw new Error($h[n]);this._dict_set=!0}}Db.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?S4e:v4e,typeof e=="string"?n.input=P2.string2buf(e):GY.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===w4e||s===E4e)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=D5.deflate(n,s),i===k4e)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=D5.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===R4;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Db.prototype.onData=function(e){this.chunks.push(e)};Db.prototype.onEnd=function(e){e===R4&&(this.result=k7.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function aT(e,t){const n=new Db(t);if(n.push(e,!0),n.err)throw n.msg||$h[n.err];return n.result}function T4e(e,t){return t=t||{},t.raw=!0,aT(e,t)}function I4e(e,t){return t=t||{},t.gzip=!0,aT(e,t)}var N4e=Db,R4e=aT,_4e=T4e,P4e=I4e,D4e=M6,L4e={Deflate:N4e,deflate:R4e,deflateRaw:_4e,gzip:P4e,constants:D4e};const GU=30,O4e=12;var j4e=function(t,n){let r,i,s,o,a,l,f,c,d,u,h,g,U,y,x,w,E,S,M,A,C,I,R,L;const _=t.state;r=t.next_in,R=t.input,i=r+(t.avail_in-5),s=t.next_out,L=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=_.dmax,f=_.wsize,c=_.whave,d=_.wnext,u=_.window,h=_.hold,g=_.bits,U=_.lencode,y=_.distcode,x=(1<<_.lenbits)-1,w=(1<<_.distbits)-1;e:do{g<15&&(h+=R[r++]<<g,g+=8,h+=R[r++]<<g,g+=8),E=U[h&x];t:for(;;){if(S=E>>>24,h>>>=S,g-=S,S=E>>>16&255,S===0)L[s++]=E&65535;else if(S&16){M=E&65535,S&=15,S&&(g<S&&(h+=R[r++]<<g,g+=8),M+=h&(1<<S)-1,h>>>=S,g-=S),g<15&&(h+=R[r++]<<g,g+=8,h+=R[r++]<<g,g+=8),E=y[h&w];n:for(;;){if(S=E>>>24,h>>>=S,g-=S,S=E>>>16&255,S&16){if(A=E&65535,S&=15,g<S&&(h+=R[r++]<<g,g+=8,g<S&&(h+=R[r++]<<g,g+=8)),A+=h&(1<<S)-1,A>l){t.msg="invalid distance too far back",_.mode=GU;break e}if(h>>>=S,g-=S,S=s-o,A>S){if(S=A-S,S>c&&_.sane){t.msg="invalid distance too far back",_.mode=GU;break e}if(C=0,I=u,d===0){if(C+=f-S,S<M){M-=S;do L[s++]=u[C++];while(--S);C=s-A,I=L}}else if(d<S){if(C+=f+d-S,S-=d,S<M){M-=S;do L[s++]=u[C++];while(--S);if(C=0,d<M){S=d,M-=S;do L[s++]=u[C++];while(--S);C=s-A,I=L}}}else if(C+=d-S,S<M){M-=S;do L[s++]=u[C++];while(--S);C=s-A,I=L}for(;M>2;)L[s++]=I[C++],L[s++]=I[C++],L[s++]=I[C++],M-=3;M&&(L[s++]=I[C++],M>1&&(L[s++]=I[C++]))}else{C=s-A;do L[s++]=L[C++],L[s++]=L[C++],L[s++]=L[C++],M-=3;while(M>2);M&&(L[s++]=L[C++],M>1&&(L[s++]=L[C++]))}}else if(S&64){t.msg="invalid distance code",_.mode=GU;break e}else{E=y[(E&65535)+(h&(1<<S)-1)];continue n}break}}else if(S&64)if(S&32){_.mode=O4e;break e}else{t.msg="invalid literal/length code",_.mode=GU;break e}else{E=U[(E&65535)+(h&(1<<S)-1)];continue t}break}}while(r<i&&s<a);M=g>>3,r-=M,g-=M<<3,h&=(1<<g)-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=s<a?257+(a-s):257-(s-a),_.hold=h,_.bits=g};const X1=15,uj=852,hj=592,pj=0,ME=1,mj=2,B4e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),F4e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),$4e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),z4e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),H4e=(e,t,n,r,i,s,o,a)=>{const l=a.bits;let f=0,c=0,d=0,u=0,h=0,g=0,U=0,y=0,x=0,w=0,E,S,M,A,C,I=null,R=0,L;const _=new Uint16Array(X1+1),O=new Uint16Array(X1+1);let $=null,B=0,F,z,H;for(f=0;f<=X1;f++)_[f]=0;for(c=0;c<r;c++)_[t[n+c]]++;for(h=l,u=X1;u>=1&&_[u]===0;u--);if(h>u&&(h=u),u===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<u&&_[d]===0;d++);for(h<d&&(h=d),y=1,f=1;f<=X1;f++)if(y<<=1,y-=_[f],y<0)return-1;if(y>0&&(e===pj||u!==1))return-1;for(O[1]=0,f=1;f<X1;f++)O[f+1]=O[f]+_[f];for(c=0;c<r;c++)t[n+c]!==0&&(o[O[t[n+c]]++]=c);if(e===pj?(I=$=o,L=19):e===ME?(I=B4e,R-=257,$=F4e,B-=257,L=256):(I=$4e,$=z4e,L=-1),w=0,c=0,f=d,C=s,g=h,U=0,M=-1,x=1<<h,A=x-1,e===ME&&x>uj||e===mj&&x>hj)return 1;for(;;){F=f-U,o[c]<L?(z=0,H=o[c]):o[c]>L?(z=$[B+o[c]],H=I[R+o[c]]):(z=96,H=0),E=1<<f-U,S=1<<g,d=S;do S-=E,i[C+(w>>U)+S]=F<<24|z<<16|H|0;while(S!==0);for(E=1<<f-1;w&E;)E>>=1;if(E!==0?(w&=E-1,w+=E):w=0,c++,--_[f]===0){if(f===u)break;f=t[n+o[c]]}if(f>h&&(w&A)!==M){for(U===0&&(U=h),C+=d,g=f-U,y=1<<g;g+U<u&&(y-=_[g+U],!(y<=0));)g++,y<<=1;if(x+=1<<g,e===ME&&x>uj||e===mj&&x>hj)return 1;M=w&A,i[M]=h<<24|g<<16|C-s|0}}return w!==0&&(i[C+w]=f-U<<24|64<<16|0),a.bits=h,0};var L5=H4e;const V4e=0,XY=1,KY=2,{Z_FINISH:gj,Z_BLOCK:W4e,Z_TREES:XU,Z_OK:Vh,Z_STREAM_END:G4e,Z_NEED_DICT:X4e,Z_STREAM_ERROR:oa,Z_DATA_ERROR:YY,Z_MEM_ERROR:ZY,Z_BUF_ERROR:K4e,Z_DEFLATED:bj}=M6,qY=1,Uj=2,yj=3,xj=4,vj=5,wj=6,Ej=7,Sj=8,kj=9,Cj=10,_4=11,Pc=12,AE=13,Mj=14,TE=15,Aj=16,Tj=17,Ij=18,Nj=19,KU=20,YU=21,Rj=22,_j=23,Pj=24,Dj=25,Lj=26,IE=27,Oj=28,jj=29,On=30,QY=31,Y4e=32,Z4e=852,q4e=592,Q4e=15,J4e=Q4e,Bj=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function e9e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const JY=e=>{if(!e||!e.state)return oa;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=qY,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Z4e),t.distcode=t.distdyn=new Int32Array(q4e),t.sane=1,t.back=-1,Vh},eZ=e=>{if(!e||!e.state)return oa;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,JY(e)},tZ=(e,t)=>{let n;if(!e||!e.state)return oa;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?oa:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,eZ(e))},nZ=(e,t)=>{if(!e)return oa;const n=new e9e;e.state=n,n.window=null;const r=tZ(e,t);return r!==Vh&&(e.state=null),r},t9e=e=>nZ(e,J4e);let Fj=!0,NE,RE;const n9e=e=>{if(Fj){NE=new Int32Array(512),RE=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(L5(XY,e.lens,0,288,NE,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;L5(KY,e.lens,0,32,RE,0,e.work,{bits:5}),Fj=!1}e.lencode=NE,e.lenbits=9,e.distcode=RE,e.distbits=5},rZ=(e,t,n,r)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},r9e=(e,t)=>{let n,r,i,s,o,a,l,f,c,d,u,h,g,U,y=0,x,w,E,S,M,A,C,I;const R=new Uint8Array(4);let L,_;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return oa;n=e.state,n.mode===Pc&&(n.mode=AE),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,f=n.hold,c=n.bits,d=a,u=l,I=Vh;e:for(;;)switch(n.mode){case qY:if(n.wrap===0){n.mode=AE;break}for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.wrap&2&&f===35615){n.check=0,R[0]=f&255,R[1]=f>>>8&255,n.check=ti(n.check,R,2,0),f=0,c=0,n.mode=Uj;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=On;break}if((f&15)!==bj){e.msg="unknown compression method",n.mode=On;break}if(f>>>=4,c-=4,C=(f&15)+8,n.wbits===0)n.wbits=C;else if(C>n.wbits){e.msg="invalid window size",n.mode=On;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=f&512?Cj:Pc,f=0,c=0;break;case Uj:for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.flags=f,(n.flags&255)!==bj){e.msg="unknown compression method",n.mode=On;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=On;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=ti(n.check,R,2,0)),f=0,c=0,n.mode=yj;case yj:for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.head&&(n.head.time=f),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,R[2]=f>>>16&255,R[3]=f>>>24&255,n.check=ti(n.check,R,4,0)),f=0,c=0,n.mode=xj;case xj:for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=ti(n.check,R,2,0)),f=0,c=0,n.mode=vj;case vj:if(n.flags&1024){for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,n.check=ti(n.check,R,2,0)),f=0,c=0}else n.head&&(n.head.extra=null);n.mode=wj;case wj:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+h),C)),n.flags&512&&(n.check=ti(n.check,r,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=Ej;case Ej:if(n.flags&2048){if(a===0)break e;h=0;do C=r[s+h++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C));while(C&&h<a);if(n.flags&512&&(n.check=ti(n.check,r,h,s)),a-=h,s+=h,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Sj;case Sj:if(n.flags&4096){if(a===0)break e;h=0;do C=r[s+h++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C));while(C&&h<a);if(n.flags&512&&(n.check=ti(n.check,r,h,s)),a-=h,s+=h,C)break e}else n.head&&(n.head.comment=null);n.mode=kj;case kj:if(n.flags&512){for(;c<16;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f!==(n.check&65535)){e.msg="header crc mismatch",n.mode=On;break}f=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Pc;break;case Cj:for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}e.adler=n.check=Bj(f),f=0,c=0,n.mode=_4;case _4:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,X4e;e.adler=n.check=1,n.mode=Pc;case Pc:if(t===W4e||t===XU)break e;case AE:if(n.last){f>>>=c&7,c-=c&7,n.mode=IE;break}for(;c<3;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}switch(n.last=f&1,f>>>=1,c-=1,f&3){case 0:n.mode=Mj;break;case 1:if(n9e(n),n.mode=KU,t===XU){f>>>=2,c-=2;break e}break;case 2:n.mode=Tj;break;case 3:e.msg="invalid block type",n.mode=On}f>>>=2,c-=2;break;case Mj:for(f>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=On;break}if(n.length=f&65535,f=0,c=0,n.mode=TE,t===XU)break e;case TE:n.mode=Aj;case Aj:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;i.set(r.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=Pc;break;case Tj:for(;c<14;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(n.nlen=(f&31)+257,f>>>=5,c-=5,n.ndist=(f&31)+1,f>>>=5,c-=5,n.ncode=(f&15)+4,f>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=On;break}n.have=0,n.mode=Ij;case Ij:for(;n.have<n.ncode;){for(;c<3;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.lens[O[n.have++]]=f&7,f>>>=3,c-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,L={bits:n.lenbits},I=L5(V4e,n.lens,0,19,n.lencode,0,n.work,L),n.lenbits=L.bits,I){e.msg="invalid code lengths set",n.mode=On;break}n.have=0,n.mode=Nj;case Nj:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[f&(1<<n.lenbits)-1],x=y>>>24,w=y>>>16&255,E=y&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(E<16)f>>>=x,c-=x,n.lens[n.have++]=E;else{if(E===16){for(_=x+2;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f>>>=x,c-=x,n.have===0){e.msg="invalid bit length repeat",n.mode=On;break}C=n.lens[n.have-1],h=3+(f&3),f>>>=2,c-=2}else if(E===17){for(_=x+3;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=x,c-=x,C=0,h=3+(f&7),f>>>=3,c-=3}else{for(_=x+7;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=x,c-=x,C=0,h=11+(f&127),f>>>=7,c-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=On;break}for(;h--;)n.lens[n.have++]=C}}if(n.mode===On)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=On;break}if(n.lenbits=9,L={bits:n.lenbits},I=L5(XY,n.lens,0,n.nlen,n.lencode,0,n.work,L),n.lenbits=L.bits,I){e.msg="invalid literal/lengths set",n.mode=On;break}if(n.distbits=6,n.distcode=n.distdyn,L={bits:n.distbits},I=L5(KY,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L),n.distbits=L.bits,I){e.msg="invalid distances set",n.mode=On;break}if(n.mode=KU,t===XU)break e;case KU:n.mode=YU;case YU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,j4e(e,u),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,f=n.hold,c=n.bits,n.mode===Pc&&(n.back=-1);break}for(n.back=0;y=n.lencode[f&(1<<n.lenbits)-1],x=y>>>24,w=y>>>16&255,E=y&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(w&&!(w&240)){for(S=x,M=w,A=E;y=n.lencode[A+((f&(1<<S+M)-1)>>S)],x=y>>>24,w=y>>>16&255,E=y&65535,!(S+x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=S,c-=S,n.back+=S}if(f>>>=x,c-=x,n.back+=x,n.length=E,w===0){n.mode=Lj;break}if(w&32){n.back=-1,n.mode=Pc;break}if(w&64){e.msg="invalid literal/length code",n.mode=On;break}n.extra=w&15,n.mode=Rj;case Rj:if(n.extra){for(_=n.extra;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=_j;case _j:for(;y=n.distcode[f&(1<<n.distbits)-1],x=y>>>24,w=y>>>16&255,E=y&65535,!(x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(!(w&240)){for(S=x,M=w,A=E;y=n.distcode[A+((f&(1<<S+M)-1)>>S)],x=y>>>24,w=y>>>16&255,E=y&65535,!(S+x<=c);){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}f>>>=S,c-=S,n.back+=S}if(f>>>=x,c-=x,n.back+=x,w&64){e.msg="invalid distance code",n.mode=On;break}n.offset=E,n.extra=w&15,n.mode=Pj;case Pj:if(n.extra){for(_=n.extra;c<_;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=On;break}n.mode=Dj;case Dj:if(l===0)break e;if(h=u-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=On;break}h>n.wnext?(h-=n.wnext,g=n.wsize-h):g=n.wnext-h,h>n.length&&(h=n.length),U=n.window}else U=i,g=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[o++]=U[g++];while(--h);n.length===0&&(n.mode=YU);break;case Lj:if(l===0)break e;i[o++]=n.length,l--,n.mode=YU;break;case IE:if(n.wrap){for(;c<32;){if(a===0)break e;a--,f|=r[s++]<<c,c+=8}if(u-=l,e.total_out+=u,n.total+=u,u&&(e.adler=n.check=n.flags?ti(n.check,i,u,o-u):R2(n.check,i,u,o-u)),u=l,(n.flags?f:Bj(f))!==n.check){e.msg="incorrect data check",n.mode=On;break}f=0,c=0}n.mode=Oj;case Oj:if(n.wrap&&n.flags){for(;c<32;){if(a===0)break e;a--,f+=r[s++]<<c,c+=8}if(f!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=On;break}f=0,c=0}n.mode=jj;case jj:I=G4e;break e;case On:I=YY;break e;case QY:return ZY;case Y4e:default:return oa}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=f,n.bits=c,(n.wsize||u!==e.avail_out&&n.mode<On&&(n.mode<IE||t!==gj))&&rZ(e,e.output,e.next_out,u-e.avail_out),d-=e.avail_in,u-=e.avail_out,e.total_in+=d,e.total_out+=u,n.total+=u,n.wrap&&u&&(e.adler=n.check=n.flags?ti(n.check,i,u,e.next_out-u):R2(n.check,i,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Pc?128:0)+(n.mode===KU||n.mode===TE?256:0),(d===0&&u===0||t===gj)&&I===Vh&&(I=K4e),I},i9e=e=>{if(!e||!e.state)return oa;let t=e.state;return t.window&&(t.window=null),e.state=null,Vh},s9e=(e,t)=>{if(!e||!e.state)return oa;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Vh):oa},o9e=(e,t)=>{const n=t.length;let r,i,s;return!e||!e.state||(r=e.state,r.wrap!==0&&r.mode!==_4)?oa:r.mode===_4&&(i=1,i=R2(i,t,n,0),i!==r.check)?YY:(s=rZ(e,t,n,n),s?(r.mode=QY,ZY):(r.havedict=1,Vh))};var a9e=eZ,l9e=tZ,c9e=JY,f9e=t9e,d9e=nZ,u9e=r9e,h9e=i9e,p9e=s9e,m9e=o9e,g9e="pako inflate (from Nodeca project)",Xc={inflateReset:a9e,inflateReset2:l9e,inflateResetKeep:c9e,inflateInit:f9e,inflateInit2:d9e,inflate:u9e,inflateEnd:h9e,inflateGetHeader:p9e,inflateSetDictionary:m9e,inflateInfo:g9e};function b9e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var U9e=b9e;const iZ=Object.prototype.toString,{Z_NO_FLUSH:y9e,Z_FINISH:x9e,Z_OK:D2,Z_STREAM_END:_E,Z_NEED_DICT:PE,Z_STREAM_ERROR:v9e,Z_DATA_ERROR:$j,Z_MEM_ERROR:w9e}=M6;function Lb(e){this.options=k7.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new WY,this.strm.avail_out=0;let n=Xc.inflateInit2(this.strm,t.windowBits);if(n!==D2)throw new Error($h[n]);if(this.header=new U9e,Xc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=P2.string2buf(t.dictionary):iZ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Xc.inflateSetDictionary(this.strm,t.dictionary),n!==D2)))throw new Error($h[n])}Lb.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?x9e:y9e,iZ.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Xc.inflate(n,o),s===PE&&i&&(s=Xc.inflateSetDictionary(n,i),s===D2?s=Xc.inflate(n,o):s===$j&&(s=PE));n.avail_in>0&&s===_E&&n.state.wrap>0&&e[n.next_in]!==0;)Xc.inflateReset(n),s=Xc.inflate(n,o);switch(s){case v9e:case $j:case PE:case w9e:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===_E))if(this.options.to==="string"){let l=P2.utf8border(n.output,n.next_out),f=n.next_out-l,c=P2.buf2string(n.output,l);n.next_out=f,n.avail_out=r-f,f&&n.output.set(n.output.subarray(l,l+f),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===D2&&a===0)){if(s===_E)return s=Xc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Lb.prototype.onData=function(e){this.chunks.push(e)};Lb.prototype.onEnd=function(e){e===D2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=k7.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function lT(e,t){const n=new Lb(t);if(n.push(e),n.err)throw n.msg||$h[n.err];return n.result}function E9e(e,t){return t=t||{},t.raw=!0,lT(e,t)}var S9e=Lb,k9e=lT,C9e=E9e,M9e=lT,A9e=M6,T9e={Inflate:S9e,inflate:k9e,inflateRaw:C9e,ungzip:M9e,constants:A9e};const{Deflate:AHe,deflate:I9e,deflateRaw:THe,gzip:IHe}=L4e,{Inflate:NHe,inflate:N9e,inflateRaw:RHe,ungzip:_He}=T9e;var R9e=I9e,_9e=N9e;const P9e="#ffffff",D9e="#000000",L9e=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],O9e=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],j9e=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],B9e=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],F9e=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],$9e=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],z9e=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],H9e=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],V9e=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],W9e=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],G9e=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],X9e=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],K9e=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],li={white:P9e,black:D9e,gray:L9e,red:O9e,pink:j9e,grape:B9e,violet:F9e,indigo:$9e,blue:z9e,cyan:H9e,teal:V9e,green:W9e,lime:G9e,yellow:X9e,orange:K9e};let cT=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var DE,zj;function Y9e(){if(zj)return DE;zj=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof n0=="object"&&n0&&n0.Object===Object&&n0,f=typeof self=="object"&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,u=d.toString,h=Math.max,g=Math.min,U=function(){return c.Date.now()};function y(A,C,I){var R,L,_,O,$,B,F=0,z=!1,H=!1,G=!0;if(typeof A!="function")throw new TypeError(e);C=M(C)||0,w(I)&&(z=!!I.leading,H="maxWait"in I,_=H?h(M(I.maxWait)||0,C):_,G="trailing"in I?!!I.trailing:G);function V(te){var le=R,he=L;return R=L=void 0,F=te,O=A.apply(he,le),O}function Y(te){return F=te,$=setTimeout(se,C),z?V(te):O}function K(te){var le=te-B,he=te-F,we=C-le;return H?g(we,_-he):we}function q(te){var le=te-B,he=te-F;return B===void 0||le>=C||le<0||H&&he>=_}function se(){var te=U();if(q(te))return de(te);$=setTimeout(se,K(te))}function de(te){return $=void 0,G&&R?V(te):(R=L=void 0,O)}function xe(){$!==void 0&&clearTimeout($),F=0,R=B=L=$=void 0}function ve(){return $===void 0?O:de(U())}function ue(){var te=U(),le=q(te);if(R=arguments,L=this,B=te,le){if($===void 0)return Y(B);if(H)return $=setTimeout(se,C),V(B)}return $===void 0&&($=setTimeout(se,C)),O}return ue.cancel=xe,ue.flush=ve,ue}function x(A,C,I){var R=!0,L=!0;if(typeof A!="function")throw new TypeError(e);return w(I)&&(R="leading"in I?!!I.leading:R,L="trailing"in I?!!I.trailing:L),y(A,C,{leading:R,maxWait:C,trailing:L})}function w(A){var C=typeof A;return!!A&&(C=="object"||C=="function")}function E(A){return!!A&&typeof A=="object"}function S(A){return typeof A=="symbol"||E(A)&&u.call(A)==n}function M(A){if(typeof A=="number")return A;if(S(A))return t;if(w(A)){var C=typeof A.valueOf=="function"?A.valueOf():A;A=w(C)?C+"":C}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var I=s.test(A);return I||o.test(A)?a(A.slice(2),I?2:8):i.test(A)?t:+A}return DE=x,DE}var Z9e=Y9e();const Ob=hc(Z9e);var Vy={exports:{}},q9e=Vy.exports,Hj;function Q9e(){return Hj||(Hj=1,function(e,t){(function(n,r){e.exports=r()})(q9e,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(f,c){this._listeners[f]=this._listeners[f]||[],this._listeners[f].indexOf(c)<0&&this._listeners[f].push(c)},n.prototype.removeEventListener=function(f,c){if(this._listeners[f]){var d=this._listeners[f].indexOf(c);d>=0&&this._listeners[f].splice(d,1)}},n.prototype.dispatchEvent=function(f){if(this._listeners[f.type]&&this._listeners[f.type].length)for(var c=this._listeners[f.type].slice(),d=0,u=c.length;d<u;++d)c[d].call(this,f)};var r=function(f){return typeof f.constructor=="function"&&f.constructor.name==="GeneratorFunction"},i=function(f){return{next:function(){var c=f();return c?{value:c}:{done:!0}}}},s=function(f){var c=!1;return{next:function(){return c?{done:!0}:(c=!0,{value:f})}}},o=function(f,c){var d=typeof f;if(d==="object"){if(typeof f.next=="function")return f;if(typeof f.then=="function")return s(f)}return d==="function"?r(f)?f():i(f):s(c.resolve(f))},a=function(f,c,d){this.target=f,this.type=c,this.data=d},l=function(f,c,d){if(n.call(this),typeof c!="number"||Math.floor(c)!==c||c<1)throw new Error("Invalid concurrency");this._concurrency=c,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(f,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(f){return typeof f<"u"&&(this._concurrency=f,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var f=this,c=this._options.promise;return this._promise=new c(function(d,u){f._callbacks={reject:u,resolve:d},f._proceed()}),this._promise},l.prototype._fireEvent=function(f,c){this.dispatchEvent(new a(this,f,c))},l.prototype._settle=function(f){f?this._callbacks.reject(f):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(f,c){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:f,result:c}),this._proceed())},l.prototype._onPooledPromiseRejected=function(f,c){this._size--,this.active()&&(this._fireEvent("rejected",{promise:f,error:c}),this._settle(c||new Error("Unknown error")))},l.prototype._trackPromise=function(f){var c=this;f.then(function(d){c._onPooledPromiseFulfilled(f,d)},function(d){c._onPooledPromiseRejected(f,d)}).catch(function(d){c._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var f={done:!1};this._size<this._concurrency&&!(f=this._iterator.next()).done;)this._size++,this._trackPromise(f.value);this._done=f===null||!!f.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})}(Vy)),Vy.exports}var J9e=Q9e();const e7e=hc(J9e);function gC(e,t,n){if(e&&e.length){const[r,i]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[f,c]=l;l[0]=(f-r)*o-(c-i)*a+r,l[1]=(f-r)*a+(c-i)*o+i}}}function t7e(e,t,n){const r=[];e.forEach(i=>r.push(...i)),gC(r,t,n)}function n7e(e,t){return e[0]===t[0]&&e[1]===t[1]}function r7e(e,t,n,r=1){const i=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(i)for(const f of o)gC(f,a,i);const l=i7e(o,s,r);if(i){for(const f of o)gC(f,a,-i);t7e(l,a,-i)}return l}function i7e(e,t,n){const r=[];for(const f of e){const c=[...f];n7e(c[0],c[c.length-1])||c.push([c[0][0],c[0][1]]),c.length>2&&r.push(c)}const i=[];t=Math.max(t,.1);const s=[];for(const f of r)for(let c=0;c<f.length-1;c++){const d=f[c],u=f[c+1];if(d[1]!==u[1]){const h=Math.min(d[1],u[1]);s.push({ymin:h,ymax:Math.max(d[1],u[1]),x:h===d[1]?d[0]:u[0],islope:(u[0]-d[0])/(u[1]-d[1])})}}if(s.sort((f,c)=>f.ymin<c.ymin?-1:f.ymin>c.ymin?1:f.x<c.x?-1:f.x>c.x?1:f.ymax===c.ymax?0:(f.ymax-c.ymax)/Math.abs(f.ymax-c.ymax)),!s.length)return i;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let f=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)f=d;s.splice(0,f+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(f=>!(f.edge.ymax<=a)),o.sort((f,c)=>f.edge.x===c.edge.x?0:(f.edge.x-c.edge.x)/Math.abs(f.edge.x-c.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let f=0;f<o.length;f=f+2){const c=f+1;if(c>=o.length)break;const d=o[f].edge,u=o[c].edge;i.push([[Math.round(d.x),a],[Math.round(u.x),a]])}a+=n,o.forEach(f=>{f.edge.x=f.edge.x+n*f.edge.islope}),l++}return i}function jb(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.max(i,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),r7e(e,i,r,s||1)}class fT{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=jb(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function C7(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class s7e extends fT{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),s=jb(t,i),o=Math.PI/180*n.hachureAngle,a=[],l=r*.5*Math.cos(o),f=r*.5*Math.sin(o);for(const[d,u]of s)C7([d,u])&&a.push([[d[0]-l,d[1]+f],[...u]],[[d[0]+l,d[1]-f],[...u]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class o7e extends fT{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,i);return r.ops=r.ops.concat(s.ops),r}}class a7e{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=jb(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=i/4;for(const a of t){const l=C7(a),f=l/i,c=Math.ceil(f)-1,d=l-c*i,u=(a[0][0]+a[1][0])/2-i/4,h=Math.min(a[0][1],a[1][1]);for(let g=0;g<c;g++){const U=h+d+g*i,y=u-o+Math.random()*2*o,x=U-o+Math.random()*2*o,w=this.helper.ellipse(y,x,s,s,n);r.push(...w.ops)}}return{type:"fillSketch",ops:r}}}class l7e{constructor(t){this.helper=t}fillPolygons(t,n){const r=jb(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=C7(o),l=Math.floor(a/(r+i)),f=(a+i-l*(r+i))/2;let c=o[0],d=o[1];c[0]>d[0]&&(c=o[1],d=o[0]);const u=Math.atan((d[1]-c[1])/(d[0]-c[0]));for(let h=0;h<l;h++){const g=h*(r+i),U=g+r,y=[c[0]+g*Math.cos(u)+f*Math.cos(u),c[1]+g*Math.sin(u)+f*Math.sin(u)],x=[c[0]+U*Math.cos(u)+f*Math.cos(u),c[1]+U*Math.sin(u)+f*Math.sin(u)];s.push(...this.helper.doubleLineOps(y[0],y[1],x[0],x[1],n))}}),s}}class c7e{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const s=jb(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(s=>{const o=C7(s),a=Math.round(o/(2*n));let l=s[0],f=s[1];l[0]>f[0]&&(l=s[1],f=s[0]);const c=Math.atan((f[1]-l[1])/(f[0]-l[0]));for(let d=0;d<a;d++){const u=d*2*n,h=(d+1)*2*n,g=Math.sqrt(2*Math.pow(n,2)),U=[l[0]+u*Math.cos(c),l[1]+u*Math.sin(c)],y=[l[0]+h*Math.cos(c),l[1]+h*Math.sin(c)],x=[U[0]+g*Math.cos(c+Math.PI/4),U[1]+g*Math.sin(c+Math.PI/4)];i.push(...this.helper.doubleLineOps(U[0],U[1],x[0],x[1],r),...this.helper.doubleLineOps(x[0],x[1],y[0],y[1],r))}}),i}}const Cs={};function f7e(e,t){let n=e.fillStyle||"hachure";if(!Cs[n])switch(n){case"zigzag":Cs[n]||(Cs[n]=new s7e(t));break;case"cross-hatch":Cs[n]||(Cs[n]=new o7e(t));break;case"dots":Cs[n]||(Cs[n]=new a7e(t));break;case"dashed":Cs[n]||(Cs[n]=new l7e(t));break;case"zigzag-line":Cs[n]||(Cs[n]=new c7e(t));break;case"hachure":default:n="hachure",Cs[n]||(Cs[n]=new fT(t));break}return Cs[n]}function d7e(){return Math.floor(Math.random()*2**31)}class sZ{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const u7e=0,bC=1,oZ=2,ZU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function h7e(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:u7e,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:bC,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:oZ,text:""},t}function LE(e,t){return e.type===t}function dT(e){const t=[],n=h7e(e);let r="BOD",i=0,s=n[i];for(;!LE(s,oZ);){let o=0;const a=[];if(r==="BOD")if(s.text==="M"||s.text==="m")i++,o=ZU[s.text],r=s.text;else return dT("M0,0"+e);else LE(s,bC)?o=ZU[r]:(i++,o=ZU[s.text],r=s.text);if(i+o<n.length){for(let l=i;l<i+o;l++){const f=n[l];if(LE(f,bC))a[a.length]=+f.text;else throw new Error("Param not a number: "+r+","+f.text)}if(typeof ZU[r]=="number"){const l={key:r,data:a};t.push(l),i+=o,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function aZ(e){let t=0,n=0,r=0,i=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[r,i]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((f,c)=>c%2?f+n:f+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=r,n=i;break}return s}function lZ(e){const t=[];let n="",r=0,i=0,s=0,o=0,a=0,l=0;for(const{key:f,data:c}of e){switch(f){case"M":t.push({key:"M",data:[...c]}),[r,i]=c,[s,o]=c;break;case"C":t.push({key:"C",data:[...c]}),r=c[4],i=c[5],a=c[2],l=c[3];break;case"L":t.push({key:"L",data:[...c]}),[r,i]=c;break;case"H":r=c[0],t.push({key:"L",data:[r,i]});break;case"V":i=c[0],t.push({key:"L",data:[r,i]});break;case"S":{let d=0,u=0;n==="C"||n==="S"?(d=r+(r-a),u=i+(i-l)):(d=r,u=i),t.push({key:"C",data:[d,u,...c]}),a=c[0],l=c[1],r=c[2],i=c[3];break}case"T":{const[d,u]=c;let h=0,g=0;n==="Q"||n==="T"?(h=r+(r-a),g=i+(i-l)):(h=r,g=i);const U=r+2*(h-r)/3,y=i+2*(g-i)/3,x=d+2*(h-d)/3,w=u+2*(g-u)/3;t.push({key:"C",data:[U,y,x,w,d,u]}),a=h,l=g,r=d,i=u;break}case"Q":{const[d,u,h,g]=c,U=r+2*(d-r)/3,y=i+2*(u-i)/3,x=h+2*(d-h)/3,w=g+2*(u-g)/3;t.push({key:"C",data:[U,y,x,w,h,g]}),a=d,l=u,r=h,i=g;break}case"A":{const d=Math.abs(c[0]),u=Math.abs(c[1]),h=c[2],g=c[3],U=c[4],y=c[5],x=c[6];d===0||u===0?(t.push({key:"C",data:[r,i,y,x,y,x]}),r=y,i=x):(r!==y||i!==x)&&(cZ(r,i,y,x,d,u,h,g,U).forEach(function(E){t.push({key:"C",data:E})}),r=y,i=x);break}case"Z":t.push({key:"Z",data:[]}),r=s,i=o;break}n=f}return t}function p7e(e){return Math.PI*e/180}function Ng(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function cZ(e,t,n,r,i,s,o,a,l,f){const c=p7e(o);let d=[],u=0,h=0,g=0,U=0;if(f)[u,h,g,U]=f;else{[e,t]=Ng(e,t,-c),[n,r]=Ng(n,r,-c);const O=(e-n)/2,$=(t-r)/2;let B=O*O/(i*i)+$*$/(s*s);B>1&&(B=Math.sqrt(B),i=B*i,s=B*s);const F=a===l?-1:1,z=i*i,H=s*s,G=z*H-z*$*$-H*O*O,V=z*$*$+H*O*O,Y=F*Math.sqrt(Math.abs(G/V));g=Y*i*$/s+(e+n)/2,U=Y*-s*O/i+(t+r)/2,u=Math.asin(parseFloat(((t-U)/s).toFixed(9))),h=Math.asin(parseFloat(((r-U)/s).toFixed(9))),e<g&&(u=Math.PI-u),n<g&&(h=Math.PI-h),u<0&&(u=Math.PI*2+u),h<0&&(h=Math.PI*2+h),l&&u>h&&(u=u-Math.PI*2),!l&&h>u&&(h=h-Math.PI*2)}let y=h-u;if(Math.abs(y)>Math.PI*120/180){const O=h,$=n,B=r;l&&h>u?h=u+Math.PI*120/180*1:h=u+Math.PI*120/180*-1,n=g+i*Math.cos(h),r=U+s*Math.sin(h),d=cZ(n,r,$,B,i,s,o,0,l,[h,O,g,U])}y=h-u;const x=Math.cos(u),w=Math.sin(u),E=Math.cos(h),S=Math.sin(h),M=Math.tan(y/4),A=4/3*i*M,C=4/3*s*M,I=[e,t],R=[e+A*w,t-C*x],L=[n+A*S,r-C*E],_=[n,r];if(R[0]=2*I[0]-R[0],R[1]=2*I[1]-R[1],f)return[R,L,_].concat(d);{d=[R,L,_].concat(d);const O=[];for(let $=0;$<d.length;$+=3){const B=Ng(d[$][0],d[$][1],c),F=Ng(d[$+1][0],d[$+1][1],c),z=Ng(d[$+2][0],d[$+2][1],c);O.push([B[0],B[1],F[0],F[1],z[0],z[1]])}return O}}const m7e={randOffset:x7e,randOffsetWithRange:v7e,ellipse:U7e,doubleLineOps:w7e};function fZ(e,t,n,r,i){return{type:"path",ops:Sf(e,t,n,r,i)}}function Wy(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...Sf(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&i.push(...Sf(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return fZ(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function g7e(e,t){return Wy(e,!0,t)}function b7e(e,t,n,r,i){const s=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return g7e(s,i)}function Vj(e,t){let n=Kj(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const r=Kj(e,1.5*(1+t.roughness*.22),E7e(t));n=n.concat(r)}return{type:"path",ops:n}}function U7e(e,t,n,r,i){const s=dZ(n,r,i);return UC(e,t,i,s).opset}function dZ(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=Math.PI*2/i;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=pt(o*l,n),a+=pt(a*l,n),{increment:s,rx:o,ry:a}}function UC(e,t,n,r){const[i,s]=Yj(r.increment,e,t,r.rx,r.ry,1,r.increment*P4(.1,P4(.4,1,n),n),n);let o=D4(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=Yj(r.increment,e,t,r.rx,r.ry,1.5,0,n),l=D4(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function Wj(e,t,n,r,i,s,o,a,l){const f=e,c=t;let d=Math.abs(n/2),u=Math.abs(r/2);d+=pt(d*.01,l),u+=pt(u*.01,l);let h=i,g=s;for(;h<0;)h+=Math.PI*2,g+=Math.PI*2;g-h>Math.PI*2&&(h=0,g=Math.PI*2);const U=Math.PI*2/l.curveStepCount,y=Math.min(U/2,(g-h)/2),x=Zj(y,f,c,d,u,h,g,1,l);if(!l.disableMultiStroke){const w=Zj(y,f,c,d,u,h,g,1.5,l);x.push(...w)}return o&&(a?x.push(...Sf(f,c,f+d*Math.cos(h),c+u*Math.sin(h),l),...Sf(f,c,f+d*Math.cos(g),c+u*Math.sin(g),l)):x.push({op:"lineTo",data:[f,c]},{op:"lineTo",data:[f+d*Math.cos(h),c+u*Math.sin(h)]})),{type:"path",ops:x}}function Gj(e,t){const n=lZ(aZ(dT(e))),r=[];let i=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],i=[a[0],a[1]];break}case"L":r.push(...Sf(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,f,c,d,u,h]=a;r.push(...S7e(l,f,c,d,u,h,s,t)),s=[u,h];break}case"Z":r.push(...Sf(s[0],s[1],i[0],i[1],t)),s=[i[0],i[1]];break}return{type:"path",ops:r}}function OE(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+pt(i,t),r[0][1]+pt(i,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[r[o][0]+pt(i,t),r[o][1]+pt(i,t)]})}}return{type:"fillPath",ops:n}}function dp(e,t){return f7e(t,m7e).fillPolygons(e,t)}function y7e(e,t,n,r,i,s,o){const a=e,l=t;let f=Math.abs(n/2),c=Math.abs(r/2);f+=pt(f*.01,o),c+=pt(c*.01,o);let d=i,u=s;for(;d<0;)d+=Math.PI*2,u+=Math.PI*2;u-d>Math.PI*2&&(d=0,u=Math.PI*2);const h=(u-d)/o.curveStepCount,g=[];for(let U=d;U<=u;U=U+h)g.push([a+f*Math.cos(U),l+c*Math.sin(U)]);return g.push([a+f*Math.cos(u),l+c*Math.sin(u)]),g.push([a,l]),dp([g],o)}function x7e(e,t){return pt(e,t)}function v7e(e,t,n){return P4(e,t,n)}function w7e(e,t,n,r,i){return Sf(e,t,n,r,i,!0)}function E7e(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function uZ(e){return e.randomizer||(e.randomizer=new sZ(e.seed||0)),e.randomizer.next()}function P4(e,t,n,r=1){return n.roughness*r*(uZ(n)*(t-e)+e)}function pt(e,t,n=1){return P4(-e,e,t,n)}function Sf(e,t,n,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,a=Xj(e,t,n,r,i,!0,!1);if(o)return a;const l=Xj(e,t,n,r,i,!0,!0);return a.concat(l)}function Xj(e,t,n,r,i,s,o){const a=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(a);let f=1;l<200?f=1:l>500?f=.4:f=-.0016668*l+1.233334;let c=i.maxRandomnessOffset||0;c*c*100>a&&(c=l/10);const d=c/2,u=.2+uZ(i)*.2;let h=i.bowing*i.maxRandomnessOffset*(r-t)/200,g=i.bowing*i.maxRandomnessOffset*(e-n)/200;h=pt(h,i,f),g=pt(g,i,f);const U=[],y=()=>pt(d,i,f),x=()=>pt(c,i,f),w=i.preserveVertices;return o?U.push({op:"move",data:[e+(w?0:y()),t+(w?0:y())]}):U.push({op:"move",data:[e+(w?0:pt(c,i,f)),t+(w?0:pt(c,i,f))]}),o?U.push({op:"bcurveTo",data:[h+e+(n-e)*u+y(),g+t+(r-t)*u+y(),h+e+2*(n-e)*u+y(),g+t+2*(r-t)*u+y(),n+(w?0:y()),r+(w?0:y())]}):U.push({op:"bcurveTo",data:[h+e+(n-e)*u+x(),g+t+(r-t)*u+x(),h+e+2*(n-e)*u+x(),g+t+2*(r-t)*u+x(),n+(w?0:x()),r+(w?0:x())]}),U}function Kj(e,t,n){const r=[];r.push([e[0][0]+pt(t,n),e[0][1]+pt(t,n)]),r.push([e[0][0]+pt(t,n),e[0][1]+pt(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+pt(t,n),e[i][1]+pt(t,n)]),i===e.length-1&&r.push([e[i][0]+pt(t,n),e[i][1]+pt(t,n)]);return D4(r,null,n)}function D4(e,t,n){const r=e.length,i=[];if(r>3){const s=[],o=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<r;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...Sf(e[0][0],e[0][1],e[1][0],e[1][1],n));return i}function Yj(e,t,n,r,i,s,o,a){const l=a.roughness===0,f=[],c=[];if(l){e=e/4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const u=[t+r*Math.cos(d),n+i*Math.sin(d)];f.push(u),c.push(u)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const d=pt(.5,a)-Math.PI/2;c.push([pt(s,a)+t+.9*r*Math.cos(d-e),pt(s,a)+n+.9*i*Math.sin(d-e)]);const u=Math.PI*2+d-.01;for(let h=d;h<u;h=h+e){const g=[pt(s,a)+t+r*Math.cos(h),pt(s,a)+n+i*Math.sin(h)];f.push(g),c.push(g)}c.push([pt(s,a)+t+r*Math.cos(d+Math.PI*2+o*.5),pt(s,a)+n+i*Math.sin(d+Math.PI*2+o*.5)]),c.push([pt(s,a)+t+.98*r*Math.cos(d+o),pt(s,a)+n+.98*i*Math.sin(d+o)]),c.push([pt(s,a)+t+.9*r*Math.cos(d+o*.5),pt(s,a)+n+.9*i*Math.sin(d+o*.5)])}return[c,f]}function Zj(e,t,n,r,i,s,o,a,l){const f=s+pt(.1,l),c=[];c.push([pt(a,l)+t+.9*r*Math.cos(f-e),pt(a,l)+n+.9*i*Math.sin(f-e)]);for(let d=f;d<=o;d=d+e)c.push([pt(a,l)+t+r*Math.cos(d),pt(a,l)+n+i*Math.sin(d)]);return c.push([t+r*Math.cos(o),n+i*Math.sin(o)]),c.push([t+r*Math.cos(o),n+i*Math.sin(o)]),D4(c,null,l)}function S7e(e,t,n,r,i,s,o,a){const l=[],f=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let c=[0,0];const d=a.disableMultiStroke?1:2,u=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(u?0:pt(f[0],a)),o[1]+(u?0:pt(f[0],a))]}),c=u?[i,s]:[i+pt(f[h],a),s+pt(f[h],a)],l.push({op:"bcurveTo",data:[e+pt(f[h],a),t+pt(f[h],a),n+pt(f[h],a),r+pt(f[h],a),c[0],c[1]]});return l}function Rg(e){return[...e]}function k7e(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Rg(e[0]),Rg(e[1]),Rg(e[2]),Rg(e[2]));else{const i=[];i.push(e[0],e[0]);for(let a=1;a<e.length;a++)i.push(e[a]),a===e.length-1&&i.push(e[a]);const s=[],o=1-t;r.push(Rg(i[0]));for(let a=1;a+2<i.length;a++){const l=i[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*i[a+1][0]-o*i[a-1][0])/6,l[1]+(o*i[a+1][1]-o*i[a-1][1])/6],s[2]=[i[a+1][0]+(o*i[a][0]-o*i[a+2][0])/6,i[a+1][1]+(o*i[a][1]-o*i[a+2][1])/6],s[3]=[i[a+1][0],i[a+1][1]],r.push(s[1],s[2],s[3])}}return r}function C7e(e,t){return Math.sqrt(Gy(e,t))}function Gy(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function M7e(e,t,n){const r=Gy(t,n);if(r===0)return Gy(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Gy(e,mu(t,n,i))}function mu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function A7e(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function yC(e,t,n,r){const i=r||[];if(A7e(e,t)<n){const s=e[t+0];i.length?C7e(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=mu(o,a,.5),d=mu(a,l,.5),u=mu(l,f,.5),h=mu(c,d,.5),g=mu(d,u,.5),U=mu(h,g,.5);yC([o,c,h,U],0,n,i),yC([U,g,u,f],0,n,i)}return i}function xC(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=M7e(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(xC(e,t,f+1,r,s),xC(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function T7e(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;yC(e,o,t,r)}return n&&n>0?xC(r,0,r.length,n):r}function I7e(e,t){return Math.sqrt(Xy(e,t))}function Xy(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function N7e(e,t,n){const r=Xy(t,n);if(r===0)return Xy(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Xy(e,gu(t,n,i))}function gu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function R7e(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function vC(e,t,n,r){const i=r||[];if(R7e(e,t)<n){const s=e[t+0];i.length?I7e(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=gu(o,a,.5),d=gu(a,l,.5),u=gu(l,f,.5),h=gu(c,d,.5),g=gu(d,u,.5),U=gu(h,g,.5);vC([o,c,h,U],0,n,i),vC([U,g,u,f],0,n,i)}return i}function _7e(e,t){return wC(e,0,e.length,t)}function wC(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=N7e(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(wC(e,t,f+1,r,s),wC(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function P7e(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;vC(e,o,t,r)}return r}function D7e(e,t,n){const r=dT(e),i=lZ(aZ(r)),s=[];let o=[],a=[0,0],l=[];const f=()=>{l.length>=4&&o.push(...P7e(l,t)),l=[]},c=()=>{f(),o.length&&(s.push(o),o=[])};for(const{key:u,data:h}of i)switch(u){case"M":c(),a=[h[0],h[1]],o.push(a);break;case"L":f(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const g=o.length?o[o.length-1]:a;l.push([g[0],g[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":f(),o.push([a[0],a[1]]);break}if(c(),!n)return s;const d=[];for(const u of s){const h=_7e(u,n);h.length&&d.push(h)}return d}const ro="none";class L2{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return d7e()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,s){const o=this._o(s);return this._d("line",[fZ(t,n,r,i,o)],o)}rectangle(t,n,r,i,s){const o=this._o(s),a=[],l=b7e(t,n,r,i,o);if(o.fill){const f=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];o.fillStyle==="solid"?a.push(OE([f],o)):a.push(dp([f],o))}return o.stroke!==ro&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,r,i,s){const o=this._o(s),a=[],l=dZ(r,i,o),f=UC(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const c=UC(t,n,o,l).opset;c.type="fillPath",a.push(c)}else a.push(dp([f.estimatedPoints],o));return o.stroke!==ro&&a.push(f.opset),this._d("ellipse",a,o)}circle(t,n,r,i){const s=this.ellipse(t,n,r,r,i);return s.shape="circle",s}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[Wy(t,!1,r)],r)}arc(t,n,r,i,s,o,a=!1,l){const f=this._o(l),c=[],d=Wj(t,n,r,i,s,o,a,!0,f);if(a&&f.fill)if(f.fillStyle==="solid"){const u=Object.assign({},f);u.disableMultiStroke=!0;const h=Wj(t,n,r,i,s,o,!0,!1,u);h.type="fillPath",c.push(h)}else c.push(y7e(t,n,r,i,s,o,f));return f.stroke!==ro&&c.push(d),this._d("arc",c,f)}curve(t,n){const r=this._o(n),i=[],s=Vj(t,r);if(r.fill&&r.fill!==ro&&t.length>=3)if(r.fillStyle==="solid"){const o=Vj(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=k7e(t),a=T7e(o,10,(1+r.roughness)/2);i.push(dp([a],r))}return r.stroke!==ro&&i.push(s),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],s=Wy(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(OE([t],r)):i.push(dp([t],r))),r.stroke!==ro&&i.push(s),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==ro,o=r.stroke!==ro,a=!!(r.simplification&&r.simplification<1),l=a?4-4*(r.simplification||1):(1+r.roughness)/2,f=D7e(t,1,l),c=Gj(t,r);if(s)if(r.fillStyle==="solid")if(f.length===1){const d=Gj(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else i.push(OE(f,r));else i.push(dp(f,r));return o&&(a?f.forEach(d=>{i.push(Wy(d,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const s=typeof n=="number"&&n>=0?i.data.map(o=>+o.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:ro};break;case"fillPath":o={d:this.opsToPath(s),stroke:ro,strokeWidth:0,fill:r.fill||ro};break;case"fillSketch":o=this.fillSketch(s,r);break}o&&i.push(o)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||ro,strokeWidth:r,fill:ro}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class L7e{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new L2(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,a),i.restore();break}case"fillSketch":this.fillSketch(i,o,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof r=="number"&&r>=0?s.data.map(a=>+a.toFixed(r)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,s){const o=this.gen.line(t,n,r,i,s);return this.draw(o),o}rectangle(t,n,r,i,s){const o=this.gen.rectangle(t,n,r,i,s);return this.draw(o),o}ellipse(t,n,r,i,s){const o=this.gen.ellipse(t,n,r,i,s);return this.draw(o),o}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s),s}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,s,o,a=!1,l){const f=this.gen.arc(t,n,r,i,s,o,a,l);return this.draw(f),f}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const qU="http://www.w3.org/2000/svg";class O7e{constructor(t,n){this.svg=t,this.gen=new L2(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(qU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=i.createElementNS(qU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{l=i.createElementNS(qU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(i,a,r);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=t.createElementNS(qU,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,s){const o=this.gen.line(t,n,r,i,s);return this.draw(o)}rectangle(t,n,r,i,s){const o=this.gen.rectangle(t,n,r,i,s);return this.draw(o)}ellipse(t,n,r,i,s){const o=this.gen.ellipse(t,n,r,i,s);return this.draw(o)}circle(t,n,r,i){const s=this.gen.circle(t,n,r,i);return this.draw(s)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,s,o,a=!1,l){const f=this.gen.arc(t,n,r,i,s,o,a,l);return this.draw(f)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const j0={canvas(e,t){return new L7e(e,t)},svg(e,t){return new O7e(e,t)},generator(e){return new L2(e)},newSeed(){return L2.newSeed()}};function qj(e,t,n,r=i=>i){return e*r(.5-t*(.5-n))}function j7e(e){return[-e[0],-e[1]]}function Na(e,t){return[e[0]+t[0],e[1]+t[1]]}function Fo(e,t){return[e[0]-t[0],e[1]-t[1]]}function Ma(e,t){return[e[0]*t,e[1]*t]}function B7e(e,t){return[e[0]/t,e[1]/t]}function _g(e){return[e[1],-e[0]]}function Qj(e,t){return e[0]*t[0]+e[1]*t[1]}function F7e(e,t){return e[0]===t[0]&&e[1]===t[1]}function $7e(e){return Math.hypot(e[0],e[1])}function z7e(e){return e[0]*e[0]+e[1]*e[1]}function Jj(e,t){return z7e(Fo(e,t))}function hZ(e){return B7e(e,$7e(e))}function H7e(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Pg(e,t,n){let r=Math.sin(n),i=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*i-o*r,l=s*r+o*i;return[a+t[0],l+t[1]]}function EC(e,t,n){return Na(e,Ma(Fo(t,e),n))}function eB(e,t,n){return Na(e,Ma(t,n))}var{min:K1,PI:V7e}=Math,tB=.275,Dg=V7e+1e-4;function W7e(e,t={}){let{size:n=16,smoothing:r=.5,thinning:i=.5,simulatePressure:s=!0,easing:o=H=>H,start:a={},end:l={},last:f=!1}=t,{cap:c=!0,easing:d=H=>H*(2-H)}=a,{cap:u=!0,easing:h=H=>--H*H*H+1}=l;if(e.length===0||n<=0)return[];let g=e[e.length-1].runningLength,U=a.taper===!1?0:a.taper===!0?Math.max(n,g):a.taper,y=l.taper===!1?0:l.taper===!0?Math.max(n,g):l.taper,x=Math.pow(n*r,2),w=[],E=[],S=e.slice(0,10).reduce((H,G)=>{let V=G.pressure;if(s){let Y=K1(1,G.distance/n),K=K1(1,1-Y);V=K1(1,H+(K-H)*(Y*tB))}return(H+V)/2},e[0].pressure),M=qj(n,i,e[e.length-1].pressure,o),A,C=e[0].vector,I=e[0].point,R=I,L=I,_=R,O=!1;for(let H=0;H<e.length;H++){let{pressure:G}=e[H],{point:V,vector:Y,distance:K,runningLength:q}=e[H];if(H<e.length-1&&g-q<3)continue;if(i){if(s){let he=K1(1,K/n),we=K1(1,1-he);G=K1(1,S+(we-S)*(he*tB))}M=qj(n,i,G,o)}else M=n/2;A===void 0&&(A=M);let se=q<U?d(q/U):1,de=g-q<y?h((g-q)/y):1;M=Math.max(.01,M*Math.min(se,de));let xe=(H<e.length-1?e[H+1]:e[H]).vector,ve=H<e.length-1?Qj(Y,xe):1,ue=Qj(Y,C)<0&&!O,te=ve!==null&&ve<0;if(ue||te){let he=Ma(_g(C),M);for(let we=1/13,Se=0;Se<=1;Se+=we)L=Pg(Fo(V,he),V,Dg*Se),w.push(L),_=Pg(Na(V,he),V,Dg*-Se),E.push(_);I=L,R=_,te&&(O=!0);continue}if(O=!1,H===e.length-1){let he=Ma(_g(Y),M);w.push(Fo(V,he)),E.push(Na(V,he));continue}let le=Ma(_g(EC(xe,Y,ve)),M);L=Fo(V,le),(H<=1||Jj(I,L)>x)&&(w.push(L),I=L),_=Na(V,le),(H<=1||Jj(R,_)>x)&&(E.push(_),R=_),S=G,C=Y}let $=e[0].point.slice(0,2),B=e.length>1?e[e.length-1].point.slice(0,2):Na(e[0].point,[1,1]),F=[],z=[];if(e.length===1){if(!(U||y)||f){let H=eB($,hZ(_g(Fo($,B))),-(A||M)),G=[];for(let V=1/13,Y=V;Y<=1;Y+=V)G.push(Pg(H,$,Dg*2*Y));return G}}else{if(!(U||y&&e.length===1))if(c)for(let G=1/13,V=G;V<=1;V+=G){let Y=Pg(E[0],$,Dg*V);F.push(Y)}else{let G=Fo(w[0],E[0]),V=Ma(G,.5),Y=Ma(G,.51);F.push(Fo($,V),Fo($,Y),Na($,Y),Na($,V))}let H=_g(j7e(e[e.length-1].vector));if(y||U&&e.length===1)z.push(B);else if(u){let G=eB(B,H,M);for(let V=1/29,Y=V;Y<1;Y+=V)z.push(Pg(G,B,Dg*3*Y))}else z.push(Na(B,Ma(H,M)),Na(B,Ma(H,M*.99)),Fo(B,Ma(H,M*.99)),Fo(B,Ma(H,M)))}return w.concat(z,E.reverse(),F)}function G7e(e,t={}){var n;let{streamline:r=.5,size:i=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-r)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:g,pressure:U=.5})=>[h,g,U]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let g=1;g<5;g++)a.push(EC(a[0],h,g/4))}a.length===1&&(a=[...a,[...Na(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],f=!1,c=0,d=l[0],u=a.length-1;for(let h=1;h<a.length;h++){let g=s&&h===u?a[h].slice(0,2):EC(d.point,a[h],o);if(F7e(d.point,g))continue;let U=H7e(g,d.point);if(c+=U,h<u&&!f){if(c<i)continue;f=!0}d={point:g,pressure:a[h][2]>=0?a[h][2]:.5,vector:hZ(Fo(d.point,g)),distance:U,runningLength:c},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function X7e(e,t={}){return W7e(G7e(e,t),t)}function pZ(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=pZ(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function ze(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=pZ(t))&&(r&&(r+=" "),r+=n);return r}function K7e(e,t){return Math.sqrt(Ky(e,t))}function Ky(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Y7e(e,t,n){const r=Ky(t,n);if(r===0)return Ky(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Ky(e,bu(t,n,i))}function bu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Z7e(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];let o=3*r[0]-2*n[0]-s[0];o*=o;let a=3*r[1]-2*n[1]-s[1];a*=a;let l=3*i[0]-2*s[0]-n[0];l*=l;let f=3*i[1]-2*s[1]-n[1];return f*=f,o<l&&(o=l),a<f&&(a=f),o+a}function SC(e,t,n,r){const i=r||[];if(Z7e(e,t)<n){const s=e[t+0];i.length?K7e(i[i.length-1],s)>1&&i.push(s):i.push(s),i.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],f=e[t+3],c=bu(o,a,.5),d=bu(a,l,.5),u=bu(l,f,.5),h=bu(c,d,.5),g=bu(d,u,.5),U=bu(h,g,.5);SC([o,c,h,U],0,n,i),SC([U,g,u,f],0,n,i)}return i}function q7e(e,t){return L4(e,0,e.length,t)}function L4(e,t,n,r,i){const s=i||[],o=e[t],a=e[n-1];let l=0,f=1;for(let c=t+1;c<n-1;++c){const d=Y7e(e[c],o,a);d>l&&(l=d,f=c)}return Math.sqrt(l)>r?(L4(e,t,f+1,r,s),L4(e,f,n,r,s)):(s.length||s.push(o),s.push(a)),s}function Q7e(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let s=0;s<i;s++){const o=s*3;SC(e,o,t,r)}return L4(r,0,r.length,n)}var Lg={},nB;function J7e(){if(nB)return Lg;nB=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.sanitizeUrl=void 0;var e=/^([^\w]*)(javascript|data|vbscript)/im,t=/&#(\w+)(^\w|;)?/g,n=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,i=/^.+(:|&colon;)/gim,s=[".","/"];function o(f){return s.indexOf(f[0])>-1}function a(f){return f.replace(t,function(c,d){return String.fromCharCode(d)})}function l(f){var c=a(f||"").replace(n,"").replace(r,"").trim();if(!c)return"about:blank";if(o(c))return c;var d=c.match(i);if(!d)return c;var u=d[0];return e.test(u)?"about:blank":c}return Lg.sanitizeUrl=l,Lg}var exe=J7e();const mZ="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function vp(e,t,n){const r=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||r)===t[o];)o++;if(o>0)return t.slice(0,o)+vp(e.slice(o),t.slice(o),n)}const i=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-i>1){const o=Math.round(.5*(i+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[i]+vp(e.slice(1),null,n)}function gZ(e){if(e.length!==bZ(e[0]))throw new Error("invalid integer part of order key: "+e)}function bZ(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function l5(e){const t=bZ(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function rB(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=l5(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function iB(e,t){gZ(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const o=t.indexOf(r[s])+1;o===t.length?r[s]=t[0]:(r[s]=t[o],i=!1)}if(i){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?r.push(t[0]):r.pop(),s+r.join("")}else return n+r.join("")}function txe(e,t){gZ(e);const[n,...r]=e.split("");let i=!0;for(let s=r.length-1;i&&s>=0;s--){const o=t.indexOf(r[s])-1;o===-1?r[s]=t.slice(-1):(r[s]=t[o],i=!1)}if(i){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?r.push(t.slice(-1)):r.pop(),s+r.join("")}else return n+r.join("")}function Y1(e,t,n=mZ){if(e!=null&&rB(e,n),t!=null&&rB(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=l5(t),f=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+vp("",f,n);if(l<t)return l;const c=txe(l,n);if(c==null)throw new Error("cannot decrement any more");return c}if(t==null){const l=l5(e),f=e.slice(l.length),c=iB(l,n);return c??l+vp(f,null,n)}const r=l5(e),i=e.slice(r.length),s=l5(t),o=t.slice(s.length);if(r===s)return r+vp(i,o,n);const a=iB(r,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:r+vp(i,null,n)}function kC(e,t,n,r=mZ){if(n===0)return[];if(n===1)return[Y1(e,t,r)];if(t==null){let o=Y1(e,t,r);const a=[o];for(let l=0;l<n-1;l++)o=Y1(o,t,r),a.push(o);return a}if(e==null){let o=Y1(e,t,r);const a=[o];for(let l=0;l<n-1;l++)o=Y1(e,o,r),a.push(o);return a.reverse(),a}const i=Math.floor(n/2),s=Y1(e,t,r);return[...kC(e,s,i,r),s,...kC(s,t,n-i-1,r)]}const c1=(()=>{if(typeof self>"u")return!1;if(!("top"in self&&self!==top)){if("showOpenFilePicker"in self)return"showOpenFilePicker"}return!1})(),nxe=Ve(c1?()=>import("./file-open-002ab408-CQ9a1yTP.js"):()=>import("./file-open-7c801643-CD3BRLr1.js"),[]);async function rxe(...e){return(await nxe).default(...e)}Ve(c1?()=>import("./directory-open-4ed118d0-BNgAhb94.js"):()=>import("./directory-open-01563666-DWU9wJ6I.js"),[]);const ixe=Ve(c1?()=>import("./file-save-745eba88-D6MGJDcB.js"):()=>import("./file-save-3189631c-x92wctJd.js"),[]);async function sxe(...e){return(await ixe).default(...e)}var oxe=(e,t)=>t.reduce((n,r)=>(r in e&&(n[r]=e[r]),n),{}),axe=5,up=5,lxe=4,c5=4,f5=1,Ea=[0,2,4,6,8],Sa=(e,t)=>t.map(n=>li[e][n]),Mt={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Sa("gray",Ea),red:Sa("red",Ea),pink:Sa("pink",Ea),grape:Sa("grape",Ea),violet:Sa("violet",Ea),blue:Sa("blue",Ea),cyan:Sa("cyan",Ea),teal:Sa("teal",Ea),green:Sa("green",Ea),yellow:Sa("yellow",Ea),orange:Sa("orange",Ea),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},UZ=oxe(Mt,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),yZ=[Mt.black,Mt.red[c5],Mt.green[c5],Mt.blue[c5],Mt.yellow[c5]],xZ=[Mt.transparent,Mt.red[f5],Mt.green[f5],Mt.blue[f5],Mt.yellow[f5]],vZ=[Mt.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],cxe={transparent:Mt.transparent,white:Mt.white,gray:Mt.gray,black:Mt.black,bronze:Mt.bronze,...UZ},fxe={transparent:Mt.transparent,white:Mt.white,gray:Mt.gray,black:Mt.black,bronze:Mt.bronze,...UZ},dxe=e=>[Mt.cyan[e],Mt.blue[e],Mt.violet[e],Mt.grape[e],Mt.pink[e],Mt.green[e],Mt.teal[e],Mt.yellow[e],Mt.orange[e],Mt.red[e]],uxe=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,sc=/Mac|iPod|iPhone|iPad/.test(navigator.platform),wZ=/^Win/.test(navigator.platform),hxe=/\b(android)\b/i.test(navigator.userAgent),O2="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,pxe=navigator.userAgent.indexOf("Chrome")!==-1,mxe=!pxe&&navigator.userAgent.indexOf("Safari")!==-1,EZ=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,gxe=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},CC=typeof window<"u"&&"ResizeObserver"in window,bxe="Excalidraw",Uxe=36,Uu=10,Yy=8,yxe=5,sB=1,xxe=30,C0=Math.PI/12,vxe="red",nn={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},kd={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},Z1={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"},QU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},Fs={TEST:"test",DEVELOPMENT:"development"},i6={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper"},wp="Xiaolai",j2="Segoe UI Emoji",Fn={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9},Ep={[wp]:100,[j2]:1e3},SZ=e=>{switch(e){case Fn.Excalifont:return[wp,j2];default:return[j2]}},It={LIGHT:"light",DARK:"dark"},$n={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},uT=1,Bf=20,B0=Fn.Excalifont,Bb="left",O4="top",Wh=2,j4=2*Wh,wxe=1e-5,Exe=2*j4-wxe,JU="#ffffff",Sxe="#1e1e1e",kxe="#a2f1a6",B4=20,kZ=5,s6={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},rt={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...s6},Cxe=[rt.text,rt.html,...Object.values(s6)],jE={png:"png",svg:"svg",clipboard:"clipboard"},ia={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},hT=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Mxe=500,Axe=300,Txe=500,Ixe=100,M7=.1,pT=.1,mT=30,Nxe=300,gT="invert(93%) hue-rotate(180deg)",oB={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0},tools:{image:!0}},Rxe=730,_xe=1e3,Pxe=500,Dxe=1229,Og=2,bT=[1,2,3],T6=10,Lxe=1440,aB=4*1024*1024,$t="http://www.w3.org/2000/svg",A7={excalidraw:2,excalidrawLibrary:2},Nr=5,Oxe=.7,jxe=11,mo={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},B2={LEFT:"left",CENTER:"center",RIGHT:"right"},Bxe=20,BE=.25,Fxe=32,Rr={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},CZ={architect:0,artist:1,cartoonist:2},FE={thin:1,bold:2,extraBold:4},qn={strokeColor:Mt.black,backgroundColor:Mt.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:CZ.artist,opacity:100,locked:!1},F4="library",Vp="search",Qa={name:"default",defaultTab:F4},MZ=new Set(["iframe","embeddable","image"]),$r={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",arrow:"arrow",line:"line",freedraw:"freedraw",text:"text",image:"image",eraser:"eraser",hand:"hand",frame:"frame",magicframe:"magicframe",embeddable:"embeddable",laser:"laser"},O5={OAI_API_KEY:"excalidraw-oai-api-key",MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},AZ="Untitled",Sp={generalStats:1,elementProperties:2},Xo=1,ni={sharp:"sharp",round:"round",elbow:"elbow"},TZ=.3,$4="element",$xe=Symbol.for("__test__originalId__"),zxe=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(zxe||{}),Hxe=bT.includes(devicePixelRatio)?devicePixelRatio:1,oc=()=>({showWelcomeScreen:!1,theme:It.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:qn.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:qn.fillStyle,currentItemFontFamily:B0,currentItemFontSize:Bf,currentItemOpacity:qn.opacity,currentItemRoughness:qn.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:qn.strokeColor,currentItemRoundness:"round",currentItemArrowType:ni.round,currentItemStrokeStyle:qn.strokeStyle,currentItemStrokeWidth:qn.strokeWidth,currentItemTextAlign:Bb,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:qn.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:Hxe,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:B4,gridStep:kZ,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:Sp.generalStats|Sp.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:Mt.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:[]}),Vxe=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}),Wxe=(e,t)=>{var r;let n={};for(let i of Object.keys(e))if((r=Vxe[i])!=null&&r[t]){let s=e[i];n[i]=s}return n},IZ=e=>Wxe(e,"export"),Il=({activeTool:e})=>e.type==="eraser",o6=({activeTool:e})=>e.type==="hand",At=(e,t,n)=>Math.min(Math.max(e,t),n),Jl=(e,t,n="round")=>{let r=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*r)/r},Gxe=(e,t,n="round")=>{let r=1/t;return Math[n](e*r)/r},ey=(e,t)=>(e+t)/2,j5=e=>typeof e=="number"&&Number.isFinite(e),lB=(e,t,n=1e-4)=>Math.abs(e-t)<n,z4=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function xh(e){return e*Math.PI/180}function Fb(e){return e*180/Math.PI}function Xxe(e){return Math.abs(Math.sin(2*e))<1e-4}function yi(e,t,n=0,r=0){return[e-n,t-r]}function Ye(e,t=[0,0]){return yi(e[0]-t[0],e[1]-t[1])}function Fr(e,t){return e[0]*t[1]-t[0]*e[1]}function cB(e,t){return e[0]*t[0]+e[1]*t[1]}function l0(e,t){return[e[0]+t[0],e[1]+t[1]]}function H4(e,t){return[e[0]-t[0],e[1]-t[1]]}function tr(e,t){return yi(e[0]*t,e[1]*t)}function Kxe(e){return e[0]*e[0]+e[1]*e[1]}function Yxe(e){return Math.sqrt(Kxe(e))}var Hi=e=>{let t=Yxe(e);return t===0?yi(0,0):yi(e[0]/t,e[1]/t)};function P(e,t){return[e,t]}function UT(e){return e.length===2?P(e[0],e[1]):void 0}function Tt(e,t=P(0,0)){return P(t[0]+e[0],t[1]+e[1])}function Zxe(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function il(e,t){let n=Math.abs;return n(e[0]-t[0])<1e-4&&n(e[1]-t[1])<1e-4}function pe([e,t],[n,r],i){return P((e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r)}function V4(e,t=[0,0]){return P(e[0]+t[0],e[1]+t[1])}function $b(e,t){return P((e[0]+t[0])/2,(e[1]+t[1])/2)}function Zt(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function F2(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}var Bc=(e,t,n)=>V4(t,tr(Ye(e,t),n)),NZ=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function MC(e,t){return[e,t]}function qxe(e,t){let n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],i=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-i*r;if(o!==0){let a=n*e[0][0]+r*e[0][1],l=i*t[0][0]+s*t[0][1];return P((a*s-l*r)/o,(n*l-i*a)/o)}return null}function Qe(e,t){return[e,t]}var Gh=(e,t,n=1e-4)=>{let r=yT(e,t);return r===0?!0:r<n},yT=(e,t)=>{let[n,r]=e,[[i,s],[o,a]]=t,l=n-i,f=r-s,c=o-i,d=a-s,u=l*c+f*d,h=c*c+d*d,g=-1;h!==0&&(g=u/h);let U,y;g<0?(U=i,y=s):g>1?(U=o,y=a):(U=i+g*c,y=s+g*d);let x=n-U,w=r-y;return Math.sqrt(x*x+w*w)};function $2(e,t){let n=qxe(MC(e[0],e[1]),MC(t[0],t[1]));return!n||!Gh(n,t)||!Gh(n,e)?null:n}function AC(e,t){return[e,t]}function Qxe(e,t){return[Qe(e[0],P(e[1][0],e[0][1])),Qe(P(e[1][0],e[0][1]),e[1]),Qe(e[1],P(e[0][0],e[1][1])),Qe(P(e[0][0],e[1][1]),e[0])].map(n=>$2(t,n)).filter(n=>!!n)}function hf(e,t,n,r){return[e,t,n,r]}function fB(e,t,n,r=1e-6){return[(e(t+r,n)-e(t-r,n))/(2*r),(e(t,n+r)-e(t,n-r))/(2*r)]}function Jxe(e,t,n,r=.001,i=10){let s=1/0,o=0;for(;s>=r;){if(o>=i)return null;let a=e(t,n),l=[fB((U,y)=>e(U,y)[0],t,n),fB((U,y)=>e(U,y)[1],t,n)],f=[[-a[0]],[-a[1]]],c=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(c===0)return null;let d=[[l[1][1]/c,-l[0][1]/c],[-l[1][0]/c,l[0][0]/c]],u=[[d[0][0]*f[0][0]+d[0][1]*f[1][0]],[d[1][0]*f[0][0]+d[1][1]*f[1][0]]];t=t+u[0][0],n=n+u[1][0];let[h,g]=e(t,n);s=Math.max(Math.abs(h),Math.abs(g)),o+=1}return[t,n]}var B5=(e,t)=>P((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function RZ(e,t){let n=tve(e);if(Qxe(AC(P(n[0],n[1]),P(n[2],n[3])),t).length===0)return[];let r=a=>P(t[0][0]+a*(t[1][0]-t[0][0]),t[0][1]+a*(t[1][1]-t[0][1])),i=[[.5,0],[.2,0],[.8,0]],s=([a,l])=>{let f=Jxe((u,h)=>{let g=B5(e,u),U=r(h);return[g[0]-U[0],g[1]-U[1]]},a,l);if(!f)return null;let[c,d]=f;return c<0||c>1||d<0||d>1?null:B5(e,c)},o=s(i[0]);return o?[o]:(o=s(i[1]),o?[o]:(o=s(i[2]),o?[o]:[]))}function eve(e,t,n=.001){let r=(l,f,c,d=n)=>{let u=l,h=f,g;for(;h-u>d;)g=(h+u)/2,c(g-d)<c(g+d)?h=g:u=g;return g},i=0;for(let l=1/0,f=0;f<30;f++){let c=Zt(t,B5(e,f/30));c<l&&(l=c,i=f)}let s=Math.max((i-1)/30,0),o=Math.min((i+1)/30,1),a=r(s,o,l=>Zt(t,B5(e,l)));return a?B5(e,a):null}function _Z(e,t){let n=eve(e,t);return n?Zt(t,n):0}function tve(e){let[t,n,r,i]=e,s=[t[0],n[0],r[0],i[0]],o=[t[1],n[1],r[1],i[1]];return[Math.min(...s),Math.min(...o),Math.max(...s),Math.max(...o)]}function dB(...e){return PZ(e)}function W4(e){return PZ(e)}var uB=(e,t)=>{let n=e[0],r=e[1],i=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){let a=t[s][0],l=t[s][1],f=t[o][0],c=t[o][1];(l>r&&c<=r||l<=r&&c>r)&&n<(f-a)*(r-l)/(c-l)+a&&(i=!i)}return i},nve=(e,t,n=1e-4)=>{let r=!1;for(let i=0,s=t.length-1;i<s;i++)if(Gh(e,Qe(t[i],t[i+1]),n)){r=!0;break}return r};function PZ(e){return rve(e)?e:[...e,e[0]]}function rve(e){return il(e[0],e[e.length-1])}function ji(e,t){return aa([e,t])}var G4=([e,t],[n,r])=>e<=n?t>=n:e>=n?r>=e:!1,X4=([e,t],[n,r])=>{let i=Math.max(e,n),s=Math.min(t,r);return i<=s?aa([i,s]):null},ty=(e,[t,n])=>e>=t&&e<=n;function q1([e,t,n],r){let i=(c,d,u)=>(c[0]-u[0])*(d[1]-u[1])-(d[0]-u[0])*(c[1]-u[1]),s=i(r,e,t),o=i(r,t,n),a=i(r,n,e),l=s<0||o<0||a<0,f=s>0||o>0||a>0;return!(l&&f)}var hB=()=>{let e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),r=`${e.getDate()}`.padStart(2,"0"),i=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${r}-${i}${s}`},F5=e=>e.charAt(0).toUpperCase()+e.slice(1),ive=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),TC=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,sve=e=>TC(e)||e instanceof Element&&!!e.closest("label, button"),Eu=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),a6=({fontFamily:e})=>{for(let[t,n]of Object.entries(Fn))if(n===e)return`${t}${SZ(n).map(r=>`, ${r}`).join("")}`;return j2},ln=({fontSize:e,fontFamily:t})=>`${e}px ${a6({fontFamily:t})}`,l6=(e,t)=>{let n=0,r=null,i=(...s)=>{r=s,clearTimeout(n),n=window.setTimeout(()=>{r=null,e(...s)},t)};return i.flush=()=>{if(clearTimeout(n),r){let s=r;r=null,e(...s)}},i.cancel=()=>{r=null,clearTimeout(n)},i},T7=(e,t)=>{let n=null,r=null,i=null,s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),r=null,i&&(r=i,i=null,s(r))})},o=(...a)=>{if(vt.MODE==="test"){e(...a);return}r=a,n===null?s(r):t!=null&&t.trailing&&(i=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),r&&(e(...i||r),r=i=null)},o.cancel=()=>{r=i=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},vh=e=>1-Math.pow(1-e,4),pB=(e,t,n)=>(t-e)*vh(n)+e,ove=({fromValues:e,toValues:t,onStep:n,duration:r=250,interpolateValue:i,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,f=0,c;function d(u){if(l)return;c===void 0&&(c=u,s==null||s());let h=Math.min(u-c,r),g=vh(h/r),U={};if(Object.keys(e).forEach(y=>{let x=y,w=(t[x]-e[x])*g+e[x];U[x]=w}),n(U),h<r){let y=h/r,x={};Object.keys(e).forEach(w=>{let E=w,S=e[E],M=t[E],A;A=i?i(S,M,y,E):pB(S,M,y),A==null&&(A=pB(S,M,y)),x[E]=A}),n(x),f=window.requestAnimationFrame(d)}else n(t),o==null||o()}return f=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(f)}},ave=(e,t)=>{if(!e.length||t<1)return[];let n=0,r=0,i=Array(Math.ceil(e.length/t));for(;n<e.length;)i[r++]=e.slice(n,n+=t);return i},Fi=(e,t)=>Math.abs(e-t),Ur=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked},Ue=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),sc?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),xn=({clientX:e,clientY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:o})=>{let a=(e-r)/n.value-s,l=(t-i)/n.value-o;return{x:a,y:l}},Ga=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:r,offsetTop:i,scrollX:s,scrollY:o})=>{let a=(e+s)*n.value+r,l=(t+o)*n.value+i;return{x:a,y:l}},ny=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),lve="A-Za-z--------",cve="---",fve=new RegExp(`^[^${lve}]*[${cve}]`),DZ=e=>fve.test(e),Xa=e=>{let[t,n]=e;return{x:t,y:n}},LZ=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},OZ=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},Su=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},Ka=e=>{let t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===Mt.transparent},$E=e=>e.fillStyle!=="solid"||Ka(e.backgroundColor),dve=()=>{let e,t,n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},uve=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;let{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},hve=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},pve=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),I6=()=>kf()?1:Date.now(),ct=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),mve=e=>e.reduce((t,n,r)=>(t.set(n.id,[n,r]),t),new Map),Dc=(e,t)=>e.reduce((n,r)=>(n[t?t(r):String(r)]=r,n),{}),gve=e=>e.reduce((t,n,r)=>{let i={...n,prev:null,next:null};if(r!==0){let s=t[r-1];if(i.prev=s,s.next=i,r===e.length-1){let o=t[0];i.next=o,o.prev=i}}return t.push(i),t},[]),kf=()=>vt.MODE==="test",jZ=()=>vt.MODE==="development",bve=()=>typeof process<"u"&&!0,BZ=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),Zy=(e,t)=>{let n=!1;for(let r in t){let i=t[r];if(typeof i<"u"){if(e[r]===i&&(typeof i!="object"||i===null))continue;n=!0}}return n?{...e,...t}:e},Uve=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},zb=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,IC=e=>{let t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},mB=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,ki=(e,t,n,r=!1)=>{let i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return r&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(let o of n)if(!(e[o]===t[o]||mB(e[o],t[o])))return r&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return i.every(o=>{let a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||mB(e[o],t[o]);return!l&&r&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},I7=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},Xh=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function Gi(e,t){if(!e)throw new Error(t)}var yve=e=>{let t,n,r=function(i){let s=Object.entries(i);if(t){let a=!0;for(let[l,f]of s)if(t.get(l)!==f){a=!1;break}if(a)return n}let o=e(i);return t=new Map(s),n=o,o};return r.clear=()=>{t=void 0,n=void 0},r},FZ=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),yf=e=>JSON.parse(JSON.stringify(e)),jg=(e,t)=>ki(e,t)?e:t;function jn(e,t,n,r){var i;return e?((i=e==null?void 0:e.addEventListener)==null||i.call(e,t,n,r),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,r)}):()=>{}}function xve(e,t=!0){let n=e.length;if(n<4)return"";let r=e[0],i=e[1],s=e[2],o=`M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${ey(i[0],s[0]).toFixed(2)},${ey(i[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)r=e[a],i=e[a+1],o+=`${ey(r[0],i[0]).toFixed(2)},${ey(r[1],i[1]).toFixed(2)} `;return t&&(o+="Z"),o}var $Z=e=>e.replace(/\r?\n|\r/g,`
`),aa=e=>e,c6=async(e,...t)=>new Promise(n=>{n(e(...t))}),vve=(...e)=>Math.max(...e.map(t=>t?1:0))>0,gB=class{constructor(e,t){Z(this,"pool"),Z(this,"entries",{}),this.pool=new e7e(e,t)}all(){let e=t=>{if(t.data.result){let[n,r]=t.data.result;this.entries[n]=r}};return this.pool.addEventListener("fulfilled",e),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",e)}),Object.values(this.entries)))}},qy=e=>e.replace(/"/g,"&quot;"),bB=e=>Array.isArray(e)?e:[e],Zo=e=>!!e&&e.type==="image"&&!!e.fileId,Yt=e=>!!e&&e.type==="image",Rs=e=>!!e&&e.type==="embeddable",Rd=e=>!!e&&e.type==="iframe",Qo=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),Oe=e=>e!=null&&e.type==="text",zZ=e=>e!=null&&e.type==="frame",Qy=e=>e!=null&&e.type==="magicframe",at=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),la=e=>e!=null&&wve(e.type),wve=e=>e==="freedraw",mt=e=>e!=null&&xT(e.type),Et=e=>e!=null&&e.type==="arrow",Fe=e=>Et(e)&&e.elbowed,xT=e=>e==="arrow"||e==="line",Xl=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&HZ(e.type),HZ=e=>e==="arrow",sl=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Eve=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),wh=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||Et(e)),VZ=e=>{let t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return Xh(t,null),!1}},N7=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",ca=e=>{var t;return wh(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},An=e=>e!==null&&"containerId"in e&&e.containerId!==null&&Oe(e),N6=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",WZ=e=>e==="line"||e==="arrow"||e==="diamond",Sve=(e,t)=>!!((e===Rr.ADAPTIVE_RADIUS||e===Rr.LEGACY)&&N6(t.type)||e===Rr.PROPORTIONAL_RADIUS&&WZ(t.type)),kve=e=>WZ(e.type)?{type:Rr.PROPORTIONAL_RADIUS}:N6(e.type)?{type:Rr.ADAPTIVE_RADIUS}:null,K4=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,Xi=(e,t,n)=>{let r=e.split(`
`).map(o=>o||" ").join(`
`),i=parseFloat(t),s=Tve(r,i,n);return{width:ET(r,t),height:s}},GZ="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),XZ=(e,t)=>{let n=Ive(e);return n===0?Xi(GZ.split("").join(`
`),e,t).width+Nr*2:n+Nr*2},vT=(e,t)=>Xi("",e,t).width+Nr*2,Cve=()=>ET(GZ,ln({fontSize:Bf,fontFamily:B0}))>0,f6=e=>$Z(e).replace(/\t/g,"        "),wT=e=>f6(e).split(`
`),Mve=e=>{let t=wT(e.text).length;return e.height/t/e.fontSize},Hb=(e,t)=>e*t,KZ=(e,t)=>Hb(e,t)+Nr*2,zE,Ave=class{constructor(){Z(this,"canvas"),this.canvas=document.createElement("canvas")}getLineWidth(e,t){let n=this.canvas.getContext("2d");n.font=t;let r=n.measureText(e).width;return kf()?r*10:r}},Kh=(e,t)=>(zE||(zE=new Ave),zE.getLineWidth(e,t)),ET=(e,t)=>{let n=wT(e),r=0;return n.forEach(i=>{r=Math.max(r,Kh(i,t))}),r},Tve=(e,t,n)=>{let r=wT(e).length;return Hb(t,n)*r},Vb=(()=>{let e={};return{calculate:(t,n)=>{let r=t.charCodeAt(0);if(e[n]||(e[n]=[]),!e[n][r]){let i=Kh(t,n);e[n][r]=i}return e[n][r]},getCache:t=>e[t],clearCache:t=>{e[t]=[]}}})(),Ive=e=>{let t=Vb.getCache(e);if(!t)return 0;let n=t.filter(r=>r!==void 0);return Math.max(...n)},HE,ry,VE,Nve=e=>(HE||(HE=en.class(...Object.values(zc))),HE.test(e)),Rve=()=>{if(!ry)try{ry=Pve()}catch{ry=_ve()}return ry},ST=()=>(VE||(VE=Dve()),VE),Lo={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?\//u},zc={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}","u"),OPENING://u,CLOSING://u,CURRENCY://u},lu={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},_ve=()=>en.or(ST(),ur.On(Lo.HYPHEN,Lo.WHITESPACE,zc.CHAR)),Pve=()=>en.or(ST(),ur.Before(Lo.WHITESPACE).Build(),ur.After(Lo.WHITESPACE,Lo.HYPHEN).Build(),ur.Before(zc.CHAR,zc.CURRENCY).NotPrecededBy(Lo.OPENING,zc.OPENING).Build(),ur.After(zc.CHAR).NotFollowedBy(Lo.HYPHEN,Lo.CLOSING,zc.CLOSING).Build(),ur.BeforeMany(zc.OPENING).NotPrecededBy(Lo.OPENING).Build(),ur.AfterMany(zc.CLOSING).NotFollowedBy(Lo.CLOSING).Build(),ur.AfterMany(Lo.CLOSING).FollowedBy(Lo.OPENING).Build()),Dve=()=>en.group(en.or(lu.FLAG,en.and(lu.MOST,lu.JOINER,en.build(`(?:${lu.ZWJ.source}(?:${lu.FLAG.source}|${lu.ANY.source}${lu.JOINER.source}))*`)))),en={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>en.build(en.join(...e)),or:(...e)=>en.build(e.map(t=>t.source).join("|")),group:(...e)=>en.build(`(${en.join(...e)})`),class:(...e)=>en.build(`[${en.join(...e)}]`)},ur={On:(...e)=>{let t=en.join(...e);return en.build(`([${t}])`)},Before:(...e)=>{let t=en.join(...e),n=()=>en.build(`(?=[${t}])`);return ur.Chain(n)},After:(...e)=>{let t=en.join(...e),n=()=>en.build(`(?<=[${t}])`);return ur.Chain(n)},BeforeMany:(...e)=>{let t=en.join(...e),n=()=>en.build(`(?<![${t}])(?=[${t}])`);return ur.Chain(n)},AfterMany:(...e)=>{let t=en.join(...e),n=()=>en.build(`(?<=[${t}])(?![${t}])`);return ur.Chain(n)},NotBefore:(...e)=>{let t=en.join(...e),n=()=>en.build(`(?![${t}])`);return ur.Chain(n)},NotAfter:(...e)=>{let t=en.join(...e),n=()=>en.build(`(?<![${t}])`);return ur.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{let n=e(),r=ur.After(...t).Build(),i=()=>en.and(r,n);return ur.Chain(i)},FollowedBy:(...t)=>{let n=e(),r=ur.Before(...t).Build(),i=()=>en.and(n,r);return ur.Chain(i)},NotPrecededBy:(...t)=>{let n=e(),r=ur.NotAfter(...t).Build(),i=()=>en.and(r,n);return ur.Chain(i)},NotFollowedBy:(...t)=>{let n=e(),r=ur.NotBefore(...t).Build(),i=()=>en.and(n,r);return ur.Chain(i)}})},Lve=e=>{let t=Rve();return e.normalize("NFC").split(t).filter(Boolean)},f1=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;let r=[],i=e.split(`
`);for(let s of i){if(Kh(s,t)<=n){r.push(s);continue}let o=Ove(s,t,n);r.push(...o)}return r.join(`
`)},Ove=(e,t,n)=>{let r=[],i=Lve(e)[Symbol.iterator](),s="",o=0,a=i.next();for(;!a.done;){let l=a.value,f=s+l,c=Fve(l)?o+Vb.calculate(l,t):Kh(f,t);if(/\s/.test(l)||c<=n){s=f,o=c,a=i.next();continue}if(s)r.push(s.trimEnd()),s="",o=0;else{let d=jve(l,t,n),u=d[d.length-1]??"",h=d.slice(0,-1);r.push(...h),s=u,o=Kh(u,t),a=i.next()}}if(s){let l=Bve(s,t,n);r.push(l)}return r},jve=(e,t,n)=>{if(ST().test(e))return[e];$ve(e);let r=[],i=Array.from(e),s="",o=0;for(let a of i){let l=Vb.calculate(a,t),f=o+l;if(f<=n){s=s+a,o=f;continue}s&&r.push(s),s=a,o=l}return s&&r.push(s),r},Bve=(e,t,n)=>{if(!(Kh(e,t)>n))return e;let[,r,i]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],s=Kh(r,t);for(let o of Array.from(i)){let a=Vb.calculate(o,t),l=s+a;if(l>n)break;r=r+o,s=l}return r},Fve=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,$ve=e=>{if((vt.MODE===Fs.TEST||vt.DEV)&&/\s/.test(e))throw new Error("Word should not contain any whitespaces!")},ts=class{};Z(ts,"rg",new L2),Z(ts,"cache",new WeakMap),Z(ts,"get",e=>ts.cache.get(e)),Z(ts,"set",(e,t)=>ts.cache.set(e,t)),Z(ts,"delete",e=>ts.cache.delete(e)),Z(ts,"destroy",()=>{ts.cache=new WeakMap}),Z(ts,"generateElementShape",(e,t)=>{let n=t!=null&&t.isExporting?void 0:ts.get(e);if(n!==void 0)return n;BC.delete(e);let r=KAe(e,ts.rg,t||{isExporting:!1,canvasBackgroundColor:Mt.white,embedsValidationStatus:null});return ts.cache.set(e,r),r});var Hn=ts,za=e=>"var(--icon-fill-color)",YZ=e=>e===It.LIGHT?li.white:"#1e1e1e",oe=(e,t=512)=>{let{width:n=512,height:r=n,mirror:i,style:s,...o}=typeof t=="number"?{width:t}:t;return m.jsx("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${r}`,className:ze({"rtl-mirror":i}),style:s,...o,children:typeof e=="string"?m.jsx("path",{fill:"currentColor",d:e}):e})},Le={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},bt={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("rect",{x:3,y:8,width:18,height:4,rx:1}),m.jsx("line",{x1:12,y1:8,x2:12,y2:21}),m.jsx("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),m.jsx("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),Le);var kT=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),m.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),m.jsx("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),Le),zve=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Le),Hve=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"1"}),m.jsx("circle",{cx:"12",cy:"19",r:"1"}),m.jsx("circle",{cx:"12",cy:"5",r:"1"})]}),Le),Vve=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),m.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),m.jsx("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),Le),R7=oe(m.jsxs("g",{children:[m.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:m.jsx("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),m.jsx("g",{mask:"url(#UnlockedIcon)",children:m.jsx("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),bt),CT=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),m.jsx("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),m.jsx("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),bt),Wve=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),m.jsx("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),Gve=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),m.jsx("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),Xve=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),m.jsx("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"});oe(m.jsx("g",{fill:"currentColor",children:m.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"});var Kve=oe(m.jsxs("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),m.jsx("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),Yve=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),Le),Zve=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),Le),qve=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"})]}),Le),Qve=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),m.jsx("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),m.jsx("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),Le),Jve=oe(m.jsx("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),bt),ewe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),m.jsx("path",{d:"M16 7h4"}),m.jsx("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),Le),z2=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),m.jsx("path",{d:"m11.25 5.417 3.333 3.333"})]}),bt),ZZ=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),m.jsx("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),m.jsx("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),m.jsx("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),m.jsx("polyline",{points:"5 20 11 4 13 4 20 20"})]}),Le),twe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M12.5 6.667h.01"}),m.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),m.jsx("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),m.jsx("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),bt),nwe=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),m.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]}),Le),UB=oe(m.jsx("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),bt),yB=oe(m.jsx("path",{d:"M5 10h10",strokeWidth:"1.25"}),bt),rwe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M21 21l-6 -6"}),m.jsx("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),m.jsx("path",{d:"M3 4v4h4"})]}),Le),Yh=oe(m.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),bt),iwe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("polyline",{points:"12 16 18 10 12 4"}),m.jsx("polyline",{points:"8 4 2 10 8 16"})]}),bt),NC=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),m.jsx("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),bt),RC=oe(m.jsx("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),bt),_C=oe(m.jsx("g",{stroke:"currentColor",strokeLinejoin:"round",children:m.jsx("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...bt,strokeWidth:1.5}),qZ=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),m.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),Le),_7=oe(m.jsx("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),bt),MT=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Le),swe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Le),xB=oe(m.jsx("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),bt),QZ=oe(m.jsx("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),bt),owe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),m.jsx("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),bt),awe=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),m.jsx("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),Le),lwe=oe(m.jsx("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),PC=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),m.jsx("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),bt),cwe=oe("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),fwe=oe("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),AT=oe(m.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),bt);oe("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});var dwe=oe("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),WE=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),m.jsx("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),m.jsx("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),Le),JZ=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 8h.01"}),m.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),m.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),m.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),m.jsx("path",{d:"M19 16v6"}),m.jsx("path",{d:"M22 19l-3 3l-3 -3"})]}),Le),uwe=oe("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});oe("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});oe("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});var hwe=oe("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");oe("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");var vB=oe(m.jsx("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),bt),wB=oe(m.jsx("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),bt),pwe=oe("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0});oe(m.jsx("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),bt);oe("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z");oe("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24});oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),m.jsx("path",{d:"M12 14v-11"}),m.jsx("path",{d:"M9 6l3 -3l3 3"})]}),Le);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),m.jsx("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});oe(m.jsx("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});var eq=m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 10l0 10"}),m.jsx("path",{d:"M12 10l4 4"}),m.jsx("path",{d:"M12 10l-4 4"}),m.jsx("path",{d:"M4 4l16 0"})]}),tq=m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 5l0 14"}),m.jsx("path",{d:"M16 9l-4 -4"}),m.jsx("path",{d:"M8 9l4 -4"})]}),EB=oe(tq,Le),SB=oe(tq,{...Le,style:{transform:"rotate(180deg)"}}),kB=oe(eq,Le),CB=oe(eq,{...Le,style:{transform:"rotate(180deg)"}}),MB=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),AB=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),TB=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),IB=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),mwe=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),gwe=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),NB=oe(m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),m.jsx("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),bt),RB=oe(m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",children:[m.jsx("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),m.jsx("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),bt),nq=oe(m.jsxs("g",{strokeWidth:"1.5",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("circle",{cx:"9",cy:"7",r:"4"}),m.jsx("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),m.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),m.jsx("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),Le);oe("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");oe("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");var R6=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M15 5 5 15M5 5l10 10"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt);oe("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});oe("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});oe("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});var _B=Te.memo(({theme:e})=>oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M25 26H111V111H25",fill:za()}),m.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:za(),strokeWidth:"2"}),m.jsx("path",{d:"M100 100H160V160H100",fill:za()}),m.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:za(),strokeWidth:"2"}),m.jsxs("g",{fill:YZ(e),stroke:za(),strokeWidth:"6",children:[m.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),PB=Te.memo(({theme:e})=>oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M25 26H111V111H25",fill:za()}),m.jsx("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:za(),strokeWidth:"2"}),m.jsx("path",{d:"M100 100H160V160H100",fill:za()}),m.jsx("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:za(),strokeWidth:"2"}),m.jsxs("g",{fill:YZ(e),stroke:za(),strokeWidth:"6",children:[m.jsx("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),m.jsx("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),m.jsx("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),m.jsx("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),bwe=oe(m.jsx("g",{strokeWidth:1.25,children:m.jsx("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),bt),Uwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),m.jsx("g",{mask:"url(#FillHachureIcon)",children:m.jsx("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),bt),ywe=oe(m.jsxs(m.Fragment,{children:[m.jsxs("g",{clipPath:"url(#a)",children:[m.jsx("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),m.jsx("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:m.jsx("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("g",{mask:"url(#FillCrossHatchIcon)",children:m.jsx("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),xwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...bt,fill:"currentColor"}),rq=oe(m.jsx(m.Fragment,{children:m.jsx("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),bt),vwe=oe(m.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),bt),wwe=oe(m.jsx("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),bt);Te.memo(({theme:e})=>oe(m.jsx("path",{d:"M6 10H34",stroke:za(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));var Ewe=oe(m.jsxs("g",{strokeWidth:"2",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12h2"}),m.jsx("path",{d:"M17 12h2"}),m.jsx("path",{d:"M11 12h2"})]}),Le),Swe=oe(m.jsxs("g",{strokeWidth:"2",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 12v.01"}),m.jsx("path",{d:"M8 12v.01"}),m.jsx("path",{d:"M12 12v.01"}),m.jsx("path",{d:"M16 12v.01"}),m.jsx("path",{d:"M20 12v.01"})]}),Le),kwe=oe(m.jsx("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),bt),Cwe=oe(m.jsx("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),bt),Mwe=oe(m.jsx("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),bt),Awe=oe(m.jsxs("svg",{strokeWidth:"1.5",children:[m.jsx("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),m.jsx("path",{d:"M13.3333 3.33331V3.34331"}),m.jsx("path",{d:"M16.6667 3.33331V3.34331"}),m.jsx("path",{d:"M16.6667 6.66669V6.67669"}),m.jsx("path",{d:"M16.6667 10V10.01"}),m.jsx("path",{d:"M3.33334 13.3333V13.3433"}),m.jsx("path",{d:"M16.6667 13.3333V13.3433"}),m.jsx("path",{d:"M3.33334 16.6667V16.6767"}),m.jsx("path",{d:"M6.66666 16.6667V16.6767"}),m.jsx("path",{d:"M10 16.6667V16.6767"}),m.jsx("path",{d:"M13.3333 16.6667V16.6767"}),m.jsx("path",{d:"M16.6667 16.6667V16.6767"})]}),bt),Twe=oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),m.jsx("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),m.jsx("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),m.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),m.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),m.jsx("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),m.jsx("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),m.jsx("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),m.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),m.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),m.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),m.jsx("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),Le),Iwe=oe(m.jsxs("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[m.jsx("path",{d:"M12 12l9 0"}),m.jsx("path",{d:"M3 9l6 6"}),m.jsx("path",{d:"M3 15l6 -6"})]}),Le),Nwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[m.jsx("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),m.jsx("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),Rwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[m.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),m.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),_we=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[m.jsx("path",{d:"M26 10L6 10"}),m.jsx("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Pwe=Te.memo(({flip:e=!1})=>oe(m.jsx("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:m.jsx("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),Dwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[m.jsx("path",{d:"M32 10L6 10",strokeWidth:2}),m.jsx("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Lwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[m.jsx("path",{d:"M6,9.5H27"}),m.jsx("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),Owe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{d:"M6,9.5H20"}),m.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),jwe=Te.memo(({flip:e=!1})=>oe(m.jsxs("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{d:"M6,9.5H20"}),m.jsx("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Bwe=Te.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Fwe=Te.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),$we=Te.memo(({flip:e=!1})=>oe(m.jsx("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:m.jsx("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),zwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),Hwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),Vwe=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",children:m.jsx("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),Wwe=oe(m.jsx(m.Fragment,{children:m.jsx("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),bt),P7=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 7v-2h13v2"}),m.jsx("path",{d:"M10 5v14"}),m.jsx("path",{d:"M12 19h-4"}),m.jsx("path",{d:"M15 13v-1h6v1"}),m.jsx("path",{d:"M18 12v7"}),m.jsx("path",{d:"M17 19h2"})]}),Le),Gwe=oe(m.jsx(m.Fragment,{children:m.jsxs("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 12h10"}),m.jsx("path",{d:"M7 5v14"}),m.jsx("path",{d:"M17 5v14"}),m.jsx("path",{d:"M15 19h4"}),m.jsx("path",{d:"M15 5h4"}),m.jsx("path",{d:"M5 19h4"}),m.jsx("path",{d:"M5 5h4"})]})}),Le),Y4=oe(m.jsx(m.Fragment,{children:m.jsx("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),bt),DC=oe(m.jsxs(m.Fragment,{children:[m.jsx("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),m.jsx("defs",{children:m.jsx("clipPath",{id:"a",children:m.jsx("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),bt),Xwe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),m.jsx("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),Le),Kwe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),m.jsx("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),Le),Ywe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),Le),Zwe=Te.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),m.jsx("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),Le)),qwe=Te.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),m.jsx("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),Le)),Qwe=Te.memo(({theme:e})=>oe(m.jsxs("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),m.jsx("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),m.jsx("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),Le)),iq=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M21 19h-18l9 -15"}),m.jsx("path",{d:"M20.615 15.171h.015"}),m.jsx("path",{d:"M19.515 11.771h.015"}),m.jsx("path",{d:"M17.715 8.671h.015"}),m.jsx("path",{d:"M15.415 5.971h.015"})]}),Le),Jwe=oe(m.jsx("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});oe(m.jsx("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));var sq=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),m.jsx("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),m.jsx("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),m.jsx("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),Le),DB=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M7 11l5 5l5 -5"}),m.jsx("path",{d:"M12 4l0 12"})]}),Le),TT=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),m.jsx("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),Le),eEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M9.15 14.85l8.85 -10.85"}),m.jsx("path",{d:"M6 4l8.85 10.85"})]}),Le),tEe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),m.jsx("path",{d:"M12 17l0 .01"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Le);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 4v16l13 -8z"})]}),Le);oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),Le);var nEe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12l5 5l10 -10"})]}),Le),rEe=oe(m.jsxs(m.Fragment,{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),m.jsx("path",{d:"M12 9v4"}),m.jsx("path",{d:"M12 17h.01"})]}),Le),iEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 7l6 6"}),m.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),Le),sEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 3l-4 7h8z"}),m.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),m.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),Le),oq=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 7l16 0"}),m.jsx("path",{d:"M4 17l16 0"}),m.jsx("path",{d:"M7 4l0 16"}),m.jsx("path",{d:"M17 4l0 16"})]}),Le),aq=oe(m.jsx("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),Jy=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{d:"M4.16602 10H15.8327"}),m.jsx("path",{d:"M12.5 13.3333L15.8333 10"}),m.jsx("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),bt),lq=oe(m.jsxs("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[m.jsx("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),m.jsx("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),cq=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),m.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),Le);oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),m.jsx("path",{d:"M15 6l3 3"}),m.jsx("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),m.jsx("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),Le);oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),m.jsx("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),m.jsx("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),m.jsx("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),m.jsx("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),m.jsx("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),Le);var oEe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),m.jsx("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),m.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),m.jsx("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),Le),IT=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),m.jsx("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),Le),aEe=oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),m.jsx("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),m.jsx("path",{d:"M3 3l18 18"})]}),Le);oe(m.jsxs("g",{stroke:"currentColor",fill:"none",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),m.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),m.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),m.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),m.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),m.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),Le);var lEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),m.jsx("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),m.jsx("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),m.jsx("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),m.jsx("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),m.jsx("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),Le),Zh=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),m.jsx("path",{d:"M21 21l-6 -6"})]}),Le),cEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),m.jsx("path",{d:"M12 7v5l3 3"}),m.jsx("path",{d:"M19 16l-2 3h4l-2 3"})]}),Le),fEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),m.jsx("path",{d:"M5 10a7 7 0 0 0 14 0"}),m.jsx("path",{d:"M8 21l8 0"}),m.jsx("path",{d:"M12 17l0 4"})]}),Le),dEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 3l18 18"}),m.jsx("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),m.jsx("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),m.jsx("path",{d:"M8 21l8 0"}),m.jsx("path",{d:"M12 17l0 4"})]}),Le),fq=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),Le),uEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M12 20v.01"}),m.jsx("path",{d:"M16 20v.01"}),m.jsx("path",{d:"M8 20v.01"}),m.jsx("path",{d:"M4 20v.01"}),m.jsx("path",{d:"M4 16v.01"}),m.jsx("path",{d:"M4 12v.01"}),m.jsx("path",{d:"M4 8v.01"}),m.jsx("path",{d:"M4 4v.01"}),m.jsx("path",{d:"M8 4v.01"}),m.jsx("path",{d:"M12 4v.01"}),m.jsx("path",{d:"M16 4v.01"}),m.jsx("path",{d:"M20 4v.01"}),m.jsx("path",{d:"M20 8v.01"}),m.jsx("path",{d:"M20 12v.01"}),m.jsx("path",{d:"M20 16v.01"}),m.jsx("path",{d:"M20 20v.01"})]}),Le),hEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 3v18"}),m.jsx("path",{d:"M19 21v-18"}),m.jsx("path",{d:"M5 7h14"}),m.jsx("path",{d:"M5 15h14"}),m.jsx("path",{d:"M8 13v4"}),m.jsx("path",{d:"M11 13v4"}),m.jsx("path",{d:"M16 13v4"}),m.jsx("path",{d:"M14 5v4"}),m.jsx("path",{d:"M11 5v4"}),m.jsx("path",{d:"M8 5v4"}),m.jsx("path",{d:"M3 21h18"})]}),Le),pEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 12l18 0"}),m.jsx("path",{d:"M7 16l10 0l-10 5l0 -5"}),m.jsx("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),Le),mEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 3l0 18"}),m.jsx("path",{d:"M16 7l0 10l5 0l-5 -10"}),m.jsx("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),Le),dq=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),m.jsx("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),m.jsx("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),Le),NT=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),m.jsx("path",{d:"M22 22l-3 -3"}),m.jsx("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),m.jsx("path",{d:"M3 11v-1"}),m.jsx("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),m.jsx("path",{d:"M10 3h1"}),m.jsx("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),Le),gEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),m.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),m.jsx("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),m.jsx("path",{d:"M10 15l2 6l2 -6"}),m.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),Le),bEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),m.jsx("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),m.jsx("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),m.jsx("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),m.jsx("path",{d:"M11 21v-6l3 6v-6"})]}),Le),UEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),m.jsx("path",{d:"M4 8l5 0"}),m.jsx("path",{d:"M15 8l4 0"})]}),Le),yEe=oe(m.jsxs("g",{strokeWidth:1.25,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),m.jsx("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),m.jsx("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),m.jsx("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),m.jsx("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),Le),xEe=oe(m.jsxs("g",{stroke:"currentColor",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...Le,strokeWidth:1.5});oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M21 12h-13l3 -3"}),m.jsx("path",{d:"M11 15l-3 -3"})]}),Le);var vEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),m.jsx("path",{d:"M10 9l5 3l-5 3z"})]}),Le),wEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 6h18"}),m.jsx("path",{d:"M3 12h18"}),m.jsx("path",{d:"M3 18h18"}),m.jsx("path",{d:"M6 3v18"}),m.jsx("path",{d:"M12 3v18"}),m.jsx("path",{d:"M18 3v18"})]}),Le),EEe=oe(m.jsxs("g",{strokeWidth:1.5,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),m.jsx("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),Le),SEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 18l12 -12"}),m.jsx("path",{d:"M18 10v-4h-4"})]}),Le),kEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),m.jsx("path",{d:"M18 4l3 3l-3 3"})]}),Le),CEe=oe(m.jsxs("g",{children:[m.jsx("path",{d:"M16,12L20,9L16,6"}),m.jsx("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),Le),uq=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 9l6 6l6 -6"})]}),Le),MEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15l6 -6l6 6"})]}),Le),AEe=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15l6 -6l6 6"})]}),Le),LB=oe(m.jsxs("g",{strokeWidth:"1.25",children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),m.jsx("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),Le),hq=oe(m.jsxs("g",{children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M5 7l0 10"}),m.jsx("path",{d:"M7 5l10 0"}),m.jsx("path",{d:"M7 19l10 0"}),m.jsx("path",{d:"M19 7l0 10"})]}),Le),Z4={[Fn.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:z2},[Fn.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.35},icon:Y4},[Fn["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15},icon:Gwe},[Fn["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25},icon:DC},[Fn.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},icon:z2,deprecated:!0},[Fn.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},icon:Y4,deprecated:!0,local:!0},[Fn.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},icon:DC,deprecated:!0},[Fn["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},serverSide:!0},[Ep.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.15},fallback:!0},[Ep["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},ku={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},RT="local:",TEe=class extends Error{constructor(e="Couldn't export canvas.",t="CANVAS_ERROR"){super(),this.name=t,this.message=e}},D7=class extends DOMException{constructor(e="Request Aborted"){super(e,"AbortError")}},Fu=class extends Error{constructor(e="Image Scene Data Error",t="IMAGE_SCENE_DATA_ERROR"){super(e),Z(this,"code"),this.name="EncodingError",this.code=t}},IEe=class extends Error{constructor(){super(...arguments),Z(this,"code","ELEMENT_HAS_INVALID_INDEX")}},pq=class extends Error{constructor(e="Worker URL is not defined!",t="WORKER_URL_NOT_DEFINED"){super(e),Z(this,"code"),this.name="WorkerUrlNotDefinedError",this.code=t}},mq=class extends Error{constructor(e="Worker has to be in a separate chunk!",t="WORKER_IN_THE_MAIN_CHUNK"){super(e),Z(this,"code"),this.name="WorkerInTheMainChunkError",this.code=t}},OB=class extends Error{constructor(e){super(e),this.name="ExcalidrawError"}},NEe=class{constructor(e){Z(this,"instance"),Z(this,"debounceTerminate"),this.instance=new Worker(e,{type:"module"})}},REe=class gq{constructor(t,n){Z(this,"idleWorkers",new Set),Z(this,"workerUrl"),Z(this,"workerTTL"),this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new pq;if(!import.meta.url||t.toString()===import.meta.url)throw new mq;return new gq(t,n)}async postMessage(t,n){let r,i=Array.from(this.idleWorkers).shift();return i?(this.idleWorkers.delete(i),r=i):r=await this.createWorker(),new Promise((s,o)=>{r.instance.onmessage=this.onMessageHandler(r,s),r.instance.onerror=this.onErrorHandler(r,o),r.instance.postMessage(t,n),r.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(let t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){let t=new NEe(this.workerUrl);return t.debounceTerminate=l6(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return r=>{t.debounceTerminate(),this.idleWorkers.add(t),n(r.data)}}onErrorHandler(t,n){return r=>{t.debounceTerminate(()=>n(r)),t.debounceTerminate.flush(),this.clear()}}},jB=typeof Worker<"u",_Ee=async(e,t)=>{let{Commands:n,subsetToBase64:r,toBase64:i}=await DEe();return jB?c6(async()=>{try{let s=await LEe(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return i(a)}catch(s){return jB=!1,bve()&&(s instanceof pq||s instanceof mq)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),r(e,t)}}):r(e,t)},GE=null,XE=null,PEe=async()=>(GE||(GE=Ve(()=>import("./subset-worker.chunk-B8zXJhZl.js"),__vite__mapDeps([0,1]))),GE),DEe=async()=>(XE||(XE=Ve(()=>import("./subset-shared.chunk-vNtYyAPx.js"),[])),XE),KE=null,LEe=()=>(KE||(KE=c6(async()=>{let{WorkerUrl:e}=await PEe();return REe.create(e)})),KE),bq=class e3{constructor(t,n,r){Z(this,"urls"),Z(this,"fontFace"),this.urls=e3.createUrls(n);let i=this.urls.map(s=>`url(${s}) ${e3.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,i,{display:"swap",style:"normal",weight:"400",...r})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;let n=Array.from(t).map(r=>r.codePointAt(0));return this.getContent(n).then(r=>`@font-face { font-family: ${this.fontFace.family}; src: url(${r}); }`)}async getContent(t){let n=0,r=[];for(;n<this.urls.length;){let i=this.urls[n];try{let s=await this.fetchFont(i);return await _Ee(s,t)}catch(s){r.push(`"${i.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(r,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return c6(async()=>{let n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){let r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){let t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{let[r,i]=n.replace("U+","").split("-");return i?`\\u{${r}}-\\u{${i}}`:`\\u{${r}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(RT))return[];if(t.startsWith("http"))return[new URL(t)];let n=t.replace(/^\/+/,""),r=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){let i=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);r.push(new URL(n,i))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(i=>{let s=this.normalizeBaseUrl(i);r.push(new URL(n,s))});return r.push(new URL(n,e3.ASSETS_FALLBACK_URL)),r}static getFormat(t){if(!(t instanceof URL))return"";try{let n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var r;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(r=window==null?void 0:window.location)==null?void 0:r.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};Z(bq,"ASSETS_FALLBACK_URL",`https://esm.sh/${`${vt.PKG_NAME}@${vt.PKG_VERSION}`}/dist/prod/`);var OEe=bq,jEe="./fonts/Cascadia/CascadiaCode-Regular.woff2",BEe=[{uri:jEe}],FEe="./fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",$Ee="./fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",zEe="./fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",HEe="./fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",VEe=[{uri:FEe,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:$Ee,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:zEe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:HEe,descriptors:{unicodeRange:"U+3bb"}}],WEe=[{uri:RT}],GEe="./fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",XEe="./fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",KEe="./fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",YEe="./fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",ZEe="./fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",qEe="./fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",QEe="./fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",JEe=[{uri:GEe,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:XEe,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:KEe,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:YEe,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:ZEe,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:qEe,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:QEe,descriptors:{unicodeRange:"U+300-301,U+303"}}],eSe=[{uri:RT}],tSe="./fonts/Liberation/LiberationSans-Regular.woff2",nSe=[{uri:tSe}],rSe="./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",iSe="./fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",sSe=[{uri:iSe,descriptors:{unicodeRange:ku.LATIN_EXT}},{uri:rSe,descriptors:{unicodeRange:ku.LATIN}}],oSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",aSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",lSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",cSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",fSe="./fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",dSe=[{uri:cSe,descriptors:{unicodeRange:ku.CYRILIC_EXT,weight:"500"}},{uri:lSe,descriptors:{unicodeRange:ku.CYRILIC,weight:"500"}},{uri:fSe,descriptors:{unicodeRange:ku.VIETNAMESE,weight:"500"}},{uri:aSe,descriptors:{unicodeRange:ku.LATIN_EXT,weight:"500"}},{uri:oSe,descriptors:{unicodeRange:ku.LATIN,weight:"500"}}],uSe="./fonts/Virgil/Virgil-Regular.woff2",hSe=[{uri:uSe}],pSe="./fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",mSe="./fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",gSe="./fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",bSe="./fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",USe="./fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",ySe="./fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",xSe="./fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",vSe="./fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",wSe="./fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",ESe="./fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",SSe="./fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",kSe="./fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",CSe="./fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",MSe="./fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",ASe="./fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",TSe="./fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",ISe="./fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",NSe="./fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",RSe="./fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",_Se="./fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",PSe="./fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",DSe="./fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",LSe="./fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",OSe="./fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",jSe="./fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",BSe="./fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",FSe="./fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",$Se="./fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",zSe="./fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",HSe="./fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",VSe="./fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",WSe="./fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",GSe="./fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",XSe="./fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",KSe="./fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",YSe="./fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",ZSe="./fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",qSe="./fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",QSe="./fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",JSe="./fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",eke="./fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",tke="./fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",nke="./fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",rke="./fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",ike="./fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",ske="./fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",oke="./fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",ake="./fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",lke="./fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",cke="./fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",fke="./fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",dke="./fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",uke="./fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",hke="./fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",pke="./fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",mke="./fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",gke="./fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",bke="./fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",Uke="./fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",yke="./fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",xke="./fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",vke="./fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",wke="./fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",Eke="./fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",Ske="./fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",kke="./fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",Cke="./fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",Mke="./fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",Ake="./fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",Tke="./fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",Ike="./fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",Nke="./fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",Rke="./fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",_ke="./fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",Pke="./fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",Dke="./fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",Lke="./fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",Oke="./fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",jke="./fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",Bke="./fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",Fke="./fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",$ke="./fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",zke="./fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",Hke="./fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",Vke="./fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",Wke="./fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",Gke="./fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",Xke="./fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",Kke="./fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",Yke="./fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",Zke="./fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",qke="./fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",Qke="./fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",Jke="./fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",eCe="./fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",tCe="./fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",nCe="./fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",rCe="./fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",iCe="./fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",sCe="./fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",oCe="./fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",aCe="./fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",lCe="./fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",cCe="./fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",fCe="./fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",dCe="./fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",uCe="./fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",hCe="./fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",pCe="./fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",mCe="./fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",gCe="./fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",bCe="./fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",UCe="./fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",yCe="./fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",xCe="./fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",vCe="./fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",wCe="./fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",ECe="./fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",SCe="./fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",kCe="./fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",CCe="./fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",MCe="./fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",ACe="./fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",TCe="./fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",ICe="./fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",NCe="./fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",RCe="./fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",_Ce="./fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",PCe="./fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",DCe="./fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",LCe="./fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",OCe="./fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",jCe="./fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",BCe="./fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",FCe="./fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",$Ce="./fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",zCe="./fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",HCe="./fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",VCe="./fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",WCe="./fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",GCe="./fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",XCe="./fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",KCe="./fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",YCe="./fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",ZCe="./fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",qCe="./fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",QCe="./fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",JCe="./fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",eMe="./fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",tMe="./fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",nMe="./fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",rMe="./fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",iMe="./fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",sMe="./fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",oMe="./fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",aMe="./fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",lMe="./fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",cMe="./fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",fMe="./fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",dMe="./fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",uMe="./fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",hMe="./fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",pMe="./fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",mMe="./fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",gMe="./fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",bMe="./fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",UMe="./fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",yMe="./fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",xMe="./fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",vMe="./fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",wMe="./fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",EMe="./fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",SMe="./fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",kMe="./fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",CMe="./fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",MMe="./fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",AMe="./fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",TMe="./fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",IMe="./fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",NMe="./fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",RMe="./fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",_Me="./fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",PMe="./fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",DMe="./fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",LMe="./fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",OMe="./fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",jMe="./fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",BMe="./fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",FMe="./fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",$Me="./fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",zMe="./fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",HMe="./fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",VMe="./fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",WMe="./fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",GMe="./fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",XMe="./fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",KMe="./fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",YMe="./fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",ZMe="./fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",qMe="./fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",QMe="./fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",JMe="./fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",eAe="./fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",tAe="./fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",nAe="./fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",rAe="./fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",iAe="./fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",sAe="./fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",oAe="./fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",aAe=[{uri:pSe,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:mSe,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:gSe,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:bSe,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:USe,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:ySe,descriptors:{unicodeRange:"U+d520-d608"}},{uri:xSe,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:vSe,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:wSe,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:ESe,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:SSe,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:kSe,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:CSe,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:MSe,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:ASe,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:TSe,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:ISe,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:NSe,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:RSe,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:_Se,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:PSe,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:DSe,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:LSe,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:OSe,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:jSe,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:BSe,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:FSe,descriptors:{unicodeRange:"U+c258-c340"}},{uri:$Se,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:zSe,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:HSe,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:VSe,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:WSe,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:GSe,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:XSe,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:KSe,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:YSe,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:ZSe,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:qSe,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:QSe,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:JSe,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:eke,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:tke,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:nke,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:rke,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:ike,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:ske,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:oke,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:ake,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:lke,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:cke,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:fke,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:dke,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:uke,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:hke,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:pke,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:mke,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:gke,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:bke,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:Uke,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:yke,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:xke,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:vke,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:wke,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:Eke,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:Ske,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:kke,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:Cke,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:Mke,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:Ake,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:Tke,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:Ike,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:Nke,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:Rke,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:_ke,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:Pke,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:Dke,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:Lke,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:Oke,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:jke,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:Bke,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:Fke,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:$ke,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:zke,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:Hke,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:Vke,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:Wke,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:Gke,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:Xke,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:Kke,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:Yke,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:Zke,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:qke,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:Qke,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:Jke,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:eCe,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:tCe,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:nCe,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:rCe,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:iCe,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:sCe,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:oCe,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:aCe,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:lCe,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:cCe,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:fCe,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:dCe,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:uCe,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:hCe,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:pCe,descriptors:{unicodeRange:"U+487a-4932"}},{uri:mCe,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:gCe,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:bCe,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:UCe,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:yCe,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:xCe,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:vCe,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:wCe,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:ECe,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:SCe,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:kCe,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:CCe,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:MCe,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:ACe,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:TCe,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:ICe,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:NCe,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:RCe,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:_Ce,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:PCe,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:DCe,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:LCe,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:OCe,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:jCe,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:BCe,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:FCe,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:$Ce,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:zCe,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:HCe,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:VCe,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:WCe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:GCe,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:XCe,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:KCe,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:YCe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:ZCe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:qCe,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:QCe,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:JCe,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:eMe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:tMe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:nMe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:rMe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:iMe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:sMe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:oMe,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:aMe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:lMe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:cMe,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:fMe,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:dMe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:uMe,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:hMe,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:pMe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:mMe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:gMe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:bMe,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:UMe,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:yMe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:xMe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:vMe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:wMe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:EMe,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:SMe,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:kMe,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:CMe,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:MMe,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:AMe,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:TMe,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:IMe,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:NMe,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:RMe,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:_Me,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:PMe,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:DMe,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:LMe,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:OMe,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:jMe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:BMe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:FMe,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:$Me,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:zMe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:HMe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:VMe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:WMe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:GMe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:XMe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:KMe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:YMe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:ZMe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:qMe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:QMe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:JMe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:eAe,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:tAe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:nAe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:rAe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:iAe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:sAe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:oAe,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],Cd=class dn{constructor(t){Z(this,"scene"),Z(this,"getSceneFamilies",()=>dn.getUniqueFamilies(this.scene.getNonDeletedElements())),Z(this,"onLoaded",n=>{let r=!0;for(let o of n){let a=`${o.family}-${o.style}-${o.weight}-${o.unicodeRange}`;dn.loadedFontsCache.has(a)||(dn.loadedFontsCache.add(a),r=!1)}if(r)return;let i=!1,s=this.scene.getNonDeletedElementsMap();for(let o of this.scene.getNonDeletedElements())if(Oe(o)){i=!0,Hn.delete(o),Vb.clearCache(ln(o));let a=di(o,s);a&&Hn.delete(a)}i&&this.scene.triggerUpdate()}),Z(this,"loadSceneFonts",async()=>{let n=this.getSceneFamilies(),r=dn.getCharsPerFamily(this.scene.getNonDeletedElements());return dn.loadFontFaces(n,r)}),this.scene=t}static get registered(){return dn._registered?dn._initialized||(dn._registered=new Map([...dn.init().entries(),...dn._registered.entries()])):dn._registered=dn.init(),dn._registered}get registered(){return dn.registered}static async generateFontFaceDeclarations(t){let n=dn.getUniqueFamilies(t),r=dn.getCharsPerFamily(t),i=n.find(l=>SZ(l).includes(wp));if(i){let l=dn.getCharacters(r,i);if(Nve(l)){let f=Ep[wp];r[f]=new Set(l),n.unshift(Ep[wp])}}let s=dn.fontFacesStylesGenerator(n,r),o=3,a=await new gB(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(let{fontFaces:s,metadata:o}of dn.registered.values())if(!o.local)for(let{fontFace:a}of s)window.document.fonts.has(a)||window.document.fonts.add(a);let r=dn.fontFacesLoader(t,n),i=10;return(await new gB(r,i).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(let[r,i]of t.entries()){let s=ln({fontFamily:i,fontSize:16}),o=dn.getCharacters(n,i);window.document.fonts.check(s,o)||(yield c6(async()=>{var a;try{let l=await window.document.fonts.load(s,o);return[r,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=dn.registered.get(i))==null?void 0:a.fontFaces.map(f=>f.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(let[r,i]of t.entries()){let{fontFaces:s,metadata:o}=dn.registered.get(i)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${i}"`,dn.registered);continue}if(!(o!=null&&o.local))for(let[a,l]of s.entries())yield c6(async()=>{try{let f=dn.getCharacters(n,i),c=await l.toCSS(f);return c?[r*1e4+a,c]:void 0}catch(f){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,f)}})}}static register(t,n,...r){let i=Fn[t]??Ep[t];return this.registered.get(i)||this.registered.set(i,{metadata:n,fontFaces:r.map(({uri:s,descriptors:o})=>new OEe(t,s,o))}),this.registered}static init(){let t={registered:new Map},n=(r,...i)=>{let s=Fn[r]??Ep[r],o=Z4[s]??Z4[Fn.Excalifont];dn.register.call(t,r,o,...i)};return n("Cascadia",...BEe),n("Comic Shanns",...VEe),n("Excalifont",...JEe),n("Helvetica",...eSe),n("Liberation Sans",...nSe),n("Lilita One",...sSe),n("Nunito",...dSe),n("Virgil",...hSe),n(wp,...aAe),n(j2,...WEe),dn._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,r)=>(Oe(r)&&n.add(r.fontFamily),n),new Set))}static getCharsPerFamily(t){let n={};for(let r of t)if(Oe(r))for(let i of r.originalText)n[r.fontFamily]||(n[r.fontFamily]=new Set),n[r.fontFamily].add(i);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(dn.registered.keys())}};Z(Cd,"loadedFontsCache",new Set),Z(Cd,"_registered"),Z(Cd,"_initialized",!1),Z(Cd,"loadElementsFonts",async e=>{let t=Cd.getUniqueFamilies(e),n=Cd.getCharsPerFamily(e);return Cd.loadFontFaces(t,n)});var xf=Cd,Uq=(e,t,n)=>{var l;let{unitsPerEm:r,ascender:i,descender:s}=((l=xf.registered.get(e))==null?void 0:l.metadata.metrics)||Z4[Fn.Virgil].metrics,o=t/r,a=(n-o*i+o*s)/2;return o*i+a},qh=e=>{var n;let{lineHeight:t}=((n=xf.registered.get(e))==null?void 0:n.metadata.metrics)||Z4[Fn.Excalifont].metrics;return t},yq=e=>{let{angle:t,width:n,height:r,x:i,y:s}=e,o=i+n/2,a=s+r/2,l=P(o,a),f;return e.type==="diamond"?f=dB(pe(P(o,s),l,t),pe(P(i+n,a),l,t),pe(P(o,s+r),l,t),pe(P(i,a),l,t)):f=dB(pe(P(i,s),l,t),pe(P(i+n,s),l,t),pe(P(i+n,s+r),l,t),pe(P(i,s+r),l,t)),{type:"polygon",data:f}},lAe=(e,t,n=10)=>{let[r,i,s,o,a,l]=gt(e,t,!0);r-=n,s+=n,i-=n,o+=n;let f=P(a,l),c=pe(P(r,i),f,e.angle),d=pe(P(s,i),f,e.angle),u=pe(P(r,o),f,e.angle),h=pe(P(s,o),f,e.angle);return{type:"polygon",data:[c,d,h,u]}},cAe=e=>{let{width:t,height:n,angle:r,x:i,y:s}=e;return{type:"ellipse",data:{center:P(i+t/2,s+n/2),angle:r,halfWidth:t/2,halfHeight:n/2}}},F0=e=>{if(!e)return[];for(let t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},fAe=(e,t=P(0,0),n,r)=>{let i=l=>pe(P(l[0]+t[0],l[1]+t[1]),r,n),s=F0(e),o=[],a=P(0,0);for(let l of s){if(l.op==="move"){let f=UT(l.data);Gi(f!=null,"Ops data is not a point"),a=i(f)}if(l.op==="bcurveTo"){let f=i(P(l.data[0],l.data[1])),c=i(P(l.data[2],l.data[3])),d=i(P(l.data[4],l.data[5]));o.push(hf(a,f,c,d)),a=d}}return{type:"polycurve",data:o}},dAe=e=>{let t=e[0],n=[];for(let r=1;r<e.length;r++){let i=e[r];n.push(Qe(t,i)),t=i}return n},uAe=(e,t,n=!1)=>{let r=s=>pe(Tt(l0(Ye(s),yi(e.x,e.y))),t,e.angle),i=dAe(e.points.map(s=>r(s)));return n?{type:"polygon",data:W4(i.flat())}:{type:"polyline",data:i}},hAe=(e,t,n=P(0,0),r,i)=>{let s=c=>pe(P(c[0]+n[0],c[1]+n[1]),i,r);if(e.roundness===null)return{type:"polygon",data:W4(e.points.map(c=>s(c)))};let o=F0(t),a=[],l=!1;for(let c of o)c.op==="move"?(l=!l,l&&a.push(P(c.data[0],c.data[1]))):c.op==="bcurveTo"?l&&(a.push(P(c.data[0],c.data[1])),a.push(P(c.data[2],c.data[3])),a.push(P(c.data[4],c.data[5]))):c.op==="lineTo"&&l&&a.push(P(c.data[0],c.data[1]));let f=Q7e(a,10,5).map(c=>s(c));return{type:"polygon",data:W4(f)}},pAe=(e,t)=>{let{angle:n,halfWidth:r,halfHeight:i,center:s}=t,o=r,a=i,l=l0(Ye(e),tr(Ye(s),-1)),[f,c]=pe(Tt(l),P(0,0),-n),d=Math.abs(f),u=Math.abs(c),h=.707,g=.707;for(let x=0;x<3;x++){let w=o*h,E=a*g,S=(o*o-a*a)*h**3/o,M=(a*a-o*o)*g**3/a,A=w-S,C=E-M,I=d-S,R=u-M,L=Math.hypot(C,A),_=Math.hypot(R,I);h=Math.min(1,Math.max(0,(I*L/_+S)/o)),g=Math.min(1,Math.max(0,(R*L/_+M)/a));let O=Math.hypot(g,h);h/=O,g/=O}let[U,y]=[o*h*Math.sign(f),a*g*Math.sign(c)];return Zt(P(f,c),P(U,y))},mAe=(e,t,n=1e-4)=>pAe(e,t)<=n,gAe=(e,t)=>{let{center:n,angle:r,halfWidth:i,halfHeight:s}=t,o=l0(Ye(e),tr(Ye(n),-1)),[a,l]=pe(Tt(o),P(0,0),-r);return a/i*(a/i)+l/s*(l/s)<=1},LC=(e,t,n=0)=>{switch(t.type){case"polygon":return nve(e,t.data,n);case"ellipse":return mAe(e,t.data,n);case"line":return Gh(e,t.data,n);case"polyline":return vq(e,t.data,n);case"curve":return xq(e,t.data,n);case"polycurve":return bAe(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},q4=(e,t)=>{switch(t.type){case"polygon":return uB(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return gAe(e,t.data);case"polyline":{let n=W4(t.data.flat());return uB(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},bAe=(e,t,n)=>t.some(r=>xq(e,r,n)),UAe=e=>{let[t,n,r,i]=e;return(s,o)=>Math.pow(1-s,3)*i[o]+3*s*Math.pow(1-s,2)*r[o]+3*Math.pow(s,2)*(1-s)*n[o]+t[o]*Math.pow(s,3)},yAe=(e,t=10)=>{let n=UAe(e),r=[n(0,0),n(0,1)],i=[],s=0,o=1/t;for(let a=0;a<t;a++)if(s+=o,s<=1){let l=P(n(s,0),n(s,1));i.push(Qe(r,l)),r=l}return i},xq=(e,t,n)=>vq(e,yAe(t),n),vq=(e,t,n=1e-4)=>t.some(r=>Gh(e,r,n));function wq(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}var xAe=(e,t)=>{let{halfWidth:n,halfHeight:r,center:i}=t,s=n,o=r,a=l0(Ye(e),tr(Ye(i),-1)),l=Math.abs(a[0]),f=Math.abs(a[1]),c=.707,d=.707;for(let g=0;g<3;g++){let U=s*c,y=o*d,x=(s*s-o*o)*c**3/s,w=(o*o-s*s)*d**3/o,E=U-x,S=y-w,M=l-x,A=f-w,C=Math.hypot(S,E),I=Math.hypot(A,M);c=Math.min(1,Math.max(0,(M*C/I+x)/s)),d=Math.min(1,Math.max(0,(A*C/I+w)/o));let R=Math.hypot(d,c);c/=R,d/=R}let[u,h]=[s*c*Math.sign(a[0]),o*d*Math.sign(a[1])];return Zt(Tt(a),P(u,h))};function vAe({center:e,halfWidth:t,halfHeight:n},[r,i]){let[s,o]=e,a=r[0]-s,l=r[1]-o,f=i[0]-s,c=i[1]-o,d=Math.pow(f-a,2)/Math.pow(t,2)+Math.pow(c-l,2)/Math.pow(n,2),u=2*(a*(f-a)/Math.pow(t,2)+l*(c-l)/Math.pow(n,2)),h=Math.pow(a,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,g=(-u+Math.sqrt(Math.pow(u,2)-4*d*h))/(2*d),U=(-u-Math.sqrt(Math.pow(u,2)-4*d*h))/(2*d),y=[P(a+g*(f-a)+s,l+g*(c-l)+o),P(a+U*(f-a)+s,l+U*(c-l)+o)].filter(x=>!isNaN(x[0])&&!isNaN(x[1]));return y.length===2&&il(y[0],y[1])?[y[0]]:y}function Eq(e,t=0){let n=Ja(Math.min(e.width,e.height),e);if(n<=0){let d=AC(P(e.x-t,e.y-t),P(e.x+e.width+t,e.y+e.height+t)),u=Qe(P(d[0][0]+n,d[0][1]),P(d[1][0]-n,d[0][1])),h=Qe(P(d[1][0],d[0][1]+n),P(d[1][0],d[1][1]-n)),g=Qe(P(d[0][0]+n,d[1][1]),P(d[1][0]-n,d[1][1])),U=Qe(P(d[0][0],d[1][1]-n),P(d[0][0],d[0][1]+n));return[[u,h,g,U],[]]}let r=P(e.x+e.width/2,e.y+e.height/2),i=AC(P(e.x,e.y),P(e.x+e.width,e.y+e.height)),s=Qe(P(i[0][0]+n,i[0][1]),P(i[1][0]-n,i[0][1])),o=Qe(P(i[1][0],i[0][1]+n),P(i[1][0],i[1][1]-n)),a=Qe(P(i[0][0]+n,i[1][1]),P(i[1][0]-n,i[1][1])),l=Qe(P(i[0][0],i[1][1]-n),P(i[0][0],i[0][1]+n)),f=[tr(Hi(Ye(P(i[0][0]-t,i[0][1]-t),r)),t),tr(Hi(Ye(P(i[1][0]+t,i[0][1]-t),r)),t),tr(Hi(Ye(P(i[1][0]+t,i[1][1]+t),r)),t),tr(Hi(Ye(P(i[0][0]-t,i[1][1]+t),r)),t)],c=[hf(Tt(f[0],l[1]),Tt(f[0],P(l[1][0]+2/3*(i[0][0]-l[1][0]),l[1][1]+2/3*(i[0][1]-l[1][1]))),Tt(f[0],P(s[0][0]+2/3*(i[0][0]-s[0][0]),s[0][1]+2/3*(i[0][1]-s[0][1]))),Tt(f[0],s[0])),hf(Tt(f[1],s[1]),Tt(f[1],P(s[1][0]+2/3*(i[1][0]-s[1][0]),s[1][1]+2/3*(i[0][1]-s[1][1]))),Tt(f[1],P(o[0][0]+2/3*(i[1][0]-o[0][0]),o[0][1]+2/3*(i[0][1]-o[0][1]))),Tt(f[1],o[0])),hf(Tt(f[2],o[1]),Tt(f[2],P(o[1][0]+2/3*(i[1][0]-o[1][0]),o[1][1]+2/3*(i[1][1]-o[1][1]))),Tt(f[2],P(a[1][0]+2/3*(i[1][0]-a[1][0]),a[1][1]+2/3*(i[1][1]-a[1][1]))),Tt(f[2],a[1])),hf(Tt(f[3],a[0]),Tt(f[3],P(a[0][0]+2/3*(i[0][0]-a[0][0]),a[0][1]+2/3*(i[1][1]-a[0][1]))),Tt(f[3],P(l[0][0]+2/3*(i[0][0]-l[0][0]),l[0][1]+2/3*(i[1][1]-l[0][1]))),Tt(f[3],l[0]))];return[[Qe(c[0][3],c[1][0]),Qe(c[1][3],c[2][0]),Qe(c[2][3],c[3][0]),Qe(c[3][3],c[0][0])],c]}function Sq(e,t=0){var E;let[n,r,i,s,o,a,l,f]=Vq(e),c=Ja(Math.abs(n-l),e),d=Ja(Math.abs(s-r),e);if(((E=e.roundness)==null?void 0:E.type)==null){let[S,M,A,C]=[P(e.x+n,e.y+r-t),P(e.x+i+t,e.y+s),P(e.x+o,e.y+a+t),P(e.x+l-t,e.y+f)],I=Qe(P(S[0]+c,S[1]+d),P(M[0]-c,M[1]-d)),R=Qe(P(M[0]-c,M[1]+d),P(A[0]+c,A[1]-d)),L=Qe(P(A[0]-c,A[1]-d),P(C[0]+c,C[1]+d)),_=Qe(P(C[0]+c,C[1]-d),P(S[0]-c,S[1]+d));return[[I,R,L,_],[]]}let u=P(e.x+e.width/2,e.y+e.height/2),[h,g,U,y]=[P(e.x+n,e.y+r),P(e.x+i,e.y+s),P(e.x+o,e.y+a),P(e.x+l,e.y+f)],x=[tr(Hi(Ye(g,u)),t),tr(Hi(Ye(U,u)),t),tr(Hi(Ye(y,u)),t),tr(Hi(Ye(h,u)),t)],w=[hf(Tt(x[0],P(g[0]-c,g[1]-d)),Tt(x[0],g),Tt(x[0],g),Tt(x[0],P(g[0]-c,g[1]+d))),hf(Tt(x[1],P(U[0]+c,U[1]-d)),Tt(x[1],U),Tt(x[1],U),Tt(x[1],P(U[0]-c,U[1]-d))),hf(Tt(x[2],P(y[0]+c,y[1]+d)),Tt(x[2],y),Tt(x[2],y),Tt(x[2],P(y[0]+c,y[1]-d))),hf(Tt(x[3],P(h[0]-c,h[1]+d)),Tt(x[3],h),Tt(x[3],h),Tt(x[3],P(h[0]+c,h[1]+d)))];return[[Qe(w[0][3],w[1][0]),Qe(w[1][3],w[2][0]),Qe(w[2][3],w[3][0]),Qe(w[3][3],w[0][0])],w]}var OC=e=>{if(e.type==="arrow")return!1;let t=!Ka(e.backgroundColor)||ca(e)||Qo(e)||Oe(e);return e.type==="line"||e.type==="freedraw"?t&&Cf(e.points):t||Yt(e)},hp=({x:e,y:t,element:n,shape:r,threshold:i=10,frameNameBound:s=null})=>{let o=OC(n)&&q4(P(e,t),r)||LC(P(e,t),r,i);return!o&&s&&(o=q4(P(e,t),{type:"polygon",data:yq(s).data})),o},_T=(e,t,n,r,i=0)=>{let[s,o,a,l]=ol(n,r);return s-=i,o-=i,a+=i,l+=i,NZ(P(s,o),P(e,t),P(a,l))},wAe=(e,t)=>!hp(e)&&!kq(e.x,e.y,Mq(e.element,t))&&_T(e.x,e.y,e.element,t),kq=(e,t,n)=>!!n&&q4(P(e,t),n),Cq=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return EAe(e,t,n);case"diamond":return SAe(e,t,n);case"ellipse":return kAe(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},EAe=(e,t,n=0)=>{let r=P(e.x+e.width/2,e.y+e.height/2),i=pe(t[0],r,-e.angle),s=pe(t[1],r,-e.angle),[o,a]=Eq(e,n);return[...o.map(l=>$2(Qe(i,s),l)).filter(l=>l!=null).map(l=>pe(l,r,e.angle)),...a.flatMap(l=>RZ(l,Qe(i,s))).filter(l=>l!=null).map(l=>pe(l,r,e.angle))].filter((l,f,c)=>c.findIndex(d=>il(l,d))===f)},SAe=(e,t,n=0)=>{let r=P(e.x+e.width/2,e.y+e.height/2),i=pe(t[0],r,-e.angle),s=pe(t[1],r,-e.angle),[o,a]=Sq(e,n);return[...o.map(l=>$2(Qe(i,s),l)).filter(l=>l!=null).map(l=>pe(l,r,e.angle)),...a.flatMap(l=>RZ(l,Qe(i,s))).filter(l=>l!=null).map(l=>pe(l,r,e.angle))].filter((l,f,c)=>c.findIndex(d=>il(l,d))===f)},kAe=(e,t,n=0)=>{let r=P(e.x+e.width/2,e.y+e.height/2),i=pe(t[0],r,-e.angle),s=pe(t[1],r,-e.angle);return vAe(wq(r,e.width/2+n,e.height/2+n),MC(i,s)).map(o=>pe(o,r,e.angle))},Ft={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},Q={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:sc?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",SLASH:"/",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",W:"w",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},CAe=new Map([[Q.Z,Ft.Z],[Q.Y,Ft.Y]]),MAe=e=>/^[a-z]$/.test(e.toLowerCase()),jC=(e,t)=>{if(t===e.key.toLowerCase())return!0;let n=CAe.get(t);return!!(n&&!MAe(e.key)&&e.code===n)},d5=e=>e===Q.ARROW_LEFT||e===Q.ARROW_RIGHT||e===Q.ARROW_DOWN||e===Q.ARROW_UP,YE=e=>e.altKey,Bg=e=>e.shiftKey,$5=e=>e.shiftKey,PT=[{icon:Kve,value:"selection",key:Q.V,numericKey:Q[1],fillable:!0},{icon:Yve,value:"rectangle",key:Q.R,numericKey:Q[2],fillable:!0},{icon:Zve,value:"diamond",key:Q.D,numericKey:Q[3],fillable:!0},{icon:qve,value:"ellipse",key:Q.O,numericKey:Q[4],fillable:!0},{icon:Qve,value:"arrow",key:Q.A,numericKey:Q[5],fillable:!0},{icon:Jve,value:"line",key:Q.L,numericKey:Q[6],fillable:!0},{icon:z2,value:"freedraw",key:[Q.P,Q.X],numericKey:Q[7],fillable:!1},{icon:ZZ,value:"text",key:Q.T,numericKey:Q[8],fillable:!1},{icon:twe,value:"image",key:null,numericKey:Q[9],fillable:!1},{icon:nwe,value:"eraser",key:Q.E,numericKey:Q[0],fillable:!1}],AAe=e=>{var t;return((t=PT.find((n,r)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e))))==null?void 0:t.value)||null},Kc=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return yq(e);case"arrow":case"line":{let r=((n=Hn.get(e))==null?void 0:n[0])??Hn.generateElementShape(e,null)[0],[,,,,i,s]=gt(e,t);return OC(e)?hAe(e,r,P(e.x,e.y),e.angle,P(i,s)):fAe(r,P(e.x,e.y),e.angle,P(i,s))}case"ellipse":return cAe(e);case"freedraw":{let[,,,,r,i]=gt(e,t);return uAe(e,P(r,i),OC(e))}}},Mq=(e,t)=>{let n=xt(e,t);return n?e.type==="arrow"?Kc({...n,...je.getBoundTextElementPosition(e,n,t)},t):Kc(n,t):null},Aq=(e,t)=>{let n=Hn.generateElementShape(e,null);if(!n)return null;let r=F0(n[0]),i=P(0,0),s=0,o=1/0,a=null;for(;s<r.length;){let{op:l,data:f}=r[s];if(l==="move"&&(Gi(Zxe(f),"The returned ops is not compatible with a point"),i=f),l==="bcurveTo"){let c=i,d=P(f[0],f[1]),u=P(f[2],f[3]),h=P(f[4],f[5]),g=Zt(h,t);g<o&&(o=g,a=[c,d,u,h]),i=h}s++}return a},Tq=(e,t,n,r,i)=>{let s=(l,f)=>Math.pow(1-l,3)*r[f]+3*l*Math.pow(1-l,2)*n[f]+3*Math.pow(l,2)*(1-l)*t[f]+e[f]*Math.pow(l,3),o=s(i,0),a=s(i,1);return P(o,a)},TAe=(e,t)=>{let n=Aq(e,t);if(!n)return[];let r=[],i=1;for(;i>0;){let s=Tq(n[0],n[1],n[2],n[3],i);r.push(P(s[0],s[1])),i-=.05}return r.length&&il(r.at(-1),t)&&r.push(P(t[0],t[1])),r},Iq=(e,t)=>{let n=[];n[0]=0;let r=TAe(e,t),i=0,s=0;for(;i<r.length-1;){let o=Zt(r[i],r[i+1]);s+=o,n.push(s),i++}return n},IAe=(e,t)=>Iq(e,t).at(-1),NAe=(e,t,n)=>{let r=Iq(e,t),i=r.length-1,s=r.at(-1),o=n*s,a=0,l=i,f=0;for(;a<l;)f=Math.floor(a+(l-a)/2),r[f]<o?a=f+1:l=f;return r[f]>o&&f--,r[f]===o?f/i:1-(f+(o-r[f])/(r[f+1]-r[f]))/i},zl=(e,t)=>{let n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=P(n.midX,n.midY),[i,s]=pe(P(n.minX,n.minY),r,e.angle),[o,a]=pe(P(n.maxX,n.minY),r,e.angle),[l,f]=pe(P(n.maxX,n.maxY),r,e.angle),[c,d]=pe(P(n.minX,n.maxY),r,e.angle),u=[Math.min(i,o,l,c),Math.min(s,a,f,d),Math.max(i,o,l,c),Math.max(s,a,f,d)];if(t){let[h,g,U,y]=t;return[u[0]-y,u[1]-h,u[2]+g,u[3]+U]}return u},d6=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],Ja=(e,t)=>{var n,r,i,s;if(((n=t.roundness)==null?void 0:n.type)===Rr.PROPORTIONAL_RADIUS||((r=t.roundness)==null?void 0:r.type)===Rr.LEGACY)return e*BE;if(((i=t.roundness)==null?void 0:i.type)===Rr.ADAPTIVE_RADIUS){let o=((s=t.roundness)==null?void 0:s.value)??Fxe,a=o/BE;return e<=a?e*BE:o}return 0},Cf=(e,t=1)=>{if(e.length>=3){let[n,r]=[e[0],e[e.length-1]];return Zt(n,r)<=Yy/t}return!1},Jr=10,RAe=(e,t,n,r,i,s,o)=>{var L,_;let{width:a,height:l}=Mf(e),f=n/a,c=r/l,d=(((L=e.crop)==null?void 0:L.x)??0)/f,u=(((_=e.crop)==null?void 0:_.y)??0)/c,h=pe(P(i,s),P(e.x+e.width/2,e.y+e.height/2),-e.angle);i=h[0],s=h[1];let g=e.width,U=e.height,y=e.crop??{x:0,y:0,width:n,height:r,naturalWidth:n,naturalHeight:r},x=y.height,w=y.width,E=e.scale[0]===-1,S=e.scale[1]===-1,M=s-e.y,A=i-e.x;t.includes("n")&&(U=At(e.height-M,Jr,S?l-u:e.height+u)),t.includes("s")&&(M=s-e.y-e.height,U=At(e.height+M,Jr,S?e.height+u:l-u)),t.includes("e")&&(A=i-e.x-e.width,g=At(e.width+A,Jr,E?e.width+d:a-d)),t.includes("w")&&(g=At(e.width-A,Jr,E?a-d:e.width+d));let C=O=>{O.height=U*c,O.width=g*f};C(y);let I=(O,$)=>{C($),O.includes("n")&&(S||($.y+=x-$.height)),O.includes("s")&&S&&($.y+=x-$.height),O.includes("e")&&E&&($.x+=w-$.width),O.includes("w")&&(E||($.x+=w-$.width))};switch(t){case"n":{if(o){let O=d+e.width/2,$=a-d-e.width/2,B=Math.min(O,$)*2;g=At(U*o,Jr,B),U=g/o}I(t,y),o&&(y.x+=(w-y.width)/2);break}case"s":{if(o){let O=d+e.width/2,$=a-d-e.width/2,B=Math.min(O,$)*2;g=At(U*o,Jr,B),U=g/o}I(t,y),o&&(y.x+=(w-y.width)/2);break}case"w":{if(o){let O=u+e.height/2,$=l-u-e.height/2,B=Math.min(O,$)*2;U=At(g/o,Jr,B),g=U*o}I(t,y),o&&(y.y+=(x-y.height)/2);break}case"e":{if(o){let O=u+e.height/2,$=l-u-e.height/2,B=Math.min(O,$)*2;U=At(g/o,Jr,B),g=U*o}I(t,y),o&&(y.y+=(x-y.height)/2);break}case"ne":{if(o)if(A>-M){let O=S?l-u:u+e.height;U=At(g/o,Jr,O),g=U*o}else{let O=E?d+e.width:a-d;g=At(U*o,Jr,O),U=g/o}I(t,y);break}case"nw":{if(o)if(A<M){let O=S?l-u:u+e.height;U=At(g/o,Jr,O),g=U*o}else{let O=E?a-d:d+e.width;g=At(U*o,Jr,O),U=g/o}I(t,y);break}case"se":{if(o)if(A>M){let O=S?u+e.height:l-u;U=At(g/o,Jr,O),g=U*o}else{let O=E?d+e.width:a-d;g=At(U*o,Jr,O),U=g/o}I(t,y);break}case"sw":{if(o)if(-A>M){let O=S?u+e.height:l-u;U=At(g/o,Jr,O),g=U*o}else{let O=E?a-d:d+e.width;g=At(U*o,Jr,O),U=g/o}I(t,y);break}}let R=_Ae(e,t,g,U,!!o);return lB(y.width,y.naturalWidth)&&lB(y.height,y.naturalHeight)&&(y=null),{x:R[0],y:R[1],width:g,height:U,crop:y}},_Ae=(e,t,n,r,i)=>{let[s,o,a,l]=x0(e,e.width,e.height,!0),f=P(s,o),c=P(a,l),d=$b(f,c),[u,h,g,U]=x0(e,n,r,!0),y=g-u,x=U-h,w=[...f];if(["n","w","nw"].includes(t)&&(w=[c[0]-Math.abs(y),c[1]-Math.abs(x)]),t==="ne"){let I=[f[0],c[1]];w=[I[0],I[1]-Math.abs(x)]}if(t==="sw"){let I=[c[0],f[1]];w=[I[0]-Math.abs(y),I[1]]}i&&(["s","n"].includes(t)&&(w[0]=d[0]-y/2),["e","w"].includes(t)&&(w[1]=d[1]-x/2));let E=e.angle,S=pe(w,d,E),M=[w[0]+Math.abs(y)/2,w[1]+Math.abs(x)/2],A=pe(M,d,E);w=pe(S,A,-E);let C=[...w];return C[0]+=e.x-u,C[1]+=e.y-h,C},PAe=(e,t)=>{if(e.crop){let{width:n,height:r}=Mf(e),[i,s,o,a,l,f]=gt(e,t),c=Ye(pe(P(i,s),P(l,f),e.angle)),d=Ye(pe(P(o,s),P(l,f),e.angle)),u=Hi(H4(d,c)),h=Ye(pe(P(i,a),P(l,f),e.angle)),g=H4(h,c),U=Hi(g),{cropX:y,cropY:x}=DAe(e.crop,e.scale),w=l0(l0(c,tr(u,-y*n/e.crop.naturalWidth)),tr(U,-x*r/e.crop.naturalHeight)),E=Tt(l0(l0(w,tr(u,n/2)),tr(U,r/2))),S=pe(Tt(w),E,-e.angle);return{...e,x:S[0],y:S[1],width:n,height:r,crop:null}}return e},Mf=e=>{if(e.crop){let t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},DAe=(e,t)=>{let n=e.x,r=e.y,i=t[0]===-1,s=t[1]===-1;return i&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(r=e.naturalHeight-Math.abs(r)-e.height),{cropX:n,cropY:r}},LAe=(e,t=!1)=>{let n=e.crop;if(!n)return null;let r=e.scale[0]===-1,i=e.scale[1]===-1,s=n.x,o=n.y;if(r&&(s=n.naturalWidth-n.width-n.x),i&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};let{width:a,height:l}=Mf(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},Nq="invert(100%) hue-rotate(180deg) saturate(1.25)",OAe=oc(),Rq=(e,t)=>Zo(e)&&!t.imageCache.has(e.fileId),_q=(e,t,n)=>{var r;return n.theme===It.DARK&&Zo(e)&&!Rq(e,t)&&((r=t.imageCache.get(e.fileId))==null?void 0:r.mimeType)!==rt.svg},L7=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},Pq=(e,t,n,r,i=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*i;return(n.has(e.id)||r&&r.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=Bxe/100),s},jAe=(e,t,n)=>{let r=L7(e),[i,s,o,a]=gt(e,t),l=mt(e)||la(e)?Fi(i,o):e.width,f=mt(e)||la(e)?Fi(s,a):e.height,c=l*window.devicePixelRatio+r*2,d=f*window.devicePixelRatio+r*2,u=n.value;return(c*u>32767||d*u>32767)&&(u=Math.min(32767/c,32767/d)),c*d*u*u>16777216&&(u=Math.sqrt(16777216/(c*d))),c=Math.floor(c*u),d=Math.floor(d*u),{width:c,height:d,scale:u}},Dq=(e,t,n,r,i)=>{var x,w;let s=document.createElement("canvas"),o=s.getContext("2d"),a=L7(e),{width:l,height:f,scale:c}=jAe(e,t,n);if(!l||!f)return null;s.width=l,s.height=f;let d=-100,u=0;if(mt(e)||la(e)){let[E,S]=gt(e,t);d=e.x>E?Fi(e.x,E)*window.devicePixelRatio*c:0,u=e.y>S?Fi(e.y,S)*window.devicePixelRatio*c:0,o.translate(d,u)}o.save(),o.translate(a*c,a*c),o.scale(window.devicePixelRatio*c,window.devicePixelRatio*c);let h=j0.canvas(s);_q(e,r,i)&&(o.filter=Nq),t3(e,h,o,r),o.restore();let g=xt(e,t),U=document.createElement("canvas"),y=U.getContext("2d");if(Et(e)&&g){let[E,S,M,A]=gt(e,t),C=Math.max(Fi(E,M),Fi(S,A));U.width=C*window.devicePixelRatio*c+a*c*10,U.height=C*window.devicePixelRatio*c+a*c*10,y.translate(U.width/2,U.height/2),y.rotate(e.angle),y.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);let[,,,,I,R]=gt(g,t);y.rotate(-e.angle);let L=(U.width-s.width)/2,_=(U.height-s.height)/2,O=U.width/2-(I-E)*window.devicePixelRatio*c-L-a*c,$=U.height/2-(R-S)*window.devicePixelRatio*c-_-a*c;y.translate(-O,-$),y.clearRect(-(g.width/2+Nr)*window.devicePixelRatio*c,-(g.height/2+Nr)*window.devicePixelRatio*c,(g.width+Nr*2)*window.devicePixelRatio*c,(g.height+Nr*2)*window.devicePixelRatio*c)}return{element:e,canvas:s,theme:i.theme,scale:c,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:u,boundTextElementVersion:((x=xt(e,t))==null?void 0:x.version)||null,containingFrameOpacity:((w=Hs(e,t))==null?void 0:w.opacity)||100,boundTextCanvas:U,angle:e.angle,imageCrop:Yt(e)?e.crop:null}},BAe=14,Lq=document.createElement("img");Lq.src=`data:${rt.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;var Oq=document.createElement("img");Oq.src=`data:${rt.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;var FAe=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);let n=Math.min(e.width,e.height),r=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?Oq:Lq,e.width/2-r/2,e.height/2-r/2,r,r)},t3=(e,t,n,r,i)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(Hn.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",Hn.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;let o=HAe(e),a=Hn.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{let o=Zo(e)?(s=r.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,Ja(Math.min(e.width,e.height),e)),n.clip());let{x:a,y:l,width:f,height:c}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,f,c,0,0,e.width,e.height)}else FAe(e,n);break}default:if(Oe(e)){let o=DZ(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=ln(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;let l=e.text.replace(/\r\n?/g,`
`).split(`
`),f=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,c=Hb(e.fontSize,e.lineHeight),d=Uq(e.fontFamily,e.fontSize,c);for(let u=0;u<l.length;u++)n.fillText(l[u],f,u*c+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},BC=new WeakMap,BB=(e,t,n,r)=>{var d;let i=n?r.zoom:OAe.zoom,s=BC.get(e),o=s&&s.zoomValue!==i.value&&!(r!=null&&r.shouldCacheIgnoreZoom),a=xt(e,t),l=(a==null?void 0:a.version)||null,f=Yt(e)?e.crop:null,c=((d=Hs(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==r.theme||s.boundTextElementVersion!==l||s.imageCrop!==f||s.containingFrameOpacity!==c||Et(e)&&a&&e.angle!==s.angle){let u=Dq(e,t,i,n,r);return u?(BC.set(e,u),u):null}return s},ZE=(e,t,n,r,i)=>{let s=e.element,o=L7(s),a=e.scale,[l,f,c,d]=gt(s,i),u=((l+c)/2+r.scrollX)*window.devicePixelRatio,h=((f+d)/2+r.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);let g=xt(s,i);if(Et(s)&&g){let U=(e.boundTextCanvas.width-e.canvas.width)/2,y=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(u,h),t.drawImage(e.boundTextCanvas,-(c-l)/2*window.devicePixelRatio-U/a-o,-(d-f)/2*window.devicePixelRatio-y/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(u,h),t.rotate(s.angle),"scale"in e.element&&!Rq(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-u,-h),t.drawImage(e.canvas,(l+r.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(f+r.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale),vt.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX;t.restore()},$Ae=(e,t,n,r)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";let i=.5/n.zoom.value;t.fillRect(i,i,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(i,i,e.width,e.height),t.restore()},yu=(e,t,n,r,i,s,o)=>{var l;let a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(i.globalAlpha=Pq(e,Hs(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?TZ:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(i.save(),i.translate(e.x+o.scrollX,e.y+o.scrollY),i.fillStyle="rgba(0, 0, 200, 0.04)",i.lineWidth=$n.strokeWidth/o.zoom.value,i.strokeStyle=$n.strokeColor,Qy(e)&&(i.strokeStyle=o.theme===It.LIGHT?"#7affd7":"#1d8264"),i.roundRect?(i.beginPath(),i.roundRect(0,0,e.width,e.height,$n.radius/o.zoom.value),i.stroke(),i.closePath()):i.strokeRect(0,0,e.width,e.height),i.restore());break}case"freedraw":{if(Hn.generateElementShape(e,null),s.isExporting){let[f,c,d,u]=gt(e,t),h=(f+d)/2+o.scrollX,g=(c+u)/2+o.scrollY,U=(d-f)/2-(e.x-f),y=(u-c)/2-(e.y-c);i.save(),i.translate(h,g),i.rotate(e.angle),i.translate(-U,-y),t3(e,r,i,s),i.restore()}else{let f=BB(e,n,s,o);if(!f)return;ZE(f,i,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(Hn.generateElementShape(e,s),s.isExporting){let[f,c,d,u]=gt(e,t),h=(f+d)/2+o.scrollX,g=(c+u)/2+o.scrollY,U=(d-f)/2-(e.x-f),y=(u-c)/2-(e.y-c);if(Oe(e)){let w=di(e,t);if(Et(w)){let E=je.getBoundTextElementPosition(w,e,t);U=(d-f)/2-(E.x-f),y=(u-c)/2-(E.y-c)}}i.save(),i.translate(h,g),_q(e,s,o)&&(i.filter="none");let x=xt(e,t);if(Et(e)&&x){let w=document.createElement("canvas"),E=w.getContext("2d"),S=Math.max(Fi(f,d),Fi(c,u)),M=L7(e);w.width=S*o.exportScale+M*10*o.exportScale,w.height=S*o.exportScale+M*10*o.exportScale,E.translate(w.width/2,w.height/2),E.scale(o.exportScale,o.exportScale),U=e.width/2-(e.x-f),y=e.height/2-(e.y-c),E.rotate(e.angle);let A=j0.canvas(w);E.translate(-U,-y),t3(e,A,E,s),E.translate(U,y),E.rotate(-e.angle);let[,,,,C,I]=gt(x,t),R=(f+d)/2-C,L=(c+u)/2-I;E.translate(-R,-L),E.clearRect(-x.width/2,-x.height/2,x.width,x.height),i.scale(1/o.exportScale,1/o.exportScale),i.drawImage(w,-w.width/2,-w.height/2,w.width,w.height)}else i.rotate(e.angle),e.type==="image"&&i.scale(e.scale[0],e.scale[1]),i.translate(-U,-y),t3(e,r,i,s);i.restore()}else{let f=BB(e,n,s,o);if(!f)return;let c=i.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||Xxe(e.angle))&&(i.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&Yt(f.element)&&f.element.crop!==null){i.save(),i.globalAlpha=.1;let d=Dq(PAe(f.element,t),n,o.zoom,s,o);d&&ZE(d,i,s,o,n),i.restore()}ZE(f,i,s,o,n),i.imageSmoothingEnabled=c}break}default:throw new Error(`Unimplemented type ${e.type}`)}i.globalAlpha=1},jq=new WeakMap([]);function zAe(e){let t=Bq(e),n=new Path2D(t);return jq.set(e,n),n}function HAe(e){return jq.get(e)}function Bq(e){let t=e.simulatePressure?e.points:e.points.length?e.points.map(([r,i],s)=>[r,i,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:r=>Math.sin(r*Math.PI/2),last:!!e.lastCommittedPoint};return WAe(X7e(t,n))}function FB(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var VAe=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function WAe(e){if(!e.length)return"";let t=e.length-1;return e.reduce((n,r,i,s)=>(i===t?n.push(r,FB(r,s[0]),"L",s[0],"Z"):n.push(r,FB(r,s[i+1])),n),["M",e[0],"Q"]).join(" ").replace(VAe,"$1")}var u6=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",FC=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",$B=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",zB=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",$C=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",HB=e=>e==="arrow",Q4=e=>e==="arrow",er=[1,0],oi=[0,1],Ls=[-1,0],Os=[0,-1],iy=(e,t)=>{let n=Fb(Math.atan2(t[1]-e[1],t[0]-e[0]));return n>=315||n<45?Os:n>=45&&n<135?er:n>=135&&n<225?oi:Ls},Qh=e=>{let[t,n]=e,r=Math.abs(t),i=Math.abs(n);return t>i?er:t<=-i?Ls:n>r?oi:Os},H2=(e,t)=>Qh(Ye(e,t)),cf=(e,t)=>pf(H2(e,t)),nr=(e,t)=>e[0]===t[0]&&e[1]===t[1],pf=e=>nr(e,er)||nr(e,Ls),Fq=(e,t,n)=>{let r=OT(t);if(e.type==="diamond"){if(n[0]<e.x)return Ls;if(n[1]<e.y)return Os;if(n[0]>e.x+e.width)return er;if(n[1]>e.y+e.height)return oi;let l=pe(Bc(P(e.x+e.width/2,e.y),r,2),r,e.angle),f=pe(Bc(P(e.x+e.width,e.y+e.height/2),r,2),r,e.angle),c=pe(Bc(P(e.x+e.width/2,e.y+e.height),r,2),r,e.angle),d=pe(Bc(P(e.x,e.y+e.height/2),r,2),r,e.angle);return q1([l,f,r],n)?iy(l,f):q1([f,c,r],n)?iy(f,c):q1([c,d,r],n)?iy(c,d):iy(d,l)}let i=Bc(P(t[0],t[1]),r,2),s=Bc(P(t[2],t[1]),r,2),o=Bc(P(t[0],t[3]),r,2),a=Bc(P(t[2],t[3]),r,2);return q1([i,s,r],n)?Os:q1([s,a,r],n)?er:q1([a,o,r],n)?oi:Ls},$q=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],GAe=e=>[8,8+e],zq=e=>[1.5,6+e];function XAe(e){let t=e.roughness,n=Math.max(e.width,e.height),r=Math.min(e.width,e.height);return r>=20&&n>=50||r>=15&&e.roundness&&$C(e.type)||mt(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}var fo=(e,t=!1)=>{let n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?GAe(e.strokeWidth):e.strokeStyle==="dotted"?zq(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:XAe(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<CZ.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=Ka(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return Cf(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},VB=(e,t,n)=>Qo(e)&&(t||Rs(e)&&(n==null?void 0:n.get(e.id))!==!0)&&Ka(e.backgroundColor)&&Ka(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:Rd(e)?{...e,strokeColor:Ka(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:Ka(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,WB=(e,t,n,r,i,s,o)=>{let a=YB(e,t,n,r);if(a===null)return[];let l=(f,c)=>{if(f===null)return[];let[,,d,u,h,g]=f;return[i.line(d,u,h,g,c)]};switch(r){case"dot":case"circle":case"circle_outline":{let[f,c,d]=a;return delete s.strokeLineDash,[i.circle(f,c,d,{...s,fill:r==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{let[f,c,d,u,h,g]=a;return delete s.strokeLineDash,[i.polygon([[f,c],[d,u],[h,g],[f,c]],{...s,fill:r==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{let[f,c,d,u,h,g,U,y]=a;return delete s.strokeLineDash,[i.polygon([[f,c],[d,u],[h,g],[U,y],[f,c]],{...s,fill:r==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{let[f,c,d,u,h,g]=a;if(e.strokeStyle==="dotted"){let U=zq(e.strokeWidth-1);s.strokeLineDash=[U[0],U[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[i.line(d,u,f,c,s),i.line(h,g,f,c,s),...r==="crowfoot_one_or_many"?l(YB(e,t,n,"crowfoot_one"),s):[]]}}},KAe=(e,t,{isExporting:n,canvasBackgroundColor:r,embedsValidationStatus:i})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){let o=e.width,a=e.height,l=Ja(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,fo(VB(e,n,i),!0))}else s=t.rectangle(0,0,e.width,e.height,fo(VB(e,n,i),!1));return s}case"diamond":{let s,[o,a,l,f,c,d,u,h]=Vq(e);if(e.roundness){let g=Ja(Math.abs(o-u),e),U=Ja(Math.abs(f-a),e);s=t.path(`M ${o+g} ${a+U} L ${l-g} ${f-U}
            C ${l} ${f}, ${l} ${f}, ${l-g} ${f+U}
            L ${c+g} ${d-U}
            C ${c} ${d}, ${c} ${d}, ${c-g} ${d-U}
            L ${u+g} ${h+U}
            C ${u} ${h}, ${u} ${h}, ${u+g} ${h-U}
            L ${o-g} ${a+U}
            C ${o} ${a}, ${o} ${a}, ${o+g} ${a+U}`,fo(e,!0))}else s=t.polygon([[o,a],[l,f],[c,d],[u,h]],fo(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,fo(e));case"line":case"arrow":{let s,o=fo(e),a=e.points.length?e.points:[P(0,0)];if(Fe(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(YAe(a,16),fo(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){let{startArrowhead:l=null,endArrowhead:f="arrow"}=e;if(l!==null){let c=WB(e,s,"start",l,t,o,r);s.push(...c)}if(f!==null){let c=WB(e,s,"end",f,t,o,r);s.push(...c)}}return s}case"freedraw":{let s;if(zAe(e),Cf(e.points)){let o=q7e(e.points,.75);s=t.curve(o,{...fo(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return Xh(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},YAe=(e,t)=>{let n=[];for(let i=1;i<e.length-1;i+=1){let s=e[i-1],o=e[i+1],a=e[i],l=cf(a,s),f=cf(o,a),c=Math.min(t,Zt(e[i],o)/2,Zt(e[i],s)/2);l?s[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):s[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c]),n.push(e[i]),f?o[0]<a[0]?n.push([e[i][0]-c,e[i][1]]):n.push([e[i][0]+c,e[i][1]]):o[1]<a[1]?n.push([e[i][0],e[i][1]-c]):n.push([e[i][0],e[i][1]+c])}let r=[`M ${e[0][0]} ${e[0][1]}`];for(let i=0;i<n.length;i+=3)r.push(`L ${n[i][0]} ${n[i][1]}`),r.push(`Q ${n[i+1][0]} ${n[i+1][1]}, ${n[i+2][0]} ${n[i+2][1]}`);return r.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),r.join(" ")},h6=e=>{let t=e.map(r=>r[0]),n=e.map(r=>r[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},J4=(e,t,n,r)=>{let i=n.map(u=>u[e]),s=Math.max(...i),o=Math.min(...i),a=s-o,l=a===0?1:t/a,f=1/0,c=n.map(u=>{let h=u[e]*l,g=[...u];return g[e]=h,h<f&&(f=h),g});if(!r||c.length===2)return c;let d=o-f;return c.map(u=>u.map((h,g)=>g===e?h+d:h))},Hq=class n3{static getBounds(t,n){let r=n3.boundsCache.get(t);if(r!=null&&r.version&&r.version===t.version&&!An(t))return r.bounds;let i=n3.calculateBounds(t,n);return n3.boundsCache.set(t,{version:t.version,bounds:i}),i}static calculateBounds(t,n){let r,[i,s,o,a,l,f]=gt(t,n);if(la(t)){let[c,d,u,h]=DT(t.points.map(([g,U])=>pe(P(g,U),P(l-t.x,f-t.y),t.angle)));return[c+t.x,d+t.y,u+t.x,h+t.y]}else if(mt(t))r=nTe(t,l,f,n);else if(t.type==="diamond"){let[c,d]=pe(P(l,s),P(l,f),t.angle),[u,h]=pe(P(l,a),P(l,f),t.angle),[g,U]=pe(P(i,f),P(l,f),t.angle),[y,x]=pe(P(o,f),P(l,f),t.angle),w=Math.min(c,u,g,y),E=Math.min(d,h,U,x),S=Math.max(c,u,g,y),M=Math.max(d,h,U,x);r=[w,E,S,M]}else if(t.type==="ellipse"){let c=(o-i)/2,d=(a-s)/2,u=Math.cos(t.angle),h=Math.sin(t.angle),g=Math.hypot(c*u,d*h),U=Math.hypot(d*u,c*h);r=[l-g,f-U,l+g,f+U]}else{let[c,d]=pe(P(i,s),P(l,f),t.angle),[u,h]=pe(P(i,a),P(l,f),t.angle),[g,U]=pe(P(o,a),P(l,f),t.angle),[y,x]=pe(P(o,s),P(l,f),t.angle),w=Math.min(c,u,g,y),E=Math.min(d,h,U,x),S=Math.max(c,u,g,y),M=Math.max(d,h,U,x);r=[w,E,S,M]}return r}};Z(Hq,"boundsCache",new WeakMap);var ZAe=Hq,gt=(e,t,n=!1)=>{if(la(e))return QAe(e);if(mt(e))return je.getElementAbsoluteCoords(e,t,n);if(Oe(e)){let r=t?di(e,t):null;if(Et(r)){let{x:i,y:s}=je.getBoundTextElementPosition(r,e,t);return[i,s,i+e.width,s+e.height,i+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},GB=(e,t)=>{let[n,r,i,s,o,a]=gt(e,t),l=P(o,a);if(mt(e)||la(e)){let x=[],w=0;for(;w<e.points.length-1;)x.push(Qe(pe(P(e.points[w][0]+e.x,e.points[w][1]+e.y),l,e.angle),pe(P(e.points[w+1][0]+e.x,e.points[w+1][1]+e.y),l,e.angle))),w++;return x}let[f,c,d,u,h,g,U,y]=[[n,r],[i,r],[n,s],[i,s],[o,r],[o,s],[n,a],[i,a]].map(x=>pe(x,l,e.angle));return e.type==="diamond"?[Qe(h,U),Qe(h,y),Qe(g,U),Qe(g,y)]:e.type==="ellipse"?[Qe(h,U),Qe(h,y),Qe(g,U),Qe(g,y),Qe(h,U),Qe(h,y),Qe(g,U),Qe(g,y)]:[Qe(f,c),Qe(d,u),Qe(f,d),Qe(c,u),Qe(f,y),Qe(d,y),Qe(c,U),Qe(u,U)]},Vq=e=>{let t=Math.floor(e.width/2)+1,n=0,r=e.width,i=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,r,i,s,o,0,i]},XB=(e,t,n,r,i)=>{let s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*r+Math.pow(e,3)*i},KB=(e,t,n,r)=>{let i=t-e,s=n-t,o=r-n,a=3*i-6*s+3*o,l=6*s-6*i,f=3*i,c=l*l-4*a*f;if(!(c>=0))return!1;let d=null,u=null,h=1/0,g=1/0;return a===0?h=g=-f/l:(h=(-l+Math.sqrt(c))/(2*a),g=(-l-Math.sqrt(c))/(2*a)),h>=0&&h<=1&&(d=XB(h,e,t,n,r)),g>=0&&g<=1&&(u=XB(g,e,t,n,r)),[d,u]},qAe=(e,t,n,r)=>{let i=KB(e[0],t[0],n[0],r[0]),s=KB(e[1],t[1],n[1],r[1]),o=Math.min(e[0],r[0]),a=Math.max(e[0],r[0]);if(i){let c=i.filter(d=>d!==null);o=Math.min(o,...c),a=Math.max(a,...c)}let l=Math.min(e[1],r[1]),f=Math.max(e[1],r[1]);if(s){let c=s.filter(d=>d!==null);l=Math.min(l,...c),f=Math.max(f,...c)}return[o,l,a,f]},O7=(e,t)=>{let n=P(0,0),{minX:r,minY:i,maxX:s,maxY:o}=e.reduce((a,{op:l,data:f})=>{if(l==="move"){let c=UT(f);Gi(c!=null,"Op data is not a point"),n=c}else if(l==="bcurveTo"){let c=P(f[0],f[1]),d=P(f[2],f[3]),u=P(f[4],f[5]),h=t?t(c):c,g=t?t(d):d,U=t?t(u):u,y=t?t(n):n;n=u;let[x,w,E,S]=qAe(y,h,g,U);a.minX=Math.min(a.minX,x),a.minY=Math.min(a.minY,w),a.maxX=Math.max(a.maxX,E),a.maxY=Math.max(a.maxY,S)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r,i,s,o]},DT=e=>{let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),r=Math.max(r,s),i=Math.max(i,o);return[t,n,r,i]},QAe=e=>{let[t,n,r,i]=DT(e.points),s=t+e.x,o=n+e.y,a=r+e.x,l=i+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},JAe=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},eTe=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},YB=(e,t,n,r)=>{if(t.length<1)return null;let i=F0(t[0]);if(i.length<1)return null;let s=n==="start"?1:i.length-1,o=i[s].data;Gi(o.length===6,"Op data length is not 6");let a=P(o[4],o[5]),l=P(o[2],o[3]),f=P(o[0],o[1]),c=i[s-1],d=P(0,0);if(c.op==="move"){let B=UT(c.data);Gi(B!=null,"Op data is not a point"),d=B}else c.op==="bcurveTo"&&(d=P(c.data[4],c.data[5]));let u=(B,F)=>Math.pow(1-B,3)*a[F]+3*B*Math.pow(1-B,2)*l[F]+3*Math.pow(B,2)*(1-B)*f[F]+d[F]*Math.pow(B,3),[h,g]=n==="start"?d:a,[U,y]=[u(.3,0),u(.3,1)],x=Math.hypot(h-U,g-y),w=(h-U)/x,E=(g-y)/x,S=JAe(r),M=0;{let[B,F]=n==="end"?e.points[e.points.length-1]:e.points[0],[z,H]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];M=Math.hypot(B-z,F-H)}let A=Math.min(S,M*(r==="diamond"||r==="diamond_outline"?.25:.5)),C=h-w*A,I=g-E*A;if(r==="dot"||r==="circle"||r==="circle_outline"){let B=Math.hypot(I-g,C-h)+e.strokeWidth-2;return[h,g,B]}let R=eTe(r);if(r==="crowfoot_many"||r==="crowfoot_one_or_many"){let[B,F]=pe(P(h,g),P(C,I),xh(-R)),[z,H]=pe(P(h,g),P(C,I),xh(R));return[C,I,B,F,z,H]}let[L,_]=pe(P(C,I),P(h,g),-R*Math.PI/180),[O,$]=pe(P(C,I),P(h,g),xh(R));if(r==="diamond"||r==="diamond_outline"){let B,F;if(n==="start"){let[z,H]=e.points.length>1?e.points[1]:[0,0];[B,F]=pe(P(h+A*2,g),P(h,g),Math.atan2(H-g,z-h))}else{let[z,H]=e.points.length>1?e.points[e.points.length-2]:[0,0];[B,F]=pe(P(h-A*2,g),P(h,g),Math.atan2(g-H,h-z))}return[h,g,L,_,B,F,O,$]}return[h,g,L,_,O,$]},tTe=e=>{let t=j0.generator(),n=fo(e),r=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[r](e.points,n)},nTe=(e,t,n,r)=>{var f;let i=xt(e,r);if(e.points.length<2){let[c,d]=e.points[0],[u,h]=pe(P(e.x+c,e.y+d),P(t,n),e.angle),g=[u,h,u,h];if(i){let U=je.getMinMaxXYWithBoundText(e,r,[u,h,u,h],i);g=[U[0],U[1],U[2],U[3]]}return g}let s=((f=Hn.get(e))==null?void 0:f[0])??tTe(e),o=F0(s),a=O7(o,([c,d])=>pe(P(e.x+c,e.y+d),P(t,n),e.angle)),l=[a[0],a[1],a[2],a[3]];if(i){let c=je.getMinMaxXYWithBoundText(e,r,l,i);l=[c[0],c[1],c[2],c[3]]}return l},ol=(e,t)=>ZAe.getBounds(e,t),tn=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=-1/0,i=1/0,s=-1/0,o=t||ct(e);return e.forEach(a=>{let[l,f,c,d]=ol(a,o);n=Math.min(n,l),i=Math.min(i,f),r=Math.max(r,c),s=Math.max(s,d)}),[n,i,r,s]},LT=(e,t)=>{let[n,r,i,s]=tn(e);return[n+t.x,r+t.y,i+t.x,s+t.y]},x0=(e,t,n,r)=>{if(!(mt(e)||la(e)))return[e.x,e.y,e.x+t,e.y+n];let i=J4(0,t,J4(1,n,e.points,r),r),s;if(la(e))s=DT(i);else{let c=j0.generator(),d=e.roundness?c.curve(i,fo(e)):c.linearPath(i,fo(e)),u=F0(d);s=O7(u)}let[o,a,l,f]=s;return[o+e.x,a+e.y,l+e.x,f+e.y]},ZB=(e,t)=>{let n=j0.generator(),r=e.roundness==null?n.linearPath(t,fo(e)):n.curve(t,fo(e)),i=F0(r),[s,o,a,l]=O7(i);return[s+e.x,o+e.y,a+e.x,l+e.y]},rTe=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,r=e[0],i=ct(e);return e.forEach(s=>{let[o,a,l,f]=ol(s,i),c=Zt(P((o+l)/2,(a+f)/2),P(t.x,t.y));c<n&&(n=c,r=s)}),ol(r,i)},el=e=>{let[t,n,r,i]=tn(e);return{minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n,midX:(t+r)/2,midY:(n+i)/2}},iTe=({scrollX:e,scrollY:t,width:n,height:r,zoom:i})=>[-e,-t,-e+n/i.value,-t+r/i.value],OT=e=>P(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),sTe=(e,t)=>{if(e==null||t==null)return!1;let[n,r,i,s]=e,[o,a,l,f]=t;return n<l&&i>o&&r<f&&s>a},j7=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return oTe(e,t);case"diamond":return aTe(e,t);case"ellipse":return lTe(e,t)}},oTe=(e,t)=>{let n=P(e.x+e.width/2,e.y+e.height/2),r=pe(t,n,-e.angle),[i,s]=Eq(e);return Math.min(...i.map(o=>yT(r,o)),...s.map(o=>_Z(o,r)).filter(o=>o!==null))},aTe=(e,t)=>{let n=P(e.x+e.width/2,e.y+e.height/2),r=pe(t,n,-e.angle),[i,s]=Sq(e);return Math.min(...i.map(o=>yT(r,o)),...s.map(o=>_Z(o,r)).filter(o=>o!==null))},lTe=(e,t)=>{let n=P(e.x+e.width/2,e.y+e.height/2);return xAe(pe(t,n,-e.angle),wq(n,e.width/2,e.height/2))},cTe=e=>!e[Q.CTRL_OR_CMD],$u=e=>e.isBindingEnabled,gn=5,jT=10,BT=4,fTe=(e,t)=>{let n=[];return t.forEach(r=>{let i=e.getNonDeletedElement(r);i!=null&&n.push(i)}),n},B7=(e,t,n,r,i)=>{let s=new Set,o=new Set;qB(e,t,n,"start",s,o,r),qB(e,n,t,"end",s,o,r);let a=Array.from(o).filter(l=>!s.has(l));fTe(i,a).forEach(l=>{var f;ye(l,{boundElements:(f=l.boundElements)==null?void 0:f.filter(c=>c.type!=="arrow"||c.id!==e.id)})})},qB=(e,t,n,r,i,s,o)=>{if(t!=="keep"){if(t===null){let a=mTe(e,r);a!=null&&s.add(a);return}Kq(e)?(n==null||(n==="keep"?!Gq(e,t,r):r==="start"||n.id!==t.id))&&(ac(e,t,r,o),i.add(t.id)):(ac(e,t,r,o),i.add(t.id))}},dTe=(e,t,n,r)=>{var o,a;let i=Yq(e,t,n),s=t==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){let l=n.get(s);if(sl(l)&&r3(l,i,n,r))return l}return null},Wq=(e,t,n)=>["start","end"].map(r=>dTe(e,r,t,n)),uTe=(e,t,n,r,i,s)=>{let o=e.points.length-1,a=n.findIndex(d=>d===0)>-1,l=n.findIndex(d=>d===o)>-1,f=a?t?kp(e,"start",r,i,s):null:Fe(e)?"keep":kp(e,"start",r,i,s),c=l?t?kp(e,"end",r,i,s):null:Fe(e)?"keep":kp(e,"end",r,i,s);return[f,c]},hTe=(e,t,n,r,i)=>{if(Fe(e))return["keep","keep"];let[s,o]=Wq(e,t,i),a=s&&r?kp(e,"start",t,n,i):null,l=o&&r?kp(e,"end",t,n,i):null;return[a,l]},e9=(e,t,n,r,i,s,o)=>{e.forEach(a=>{let[l,f]=s!=null&&s.length?uTe(a,i,s??[],t,n,o):hTe(a,t,n,i,o);B7(a,l,f,t,r)})},qE=(e,t,n)=>e.length>50?[]:e.filter(mt).flatMap(r=>Wq(r,t,n)).filter(r=>r!==null).filter(r=>e.filter(i=>i.id===(r==null?void 0:r.id)).length===0),zC=(e,t,n,r,i)=>{t.startBoundElement!=null&&ac(e,t.startBoundElement,"start",r);let s=Ya(n,i,r,t.zoom,Fe(e),Fe(e));s!==null&&(Gq(e,s,"end")||ac(e,s,"end",r))},pTe=(e,t)=>{let n=e.gap,r=Wb(t,t.width,t.height);return n>r&&(n=jT+BT),{...e,gap:n}},ac=(e,t,n,r)=>{if(!Et(e))return;let i={elementId:t.id,...Fe(e)?{...t9(e,t,n),focus:0,gap:0}:{...pTe(UTe(e,t,n,r),t)}};ye(e,{[n==="start"?"startBinding":"endBinding"]:i}),ct(t.boundElements||[]).has(e.id)||ye(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},Gq=(e,t,n)=>{let r=e[n==="start"?"endBinding":"startBinding"];return Xq(e,r==null?void 0:r.elementId,t)},Xq=(e,t,n)=>t===n.id&&Kq(e),Kq=e=>e.points.length<3,mTe=(e,t)=>{let n=t==="start"?"startBinding":"endBinding",r=e[n];return r==null?null:(ye(e,{[n]:null}),r.elementId)},Ya=(e,t,n,r,i,s)=>{if(s){let o=!1,a=bTe(t,f=>sl(f,!1)&&r3(f,e,n,r,(i||!$E(f))&&!at(f))).filter(f=>o?!1:($E(f)||(o=!0),!0));if(!a||a.length===0)return null;if(a.length===1)return a[0];let l=a.filter(f=>r3(f,e,n,r,!1));return l.length===1?l[0]:a.sort((f,c)=>c.width**2+c.height**2-(f.width**2+f.height**2)).pop()}return gTe(t,o=>sl(o,!1)&&r3(o,e,n,r,(i||!$E(o))&&!at(o)))},gTe=(e,t)=>{let n=null;for(let r=e.length-1;r>=0;--r){let i=e[r];if(!i.isDeleted&&t(i)){n=i;break}}return n},bTe=(e,t)=>{let n=[];for(let r=e.length-1;r>=0;--r){let i=e[r];i.isDeleted||t(i)&&n.push(i)}return n},UTe=(e,t,n,r)=>{let i=n==="start"?-1:1,s=i===-1?0:e.points.length-1,o=s-i,a=je.getPointAtIndexGlobalCoordinates(e,s,r),l=je.getPointAtIndexGlobalCoordinates(e,o,r);return{focus:MTe(t,l,a),gap:Math.max(1,j7(t,a))}},zs=(e,t,n)=>{let{newSize:r,simultaneouslyUpdated:i}=n??{},s=xTe(i);sl(e)&&F7(t,e,o=>{var g,U;if(!mt(o)||o.isDeleted||!yTe(o,e))return;let a=o.startBinding?t.get(o.startBinding.elementId):null,l=o.endBinding?t.get(o.endBinding.elementId):null,f=null,c=null;a&&l&&(f=ol(a,t),c=ol(l,t));let d={startBinding:QB(e,o.startBinding,r),endBinding:QB(e,o.endBinding,r)};if(s.has(o.id)){ye(o,d,!0);return}let u=$7(t,o,(y,x)=>{var w,E;if(y&&sl(y)&&(x==="startBinding"||x==="endBinding")&&(e.id===((w=o[x])==null?void 0:w.elementId)||e.id===((E=o[x==="startBinding"?"endBinding":"startBinding"])==null?void 0:E.elementId)&&!sTe(f,c))){let S=CTe(o,x,d[x],y,t);if(S)return{index:x==="startBinding"?0:o.points.length-1,point:S}}return null}).filter(y=>y!==null);je.movePoints(o,u,{...e.id===((g=o.startBinding)==null?void 0:g.elementId)?{startBinding:d.startBinding}:{},...e.id===((U=o.endBinding)==null?void 0:U.elementId)?{endBinding:d.endBinding}:{}});let h=xt(o,t);h&&!h.isDeleted&&Gb(o,t,!1)})},yTe=(e,t)=>{var n,r;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((r=e.endBinding)==null?void 0:r.elementId)===t.id},xTe=e=>new Set((e||[]).map(t=>t.id)),vTe=(e,t,n,r,i,s,o)=>{let a=Qh(Ye(t,e));return!n||!r?a:wTe(s,n,i,o)?Fq(n,r,e):Qh(Ye(e,P(n.x+n.width/2,n.y+n.height/2)))},wTe=(e,t,n,r)=>{let i=j7(t,e),s=Wb(t,t.width,t.height,r);return i>s?null:i},V2=(e,t,n)=>{let r=t&&zl(t),i=e.points[n==="start"?0:e.points.length-1],s=P(e.x+i[0],e.y+i[1]),o=Eve(t)?STe(t,s):s;if(t&&r){let a=OT(r),l=Cq(t,Qe(a,Tt(tr(Hi(Ye(o,a)),Math.max(t.width,t.height)),a)))[0],f=Zt(o,a),c=Math.max(Zt(l??o,a),1e-4),d=Jl(f/c,6);switch(!0){case d>.9:return f-c>gn||F2(o,l)<1e-4?o:Tt(tr(Hi(Ye(o,l??a)),d>1?gn:-gn),l??a);default:return ETe(o,t,r)}}return o},ETe=(e,t,n)=>{let r=OT(n),i=Qh(Ye(e,r));switch(!0){case nr(i,Os):return pe(P((n[0]+n[2])/2+.1,n[1]),r,t.angle);case nr(i,er):return pe(P(n[2],(n[1]+n[3])/2+.1),r,t.angle);case nr(i,oi):return pe(P((n[0]+n[2])/2-.1,n[3]),r,t.angle);default:return pe(P(n[0],(n[1]+n[3])/2-.1),r,t.angle)}},STe=(e,t)=>{let n=P(e.x+e.width/2,e.y+e.height/2),r=pe(t,n,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-gn?pe(P(e.x-gn,e.y),n,e.angle):pe(P(e.x,e.y-gn),n,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-gn?pe(P(e.x,e.y+e.height+gn),n,e.angle):pe(P(e.x-gn,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+gn?pe(P(e.x+e.width,e.y+e.height+gn),n,e.angle):pe(P(e.x+e.width+gn,e.y+e.height),n,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+gn?pe(P(e.x+e.width,e.y-gn),n,e.angle):pe(P(e.x+e.width+gn,e.y),n,e.angle):t},kTe=(e,t,n=.05)=>{let{x:r,y:i,width:s,height:o,angle:a}=e,l=P(r+s/2-.1,i+o/2-.1),f=pe(t,l,-a),c=At(n*o,5,80),d=At(n*s,5,80);return f[0]<=r+s/2&&f[1]>l[1]-c&&f[1]<l[1]+c?pe(P(r-gn,l[1]),l,a):f[1]<=i+o/2&&f[0]>l[0]-d&&f[0]<l[0]+d?pe(P(l[0],i-gn),l,a):f[0]>=r+s/2&&f[1]>l[1]-c&&f[1]<l[1]+c?pe(P(r+s+gn,l[1]),l,a):f[1]>=i+o/2&&f[0]>l[0]-d&&f[0]<l[0]+d?pe(P(l[0],i+o+gn),l,a):t},CTe=(e,t,n,r,i)=>{if(n==null||n.elementId!==r.id&&e.points.length>2)return null;let s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(Fe(e)&&K4(n)){let d=z7(n.fixedPoint)??t9(e,r,t==="startBinding"?"start":"end").fixedPoint,u=P(r.x+r.width/2,r.y+r.height/2),h=P(r.x+d[0]*r.width,r.y+d[1]*r.height),g=pe(h,u,r.angle);return je.pointFromAbsoluteCoords(e,g,i)}let a=o-s,l=je.getPointAtIndexGlobalCoordinates(e,a,i),f=ATe(r,n.focus,l),c;if(n.gap===0)c=f;else{let d=je.getPointAtIndexGlobalCoordinates(e,o,i),u=P(r.x+r.width/2,r.y+r.height/2),h=Zt(l,d)+Zt(l,u)+Math.max(r.width,r.height)*2,g=Cq(r,Qe(l,Tt(tr(Hi(Ye(f,l)),h),l)),n.gap).sort((U,y)=>F2(U,l)-F2(y,l));g.length>1?c=g[0]:g.length===1?c=f:c=d}return je.pointFromAbsoluteCoords(e,c,i)},t9=(e,t,n,r)=>{let i=[t.x,t.y,t.x+t.width,t.y+t.height],s=V2(e,t,n),o=P(i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2),a=pe(s,o,-t.angle);return{fixedPoint:z7([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},QB=(e,t,n)=>{if(t==null||n==null)return t;let{width:r,height:i}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(Wb(e,r,i),t.gap*(r<i?r/s:i/o)));return{...t,gap:a}},kp=(e,t,n,r,i)=>Ya(Yq(e,t,n),r,n,i,Fe(e),Fe(e)),Yq=(e,t,n)=>{let r=t==="start"?0:-1;return Xa(je.getPointAtIndexGlobalCoordinates(e,r,n))},Zq=(e,t,n,r)=>{let i=new Set,s=new Set,o=r==="duplicatesServeAsOld",a=new Map([...n].map(([l,f])=>[f,l]));t.forEach(l=>{let{boundElements:f}=l;if(f!=null&&f.length>0&&(f.forEach(c=>{o&&!n.has(c.id)&&i.add(c.id)}),s.add(n.get(l.id))),Xl(l)){if(l.startBinding!=null){let{elementId:c}=l.startBinding;o&&!n.has(c)&&s.add(c)}if(l.endBinding!=null){let{elementId:c}=l.endBinding;o&&!n.has(c)&&s.add(c)}(l.startBinding!=null||l.endBinding!=null)&&i.add(n.get(l.id))}}),e.filter(({id:l})=>i.has(l)).forEach(l=>{let{startBinding:f,endBinding:c}=l;ye(l,{startBinding:JB(f,n),endBinding:JB(c,n)})}),e.filter(({id:l})=>s.has(l)).forEach(l=>{var d;let f=a.get(l.id),c=(d=e.find(({id:u})=>u===f))==null?void 0:d.boundElements;c&&c.length>0&&ye(l,{boundElements:c.map(u=>n.has(u.id)?{id:n.get(u.id),type:u.type}:u)})})},JB=(e,t)=>e==null?null:{...e,elementId:t.get(e.elementId)??e.elementId},qq=(e,t)=>{let n=ct(e);for(let r of t)Cp.unbindAffected(n,r,ye),Mp.unbindAffected(n,r,ye)},W2=(e,t,n=[])=>{if(!e)return null;let r=e.filter(i=>!t.has(i.id));return r.push(...n.map(i=>({id:i.id,type:i.type}))),r},r3=(e,{x:t,y:n},r,i,s)=>{let o=Wb(e,e.width,e.height,i),a=Kc(e,r);return LC(P(t,n),a,o)||s===!0&&d6(P(t,n),zl(e))},Wb=(e,t,n,r)=>{let i=r!=null&&r.value&&r.value<1?r.value:1,s=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*s,32),jT/i+BT)},MTe=(e,t,n)=>{let r=P(e.x+e.width/2,e.y+e.height/2);if(il(t,n))return 0;let i=pe(t,r,-e.angle),s=pe(n,r,-e.angle),o=Math.sign(Fr(Ye(s,t),Ye(s,r)))*-1,a=Qe(s,Tt(tr(Hi(Ye(s,i)),Math.max(e.width*2,e.height*2)),s)),l=e.type==="diamond"?[Qe(P(e.x+e.width/2,e.y),P(e.x+e.width/2,e.y+e.height)),Qe(P(e.x,e.y+e.height/2),P(e.x+e.width,e.y+e.height/2))]:[Qe(P(e.x,e.y),P(e.x+e.width,e.y+e.height)),Qe(P(e.x+e.width,e.y),P(e.x,e.y+e.height))],f=e.type==="diamond"?[Qe(P(e.x+e.width/2,e.y-e.height),P(e.x+e.width/2,e.y+e.height*2)),Qe(P(e.x-e.width,e.y+e.height/2),P(e.x+e.width*2,e.y+e.height/2))]:[Qe(P(e.x-e.width,e.y-e.height),P(e.x+e.width*2,e.y+e.height*2)),Qe(P(e.x+e.width*2,e.y-e.height),P(e.x-e.width,e.y+e.height*2))];return[$2(a,f[0]),$2(a,f[1])].filter(c=>c!==null).sort((c,d)=>F2(c,n)-F2(d,n)).map((c,d)=>o*Zt(r,c)/(e.type==="diamond"?Zt(l[d][0],l[d][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((c,d)=>Math.abs(c)-Math.abs(d))[0]??0},ATe=(e,t,n)=>{let r=P(e.x+e.width/2,e.y+e.height/2);if(t===0)return r;let i=(e.type==="diamond"?[P(e.x,e.y+e.height/2),P(e.x+e.width/2,e.y),P(e.x+e.width,e.y+e.height/2),P(e.x+e.width/2,e.y+e.height)]:[P(e.x,e.y),P(e.x+e.width,e.y),P(e.x+e.width,e.y+e.height),P(e.x,e.y+e.height)]).map(o=>Tt(tr(Ye(o,r),Math.abs(t)),r)).map(o=>pe(o,r,e.angle)),s=[Fr(Ye(n,i[0]),Ye(i[1],i[0]))>0&&(t>0?Fr(Ye(n,i[1]),Ye(i[2],i[1]))<0:Fr(Ye(n,i[3]),Ye(i[0],i[3]))<0),Fr(Ye(n,i[1]),Ye(i[2],i[1]))>0&&(t>0?Fr(Ye(n,i[2]),Ye(i[3],i[2]))<0:Fr(Ye(n,i[0]),Ye(i[1],i[0]))<0),Fr(Ye(n,i[2]),Ye(i[3],i[2]))>0&&(t>0?Fr(Ye(n,i[3]),Ye(i[0],i[3]))<0:Fr(Ye(n,i[1]),Ye(i[2],i[1]))<0),Fr(Ye(n,i[3]),Ye(i[0],i[3]))>0&&(t>0?Fr(Ye(n,i[0]),Ye(i[1],i[0]))<0:Fr(Ye(n,i[2]),Ye(i[3],i[2]))<0)];return s[0]?t>0?i[1]:i[0]:s[1]?t>0?i[2]:i[1]:s[2]?t>0?i[3]:i[2]:t>0?i[0]:i[3]},TTe=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),F7=(e,t,n)=>{var r;sl(t)&&(((r=t.boundElements)==null?void 0:r.slice())??[]).forEach(({id:i})=>{n(e.get(i),"boundElements",i)})},$7=(e,t,n)=>{let r=[];if(t.frameId){let i=t.frameId;r.push(n(e.get(i),"frameId",i))}if(An(t)){let i=t.containerId;r.push(n(e.get(i),"containerId",i))}if(Et(t)){if(t.startBinding){let i=t.startBinding.elementId;r.push(n(e.get(i),"startBinding",i))}if(t.endBinding){let i=t.endBinding.elementId;r.push(n(e.get(i),"endBinding",i))}}return r},Cp=class{static unbindAffected(e,t,n){t&&$7(e,t,r=>{!r||r.isDeleted||F7(e,r,(i,s,o)=>{o===t.id&&n(r,{boundElements:W2(r.boundElements,new Set([o]))})})})}};Z(Cp,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||$7(e,t,(r,i)=>{var s,o;if(!r||r.isDeleted){n(t,{[i]:null});return}i!=="frameId"&&((s=r.boundElements)!=null&&s.find(a=>a.id===t.id)||(Et(t)&&n(r,{boundElements:W2(r.boundElements,new Set,new Array(t))}),Oe(t)&&((o=r.boundElements)!=null&&o.find(a=>a.type==="text")?n(t,{[i]:null}):n(r,{boundElements:W2(r.boundElements,new Set,new Array(t))}))))})});var Mp=class{static unbindAffected(e,t,n){t&&F7(e,t,r=>{!r||r.isDeleted||$7(e,r,(i,s,o)=>{o===t.id&&n(r,{[s]:null})})})}};Z(Mp,"rebindAffected",(e,t,n)=>{!t||t.isDeleted||F7(e,t,(r,i,s)=>{var o,a;if(!r||r.isDeleted){n(t,{boundElements:W2(t.boundElements,new Set([s]))});return}Oe(r)&&(((a=(((o=t.boundElements)==null?void 0:o.slice())??[]).reverse().find(l=>l.type==="text"))==null?void 0:a.id)===r.id?r.containerId!==t.id&&n(r,{containerId:t.id}):(r.containerId!==null&&n(r,{containerId:null}),n(t,{boundElements:W2(t.boundElements,new Set([r.id]))})))})});var HC=(e,t)=>{let[n,r]=z7(e);return pe(P(t.x+t.width*n,t.y+t.height*r),P(t.x+t.width/2,t.y+t.height/2),t.angle)},ITe=(e,t)=>{let n=e.startBinding&&t.get(e.startBinding.elementId),r=e.endBinding&&t.get(e.endBinding.elementId),i=n&&e.startBinding?HC(e.startBinding.fixedPoint,n):P(e.x+e.points[0][0],e.y+e.points[0][1]),s=r&&e.endBinding?HC(e.endBinding.fixedPoint,r):P(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[i,s]},NTe=(e,t)=>{let[n,r]=ITe(e,t);return[je.pointFromAbsoluteCoords(e,n,t),je.pointFromAbsoluteCoords(e,r,t)]},z7=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,RTe=(e,t)=>{let[n,r,i,s]=t,{x:o,y:a}=Ga({sceneX:n,sceneY:r},e),{x:l,y:f}=Ga({sceneX:i,sceneY:s},e);return l-o>e.width||f-a>e.height},Qq=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:r})=>{let i=(t.width-((r==null?void 0:r.right)??0))/2/n.value-e.x;i+=((r==null?void 0:r.left)??0)/2/n.value;let s=(t.height-((r==null?void 0:r.bottom)??0))/2/n.value-e.y;return s+=((r==null?void 0:r.top)??0)/2/n.value,{scrollX:i,scrollY:s}},G2=(e,t)=>{if(e=iRe(e),!e.length)return{scrollX:0,scrollY:0};let[n,r,i,s]=tn(e);RTe(t,[n,r,i,s])&&([n,r,i,s]=rTe(e,xn({clientX:t.scrollX,clientY:t.scrollY},t)));let o=(n+i)/2,a=(r+s)/2;return Qq({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},mf=e=>At(Jl(e,6),pT,mT),_Te=e=>At(Math.round(e),1,100),Jq=e=>At(Math.round(e),1,100),eQ=(e,t,n)=>{let r=n.reduce((i,s)=>(s.groupIds.includes(e)&&(i[s.id]=!0),i),{});return Object.keys(r).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...r}}},is=function(){let e=null,t=null,n=null,r=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;let f={};for(let u of s){let h=u.groupIds;if(a.editingGroupId){let g=h.indexOf(a.editingGroupId);g>-1&&(h=h.slice(0,g))}if(h.length>0){let g=h[h.length-1];f[g]=!0}}let c={},d=o.reduce((u,h)=>{if(h.isDeleted)return u;let g=h.groupIds.find(U=>f[U]);return g&&(u[h.id]=!0,Array.isArray(c[g])?c[g].push(h.id):c[g]=[h.id]),u},{});for(let u of Object.keys(c))c[u].length<2&&f[u]&&(f[u]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:f,selectedElementIds:Kt({...a.selectedElementIds,...d},l)},n},i=(s,o,a,l)=>{let f=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):wt(o,s);return f.length?r(f,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:Kt(s.selectedElementIds,a)}};return i.clearCache=()=>{t=null,e=null,n=null},i}(),tQ=(e,t)=>nQ(e,t)!=null,nQ=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),Eh=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),rQ=(e,t)=>{let n={...t,selectedGroupIds:{}};for(let r of e){let i=r.groupIds;if(t.editingGroupId){let s=i.indexOf(t.editingGroupId);s>-1&&(i=i.slice(0,s))}if(i.length>0){let s=i[i.length-1];n={...n,...eQ(s,n,e)}}}return n.selectedGroupIds},PTe=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),X2=(e,t)=>e.groupIds.includes(t),Cn=(e,t)=>{let n=[];for(let r of e.values())X2(r,t)&&n.push(r);return n},DTe=(e,t)=>e.groupIds.find(n=>t[n]),LTe=(e,t,n)=>{let r=[...e],i=t?e.indexOf(t):-1,s=i>-1?i:e.length;for(let o=0;o<s;o++)r[o]=n(r[o]);return r},OTe=(e,t,n)=>{let r=[...e],i=n?r.indexOf(n):-1,s=i>-1?i:r.length;return r.splice(s,0,t),r},jTe=(e,t)=>e.filter(n=>!t[n]),H7=(e,t)=>{let n=new Map;return e.forEach(r=>{let i=r.groupIds.length===0?r.id:r.groupIds[r.groupIds.length-1],s=n.get(i)||[],o=xt(r,t);o&&s.push(o),n.set(i,[...s,r])}),Array.from(n.values())},BTe=e=>{let t=new Set;for(let[,n]of e)if(!n.isDeleted)for(let r of n.groupIds??[])t.add(r);return t},iQ=e=>{let t=e.flatMap(i=>i.groupIds),n=new Map,r=0;for(let i of t)n.set(i,(n.get(i)??0)+1),n.get(i)>r&&(r=n.get(i));return r===e.length},p6=e=>e.groupIds.length>0,FTe=8,eF=99999,V7=e=>FTe/e,As=class{};Z(As,"referenceSnapPoints",null),Z(As,"visibleGaps",null),Z(As,"setReferenceSnapPoints",e=>{As.referenceSnapPoints=e}),Z(As,"getReferenceSnapPoints",()=>As.referenceSnapPoints),Z(As,"setVisibleGaps",e=>{As.visibleGaps=e}),Z(As,"getVisibleGaps",()=>As.visibleGaps),Z(As,"destroy",()=>{As.referenceSnapPoints=null,As.visibleGaps=null});var Hc=As,K2=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,M0=({event:e,app:t,selectedElements:n})=>e?t.state.objectsSnapModeEnabled&&!e[Q.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[Q.CTRL_OR_CMD]&&!K2(t):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,$Te=(e,t,n=.01)=>Math.abs(e-t)<=n,Y2=(e,t,{omitCenter:n,boundingBoxCorners:r,dragOffset:i}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){let o=e[0],[a,l,f,c,d,u]=gt(o,t);i&&(a+=i.x,f+=i.x,d+=i.x,l+=i.y,c+=i.y,u+=i.y);let h=(f-a)/2,g=(c-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!r){let U=pe(P(a,l+g),P(d,u),o.angle),y=pe(P(a+h,l),P(d,u),o.angle),x=pe(P(f,l+g),P(d,u),o.angle),w=pe(P(a+h,c),P(d,u),o.angle),E=P(d,u);s=n?[U,y,x,w]:[U,y,x,w,E]}else{let U=pe(P(a,l),P(d,u),o.angle),y=pe(P(f,l),P(d,u),o.angle),x=pe(P(a,c),P(d,u),o.angle),w=pe(P(f,c),P(d,u),o.angle),E=P(d,u);s=n?[U,y,x,w]:[U,y,x,w,E]}}else if(e.length>1){let[o,a,l,f]=LT(e,i??{x:0,y:0}),c=l-o,d=f-a,u=P(o,a),h=P(l,a),g=P(o,f),U=P(l,f),y=P(o+c/2,a+d/2);s=n?[u,h,g,U]:[u,h,g,U,y]}return s.map(o=>P(zn(o[0]),zn(o[1])))},sQ=(e,t,n,r)=>{let i=t.filter(s=>at(s)).map(s=>s.id);return JQ(e,t,n,r).filter(s=>!(s.frameId&&i.includes(s.frameId)))},zTe=(e,t,n,r)=>{let i=sQ(e,t,n,r),s=H7(i,r).filter(d=>!(d.length===1&&An(d[0]))).map(d=>tn(d).map(u=>zn(u))),o=s.sort((d,u)=>d[0]-u[0]),a=[],l=0;e:for(let d=0;d<o.length;d++){let u=o[d];for(let h=d+1;h<o.length;h++){if(++l>eF)break e;let g=o[h],[,U,y,x]=u,[w,E,,S]=g;y<w&&G4(ji(U,x),ji(E,S))&&a.push({startBounds:u,endBounds:g,startSide:[P(y,U),P(y,x)],endSide:[P(w,E),P(w,S)],length:w-y,overlap:X4(ji(U,x),ji(E,S))})}}let f=s.sort((d,u)=>d[1]-u[1]),c=[];l=0;e:for(let d=0;d<f.length;d++){let u=f[d];for(let h=d+1;h<f.length;h++){if(++l>eF)break e;let g=f[h],[U,,y,x]=u,[w,E,S]=g;x<E&&G4(ji(U,y),ji(w,S))&&c.push({startBounds:u,endBounds:g,startSide:[P(U,x),P(y,x)],endSide:[P(w,E),P(S,E)],length:E-x,overlap:X4(ji(U,y),ji(w,S))})}}return{horizontalGaps:a,verticalGaps:c}},tF=(e,t,n,r,i,s,o)=>{if(!M0({app:n,event:r,selectedElements:e}))return[];if(e.length===0)return[];let a=Hc.getVisibleGaps();if(a){let{horizontalGaps:l,verticalGaps:f}=a,[c,d,u,h]=LT(e,t).map(y=>zn(y)),g=(c+u)/2,U=(d+h)/2;for(let y of l){if(!G4(ji(d,h),y.overlap))continue;let x=y.startSide[0][0]+y.length/2,w=zn(x-g);if(y.length>u-c&&Math.abs(w)<=o.x){Math.abs(w)<o.x&&(i.length=0),o.x=Math.abs(w);let R={type:"gap",direction:"center_horizontal",gap:y,offset:w};i.push(R);continue}let[,,E]=y.endBounds,S=c-E,M=zn(y.length-S);if(Math.abs(M)<=o.x){Math.abs(M)<o.x&&(i.length=0),o.x=Math.abs(M);let R={type:"gap",direction:"side_right",gap:y,offset:M};i.push(R);continue}let[A,,,]=y.startBounds,C=A-u,I=zn(C-y.length);if(Math.abs(I)<=o.x){Math.abs(I)<o.x&&(i.length=0),o.x=Math.abs(I);let R={type:"gap",direction:"side_left",gap:y,offset:I};i.push(R);continue}}for(let y of f){if(!G4(ji(c,u),y.overlap))continue;let x=y.startSide[0][1]+y.length/2,w=zn(x-U);if(y.length>h-d&&Math.abs(w)<=o.y){Math.abs(w)<o.y&&(s.length=0),o.y=Math.abs(w);let R={type:"gap",direction:"center_vertical",gap:y,offset:w};s.push(R);continue}let[,E,,]=y.startBounds,S=E-h,M=zn(S-y.length);if(Math.abs(M)<=o.y){Math.abs(M)<o.y&&(s.length=0),o.y=Math.abs(M);let R={type:"gap",direction:"side_top",gap:y,offset:M};s.push(R);continue}let[,,,A]=y.endBounds,C=zn(d-A),I=y.length-C;if(Math.abs(I)<=o.y){Math.abs(I)<o.y&&(s.length=0),o.y=Math.abs(I);let R={type:"gap",direction:"side_bottom",gap:y,offset:I};s.push(R);continue}}}},HTe=(e,t,n,r)=>{let i=sQ(e,t,n,r);return H7(i,r).filter(s=>!(s.length===1&&An(s[0]))).flatMap(s=>Y2(s,r))},m6=(e,t,n,r,i,s,o)=>{if(!M0({app:n,event:r,selectedElements:e})||e.length===0&&t.length===0)return[];let a=Hc.getReferenceSnapPoints();if(a)for(let l of t)for(let f of a){let c=f[0]-l[0],d=f[1]-l[1];Math.abs(c)<=o.x&&(Math.abs(c)<o.x&&(i.length=0),i.push({type:"point",points:[l,f],offset:c}),o.x=Math.abs(c)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,f],offset:d}),o.y=Math.abs(d))}},VTe=(e,t,n,r,i)=>{var y,x;let s=n.state,o=wt(e,s);if(!M0({app:n,event:r,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=zn(t.x),t.y=zn(t.y);let a=[],l=[],f=V7(s.zoom.value),c={x:f,y:f},d=Y2(o,i,{dragOffset:t});m6(o,d,n,r,a,l,c),tF(o,t,n,r,a,l,c);let u={x:((y=a[0])==null?void 0:y.offset)??0,y:((x=l[0])==null?void 0:x.offset)??0};c.x=0,c.y=0,a.length=0,l.length=0;let h={x:zn(t.x+u.x),y:zn(t.y+u.y)};m6(o,Y2(o,i,{dragOffset:h}),n,r,a,l,c),tF(o,h,n,r,a,l,c);let g=FT(a,l),U=GTe(o,h,[...a,...l].filter(w=>w.type==="gap"));return{snapOffset:u,snapLines:[...g,...U]}},zn=e=>Math.round(e*10**6)/10**6,nF=e=>{let t=new Map;for(let n of e){let r=n.join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},FT=(e,t)=>{let n={},r={};if(e.length>0){for(let i of e)if(i.type==="point"){let s=zn(i.points[0][0]);n[s]||(n[s]=[]),n[s].push(...i.points.map(o=>P(zn(o[0]),zn(o[1]))))}}if(t.length>0){for(let i of t)if(i.type==="point"){let s=zn(i.points[0][1]);r[s]||(r[s]=[]),r[s].push(...i.points.map(o=>P(zn(o[0]),zn(o[1]))))}}return Object.entries(n).map(([i,s])=>({type:"points",points:nF(s.map(o=>P(Number(i),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(r).map(([i,s])=>({type:"points",points:nF(s.map(o=>P(o[0],Number(i))).sort((o,a)=>o[0]-a[0]))})))},WTe=e=>{let t=new Map;for(let n of e){let r=n.points.flat().map(i=>[zn(i)]).join(",");t.has(r)||t.set(r,n)}return Array.from(t.values())},GTe=(e,t,n)=>{let[r,i,s,o]=LT(e,t),a=[];for(let l of n){let[f,c,d,u]=l.gap.startBounds,[h,g,U,y]=l.gap.endBounds,x=X4(ji(i,o),l.gap.overlap),w=X4(ji(r,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[P(l.gap.startSide[0][0],E),P(r,E)]},{type:"gap",direction:"horizontal",points:[P(s,E),P(l.gap.endSide[0][0],E)]})}break}case"center_vertical":{if(w){let E=(w[0]+w[1])/2;a.push({type:"gap",direction:"vertical",points:[P(E,l.gap.startSide[0][1]),P(E,i)]},{type:"gap",direction:"vertical",points:[P(E,o),P(E,l.gap.endSide[0][1])]})}break}case"side_right":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[P(d,E),P(h,E)]},{type:"gap",direction:"horizontal",points:[P(U,E),P(r,E)]})}break}case"side_left":{if(x){let E=(x[0]+x[1])/2;a.push({type:"gap",direction:"horizontal",points:[P(s,E),P(f,E)]},{type:"gap",direction:"horizontal",points:[P(d,E),P(h,E)]})}break}case"side_top":{if(w){let E=(w[0]+w[1])/2;a.push({type:"gap",direction:"vertical",points:[P(E,o),P(E,c)]},{type:"gap",direction:"vertical",points:[P(E,u),P(E,g)]})}break}case"side_bottom":{if(w){let E=(w[0]+w[1])/2;a.push({type:"gap",direction:"vertical",points:[P(E,u),P(E,g)]},{type:"gap",direction:"vertical",points:[P(E,y),P(E,i)]})}break}}}return WTe(a.map(l=>({...l,points:l.points.map(f=>P(zn(f[0]),zn(f[1])))})))},rF=(e,t,n,r,i,s)=>{var A,C;if(!M0({event:r,selectedElements:e,app:n})||e.length===0||e.length===1&&!$Te(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,f]=tn(t);s&&(s.includes("e")?l+=i.x:s.includes("w")&&(o+=i.x),s.includes("n")?a+=i.y:s.includes("s")&&(f+=i.y));let c=[];if(s)switch(s){case"e":{c.push(P(l,a),P(l,f));break}case"w":{c.push(P(o,a),P(o,f));break}case"n":{c.push(P(o,a),P(l,a));break}case"s":{c.push(P(o,f),P(l,f));break}case"ne":{c.push(P(l,a));break}case"nw":{c.push(P(o,a));break}case"se":{c.push(P(l,f));break}case"sw":{c.push(P(o,f));break}}let d=V7(n.state.zoom.value),u={x:d,y:d},h=[],g=[];m6(t,c,n,r,h,g,u);let U={x:((A=h[0])==null?void 0:A.offset)??0,y:((C=g[0])==null?void 0:C.offset)??0};u.x=0,u.y=0,h.length=0,g.length=0;let[y,x,w,E]=tn(e).map(I=>zn(I)),S=[P(y,x),P(y,E),P(w,x),P(w,E)];m6(e,S,n,r,h,g,u);let M=FT(h,g);return{snapOffset:U,snapLines:M}},XTe=(e,t,n,r,i,s)=>{var g,U;if(!M0({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};let o=[P(r.x+i.x,r.y+i.y)],a=V7(t.state.zoom.value),l={x:a,y:a},f=[],c=[];m6([e],o,t,n,f,c,l);let d={x:((g=f[0])==null?void 0:g.offset)??0,y:((U=c[0])==null?void 0:U.offset)??0};l.x=0,l.y=0,f.length=0,c.length=0;let u=Y2([e],s,{boundingBoxCorners:!0,omitCenter:!0});m6([e],u,t,n,f,c,l);let h=FT(f,c);return{snapOffset:d,snapLines:h}},KTe=(e,t,n,r,i)=>{if(!M0({event:r,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};let s=JQ(e,[],t.state,i),o=V7(t.state.zoom.value),a={x:o,y:o},l=[],f=[];for(let c of s){let d=Y2([c],i);for(let u of d){let h=u[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(f.length=0),f.push({type:"pointer",points:[u,P(u[0],n.y)],direction:"vertical"}),a.x=h);let g=u[1]-n.y;Math.abs(g)<=Math.abs(a.y)&&(Math.abs(g)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[u,P(n.x,u[1])],direction:"horizontal"}),a.y=g)}}return{originOffset:{x:f.length>0?f[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...f,...l]}},YTe=e=>e===$r.rectangle||e===$r.ellipse||e===$r.diamond||e===$r.frame||e===$r.magicframe||e===$r.image||e===$r.text,Ar=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t],Ud={version:null,points:[],zoom:null},cr=class Ct{constructor(t){Z(this,"elementId"),Z(this,"selectedPointsIndices"),Z(this,"pointerDownState"),Z(this,"isDragging"),Z(this,"lastUncommittedPoint"),Z(this,"pointerOffset"),Z(this,"startBindingElement"),Z(this,"endBindingElement"),Z(this,"hoverPointIndex"),Z(this,"segmentMidPointHoveredCoords"),Z(this,"elbowed"),this.elementId=t.id,il(t.points[0],P(0,0))||console.error("Linear element is not normalized",Error().stack),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=Fe(t)&&t.elbowed}static getElement(t,n){return n.get(t)||null}static handleBoxSelection(t,n,r,i){if(!n.editingLinearElement||!n.selectionElement)return!1;let{editingLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=Ct.getElement(a,i);if(!l)return!1;let[f,c,d,u]=gt(n.selectionElement,i),h=Ct.getPointsGlobalCoordinates(l,i).reduce((g,U,y)=>((U[0]>=f&&U[0]<=d&&U[1]>=c&&U[1]<=u||t.shiftKey&&(o!=null&&o.includes(y)))&&g.push(y),g),[]).filter(g=>!(Fe(l)&&g!==0&&g!==l.points.length-1));r({editingLinearElement:{...s,selectedPointsIndices:h.length?h:null}})}static handlePointDragging(t,n,r,i,s,o,a){var g;if(!o)return!1;let{elementId:l}=o,f=a.getNonDeletedElementsMap(),c=Ct.getElement(l,f);if(!c||Fe(c)&&!o.pointerDownState.lastClickedIsEndPoint&&o.pointerDownState.lastClickedPoint!==0)return!1;let d=Fe(c)?(g=o.selectedPointsIndices)==null?void 0:g.reduce((U,y)=>y===0?[0,U[1]]:[U[0],c.points.length-1],[!1,!1]).filter(U=>typeof U=="number"):o.selectedPointsIndices,u=Fe(c)?o.pointerDownState.lastClickedPoint>0?c.points.length-1:0:o.pointerDownState.lastClickedPoint,h=c.points[u];if(d&&h){if($5(t)&&d.length===1&&c.points.length>1){let U=d[0],y=c.points[U===0?1:U-1],[x,w]=Ct._getShiftLockedDelta(c,f,y,P(r,i),t[Q.CTRL_OR_CMD]?null:n.getEffectiveGridSize());Ct.movePoints(c,[{index:U,point:P(x+y[0],w+y[1]),isDragging:U===u}])}else{let U=Ct.createPointAt(c,f,r-o.pointerOffset.x,i-o.pointerOffset.y,t[Q.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),y=U[0]-h[0],x=U[1]-h[1];Ct.movePoints(c,d.map(w=>{let E=w===u?Ct.createPointAt(c,f,r-o.pointerOffset.x,i-o.pointerOffset.y,t[Q.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):P(c.points[w][0]+y,c.points[w][1]+x);return{index:w,point:E,isDragging:w===u}}))}if(xt(c,f)&&Gb(c,f,!1),Xl(c,!1)){let U=[];d[0]===0&&U.push(Xa(Ct.getPointGlobalCoordinates(c,c.points[0],f)));let y=d[d.length-1];y===c.points.length-1&&U.push(Xa(Ct.getPointGlobalCoordinates(c,c.points[y],f))),U.length&&s(c,U)}return!0}return!1}static handlePointerUp(t,n,r,i){var h;let s=i.getNonDeletedElementsMap(),o=i.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:f,pointerDownState:c}=n,d=Ct.getElement(a,s);if(!d)return n;let u={};if(f&&l){for(let g of l)if(g===0||g===d.points.length-1){Cf(d.points,r.zoom.value)&&Ct.movePoints(d,[{index:g,point:g===0?d.points[d.points.length-1]:d.points[0]}]);let U=$u(r)?Ya(Xa(Ct.getPointAtIndexGlobalCoordinates(d,g,s)),o,s,r.zoom,Fe(d),Fe(d)):null;u[g===0?"startBindingElement":"endBindingElement"]=U}}return{...n,...u,selectedPointsIndices:f||t.shiftKey?!f&&t.shiftKey&&((h=c.prevSelectedPointsIndices)!=null&&h.includes(c.lastClickedPoint))?l&&l.filter(g=>g!==c.lastClickedPoint):l:l!=null&&l.includes(c.lastClickedPoint)?[c.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,r,i,s){if(Fe(t))return i>=0&&i<t.points.length?Zt(n,r)*s.value<Ct.POINT_HANDLE_SIZE/2:!1;let o=Zt(n,r);return t.points.length>2&&t.roundness&&(o=IAe(t,r)),o*s.value<Ct.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,r,i,s){let o=$b(n,r);if(t.points.length>2&&t.roundness){let a=Aq(t,t.points[i]);if(a){let l=NAe(t,t.points[i],.5);o=Ct.getPointGlobalCoordinates(t,Tq(a[0],a[1],a[2],a[3],l),s)}}return o}static getSegmentMidPointIndex(t,n,r,i){let s=Ct.getElement(t.elementId,i);if(!s)return-1;let o=Ct.getEditorMidPoints(s,i,n),a=0;for(;a<o.length;){if(Ct.arePointsEqual(r,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,r,i,s,o){var I;let a=n.state,l=o.getNonDeletedElementsMap(),f=o.getNonDeletedElements(),c={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return c;let{elementId:d}=s,u=Ct.getElement(d,l);if(!u)return c;let h=Ct.getSegmentMidpointHitCoords(s,i,a,l),g=null;if(h)g=Ct.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&a.editingLinearElement)return s.lastUncommittedPoint==null&&(ye(u,{points:[...u.points,Ct.createPointAt(u,l,i.x,i.y,t[Q.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),c.didAddPoint=!0),r.shouldCaptureIncrement(),c.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:h,index:g,added:!1}},selectedPointsIndices:[u.points.length-1],lastUncommittedPoint:null,endBindingElement:Ya(i,f,l,n.state.zoom,s.elbowed)},c.didAddPoint=!0,c;let U=Ct.getPointIndexUnderCursor(u,l,a.zoom,i.x,i.y);if(U>=0||h)c.hitElement=u;else{let{startBindingElement:R,endBindingElement:L}=s;$u(a)&&Xl(u)&&B7(u,R,L,l,o)}let[y,x,w,E]=gt(u,l),S=(y+w)/2,M=(x+E)/2,A=U>-1&&pe(P(u.x+u.points[U][0],u.y+u.points[U][1]),P(S,M),u.angle),C=U>-1||t.shiftKey?t.shiftKey||(I=s.selectedPointsIndices)!=null&&I.includes(U)?ZTe([...s.selectedPointsIndices||[],U]):[U]:null;return c.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:U,lastClickedIsEndPoint:U===u.points.length-1,origin:{x:i.x,y:i.y},segmentMidpoint:{value:h,index:g,added:!1}},selectedPointsIndices:C,pointerOffset:A?{x:i.x-A[0],y:i.y-A[1]}:{x:0,y:0}},c}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:il(t,n)}static handlePointerMove(t,n,r,i,s){let o=i.state;if(!o.editingLinearElement)return null;let{elementId:a,lastUncommittedPoint:l}=o.editingLinearElement,f=Ct.getElement(a,s);if(!f)return o.editingLinearElement;let{points:c}=f,d=c[c.length-1];if(!t.altKey)return d===l&&Ct.deletePoints(f,[c.length-1]),{...o.editingLinearElement,lastUncommittedPoint:null};let u;if($5(t)&&c.length>=2){let h=c[c.length-2],[g,U]=Ct._getShiftLockedDelta(f,s,h,P(n,r),t[Q.CTRL_OR_CMD]?null:i.getEffectiveGridSize());u=P(g+h[0],U+h[1])}else u=Ct.createPointAt(f,s,n-o.editingLinearElement.pointerOffset.x,r-o.editingLinearElement.pointerOffset.y,t[Q.CTRL_OR_CMD]||Fe(f)?null:i.getEffectiveGridSize());return d===l?Ct.movePoints(f,[{index:f.points.length-1,point:u}]):Ct.addPoints(f,[{point:u}]),{...o.editingLinearElement,lastUncommittedPoint:f.points[f.points.length-1]}}static getPointGlobalCoordinates(t,n,r){let[i,s,o,a]=gt(t,r),l=(i+o)/2,f=(s+a)/2,{x:c,y:d}=t;return pe(P(c+n[0],d+n[1]),P(l,f),t.angle)}static getPointsGlobalCoordinates(t,n){let[r,i,s,o]=gt(t,n),a=(r+s)/2,l=(i+o)/2;return t.points.map(f=>{let{x:c,y:d}=t;return pe(P(c+f[0],d+f[1]),P(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,r){let i=n<0?t.points.length+n:n,[s,o,a,l]=gt(t,r),f=(s+a)/2,c=(o+l)/2,d=t.points[i],{x:u,y:h}=t;return pe(d?P(u+d[0],h+d[1]):P(u,h),P(f,c),t.angle)}static pointFromAbsoluteCoords(t,n,r){if(Fe(t))return P(n[0]-t.x,n[1]-t.y);let[i,s,o,a]=gt(t,r),l=(i+o)/2,f=(s+a)/2,[c,d]=pe(P(n[0],n[1]),P(l,f),-t.angle);return P(c-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,r,i,s){let o=Ct.getPointsGlobalCoordinates(t,n),a=o.length;for(;--a>-1;){let l=o[a];if(Zt(P(i,s),P(l[0],l[1]))*r.value<Ct.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,r,i,s){let o=Ar(r,i,s),[a,l,f,c]=gt(t,n),d=(a+f)/2,u=(l+c)/2,[h,g]=pe(P(o[0],o[1]),P(d,u),-t.angle);return P(h-t.x,g-t.y)}static getNormalizedPoints(t){let{points:n}=t,r=n[0][0],i=n[0][1];return{points:n.map(s=>P(s[0]-r,s[1]-i)),x:t.x+r,y:t.y+i}}static normalizePoints(t){ye(t,Ct.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){Gi(t.editingLinearElement,"Not currently editing a linear element");let{selectedPointsIndices:r,elementId:i}=t.editingLinearElement,s=Ct.getElement(i,n);Gi(s,"The linear element does not exist in the provided Scene"),Gi(r!=null,"There are no selected points to duplicate");let{points:o}=s,a=[],l=!1,f=-1,c=o.reduce((d,u,h)=>{if(++f,d.push(u),r.includes(h)){let g=o[h+1];g||(l=!0),d.push(g?P((u[0]+g[0])/2,(u[1]+g[1])/2):P(u[0],u[1])),a.push(f+1),++f}return d},[]);if(ye(s,{points:c}),l){let d=s.points[s.points.length-1];Ct.movePoints(s,[{index:s.points.length-1,point:P(d[0]+30,d[1]+30)}])}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:a}}}static deletePoints(t,n){let r=0,i=0;if(n.includes(0)){let o=t.points.find((a,l)=>!n.includes(l));o&&(r=o[0],i=o[1])}let s=t.points.reduce((o,a,l)=>(n.includes(l)||o.push(o.length?P(a[0]-r,a[1]-i):P(0,0)),o),[]);Ct._updatePoints(t,s,r,i)}static addPoints(t,n){let r=[...t.points,...n.map(i=>i.point)];Ct._updatePoints(t,r,0,0)}static movePoints(t,n,r){var c,d,u;let{points:i}=t,[s,o]=((c=n.find(({index:h})=>h===0))==null?void 0:c.point)??P(0,0),[a,l]=P(s-i[0][0],o-i[0][1]),f=Fe(t)?[((d=n.find(h=>h.index===0))==null?void 0:d.point)??i[0],((u=n.find(h=>h.index===i.length-1))==null?void 0:u.point)??i[i.length-1]]:i.map((h,g)=>{var y;let U=((y=n.find(x=>x.index===g))==null?void 0:y.point)??h;return P(U[0]-a,U[1]-l)});Ct._updatePoints(t,f,a,l,r,{isDragging:n.reduce((h,g)=>h||g.isDragging===!0,!1)})}static shouldAddMidpoint(t,n,r,i){let s=Ct.getElement(t.elementId,i);if(s&&Fe(s)||!s)return!1;let{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;let a=t.pointerDownState.origin,l=Zt(P(a.x,a.y),P(n.x,n.y));return!(!r.editingLinearElement&&l<Uu/r.zoom.value)}static addMidpoint(t,n,r,i,s){let o=Ct.getElement(t.elementId,s);if(!o)return;let{segmentMidpoint:a}=t.pointerDownState,l={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},f=Ct.createPointAt(o,s,n.x,n.y,i&&!Fe(o)?r.getEffectiveGridSize():null),c=[...o.points.slice(0,a.index),f,...o.points.slice(a.index)];return ye(o,{points:c}),l.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:a.index},l.selectedPointsIndices=[a.index],l}static _updatePoints(t,n,r,i,s,o){if(Fe(t)){let a={};(s==null?void 0:s.startBinding)!==void 0&&(a.startBinding=s.startBinding!==null&&K4(s.startBinding)?s.startBinding:null),(s==null?void 0:s.endBinding)!==void 0&&(a.endBinding=s.endBinding!==null&&K4(s.endBinding)?s.endBinding:null),a.points=Array.from(n),ye(t,a,!0,{isDragging:o==null?void 0:o.isDragging})}else{let a=ZB(t,n),l=ZB(t,t.points),f=(a[0]+a[2])/2,c=(a[1]+a[3])/2,d=(l[0]+l[2])/2,u=(l[1]+l[3])/2,h=d-f,g=u-c,U=pe(P(r,i),P(h,g),t.angle);ye(t,{...s,points:n,x:t.x+U[0],y:t.y+U[1]})}}static _getShiftLockedDelta(t,n,r,i,s){let o=Ct.getPointGlobalCoordinates(t,r,n);if(Fe(t))return[i[0]-o[0],i[1]-o[1]];let[a,l]=Ar(i[0],i[1],s),{width:f,height:c}=QC(o[0],o[1],a,l);return pe(P(f,c),P(0,0),-t.angle)}static moveFixedSegment(t,n,r,i,s){let o=Ct.getElement(t.elementId,s);if(!o||!Fe(o))return t;if(n&&n>0&&n<o.points.length){let a=pf(Qh(Ye(o.points[n],o.points[n-1]))),l=(o.fixedSegments??[]).reduce((u,h)=>(u[h.index]=h,u),{});l[n]={index:n,start:P(a?o.points[n-1][0]:r-o.x,a?i-o.y:o.points[n-1][1]),end:P(a?o.points[n][0]:r-o.x,a?i-o.y:o.points[n][1])};let f=Object.values(l).sort((u,h)=>u.index-h.index),c=f.map(u=>u.index).reduce((u,h)=>h<n?u+1:u,0);ye(o,{fixedSegments:f});let d=P(o.x+(o.fixedSegments[c].start[0]+o.fixedSegments[c].end[0])/2,o.y+(o.fixedSegments[c].start[1]+o.fixedSegments[c].end[1])/2);return{...t,segmentMidPointHoveredCoords:d,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:o.fixedSegments[c].index,value:d}}}}return t}static deleteFixedSegment(t,n){var r;ye(t,{fixedSegments:(r=t.fixedSegments)==null?void 0:r.filter(i=>i.index!==n)}),ye(t,{},!0)}};Z(cr,"POINT_HANDLE_SIZE",10),Z(cr,"getEditorMidPoints",(e,t,n)=>{let r=xt(e,t);return!Fe(e)&&!n.editingLinearElement&&e.points.length>2&&!r?[]:(Ud.version===e.version&&Ud.zoom===n.zoom.value||cr.updateEditorMidPointsCache(e,t,n),Ud.points)}),Z(cr,"updateEditorMidPointsCache",(e,t,n)=>{let r=cr.getPointsGlobalCoordinates(e,t),i=0,s=[];for(;i<r.length-1;){if(cr.isSegmentTooShort(e,e.points[i],e.points[i+1],i,n.zoom)){s.push(null),i++;continue}let o=cr.getSegmentMidPoint(e,r[i],r[i+1],i+1,t);s.push(o),i++}Ud.points=s,Ud.version=e.version,Ud.zoom=n.zoom.value}),Z(cr,"getSegmentMidpointHitCoords",(e,t,n,r)=>{let{elementId:i}=e,s=cr.getElement(i,r);if(!s)return null;let o=cr.getPointIndexUnderCursor(s,r,n.zoom,t.x,t.y);if(!Fe(s)&&o>=0||cr.getPointsGlobalCoordinates(s,r).length>=3&&!n.editingLinearElement&&!Fe(s))return null;let a=(cr.POINT_HANDLE_SIZE+1)/n.zoom.value,l=e.segmentMidPointHoveredCoords;if(l&&Zt(P(l[0],l[1]),P(t.x,t.y))<=a)return l;let f=0,c=cr.getEditorMidPoints(s,r,n);for(;f<c.length;){if(c[f]!==null&&Zt(c[f],P(t.x,t.y))<=a)return c[f];f++}return null}),Z(cr,"getBoundTextElementPosition",(e,t,n)=>{let r=cr.getPointsGlobalCoordinates(e,n);r.length<2&&ye(t,{isDeleted:!0});let i=0,s=0;if(e.points.length%2===1){let o=Math.floor(e.points.length/2),a=cr.getPointGlobalCoordinates(e,e.points[o],n);i=a[0]-t.width/2,s=a[1]-t.height/2}else{let o=e.points.length/2-1,a=Ud.points[o];e.points.length===2&&(a=$b(r[0],r[1])),(!a||Ud.version!==e.version)&&(a=cr.getSegmentMidPoint(e,r[o],r[o+1],o+1,n)),i=a[0]-t.width/2,s=a[1]-t.height/2}return{x:i,y:s}}),Z(cr,"getMinMaxXYWithBoundText",(e,t,n,r)=>{let[i,s,o,a]=n,l=(i+o)/2,f=(s+a)/2,{x:c,y:d}=cr.getBoundTextElementPosition(e,r,t),u=c+r.width,h=d+r.height,g=P(l,f),U=pe(P(i,s),g,e.angle),y=pe(P(o,s),g,e.angle),x=pe(P(c,d),g,-e.angle),w=pe(P(u,d),g,-e.angle),E=pe(P(c,h),g,-e.angle),S=pe(P(u,h),g,-e.angle);return U[0]<y[0]&&U[1]>=y[1]?(i=Math.min(i,E[0]),o=Math.max(o,Math.max(w[0],S[0])),s=Math.min(s,x[1]),a=Math.max(a,S[1])):U[0]>=y[0]&&U[1]>y[1]?(i=Math.min(i,S[0]),o=Math.max(o,Math.max(x[0],w[0])),s=Math.min(s,E[1]),a=Math.max(a,w[1])):U[0]>=y[0]?(i=Math.min(i,w[0]),o=Math.max(o,E[0]),s=Math.min(s,S[1]),a=Math.max(a,x[1])):U[1]<=y[1]&&(i=Math.min(i,Math.min(w[0],x[0])),o=Math.max(o,S[0]),s=Math.min(s,w[1]),a=Math.max(a,E[1])),[i,s,o,a,l,f]}),Z(cr,"getElementAbsoluteCoords",(e,t,n=!1)=>{let r,i,s,o,a;if(e.points.length<2||!Hn.get(e)){let{minX:d,minY:u,maxX:h,maxY:g}=e.points.reduce((U,[y,x])=>(U.minY=Math.min(U.minY,x),U.minX=Math.min(U.minX,y),U.maxX=Math.max(U.maxX,y),U.maxY=Math.max(U.maxY,x),U),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});i=d+e.x,s=u+e.y,o=h+e.x,a=g+e.y}else{let d=Hn.generateElementShape(e,null),u=F0(d[0]),[h,g,U,y]=O7(u);i=h+e.x,s=g+e.y,o=U+e.x,a=y+e.y}let l=(i+o)/2,f=(s+a)/2;if(r=[i,s,o,a,l,f],!n)return r;let c=xt(e,t);return c&&(r=cr.getMinMaxXYWithBoundText(e,t,[i,s,o,a],c)),r});var je=cr,ZTe=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,r)=>n-r),t.length?t:null},g6={},n9=(e,t)=>{let n=g6[e]||(g6[e]={height:t});return n.height=t,n},oQ=e=>{g6[e]&&delete g6[e]},qTe=e=>{var t;return((t=g6[e])==null?void 0:t.height)??null},ms=(e,t,n,r=!0)=>{let i,s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:(t==null?void 0:t.angle)??e.angle};s.text=e.text,(t||!e.autoResize)&&(i=t?Tf(t,e):e.width,s.text=f1(e.originalText,ln(e),i));let o=Xi(s.text,ln(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){let a=G7(t,e),l=Tf(t,e);if(!Et(t)&&o.height>a){let u=Jh(o.height,t.type);ye(t,{height:u},r),n9(t.id,u)}if(o.width>l){let u=Jh(o.width,t.type);ye(t,{width:u},r)}let f={...e,...s},{x:c,y:d}=W7(t,f,n);s.x=c,s.y=d}ye(e,s,r)},aQ=(e,t,n)=>{let r=ct(e);t.forEach(i=>{let s=n.get(i.id),o=Af(i);if(o){let a=n.get(o);if(a){let l=r.get(s);l&&ye(l,{boundElements:(i.boundElements||[]).filter(c=>c.id!==a&&c.id!==o).concat({type:"text",id:a})});let f=r.get(a);f&&Oe(f)&&ye(f,{containerId:l?s:null})}}})},Gb=(e,t,n,r=!1)=>{if(!Af(e))return;oQ(e.id);let i=xt(e,t);if(i&&i.text){if(!e)return;let s=i.text,o=i.height,a=i.width,l=Tf(e,i),f=G7(e,i),c=e.height;if(r||n!=="n"&&n!=="s"){s&&(s=f1(i.originalText,ln(i),l));let d=Xi(s,ln(i),i.lineHeight);o=d.height,a=d.width}if(o>f){c=Jh(o,e.type);let d=c-e.height,u=!Et(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-d:e.y;ye(e,{height:c,y:u})}ye(i,{text:s,width:a,height:o}),Et(e)||ye(i,W7(e,i,t))}},W7=(e,t,n)=>{if(Et(e))return je.getBoundTextElementPosition(e,t,n);let r=QTe(e),i=G7(e,t),s=Tf(e,t),o,a;return t.verticalAlign===mo.TOP?a=r.y:t.verticalAlign===mo.BOTTOM?a=r.y+(i-t.height):a=r.y+(i/2-t.height/2),t.textAlign===B2.LEFT?o=r.x:t.textAlign===B2.RIGHT?o=r.x+(s-t.width):o=r.x+(s/2-t.width/2),{x:o,y:a}},Af=e=>{var t,n,r;return((t=e==null?void 0:e.boundElements)==null?void 0:t.length)&&((r=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(i=>i.type==="text"))==null?void 0:r.id)||null},xt=(e,t)=>{if(!e)return null;let n=Af(e);return n&&t.get(n)||null},di=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,QE=(e,t,n)=>{if(!Et(e))return{x:e.x+e.width/2,y:e.y+e.height/2};let r=je.getPointsGlobalCoordinates(e,n);if(r.length%2===1){let o=Math.floor(e.points.length/2),a=je.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}let i=e.points.length/2-1,s=je.getEditorMidPoints(e,n,t)[i];return s||(s=je.getSegmentMidPoint(e,r[i],r[i+1],i+1,n)),{x:s[0],y:s[1]}},QTe=e=>{let t=Nr,n=Nr;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},JTe=(e,t)=>!t||Et(t)?e.angle:t.angle,eIe=(e,t)=>e.some(n=>{if(An(n)){let r=di(n,t);return!Et(r)}return!1}),tIe=(e,t)=>e.some(n=>{if(An(n)){let r=di(n,t);return!Et(r)}return Oe(n)}),nIe=new Set(["rectangle","ellipse","diamond","arrow"]),rIe=e=>nIe.has(e.type),Jh=(e,t)=>{e=Math.ceil(e);let n=Nr*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Tf=(e,t)=>{let{width:n}=e;if(Et(e)){let r=((t==null?void 0:t.fontSize)??Bf)*jxe;return Math.max(Oxe*n,r)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Nr*2:e.type==="diamond"?Math.round(n/2)-Nr*2:n-Nr*2},G7=(e,t)=>{let{height:n}=e;return Et(e)?n-Nr*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Nr*2:e.type==="diamond"?Math.round(n/2)-Nr*2:n-Nr*2},iIe=(e,t=`

`)=>e.reduce((n,r)=>(Oe(r)&&n.push(r.text),n),[]).join(t),go=e=>(e=e.trim(),e&&exe.sanitizeUrl(qy(e))),lQ=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),cQ=e=>{if(e=go(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e},VC=[],_e=e=>(VC=VC.concat(e),e),fQ='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',sIe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',dQ='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',oIe=`data:${rt.svg},${encodeURIComponent(`${fQ}${dQ}</svg>`)}`,aIe=`data:${rt.svg},${encodeURIComponent(`${fQ}${sIe}${dQ}</svg>`)}`,Aa=e=>{e&&(e.style.cursor="")},on=(e,t)=>{e&&(e.style.cursor=t)},vl,iF,uQ=(e,t)=>{let n=()=>{let r=t===It.DARK;vl=document.createElement("canvas"),vl.theme=t,vl.height=20,vl.width=20;let i=vl.getContext("2d");i.lineWidth=1,i.beginPath(),i.arc(vl.width/2,vl.height/2,5,0,2*Math.PI),i.fillStyle=r?li.black:li.white,i.fill(),i.strokeStyle=r?li.white:li.black,i.stroke(),iF=vl.toDataURL(rt.svg)};(!vl||vl.theme!==t)&&n(),on(e,`url(${iF}) ${20/2} ${20/2}, auto`)},Al=(e,t)=>{if(e)if(t.activeTool.type==="selection")Aa(e);else if(o6(t))e.style.cursor=nn.GRAB;else if(Il(t))uQ(e,t.theme);else if(t.activeTool.type==="laser"){let n=t.theme===It.LIGHT?oIe:aIe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=nn.AUTO):e.style.cursor=nn.CROSSHAIR},lIe=new sZ(Date.now()),cIe=0,lc=()=>Math.floor(lIe.next()*2**31),fa=()=>kf()?`id${cIe++}`:cT(),al=(e,{x:t,y:n,strokeColor:r=qn.strokeColor,backgroundColor:i=qn.backgroundColor,fillStyle:s=qn.fillStyle,strokeWidth:o=qn.strokeWidth,strokeStyle:a=qn.strokeStyle,roughness:l=qn.roughness,opacity:f=qn.opacity,width:c=0,height:d=0,angle:u=0,groupIds:h=[],frameId:g=null,index:U=null,roundness:y=null,boundElements:x=null,link:w=null,locked:E=qn.locked,...S})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||c<-1e6||c>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:c,height:d,points:S.points}),{id:S.id||fa(),type:e,x:t,y:n,width:c,height:d,angle:u,strokeColor:r,backgroundColor:i,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:f,groupIds:h,frameId:g,index:U,roundness:y,seed:S.seed??lc(),version:S.version||1,versionNonce:S.versionNonce??0,isDeleted:!1,boundElements:x,updated:I6(),link:w,locked:E,customData:S.customData}),cc=e=>al(e.type,e),sF=e=>al("embeddable",e),fIe=e=>({...al("iframe",e)}),$T=e=>yt({...al("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),WC=e=>yt({...al("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),hQ=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),yo=e=>{let t=e.fontFamily||B0,n=e.fontSize||Bf,r=e.lineHeight||qh(t),i=f6(e.text),s=Xi(i,ln({fontFamily:t,fontSize:n}),r),o=e.textAlign||Bb,a=e.verticalAlign||O4,l=hQ({textAlign:o,verticalAlign:a},s),f={...al("text",e),text:i,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??i,autoResize:e.autoResize??!0,lineHeight:r};return yt(f,{})},dIe=(e,t,n)=>{let{width:r,height:i}=Xi(n,ln(e),e.lineHeight);e.autoResize||(r=e.width);let{textAlign:s,verticalAlign:o}=e,a,l;if(s==="center"&&o===mo.MIDDLE&&!e.containerId&&e.autoResize){let f=Xi(e.text,ln(e),e.lineHeight),c=hQ(e,{width:r-f.width,height:i-f.height});a=e.x-c.x,l=e.y-c.y}else{let[f,c,d,u]=gt(e,t),[h,g,U,y]=x0(e,r,i,!1),x=(f-h)/2,w=(c-g)/2,E=(d-U)/2,S=(u-y)/2;[a,l]=uIe({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,x,w,E,S)}return{width:r,height:i,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},uIe=(e,t,n,r,i,s,o,a)=>{let l=Math.cos(r),f=Math.sin(r);return e.e&&e.w?t+=i+o:e.e?(t+=i*(1+l),n+=i*f,t+=o*(1-l),n+=o*-f):e.w&&(t+=i*(1-l),n+=i*-f,t+=o*(1+l),n+=o*f),e.n&&e.s?n+=s+a:e.n?(t+=s*f,n+=s*(1-l),t+=a*-f,n+=a*(1+l)):(t+=s*-f,n+=s*(1+l),t+=a*f,n+=a*(1-l)),[t,n]},pQ=(e,t,n,r=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(r=f1(r,ln(e),t?Tf(t,e):e.width));let i=dIe(e,n,r);return{text:r,...i}},hIe=e=>({...al(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),Sh=e=>({...al(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),zT=e=>e.elbowed?{...al(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...al(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},mQ=e=>({...al("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),r9=(e,t=0)=>{if(e==null||typeof e!="object")return e;let n=Object.prototype.toString.call(e);if(n==="[object Object]"){let r=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(let i in e)if(e.hasOwnProperty(i)){if(t===0&&(i==="shape"||i==="canvas"))continue;r[i]=r9(e[i],t+1)}return r}if(Array.isArray(e)){let r=e.length,i=new Array(r);for(;r--;)i[r]=r9(e[r],t+1);return i}return vt.DEV&&n!=="[object Object]"&&n!=="[object Array]"&&n.startsWith("[object ")&&console.warn(`_deepCloneElement: unexpected object type ${n}. This value will not be cloned!`),e},d1=e=>r9(e),gQ=(e,t)=>{Object.defineProperty(e,$xe,{value:t,writable:!1,enumerable:!1})},i9=()=>fa(),bQ=(e,t,n,r)=>{let i=d1(n);return kf()&&gQ(i,n.id),i.id=i9(),i.boundElements=null,i.updated=I6(),i.seed=lc(),i.groupIds=LTe(i.groupIds,e,s=>(t.has(s)||t.set(s,i9()),t.get(s))),r&&(i=Object.assign(i,r)),i},UQ=(e,t)=>{let n=[],r=ct(e),i=new Map,s=a=>{if(i.has(a))return i.get(a);if(r.has(a)){let l=i9();return i.set(a,l),l}return null},o=new Map;for(let a of e){let l=r9(a);if(l.id=s(a.id),kf()&&gQ(l,a.id),t!=null&&t.randomizeSeed&&(l.seed=lc(),q7(l)),l.groupIds&&(l.groupIds=l.groupIds.map(f=>(o.has(f)||o.set(f,i9()),o.get(f)))),"containerId"in l&&l.containerId){let f=s(l.containerId);l.containerId=f}if("boundElements"in l&&l.boundElements&&(l.boundElements=l.boundElements.reduce((f,c)=>{let d=s(c.id);return d&&f.push({...c,id:d}),f},[])),"endBinding"in l&&l.endBinding){let f=s(l.endBinding.elementId);l.endBinding=f?{...l.endBinding,elementId:f}:null}if("startBinding"in l&&l.startBinding){let f=s(l.startBinding.elementId);l.startBinding=f?{...l.startBinding,elementId:f}:null}l.frameId&&(l.frameId=s(l.frameId)),n.push(l)}return n},HT=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:r,reconciliationContext:i})=>{let s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(let[l,f]of a.entries()){let c=a[l-1],d=a[l+1];if(GC(f,c,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&ca(e[l])){let u=e[l],h=xt(u,ct(e));h&&h.index<=u.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(u)}"`)}}if(s.length){let l=new IEe,f=[];if(i&&(f.push("Additional reconciliation context:"),f.push(i.localElements.map(c=>o(c))),f.push(i.remoteElements.map(c=>o(c)))),r||console.error(s.join(`

`),l.stack,e.map(c=>o(c)),...f),t)throw l}},pIe=e=>e.sort((t,n)=>oF(t)&&oF(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),fc=(e,t)=>{try{let n=mIe(e,t),r=yQ(e,n),i=e.map(s=>r.has(s)?{...s,...r.get(s)}:s);HT(i,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(let[s,o]of r)ye(s,o,!1)}catch{If(e)}return e},If=e=>{let t=gIe(e),n=yQ(e,t);for(let[r,i]of n)ye(r,i,!1);return e},mIe=(e,t)=>{let n=[],r=0;for(;r<e.length;)if(t.has(e[r].id)){let i=[r-1,r];for(;++r<e.length&&t.has(e[r].id);)i.push(r);i.push(r),n.push(i)}else r++;return n},gIe=e=>{let t=[],n,r,i=-1,s=0,o=f=>{var u;let c=e[i]?e[i].index:void 0,d=(u=e[f-1])==null?void 0:u.index;return!c&&d||c&&d&&d>c?[d,f-1]:[c,i]},a=f=>{var u;let c=e[s]?e[s].index:void 0;if(c&&f<s)return[c,s];let d=s;for(;++d<e.length;){let h=(u=e[d])==null?void 0:u.index;if(!c&&h||c&&h&&h>c)return[h,d]}return[void 0,d]},l=0;for(;l<e.length;){let f=e[l].index;if([n,i]=o(l),[r,s]=a(l),GC(f,n,r))l++;else{let c=[i,l];for(;++l<e.length;){let d=e[l].index,[u,h]=o(l),[g,U]=a(l);if(GC(d,u,g))break;[n,i]=[u,h],[r,s]=[g,U],c.push(l)}c.push(s),t.push(c)}}return t},GC=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,yQ=(e,t)=>{var r,i;let n=new Map;for(let s of t){let o=s.shift(),a=s.pop(),l=kC((r=e[o])==null?void 0:r.index,(i=e[a])==null?void 0:i.index,s.length);for(let f=0;f<s.length;f++){let c=e[s[f]];n.set(c,{index:l[f]})}}return n},oF=e=>!!e.index,br=class Sl{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,r,i){let s=r&&i!=="inserted"?r(t):t,o=r&&i!=="deleted"?r(n):n;return new Sl(s,o)}static calculate(t,n,r,i){if(t===n)return Sl.empty();let s={},o={};for(let f of this.distinctKeysIterator("full",t,n))s[f]=t[f],o[f]=n[f];let[a,l]=i?i(s,o):[s,o];return Sl.create(a,l,r)}static empty(){return new Sl({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,r){let i={...t};for(let s of Object.keys(r))delete i[s];return{...i,...n}}static mergeArrays(t,n,r,i){return Object.values(Sl.mergeObjects(Dc(t??[],i),Dc(n??[],i),Dc(r??[],i)))}static diffObjects(t,n,r,i){if(!(!t[r]&&!n[r])&&(typeof t[r]=="object"||typeof n[r]=="object")){let s=t[r]??{},o=n[r]??{},a=Sl.getLeftDifferences(s,o).reduce((f,c)=>(f[c]=i(s[c]),f),{}),l=Sl.getRightDifferences(s,o).reduce((f,c)=>(f[c]=i(o[c]),f),{});Object.keys(a).length||Object.keys(l).length?(Reflect.set(t,r,a),Reflect.set(n,r,l)):(Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r))}}static diffArrays(t,n,r,i){if(!(!t[r]&&!n[r])&&(Array.isArray(t[r])||Array.isArray(n[r]))){let s=Array.isArray(t[r])?t[r]:[],o=Array.isArray(n[r])?n[r]:[],a=Dc(Sl.getLeftDifferences(Dc(s,i),Dc(o,i))),l=Dc(Sl.getRightDifferences(Dc(s,i),Dc(o,i)));if(Object.keys(a).length||Object.keys(l).length){let f=s.filter(d=>a[i?i(d):String(d)]),c=o.filter(d=>l[i?i(d):String(d)]);Reflect.set(t,r,f),Reflect.set(n,r,c)}else Reflect.deleteProperty(t,r),Reflect.deleteProperty(n,r)}}static isLeftDifferent(t,n,r=!1){return!!this.distinctKeysIterator("left",t,n,r).next().value}static isRightDifferent(t,n,r=!1){return!!this.distinctKeysIterator("right",t,n,r).next().value}static getLeftDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("left",t,n,r))}static getRightDifferences(t,n,r=!1){return Array.from(this.distinctKeysIterator("right",t,n,r))}static*distinctKeysIterator(t,n,r,i=!1){if(n===r)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(r):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(r)])):Xh(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(let o of s){let a=n[o],l=r[o];if(a!==l){if(!i&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&ki(a,l))continue;yield o}}}},aF=class Ts{constructor(t){this.delta=t}static calculate(t,n){let r=br.calculate(t,n,void 0,Ts.postProcess);return new Ts(r)}static empty(){return new Ts(br.create({},{}))}inverse(){let t=br.create(this.delta.inserted,this.delta.deleted);return new Ts(t)}applyTo(t,n){try{let{selectedElementIds:r={},selectedGroupIds:i={}}=this.delta.deleted,{selectedElementIds:s={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...f}=this.delta.inserted,c=br.mergeObjects(t.selectedElementIds,s,r),d=br.mergeObjects(t.selectedGroupIds,o,i),u=a&&n.has(a)?new je(n.get(a)):null,h=l&&n.has(l)?new je(n.get(l)):null,g={...t,...f,selectedElementIds:c,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?u:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},U=this.filterInvisibleChanges(t,g,n);return[g,U]}catch(r){if(console.error("Couldn't apply appstate change",r),vt.DEV||vt.MODE===Fs.TEST)throw r;return[t,!1]}}isEmpty(){return br.isEmpty(this.delta)}static postProcess(t,n){try{br.diffObjects(t,n,"selectedElementIds",r=>!0),br.diffObjects(t,n,"selectedGroupIds",r=>r??!1)}catch(r){if(console.error("Couldn't postprocess appstate change deltas."),vt.DEV||vt.MODE===Fs.TEST)throw r}finally{return[t,n]}}filterInvisibleChanges(t,n,r){let i=s9(t),s=s9(n),o=br.isRightDifferent(Ts.stripElementsProps(i),Ts.stripElementsProps(s)),a=br.isRightDifferent(Ts.stripStandaloneProps(i),Ts.stripStandaloneProps(s));if(!o&&!a)return!1;let l={value:o};if(a){let f=br.getRightDifferences(Ts.stripStandaloneProps(i),Ts.stripStandaloneProps(s)),c=new Set;(f.includes("editingGroupId")||f.includes("selectedGroupIds"))&&(c=BTe(r));for(let d of f)switch(d){case"selectedElementIds":n[d]=Ts.filterSelectedElements(n[d],r,l);break;case"selectedGroupIds":n[d]=Ts.filterSelectedGroups(n[d],c,l);break;case"croppingElementId":{let U=n[d],y=U&&r.get(U);y&&!y.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":let u=n[d];u?c.has(u)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":let h=Ts.convertToAppStateKey(d),g=n[h];if(!g)l.value=!0;else{let U=r.get(g.elementId);U&&!U.isDeleted?l.value=!0:n[h]=null}break;default:Xh(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,r){let i=Object.keys(t);if(!i.length)return r.value=!0,t;let s={...t};for(let o of i){let a=n.get(o);a&&!a.isDeleted?r.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,r){if(!Object.keys(t).length)return r.value=!0,t;let i={...t};for(let s of Object.keys(i))n.has(s)?r.value=!0:delete i[s];return i}static stripElementsProps(t){let{editingGroupId:n,selectedGroupIds:r,selectedElementIds:i,editingLinearElementId:s,selectedLinearElementId:o,croppingElementId:a,...l}=t;return l}static stripStandaloneProps(t){let{name:n,viewBackgroundColor:r,...i}=t;return i}},Md=class Bn{constructor(t,n,r){this.added=t,this.removed=n,this.updated=r}static create(t,n,r,i={shouldRedistribute:!1}){let s;if(i.shouldRedistribute){let o=new Map,a=new Map,l=new Map,f=[...t,...n,...r];for(let[c,d]of f)this.satisfiesAddition(d)?o.set(c,d):this.satisfiesRemoval(d)?a.set(c,d):l.set(c,d);s=new Bn(o,a,l)}else s=new Bn(t,n,r);return(vt.DEV||vt.MODE===Fs.TEST)&&(Bn.validate(s,"added",this.satisfiesAddition),Bn.validate(s,"removed",this.satisfiesRemoval),Bn.validate(s,"updated",this.satisfiesUpdate)),s}static validate(t,n,r){for(let[i,s]of t[n].entries())if(!r(s))throw console.error(`Broken invariant for "${n}" delta, element "${i}", delta:`,s),new Error(`ElementsChange invariant broken for element "${i}".`)}static calculate(t,n){if(t===n)return Bn.empty();let r=new Map,i=new Map,s=new Map;for(let o of t.values())if(!n.get(o.id)){let a={...o,isDeleted:!1},l={isDeleted:!0},f=br.create(a,l,Bn.stripIrrelevantProps);i.set(o.id,f)}for(let o of n.values()){let a=t.get(o.id);if(!a){let l={isDeleted:!0},f={...o,isDeleted:!1},c=br.create(l,f,Bn.stripIrrelevantProps);r.set(o.id,c);continue}if(a.versionNonce!==o.versionNonce){let l=br.calculate(a,o,Bn.stripIrrelevantProps,Bn.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?r.set(o.id,l):i.set(o.id,l);continue}br.isEmpty(l)||s.set(o.id,l)}}return Bn.create(r,i,s)}static empty(){return Bn.create(new Map,new Map,new Map)}inverse(){let t=s=>{let o=new Map;for(let[a,l]of s.entries())o.set(a,br.create(l.inserted,l.deleted));return o},n=t(this.added),r=t(this.removed),i=t(this.updated);return Bn.create(r,n,i)}isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}applyLatestChanges(t){let n=a=>l=>{let f={};for(let c of Object.keys(l))switch(c){case"boundElements":f[c]=l[c];break;default:f[c]=a[c]}return f},r=a=>{let l=new Map;for(let[f,c]of a.entries()){let d=t.get(f);if(d){let u=br.create(c.deleted,c.inserted,n(d),"inserted");l.set(f,u)}else l.set(f,c)}return l},i=r(this.added),s=r(this.removed),o=r(this.updated);return Bn.create(i,s,o,{shouldRedistribute:!0})}applyTo(t,n){let r=aa(new Map(t)),i,s={containsVisibleDifference:!1,containsZindexDifference:!1};try{let o=Bn.createApplier(r,n,s),a=o(this.added),l=o(this.removed),f=o(this.updated),c=this.resolveConflicts(t,r);i=new Map([...a,...l,...f,...c])}catch(o){if(console.error("Couldn't apply elements change",o),vt.DEV||vt.MODE===Fs.TEST)throw o;return[t,!0]}try{Bn.redrawTextBoundingBoxes(r,i),r=Bn.reorderElements(r,i,s),Bn.redrawBoundArrows(r,i)}catch(o){if(console.error("Couldn't mutate elements after applying elements change",o),vt.DEV||vt.MODE===Fs.TEST)throw o}finally{return[r,s.containsVisibleDifference]}}static applyDelta(t,n,r={containsVisibleDifference:!0,containsZindexDifference:!0}){var o,a;let{boundElements:i,...s}=n.inserted;if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){let l=br.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,f=>f.id);Object.assign(s,{boundElements:l})}if(Yt(t)){let l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(s,{crop:l.inserted.crop??null})}if(!r.containsVisibleDifference){let{index:l,...f}=s,c=Bn.checkForVisibleDifference(t,f);r.containsVisibleDifference=c}return r.containsZindexDifference||(r.containsZindexDifference=n.deleted.index!==n.inserted.index),yt(t,s)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:br.isRightDifferent(t,n)}resolveConflicts(t,n){let r=new Map,i=(f,c)=>{let d=n.get(f.id);if(!d)return;let u;t.get(f.id)===d?u=yt(d,c):u=ye(d,c),r.set(u.id,u),n.set(u.id,u)};for(let[f]of this.removed)Bn.unbindAffected(t,n,f,i);for(let[f]of this.added)Bn.rebindAffected(t,n,f,i);for(let[f]of Array.from(this.updated).filter(([c,d])=>Object.keys({...d.deleted,...d.inserted}).find(u=>TTe.has(u)))){let c=n.get(f);!c||c.isDeleted||Bn.rebindAffected(t,n,f,i)}let s=new Map(Array.from(t).filter(([f])=>r.has(f))),{added:o,removed:a,updated:l}=Bn.calculate(s,r);for(let[f,c]of o)this.added.set(f,c);for(let[f,c]of a)this.removed.set(f,c);for(let[f,c]of l)this.updated.set(f,c);return r}static unbindAffected(t,n,r,i){let s=()=>t.get(r),o=()=>n.get(r);Cp.unbindAffected(n,s(),i),Cp.unbindAffected(n,o(),i),Mp.unbindAffected(n,s(),i),Mp.unbindAffected(n,o(),i)}static rebindAffected(t,n,r,i){let s=()=>t.get(r),o=()=>n.get(r);Cp.unbindAffected(n,s(),i),Cp.rebindAffected(n,o(),i),Mp.unbindAffected(n,s(),(a,l)=>{Oe(a)&&i(a,l)}),Mp.rebindAffected(n,o(),i)}static redrawTextBoundingBoxes(t,n){let r=new Map;for(let i of n.values()){if(An(i)){let{containerId:s}=i,o=s?t.get(s):void 0;o&&r.set(o.id,{container:o,boundText:i})}if(ca(i)){let s=Af(i),o=s?t.get(s):void 0;o&&r.set(i.id,{container:i,boundText:o})}}for(let{container:i,boundText:s}of r.values())i.isDeleted||s.isDeleted||ms(s,i,t,!1)}static redrawBoundArrows(t,n){for(let r of n.values())!r.isDeleted&&sl(r)&&zs(r,t,{changedElements:n})}static reorderElements(t,n,r){if(!r.containsZindexDifference)return t;let i=Array.from(t.values()),s=pIe([...i]),o=br.getRightDifferences(i,s,!0).reduce((a,l)=>{let f=i[Number(l)];return f&&n.has(f.id)&&a.set(f.id,f),a},new Map);return!r.containsVisibleDifference&&o.size&&(r.containsVisibleDifference=!0),ct(fc(s,o))}static postProcess(t,n){try{br.diffArrays(t,n,"boundElements",r=>r.id)}catch(r){if(console.error("Couldn't postprocess elements change deltas."),vt.DEV||vt.MODE===Fs.TEST)throw r}finally{return[t,n]}}static stripIrrelevantProps(t){let{id:n,updated:r,version:i,versionNonce:s,seed:o,...a}=t;return a}};Z(Md,"satisfiesAddition",({deleted:e,inserted:t})=>e.isDeleted===!0&&!t.isDeleted),Z(Md,"satisfiesRemoval",({deleted:e,inserted:t})=>!e.isDeleted&&t.isDeleted===!0),Z(Md,"satisfiesUpdate",({deleted:e,inserted:t})=>!!e.isDeleted==!!t.isDeleted),Z(Md,"createApplier",(e,t,n)=>{let r=Md.createGetter(e,t,n);return i=>Array.from(i.entries()).reduce((s,[o,a])=>{let l=r(o,a.inserted);if(l){let f=Md.applyDelta(l,a,n);e.set(f.id,f),s.set(f.id,f)}return s},new Map)}),Z(Md,"createGetter",(e,t,n)=>(r,i)=>{let s=e.get(r);return s||(s=t.get(r),s&&(n.containsZindexDifference=!0,(i.isDeleted===!1||i.isDeleted!==!0&&s.isDeleted===!1)&&(n.containsVisibleDifference=!0))),s});var lF=Md,Nl=class{constructor(){Z(this,"subscribers",[])}on(...e){let t=e.flat().filter(n=>typeof n=="function");return this.subscribers.push(...t),()=>this.off(t)}once(...e){let t=e.flat().filter(r=>typeof r=="function");t.push(()=>n());let n=this.on(...t);return n}off(...e){let t=e.flat();this.subscribers=this.subscribers.filter(n=>!t.includes(n))}trigger(...e){for(let t of this.subscribers)t(...e);return this}clear(){this.subscribers=[]}},xQ="__observedAppState",s9=e=>{var n,r;let t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((r=e.selectedLinearElement)==null?void 0:r.elementId)||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,xQ,{value:!0,enumerable:!1}),t},bIe=e=>!!Reflect.get(e,xQ),me={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"},UIe=class{constructor(e,t){this.elementsChange=e,this.appStateChange=t}},yIe=class{constructor(){Z(this,"onStoreIncrementEmitter",new Nl),Z(this,"scheduledActions",new Set),Z(this,"_snapshot",cF.empty()),Z(this,"shouldCaptureIncrement",()=>{this.scheduleAction(me.IMMEDIATELY)}),Z(this,"shouldUpdateSnapshot",()=>{this.scheduleAction(me.NEVER)}),Z(this,"scheduleAction",e=>{this.scheduledActions.add(e),this.satisfiesScheduledActionsInvariant()}),Z(this,"commit",(e,t)=>{try{this.scheduledActions.has(me.IMMEDIATELY)?this.captureIncrement(e,t):this.scheduledActions.has(me.NEVER)&&this.updateSnapshot(e,t)}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledActions=new Set}}),Z(this,"captureIncrement",(e,t)=>{let n=this.snapshot,r=this.snapshot.maybeClone(e,t);if(n!==r){let i=r.meta.didElementsChange?lF.calculate(n.elements,r.elements):lF.empty(),s=r.meta.didAppStateChange?aF.calculate(n.appState,r.appState):aF.empty();(!i.isEmpty()||!s.isEmpty())&&this.onStoreIncrementEmitter.trigger(new UIe(i,s)),this.snapshot=r}}),Z(this,"updateSnapshot",(e,t)=>{let n=this.snapshot.maybeClone(e,t);this.snapshot!==n&&(this.snapshot=n)}),Z(this,"filterUncomittedElements",(e,t)=>{for(let[n,r]of e.entries()){if(!t.get(n))continue;let i=this.snapshot.elements.get(n);i?i.version<r.version&&t.set(n,i):t.delete(n)}return t}),Z(this,"clear",()=>{this.snapshot=cF.empty(),this.scheduledActions=new Set}),Z(this,"satisfiesScheduledActionsInvariant",()=>{if(!(this.scheduledActions.size>=0&&this.scheduledActions.size<=3)){let e=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;if(console.error(e,this.scheduledActions.values()),vt.DEV||vt.MODE===Fs.TEST)throw new Error(e)}})}get snapshot(){return this._snapshot}set snapshot(e){this._snapshot=e}},cF=class XC{constructor(t,n,r={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){this.elements=t,this.appState=n,this.meta=r}static empty(){return new XC(new Map,s9(oc()),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}isEmpty(){return this.meta.isEmpty}maybeClone(t,n){let r=this.maybeCreateElementsSnapshot(t),i=this.maybeCreateAppStateSnapshot(n),s=!1,o=!1;return this.elements!==r&&(s=!0),this.appState!==i&&(o=!0),!s&&!o?this:new XC(r,i,{didElementsChange:s,didAppStateChange:o})}maybeCreateAppStateSnapshot(t){if(!t)return this.appState;let n=bIe(t)?t:s9(t);return this.detectChangedAppState(n)?n:this.appState}detectChangedAppState(t){return!ki(this.appState,t,{selectedElementIds:ki,selectedGroupIds:ki})}maybeCreateElementsSnapshot(t){return t?this.detectChangedElements(t)?this.createElementsSnapshot(t):this.elements:this.elements}detectChangedElements(t){if(this.elements===t)return!1;if(this.elements.size!==t.size)return!0;let n=Array.from(t.keys());for(let r=n.length-1;r>=0;r--){let i=this.elements.get(n[r]),s=t.get(n[r]);if(!i||!s||i.id!==s.id||i.versionNonce!==s.versionNonce)return!0}return!1}createElementsSnapshot(t){let n=new Map;for(let[r,i]of this.elements.entries())t.get(r)?n.set(r,i):n.set(r,yt(i,{isDeleted:!0}));for(let[r,i]of t.entries()){let s=n.get(r);(!s||s&&s.versionNonce!==i.versionNonce)&&n.set(r,d1(i))}return n}},wl=new Map,xIe=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,vIe=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,wIe=/^https:\/\/(?:www\.)?figma\.com/,fF=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,EIe=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,dF=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,SIe=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,kIe=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,CIe=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,uF=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,hF=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,MIe=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,KC=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com"]),pF=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com"]),z5=e=>`<html><body>${e}</body></html>`,Ap=e=>{if(!e)return null;if(wl.has(e))return wl.get(e);let t=e,n=pF.has(YC(e,pF)||""),r="generic",i={w:560,h:840},s=e.match(xIe);if(s!=null&&s[2]){let l=s[3]?`&start=${s[3]}`:"",f=e.includes("shorts");switch(r="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${l}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${l}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${l}`;break}return i=f?{w:315,h:560}:{w:560,h:315},wl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}}let o=e.match(vIe);if(o!=null&&o[1]){let l=o==null?void 0:o[1],f=/^\d+$/.test(l)?void 0:new URIError("Invalid embed link format");return r="video",e=`https://player.vimeo.com/video/${l}?api=1`,i={w:560,h:315},wl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,error:f,sandbox:{allowSameOrigin:n}}}if(e.match(wIe))return r="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,i={w:550,h:550},wl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};let a=e.match(kIe);if(a)return e=a[1]==="embed"?a[0]:a[0].replace("/v","/embed"),wl.set(t,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}};if(dF.test(e)){let l=e.match(dF)[1],f=qy(`https://twitter.com/x/status/${l}`),c={type:"document",srcdoc:d=>z5(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${d}"><a href="${f}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return wl.set(t,c),c}if(hF.test(e)){let[,l,f,c]=e.match(hF),d=qy(`https://reddit.com/r/${l}/comments/${f}/${c}`),u={type:"document",srcdoc:h=>z5(`<blockquote class="reddit-embed-bq" data-embed-theme="${h}"><a href="${d}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return wl.set(t,u),u}if(fF.test(e)){let[,l,f]=e.match(fF),c=qy(`https://gist.github.com/${l}/${f}`),d={type:"document",srcdoc:()=>z5(`
          <script src="${c}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return wl.set(e,d),d}return wl.set(e,{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:i,type:r,sandbox:{allowSameOrigin:n}}},vQ=e=>{let t;Rd(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;let n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),r=Fn.Helvetica,i=ln({fontSize:n,fontFamily:r});return yo({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:r,fontSize:n,text:f1(t,i,e.width-20),textAlign:"center",verticalAlign:mo.MIDDLE,angle:e.angle??0})};_e({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,r)=>{let i=Ur(t,{type:"embeddable"});return Al(r.canvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:Ur(t,{type:"embeddable"})},captureUpdate:me.EVENTUALLY}}});var YC=(e,t)=>{try{let{hostname:n}=new URL(e),r=n.replace(/^www\./,"");if(t instanceof Set){if(KC.has(r))return r;let s=r.replace(/^([^.]+)/,"*");return KC.has(s)?s:null}let i=t.replace(/^www\./,"");if(r===i)return i}catch{}return null},AIe=e=>{let t=e.match(SIe);if(t&&t.length===2)return t[1];let n=e.match(MIe);if(n&&n.length===2)return n[1];let r=e.match(EIe);if(r&&r.length===2)return r[1];if(uF.test(e))return`https://giphy.com/embed/${uF.exec(e)[1]}`;let i=e.match(CIe);return i&&i.length===2?i[1]:e},i3=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){let n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(let n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(YC(e,n))return!0;return!1}}return!!YC(e,KC)},Fg=(e,t,n)=>{let r={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(r)},$g=(e,t,n,r,i)=>{if(!r.enabled||!r.clip)return null;let s=Hs(e,i);if(s){let o=t.ownerDocument.createElementNS($t,"g");return o.setAttributeNS($t,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},s3=(e,t,n,r,i,s,o,a)=>{var E;let l={x:s,y:o},[f,c,d,u]=gt(e,t),h=(d-f)/2-(e.x-f),g=(u-c)/2-(e.y-c);if(Oe(e)){let S=di(e,t);if(Et(S)){let[M,A,C,I]=gt(S,t),R=je.getBoundTextElementPosition(S,e,t);h=(C-M)/2-(R.x-M),g=(I-A)/2-(R.y-A),s=s+R.x-e.x,o=o+R.y-e.y}}let U=180*e.angle/Math.PI,y=r;if(e.link){let S=r.ownerDocument.createElementNS($t,"a");S.setAttribute("href",go(e.link)),y.appendChild(S),y=S}let x=(S,M)=>{kf()&&S.setAttribute("data-id",M.id),y.appendChild(S)},w=(((E=Hs(e,t))==null?void 0:E.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{let S=Hn.generateElementShape(e,null),M=Fg(n,S,Og);w!==1&&(M.setAttribute("stroke-opacity",`${w}`),M.setAttribute("fill-opacity",`${w}`)),M.setAttribute("stroke-linecap","round"),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`);let A=$g(e,y,[M],a.frameRendering,t);x(A||M,e);break}case"iframe":case"embeddable":{let S=Hn.generateElementShape(e,a),M=Fg(n,S,Og),A=e.opacity/100;A!==1&&(M.setAttribute("stroke-opacity",`${A}`),M.setAttribute("fill-opacity",`${A}`)),M.setAttribute("stroke-linecap","round"),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`),x(M,e);let C=vQ(e);s3(C,t,n,y,i,C.x+l.x-e.x,C.y+l.y-e.y,a);let I=Fg(n,S,Og);for(I.setAttribute("stroke-linecap","round"),I.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`);I.firstChild;)I.removeChild(I.firstChild);let R=Ja(Math.min(e.width,e.height),e),L=Ap(cQ(e.link||""));if(a.renderEmbeddables===!1||(L==null?void 0:L.type)==="document"){let _=r.ownerDocument.createElementNS($t,"a");_.setAttribute("href",go(e.link||"")),_.setAttribute("target","_blank"),_.setAttribute("rel","noopener noreferrer"),_.style.borderRadius=`${R}px`,I.appendChild(_)}else{let _=r.ownerDocument.createElementNS($t,"foreignObject");_.style.width=`${e.width}px`,_.style.height=`${e.height}px`,_.style.border="none";let O=_.ownerDocument.createElementNS($t,"div");O.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),O.style.width="100%",O.style.height="100%";let $=O.ownerDocument.createElement("iframe");$.src=(L==null?void 0:L.link)??"",$.style.width="100%",$.style.height="100%",$.style.border="none",$.style.borderRadius=`${R}px`,$.style.top="0",$.style.left="0",$.allowFullscreen=!0,O.appendChild($),_.appendChild(O),I.appendChild(_)}x(I,e);break}case"line":case"arrow":{let S=xt(e,t),M=r.ownerDocument.createElementNS($t,"mask");if(S){M.setAttribute("id",`mask-${e.id}`);let I=r.ownerDocument.createElementNS($t,"rect");s=s||0,o=o||0,I.setAttribute("x","0"),I.setAttribute("y","0"),I.setAttribute("fill","#fff"),I.setAttribute("width",`${e.width+100+s}`),I.setAttribute("height",`${e.height+100+o}`),M.appendChild(I);let R=r.ownerDocument.createElementNS($t,"rect"),L=je.getBoundTextElementPosition(e,S,t),_=s+L.x-e.x,O=o+L.y-e.y;R.setAttribute("x",_.toString()),R.setAttribute("y",O.toString()),R.setAttribute("fill","#000"),R.setAttribute("width",`${S.width}`),R.setAttribute("height",`${S.height}`),R.setAttribute("opacity","1"),M.appendChild(R)}let A=r.ownerDocument.createElementNS($t,"g");S&&A.setAttribute("mask",`url(#mask-${e.id})`),A.setAttribute("stroke-linecap","round"),Hn.generateElementShape(e,a).forEach(I=>{let R=Fg(n,I,Og);w!==1&&(R.setAttribute("stroke-opacity",`${w}`),R.setAttribute("fill-opacity",`${w}`)),R.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`),e.type==="line"&&Cf(e.points)&&e.backgroundColor!=="transparent"&&R.setAttribute("fill-rule","evenodd"),A.appendChild(R)});let C=$g(e,y,[A,M],a.frameRendering,t);C?(x(C,e),y.appendChild(C)):(x(A,e),y.append(M));break}case"freedraw":{let S=Hn.generateElementShape(e,a),M=S?Fg(n,S,Og):r.ownerDocument.createElementNS($t,"g");w!==1&&(M.setAttribute("stroke-opacity",`${w}`),M.setAttribute("fill-opacity",`${w}`)),M.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`),M.setAttribute("stroke","none");let A=r.ownerDocument.createElementNS($t,"path");A.setAttribute("fill",e.strokeColor),A.setAttribute("d",Bq(e)),M.appendChild(A);let C=$g(e,y,[M],a.frameRendering,t);x(C||M,e);break}case"image":{let S=Math.round(e.width),M=Math.round(e.height),A=Zo(e)&&i[e.fileId];if(A){let{reuseImages:C=!0}=a,I=`image-${A.id}`,R=e.width,L=e.height;e.crop&&({width:R,height:L}=Mf(e),I=`image-crop-${A.id}-${rRe(`${R}x${L}`)}`),C||(I=`image-${e.id}`);let _=r.querySelector(`#${I}`);if(!_){_=r.ownerDocument.createElementNS($t,"symbol"),_.id=I;let V=r.ownerDocument.createElementNS($t,"image");V.setAttribute("href",A.dataURL),V.setAttribute("preserveAspectRatio","none"),e.crop||!C?(V.setAttribute("width",`${R}`),V.setAttribute("height",`${L}`)):(V.setAttribute("width","100%"),V.setAttribute("height","100%")),_.appendChild(V),(y.querySelector("defs")||y).prepend(_)}let O=r.ownerDocument.createElementNS($t,"use");O.setAttribute("href",`#${I}`),a.exportWithDarkMode&&A.mimeType!==rt.svg&&O.setAttribute("filter",Nq);let $=0,B=0;if(e.crop){let{width:V,height:Y}=Mf(e);$=e.crop.x/(e.crop.naturalWidth/V),B=e.crop.y/(e.crop.naturalHeight/Y)}let F=h+$,z=g+B;O.setAttribute("width",`${S+$}`),O.setAttribute("height",`${M+B}`),O.setAttribute("opacity",`${w}`),(e.scale[0]!==1||e.scale[1]!==1)&&O.setAttribute("transform",`translate(${F} ${z}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-F} ${-z})`);let H=r.ownerDocument.createElementNS($t,"g");if(e.crop){let V=r.ownerDocument.createElementNS($t,"mask");V.setAttribute("id",`mask-image-crop-${e.id}`),V.setAttribute("fill","#fff");let Y=r.ownerDocument.createElementNS($t,"rect");Y.setAttribute("x",`${$}`),Y.setAttribute("y",`${B}`),Y.setAttribute("width",`${S}`),Y.setAttribute("height",`${M}`),V.appendChild(Y),y.appendChild(V),H.setAttribute("mask",`url(#${V.id})`)}if(H.appendChild(O),H.setAttribute("transform",`translate(${s-$} ${o-B}) rotate(${U} ${F} ${z})`),e.roundness){let V=r.ownerDocument.createElementNS($t,"clipPath");V.id=`image-clipPath-${e.id}`;let Y=r.ownerDocument.createElementNS($t,"rect"),K=Ja(Math.min(e.width,e.height),e);Y.setAttribute("width",`${e.width}`),Y.setAttribute("height",`${e.height}`),Y.setAttribute("rx",`${K}`),Y.setAttribute("ry",`${K}`),V.appendChild(Y),x(V,e),H.setAttributeNS($t,"clip-path",`url(#${V.id})`)}let G=$g(e,y,[H],a.frameRendering,t);x(G||H,e)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){let S=document.createElementNS($t,"rect");S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`),S.setAttribute("width",`${e.width}px`),S.setAttribute("height",`${e.height}px`),S.setAttribute("rx",$n.radius.toString()),S.setAttribute("ry",$n.radius.toString()),S.setAttribute("fill","none"),S.setAttribute("stroke",$n.strokeColor),S.setAttribute("stroke-width",$n.strokeWidth.toString()),x(S,e)}break}default:if(Oe(e)){let S=r.ownerDocument.createElementNS($t,"g");w!==1&&(S.setAttribute("stroke-opacity",`${w}`),S.setAttribute("fill-opacity",`${w}`)),S.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${U} ${h} ${g})`);let M=e.text.replace(/\r\n?/g,`
`).split(`
`),A=Hb(e.fontSize,e.lineHeight),C=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,I=Uq(e.fontFamily,e.fontSize,A),R=DZ(e.text)?"rtl":"ltr",L=e.textAlign==="center"?"middle":e.textAlign==="right"||R==="rtl"?"end":"start";for(let O=0;O<M.length;O++){let $=r.ownerDocument.createElementNS($t,"text");$.textContent=M[O],$.setAttribute("x",`${C}`),$.setAttribute("y",`${O*A+I}`),$.setAttribute("font-family",a6(e)),$.setAttribute("font-size",`${e.fontSize}px`),$.setAttribute("fill",e.strokeColor),$.setAttribute("text-anchor",L),$.setAttribute("style","white-space: pre;"),$.setAttribute("direction",R),$.setAttribute("dominant-baseline","alphabetic"),S.appendChild($)}let _=$g(e,y,[S],a.frameRendering,t);x(_||S,e)}else throw new Error(`Unimplemented type ${e.type}`)}},TIe=(e,t,n,r,i,s)=>{r&&(e.filter(o=>!Qo(o)).forEach(o=>{if(!o.isDeleted){if(Oe(o)&&o.containerId&&t.has(o.containerId))return;try{s3(o,t,n,r,i,o.x+s.offsetX,o.y+s.offsetY,s);let a=xt(o,t);a&&s3(a,t,n,r,i,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>Qo(o)).forEach(o=>{if(!o.isDeleted)try{s3(o,t,n,r,i,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},mF=500,VT=e=>{var r,i;let t=(r=e.extensions)==null?void 0:r.reduce((s,o)=>(s.push(rt[o]),s),[]),n=(i=e.extensions)==null?void 0:i.reduce((s,o)=>o==="jpg"?s.concat(".jpg",".jpeg"):s.concat(`.${o}`),[]);return rxe({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(s,o,a)=>{let l=l6(o,mF),f=()=>{c(),document.addEventListener("keyup",l),document.addEventListener("pointerup",l),l()},c=()=>{var u;if((u=a.files)!=null&&u.length){let h=e.multiple?[...a.files]:a.files[0];s(h)}};requestAnimationFrame(()=>{window.addEventListener("focus",f)});let d=window.setInterval(()=>{c()},mF);return u=>{clearInterval(d),l.cancel(),window.removeEventListener("focus",f),document.removeEventListener("keyup",l),document.removeEventListener("pointerup",l),u&&(console.warn("Opening the file was canceled (legacy-fs)."),u(new D7))}}})},o9=(e,t)=>sxe(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),IIe=(e,t)=>{let n={};for(let r of e)!r.isDeleted&&"fileId"in r&&r.fileId&&t[r.fileId]&&(n[r.fileId]=t[r.fileId]);return n},WT=(e,t,n,r)=>{let i={type:ia.excalidraw,version:A7.excalidraw,source:hT,elements:aJ(e),appState:IZ(t),files:IIe(e,n)};return JSON.stringify(i,null,2)},wQ=async(e,t,n,r=t.name||AZ)=>{let i=WT(e,t,n),s=new Blob([i],{type:rt.excalidraw});return{fileHandle:await o9(s,{name:r,extension:"excalidraw",description:"Excalidraw file",fileHandle:vI(t.fileHandle)?null:t.fileHandle})}},NIe=async(e,t)=>{let n=await VT({description:"Excalidraw files"});return uJ(await wI(n),e,t,n.handle)},RIe=e=>(e==null?void 0:e.type)===ia.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),EQ=e=>typeof e=="object"&&e&&e.type===ia.excalidrawLibrary&&(e.version===1||e.version===2),SQ=e=>{let t={type:ia.excalidrawLibrary,version:A7.excalidrawLibrary,source:hT,libraryItems:e};return JSON.stringify(t,null,2)},_Ie=async e=>{let t=SQ(e);await o9(new Blob([t],{type:rt.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},kQ=e=>new Promise((t,n)=>{let r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),CQ=async({fileIds:e,files:t,imageCache:n})=>{let r=new Map,i=new Map;return await Promise.all(e.reduce((s,o)=>{let a=t[o];return a&&!r.has(o)?(r.set(o,!0),s.concat((async()=>{try{if(a.mimeType===rt.binary)throw new Error("Only images can be added to ImageCache");let l=kQ(a.dataURL),f={image:l,mimeType:a.mimeType};n.set(o,f);let c=await l;n.set(o,{...f,image:c})}catch{i.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:r,erroredFiles:i}},MQ=e=>e.filter(t=>Zo(t)),PIe=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",gF=e=>{let t=new DOMParser().parseFromString(e,rt.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!PIe(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",$t);let r=n.getAttribute("width"),i=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(i!=null&&i.includes("%")||i==="auto")&&(i=null);let s=n.getAttribute("viewBox");if(!r||!i){if(r=r||"50",i=i||"50",s){let o=s.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);o&&([,r,i]=o)}n.setAttribute("width",r),n.setAttribute("height",i)}return s||n.setAttribute("viewBox",`0 0 ${r} ${i}`),n.outerHTML}},AQ=document.createElement("img");AQ.src=`data:${rt.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;var TQ=document.createElement("img");TQ.src=`data:${rt.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;var GT=([e,t,n,r],i,s)=>{let o=BAe,a=o/s.zoom.value,l=o/s.zoom.value,f=o/s.zoom.value,c=(e+n)/2,d=(t+r)/2,u=(o-8)/(2*s.zoom.value),h=4/s.zoom.value,g=n+h-u,U=t-h-f+u,[y,x]=pe(P(g+a/2,U+l/2),P(c,d),i);return[y-a/2,x-l/2,a,l]},IQ=(e,t,n,[r,i])=>{let s=4/n.zoom.value,[o,a,l,f]=gt(e,t),[c,d,u,h]=GT([o,a,l,f],e.angle,n);return r>c-s&&r<c+s+u&&i>d-s&&i<d+h+s},JE=(e,t,n,[r,i],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&_T(r,i,e,t)?!0:IQ(e,t,n,P(r,i)),X7=(e,t,n,r,i=!0)=>{e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill(),i&&e.stroke()},XT=(e,t)=>[e.width/t,e.height/t],KT=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:r,theme:i,isExporting:s,viewBackgroundColor:o})=>{let a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&i===It.DARK&&(a.filter=gT),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,r),a.save(),a.fillStyle=o,a.fillRect(0,0,n,r),a.restore()):a.clearRect(0,0,n,r),a},NQ=(e,t)=>{let n=window.location.href;try{let r=new URL(n);return r.searchParams.set($4,e),go(r.toString())}catch(r){console.error(r)}return go(n)},RQ=(e,t)=>{if(e.length>0&&a9(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){let n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},a9=e=>!!(e.length===1||e.length>1&&iQ(e)),H5=e=>{try{let t=new URL(e);return t.searchParams.has($4)&&t.host===window.location.host}catch{return!1}},DIe=e=>{try{let{searchParams:t}=new URL(e);if(t.has($4))return t.get($4)}catch{}return null},sy={Bold:"#dddddd",Regular:"#e5e5e5"},LIe=(e,t,n,r,i,s,o,a)=>{let l=r%t-t,f=i%t-t,c=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,f%1?0:.5);for(let u=l;u<l+o+t*2;u+=t){let h=n>1&&Math.round(u-r)%(n*t)===0;if(!h&&c<10)continue;let g=Math.min(1/s.value,h?4:1);e.lineWidth=g;let U=[g*3,d+(g+d)];e.beginPath(),e.setLineDash(h?[]:U),e.strokeStyle=h?sy.Bold:sy.Regular,e.moveTo(u,f-t),e.lineTo(u,Math.ceil(f+a+t*2)),e.stroke()}for(let u=f;u<f+a+t*2;u+=t){let h=n>1&&Math.round(u-i)%(n*t)===0;if(!h&&c<10)continue;let g=Math.min(1/s.value,h?4:1);e.lineWidth=g;let U=[g*3,d+(g+d)];e.beginPath(),e.setLineDash(h?[]:U),e.strokeStyle=h?sy.Bold:sy.Regular,e.moveTo(l-t,u),e.lineTo(Math.ceil(l+o+t*2),u),e.stroke()}e.restore()},bF=(e,t,n,r)=>{t.translate(e.x+r.scrollX,e.y+r.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,$n.radius/r.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+r.scrollX),-(e.y+r.scrollY))},UF={regularLink:null,elementLink:null},yF=(e,t,n,r)=>{if(e.link&&!n.selectedElementIds[e.id]){let[i,s,o,a]=gt(e,r),[l,f,c,d]=GT([i,s,o,a],e.angle,n),u=l+c/2,h=f+d/2;t.save(),t.translate(n.scrollX+u,n.scrollY+h),t.rotate(e.angle);let g=H5(e.link)?"elementLink":"regularLink",U=UF[g];if(!U||U.zoom!==n.zoom.value){U=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),U.width=c*window.devicePixelRatio*n.zoom.value,U.height=d*window.devicePixelRatio*n.zoom.value,UF[g]=U;let y=U.getContext("2d");y.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),y.fillStyle="#fff",y.fillRect(0,0,c,d),g==="elementLink"?y.drawImage(TQ,0,0,c,d):y.drawImage(AQ,0,0,c,d),y.restore()}t.drawImage(U,l-u,f-h,c,d),t.restore()}},_Q=({canvas:e,rc:t,elementsMap:n,allElementsMap:r,visibleElements:i,scale:s,appState:o,renderConfig:a})=>{var U;if(e===null)return;let{renderGrid:l=!0,isExporting:f}=a,[c,d]=XT(e,s),u=KT({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:d,theme:o.theme,isExporting:f,viewBackgroundColor:o.viewBackgroundColor});u.scale(o.zoom.value,o.zoom.value),l&&LIe(u,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,c/o.zoom.value,d/o.zoom.value);let h=new Set;i.forEach(y=>{y.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[y.id]&&(T0(y,o.frameToHighlight,n)||y.groupIds.find(x=>h.has(x)))&&y.groupIds.forEach(x=>h.add(x))});let g=new Map;i.filter(y=>!Qo(y)).forEach(y=>{var x;try{let w=y.frameId||((x=o.frameToHighlight)==null?void 0:x.id);if(Oe(y)&&y.containerId&&n.has(y.containerId))return;if(u.save(),w&&o.frameRendering.enabled&&o.frameRendering.clip){let S=ZC(y,n,o);S&&PF(y,S,o,n,g)&&bF(S,u,a,o),yu(y,n,r,t,u,a,o)}else yu(y,n,r,t,u,a,o);let E=xt(y,n);E&&yu(E,n,r,t,u,a,o),u.restore(),f||yF(y,u,o,n)}catch(w){console.error(w,y.id,y.x,y.y,y.width,y.height)}}),i.filter(y=>Qo(y)).forEach(y=>{var x;try{let w=()=>{if(yu(y,n,r,t,u,a,o),Qo(y)&&(f||Rs(y)&&a.embedsValidationStatus.get(y.id)!==!0)&&y.width&&y.height){let E=vQ(y);yu(E,n,r,t,u,a,o)}f||yF(y,u,o,n)};if((y.frameId||(x=o.frameToHighlight)!=null&&x.id)&&o.frameRendering.enabled&&o.frameRendering.clip){u.save();let E=ZC(y,n,o);E&&PF(y,E,o,n,g)&&bF(E,u,a,o),w(),u.restore()}else w()}catch(w){console.error(w)}}),(U=a.pendingFlowchartNodes)==null||U.forEach(y=>{try{yu(y,n,r,t,u,a,o)}catch(x){console.error(x)}})},PQ=T7(e=>{_Q(e)},{trailing:!0}),DQ=(e,t)=>{if(t){PQ(e);return}_Q(e)},OIe=(e,t)=>{if(e.width<=t)return e;let n=document.createElement("canvas").getContext("2d");n.font=ln({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(n.measureText(r).width>t)for(let i=r.length;i>0;i--){let s=`${r.slice(0,i)}...`;if(n.measureText(s).width<=t){r=s;break}}return yt(e,{text:r,width:t})},jIe=(e,t)=>{let n=[];for(let r of e){if(at(r)){let i=yo({x:r.x,y:r.y-$n.nameOffsetY,fontFamily:Fn.Helvetica,fontSize:$n.nameFontSize,lineHeight:$n.nameLineHeight,strokeColor:t.exportWithDarkMode?$n.nameColorDarkTheme:$n.nameColorLightTheme,text:qQ(r)});i.y-=i.height,i=OIe(i,r.width),n.push(i)}n.push(r)}return n},LQ=(e,t)=>(t=t||oc().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),OQ=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:r})=>{let i;return t?i=hI(e,t):n.enabled&&n.name?i=jIe(e,{exportWithDarkMode:r}):i=e,i},jQ=async(e,t,n,{exportBackground:r,exportPadding:i=T6,viewBackgroundColor:s,exportingFrame:o},a=(f,c)=>{let d=document.createElement("canvas");return d.width=f*t.exportScale,d.height=c*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await xf.loadElementsFonts(e)})=>{await l();let f=LQ(o??null,t.frameRendering??null);o&&(f.clip=!1);let c=OQ({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:f});o&&(i=0);let[d,u,h,g]=ZT(o?[o]:uI(c),i),{canvas:U,scale:y=1}=a(h,g),x=oc(),{imageCache:w}=await CQ({imageCache:new Map,fileIds:MQ(c).map(E=>E.fileId),files:n});return DQ({canvas:U,rc:j0.canvas(U),elementsMap:aa(ct(c)),allElementsMap:aa(ct(If(e))),visibleElements:c,scale:y,appState:{...t,frameRendering:f,viewBackgroundColor:r?s:null,scrollX:-d+i,scrollY:-u+i,zoom:x.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?It.DARK:It.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:w,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),U},u5=e=>document.createComment(` ${e} `),YT=async(e,t,n,r)=>{let i=LQ((r==null?void 0:r.exportingFrame)??null,t.frameRendering??null),{exportPadding:s=T6,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:f}=t,{exportingFrame:c=null}=r||{},d=OQ({elements:e,exportingFrame:c,exportWithDarkMode:o,frameRendering:i});c&&(s=0);let[u,h,g,U]=ZT(c?[c]:uI(d),s),y=-u+s,x=-h+s,w=document.createElementNS($t,"svg");w.setAttribute("version","1.1"),w.setAttribute("xmlns",$t),w.setAttribute("viewBox",`0 0 ${g} ${U}`),w.setAttribute("width",`${g*l}`),w.setAttribute("height",`${U*l}`),o&&w.setAttribute("filter",gT);let E=w.ownerDocument.createElementNS($t,"defs"),S=w.ownerDocument.createElementNS($t,"metadata");if(w.appendChild(u5("svg-source:excalidraw")),w.appendChild(S),w.appendChild(E),f)try{BIe({metadataElement:S,payload:WT(e,t,n||{},"local")})}catch(_){console.error(_)}let M=dI(e);if(M.length){let _=ct(e);for(let O of M){let $=w.ownerDocument.createElementNS($t,"clipPath");$.setAttribute("id",O.id);let[B,F,z,H]=gt(O,_),G=(z-B)/2-(O.x-B),V=(H-F)/2-(O.y-F),Y=w.ownerDocument.createElementNS($t,"rect");Y.setAttribute("transform",`translate(${O.x+y} ${O.y+x}) rotate(${O.angle} ${G} ${V})`),Y.setAttribute("width",`${O.width}`),Y.setAttribute("height",`${O.height}`),c||(Y.setAttribute("rx",`${$n.radius}`),Y.setAttribute("ry",`${$n.radius}`)),$.appendChild(Y),E.appendChild($)}}let A=r!=null&&r.skipInliningFonts?[]:await xf.generateFontFaceDeclarations(e),C=`
      `,I=w.ownerDocument.createElementNS($t,"style");if(I.classList.add("style-fonts"),I.appendChild(document.createTextNode(`${C}${A.join(C)}`)),E.appendChild(I),t.exportBackground&&a){let _=w.ownerDocument.createElementNS($t,"rect");_.setAttribute("x","0"),_.setAttribute("y","0"),_.setAttribute("width",`${g}`),_.setAttribute("height",`${U}`),_.setAttribute("fill",a),w.appendChild(_)}let R=j0.svg(w),L=(r==null?void 0:r.renderEmbeddables)??!1;return TIe(d,aa(ct(d)),R,w,n||{},{offsetX:y,offsetY:x,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:L,frameRendering:i,canvasBackgroundColor:a,embedsValidationStatus:L?new Map(d.filter(_=>at(_)).map(_=>[_.id,!0])):new Map,reuseImages:(r==null?void 0:r.reuseImages)??!0}),w},BIe=({payload:e,metadataElement:t})=>{let n=gJ(JSON.stringify(UJ({text:e})),!0);t.appendChild(u5(`payload-type:${rt.excalidraw}`)),t.appendChild(u5("payload-version:2")),t.appendChild(u5("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(u5("payload-end"))},FIe=({svg:e})=>{var t;if(e.includes(`payload-type:${rt.excalidraw}`)){let n=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!n)throw new Error("INVALID");let r=(((t=e.match(/<!-- payload-version:(\d+) -->/))==null?void 0:t[1])||"1")!=="1";try{let i=bJ(n[1],r),s=JSON.parse(i);if(!("encoded"in s)){if("type"in s&&s.type===ia.excalidraw)return i;throw new Error("FAILED")}return yJ(s)}catch(i){throw console.error(i),new Error("FAILED")}}throw new Error("INVALID")},ZT=(e,t)=>{let[n,r,i,s]=tn(e),o=Fi(n,i)+t*2,a=Fi(r,s)+t*2;return[n,r,o,a]},$Ie=(e,t,n)=>{let[,,r,i]=ZT(e,t).map(s=>Math.trunc(s*n));return[r,i]},zIe=class{constructor(t){this.scoreFunction=t,Z(this,"content",[])}sinkDown(t){let n=this.content[t];for(;t>0;){let r=(t+1>>1)-1,i=this.content[r];if(this.scoreFunction(n)<this.scoreFunction(i))this.content[r]=n,this.content[t]=i,t=r;else break}}bubbleUp(t){let n=this.content.length,r=this.content[t],i=this.scoreFunction(r);for(;;){let s=t+1<<1,o=s-1,a=null,l=0;if(o<n){let f=this.content[o];l=this.scoreFunction(f),l<i&&(a=o)}if(s<n){let f=this.content[s];this.scoreFunction(f)<(a===null?i:l)&&(a=s)}if(a!==null)this.content[t]=this.content[a],this.content[a]=r,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;let t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;let n=this.content.indexOf(t),r=this.content.pop();n<this.content.length&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}},qT=1,sn=40,HIe=(e,t)=>{let n=e.fixedSegments?e.fixedSegments.slice():null;if(n){let r=[];e.points.map(o=>P(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return r.push(o);let f=H2(o,l[a-1]),c=H2(l[a-1],l[a-2]);if(nr(f,c)){let d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,u=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;u!==-1&&(n[u].start=P(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),r.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return r.push(o)});let i=[];r.forEach((o,a,l)=>{if(a<3)return i.push(o);if(Zt(l[a-2],l[a-1])<qT){let f=(n==null?void 0:n.findIndex(u=>u.index===a-2))??-1,c=(n==null?void 0:n.findIndex(u=>u.index===a-1))??-1;c!==-1&&n.splice(c,1),f!==-1&&n.splice(f,1),i.splice(-2,2),n.forEach(u=>{u.index>a-2&&(u.index-=2)});let d=cf(o,l[a-1]);return i.push(P(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}i.push(o)});let s=n.filter(o=>o.index!==1&&o.index!==i.length-1);return s.length===0?A0(tI(nI(eI(e,JT(e,t,i.map(o=>P(o[0]-e.x,o[1]-e.y)),e.startBinding&&b6(e.startBinding.elementId,t),e.endBinding&&b6(e.endBinding.elementId,t)))??[])),s,null,null):(vt.DEV&&Gi(rI(i),"Invalid elbow points with fixed segments"),A0(i,s,e.startIsSpecial,e.endIsSpecial))}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},VIe=(e,t,n)=>{var I,R;let r=t.map(L=>L.index),i=(((I=e.fixedSegments)==null?void 0:I.map(L=>L.index))??[]).findIndex(L=>!r.includes(L));if(i===-1||!((R=e.fixedSegments)!=null&&R[i]))return{points:e.points};let s=e.fixedSegments[i].index,o=e.fixedSegments[i-1],a=e.fixedSegments[i+1],l=e.x+(o?o.end[0]:0),f=e.y+(o?o.end[1]:0),c=o?null:e.startBinding,d=a?null:e.endBinding,{startHeading:u,endHeading:h,startGlobalPoint:g,endGlobalPoint:U,hoveredStartElement:y,hoveredEndElement:x,...w}=JT({x:l,y:f,startBinding:c,endBinding:d,startArrowhead:null,endArrowhead:null,points:e.points},n,[P(0,0),P(e.x+((a==null?void 0:a.start[0])??e.points[e.points.length-1][0])-l,e.y+((a==null?void 0:a.start[1])??e.points[e.points.length-1][1])-f)],c&&b6(c.elementId,n),d&&b6(d.elementId,n),{isDragging:!1}),{points:E}=A0(tI(nI(eI(e,{startHeading:u,endHeading:h,startGlobalPoint:g,endGlobalPoint:U,hoveredStartElement:y,hoveredEndElement:x,...w})??[])),t,null,null),S=[];if(o)for(let L=0;L<o.index;L++)S.push(P(e.x+e.points[L][0],e.y+e.points[L][1]));if(E.forEach(L=>{S.push(P(e.x+(o?o.end[0]:0)+L[0],e.y+(o?o.end[1]:0)+L[1]))}),a)for(let L=a.index;L<e.points.length;L++)S.push(P(e.x+e.points[L][0],e.y+e.points[L][1]));let M=((a==null?void 0:a.index)??e.points.length)-((o==null?void 0:o.index)??0)-1,A=t.map(L=>L.index>s?{...L,index:L.index-M+(E.length-1)}:L),C=S.flatMap((L,_)=>{let O=S[_-1],$=S[_+1];if(O&&$){let B=H2(L,O),F=H2($,L);if(nr(B,F))return A.forEach(z=>{z.index>_&&(z.index-=1)}),[];if(nr(B,$q(F)))return A.forEach(z=>{z.index>_&&(z.index+=1)}),[L,L]}return[L]});return A0(C,A,!1,!1)},WIe=(e,t,n,r,i,s)=>{var M,A;let o=t.map((C,I)=>e.fixedSegments==null||e.fixedSegments[I]===void 0||e.fixedSegments[I].index!==C.index||(C.start[0]!==e.fixedSegments[I].start[0]&&C.end[0]!==e.fixedSegments[I].end[0])!=(C.start[1]!==e.fixedSegments[I].start[1]&&C.end[1]!==e.fixedSegments[I].end[1])?I:null).filter(C=>C!==null).shift();if(o==null)return{points:e.points};let a=((M=e.fixedSegments)==null?void 0:M.findIndex(C=>C.index===1))??-1,l=((A=e.fixedSegments)==null?void 0:A.findIndex(C=>C.index===e.points.length-1))??-1,f=Zt(t[o].start,t[o].end),c=f<sn+5;if(a===-1&&t[o].index===1&&i){let C=pf(n),I=(C?nr(n,er):nr(n,oi))?c?f/2:sn:c?-f/2:-sn;t[o].start=P(t[o].start[0]+(C?I:0),t[o].start[1]+(C?0:I))}if(l===-1&&t[o].index===e.points.length-1&&s){let C=pf(r),I=(C?nr(r,er):nr(r,oi))?c?f/2:sn:c?-f/2:-sn;t[o].end=P(t[o].end[0]+(C?I:0),t[o].end[1]+(C?0:I))}let d=t.map(C=>({...C,start:P(e.x+C.start[0],e.y+C.start[1]),end:P(e.x+C.end[0],e.y+C.end[1])})),u=e.points.map((C,I)=>P(e.x+C[0],e.y+C[1])),h=d[o].index-1,g=d[o].index,U=d[o].start,y=d[o].end,x=u[h-1]&&!il(u[h],u[h-1])?cf(u[h-1],u[h]):void 0,w=u[g+1]&&!il(u[g],u[g+1])?cf(u[g+1],u[g]):void 0;if(x!==void 0){let C=x?1:0;u[h-1][C]=U[C]}if(u[h]=U,u[g]=y,w!==void 0){let C=w?1:0;u[g+1][C]=y[C]}let E=d.findIndex(C=>C.index===h);if(E!==-1){let C=cf(d[E].end,d[E].start)?1:0;d[E].start[C]=U[C],d[E].end=U}let S=d.findIndex(C=>C.index===g+1);if(S!==-1){let C=cf(d[S].end,d[S].start)?1:0;d[S].end[C]=y[C],d[S].start=y}if(a===-1&&h===0){let C=i?pf(n):cf(u[1],u[0]);u.unshift(P(C?U[0]:e.x+e.points[0][0],C?e.y+e.points[0][1]:U[1])),i&&u.unshift(P(e.x+e.points[0][0],e.y+e.points[0][1]));for(let I of d)I.index+=i?2:1}if(l===-1&&g===e.points.length-1){let C=pf(r);u.push(P(C?y[0]:e.x+e.points[e.points.length-1][0],C?e.y+e.points[e.points.length-1][1]:y[1])),s&&u.push(P(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return A0(u,d.map(C=>({...C,start:P(C.start[0]-e.x,C.start[1]-e.y),end:P(C.end[0]-e.x,C.end[1]-e.y)})),!1,!1)},GIe=(e,t,n,r,i,s,o,a,l)=>{let f=e.startIsSpecial??null,c=e.endIsSpecial??null,d=t.map((y,x)=>x===0||x===t.length-1?P(e.x+y[0],e.y+y[1]):P(e.x+e.points[x][0],e.y+e.points[x][1])),u=n.map(y=>({...y,start:P(e.x+(y.start[0]-t[0][0]),e.y+(y.start[1]-t[0][1])),end:P(e.x+(y.end[0]-t[0][0]),e.y+(y.end[1]-t[0][1]))})),h=[],g=2+(f?1:0),U=2+(c?1:0);for(;h.length+g<d.length-U;)h.push(d[h.length+g]);{let y=d[f?2:1],x=d[f?3:2],w=pf(r),E=pf(Qh(Ye(y,x)));if(a&&w===E){let S=w?nr(r,er):nr(r,oi);if(h.unshift(P(E?s[0]+(S?sn:-sn):x[0],E?x[1]:s[1]+(S?sn:-sn))),h.unshift(P(w?s[0]+(S?sn:-sn):s[0],w?s[1]:s[1]+(S?sn:-sn))),!f){f=!0;for(let M of u)M.index>1&&(M.index+=1)}}else if(h.unshift(P(E?s[0]:y[0],E?y[1]:s[1])),f){f=!1;for(let S of u)S.index>1&&(S.index-=1)}h.unshift(s)}{let y=d[d.length-(c?3:2)],x=d[d.length-(c?4:3)],w=pf(i),E=cf(x,y);if(l&&w===E){let S=w?nr(i,er):nr(i,oi);h.push(P(E?o[0]+(S?sn:-sn):x[0],E?x[1]:o[1]+(S?sn:-sn))),h.push(P(w?o[0]+(S?sn:-sn):o[0],w?o[1]:o[1]+(S?sn:-sn))),c||(c=!0)}else h.push(P(E?o[0]:y[0],E?y[1]:o[1])),c&&(c=!1)}return h.push(o),A0(h,u.map(({index:y})=>({index:y,start:h[y-1],end:h[y]})).map(y=>({...y,start:P(y.start[0]-s[0],y.start[1]-s[1]),end:P(y.end[0]-s[0],y.end[1]-s[1])})),f,c)},pn=1e6,QT=(e,t,n,r)=>{var x,w,E,S,M,A,C,I,R,L,_,O,$,B,F,z,H,G,V,Y,K,q,se,de,xe;if(e.points.length<2)return{points:n.points??e.points};(e.x<-pn||e.x>pn||e.y<-pn||e.y>pn||e.x+(((E=(w=n==null?void 0:n.points)==null?void 0:w[((x=n==null?void 0:n.points)==null?void 0:x.length)-1])==null?void 0:E[0])??0)<-pn||e.x+(((A=(M=n==null?void 0:n.points)==null?void 0:M[((S=n==null?void 0:n.points)==null?void 0:S.length)-1])==null?void 0:A[0])??0)>pn||e.y+(((R=(I=n==null?void 0:n.points)==null?void 0:I[((C=n==null?void 0:n.points)==null?void 0:C.length)-1])==null?void 0:R[1])??0)<-pn||e.y+(((O=(_=n==null?void 0:n.points)==null?void 0:_[((L=n==null?void 0:n.points)==null?void 0:L.length)-1])==null?void 0:O[1])??0)>pn||e.x+(((F=(B=e==null?void 0:e.points)==null?void 0:B[(($=e==null?void 0:e.points)==null?void 0:$.length)-1])==null?void 0:F[0])??0)<-pn||e.x+(((G=(H=e==null?void 0:e.points)==null?void 0:H[((z=e==null?void 0:e.points)==null?void 0:z.length)-1])==null?void 0:G[0])??0)>pn||e.y+(((K=(Y=e==null?void 0:e.points)==null?void 0:Y[((V=e==null?void 0:e.points)==null?void 0:V.length)-1])==null?void 0:K[1])??0)<-pn||e.y+(((de=(se=e==null?void 0:e.points)==null?void 0:se[((q=e==null?void 0:e.points)==null?void 0:q.length)-1])==null?void 0:de[1])??0)>pn)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=At(e.x,-pn,pn),e.y=At(e.y,-pn,pn),n.points&&(n.points=n.points.map(([ve,ue])=>P(At(ve,-pn,pn),At(ue,-pn,pn))));let i=n.points?n.points&&n.points.length===2?e.points.map((ve,ue)=>ue===0?n.points[0]:ue===e.points.length-1?n.points[1]:ve):n.points.slice():e.points.slice(),s=typeof n.startBinding<"u"?n.startBinding:e.startBinding,o=typeof n.endBinding<"u"?n.endBinding:e.endBinding,a=s&&b6(s.elementId,t),l=o&&b6(o.elementId,t);if(t.size===0&&rI(i)||(a==null?void 0:a.id)!==(s==null?void 0:s.elementId)||(l==null?void 0:l.id)!==(o==null?void 0:o.elementId))return A0(i.map(ve=>P(e.x+ve[0],e.y+ve[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);let{startHeading:f,endHeading:c,startGlobalPoint:d,endGlobalPoint:u,hoveredStartElement:h,hoveredEndElement:g,...U}=JT({x:e.x,y:e.y,startBinding:s,endBinding:o,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,i,a,l,r),y=n.fixedSegments??e.fixedSegments??[];return!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?HIe(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((ve,ue)=>il(ve,e.points[ue]??P(1/0,1/0)))?{}:y.length===0?A0(tI(nI(eI(e,{startHeading:f,endHeading:c,startGlobalPoint:d,endGlobalPoint:u,hoveredStartElement:h,hoveredEndElement:g,...U})??[])),y,null,null):(((xe=e.fixedSegments)==null?void 0:xe.length)??0)>y.length?VIe(e,y,t):n.points?n.points&&n.fixedSegments?n:GIe(e,i,y,f,c,d,u,h,g):WIe(e,y,f,c,h,g)},JT=(e,t,n,r,i,s)=>{var C,I;let o=V4(n[0],yi(e.x,e.y)),a=V4(n[n.length-1],yi(e.x,e.y)),l=r,f=i;if(s!=null&&s.isDragging){let R=Array.from(t.values());l=EF(o,t,R,s==null?void 0:s.zoom)||r,f=EF(a,t,R,s==null?void 0:s.zoom)||i}let c=vF({...e,elbowed:!0,points:n},"start",(C=e.startBinding)==null?void 0:C.fixedPoint,o,r,l,s==null?void 0:s.isDragging),d=vF({...e,elbowed:!0,points:n},"end",(I=e.endBinding)==null?void 0:I.fixedPoint,a,i,f,s==null?void 0:s.isDragging),u=wF(c,d,t,l,o),h=wF(d,c,t,f,a),g=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],U=[d[0]-2,d[1]-2,d[0]+2,d[1]+2],y=l?zl(l,yd(u,e.startArrowhead?gn*6:gn*2,1)):g,x=f?zl(f,yd(h,e.endArrowhead?gn*6:gn*2,1)):U,w=d6(c,f?zl(f,yd(h,sn,sn)):U)||d6(d,l?zl(l,yd(u,sn,sn)):g),E=BQ(w?[g,U]:[y,x]),S=YIe(w?g:y,w?U:x,E,w?yd(u,!l&&!f?0:sn,0):yd(u,!l&&!f?0:sn-(e.startArrowhead?gn*6:gn*2),sn),w?yd(h,!l&&!f?0:sn,0):yd(h,!l&&!f?0:sn-(e.endArrowhead?gn*6:gn*2),sn),w,l&&zl(l),f&&zl(f)),M=xF(S[0],u,c),A=xF(S[1],h,d);return{dynamicAABBs:S,startDonglePosition:M,startGlobalPoint:c,startHeading:u,endDonglePosition:A,endGlobalPoint:d,endHeading:h,commonBounds:E,hoveredStartElement:l,hoveredEndElement:f,boundsOverlap:w,startElementBounds:y,endElementBounds:x}},eI=(e,t)=>{let{dynamicAABBs:n,startDonglePosition:r,startGlobalPoint:i,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:f,hoveredEndElement:c}=t,d=ZIe(n,r||i,s,o||a,l,f),u=r&&oy(r,d),h=o&&oy(o,d),g=oy(a,d);g&&c&&(g.closed=!0);let U=oy(i,d);U&&e.startBinding&&(U.closed=!0);let y=u&&h&&(d6(u.pos,n[1])||d6(h.pos,n[0])),x=XIe(u||U,h||g,d,s||er,l||er,y?[]:n);if(x){let w=x.map(E=>[E.pos[0],E.pos[1]]);return u&&w.unshift(i),h&&w.push(a),w}return null},yd=(e,t,n)=>{switch(e){case Os:return[t,n,n,n];case er:return[n,t,n,n];case oi:return[n,n,t,n]}return[n,n,n,t]},XIe=(e,t,n,r,i,s)=>{let o=eS(e.pos,t.pos),a=new zIe(l=>l.f);for(a.push(e);a.size()>0;){let l=a.pop();if(!l||l.closed)continue;if(l===t)return KIe(e,l);l.closed=!0;let f=QIe(l.addr,n);for(let c=0;c<4;c++){let d=f[c];if(!d||d.closed)continue;let u=Bc(d.pos,l.pos,.5);if(vve(...s.map(E=>d6(u,E))))continue;let h=JIe(c),g=l.parent?Qh(Ye(l.pos,l.parent.pos)):r,U=$q(g);if(nr(U,h)||SF(e.addr,d.addr)&&nr(h,r)||SF(t.addr,d.addr)&&nr(h,i))continue;let y=g!==h,x=l.g+eS(d.pos,l.pos)+(y?Math.pow(o,3):0),w=d.visited;if(!w||x<d.g){let E=qIe(d,t,h,i);d.visited=!0,d.parent=l,d.h=eS(t.pos,d.pos)+E*Math.pow(o,2),d.g=x,d.f=d.g+d.h,w?a.rescoreElement(d):a.push(d)}}}return null},KIe=(e,t)=>{let n=t,r=[];for(;n.parent;)r.unshift(n),n=n.parent;return r.unshift(e),r},eS=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),YIe=(e,t,n,r,i,s,o,a)=>{let l=o??e,f=a??t,[c,d,u,h]=r??[0,0,0,0],[g,U,y,x]=i??[0,0,0,0],w=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+f[2])/2,e[0]-h):(l[0]+f[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+f[3])/2,e[1]-c):(l[1]+f[3])/2:e[1]>t[1]?e[1]-c:n[1]-c,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+f[0])/2,e[2]+d):(l[2]+f[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+f[1])/2,e[3]+u):(l[3]+f[1])/2:e[3]<t[3]?e[3]+u:n[3]+u],E=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((f[0]+l[2])/2,t[0]-x):(f[0]+l[2])/2:t[0]>e[0]?t[0]-x:n[0]-x,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((f[1]+l[3])/2,t[1]-g):(f[1]+l[3])/2:t[1]>e[1]?t[1]-g:n[1]-g,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((f[2]+l[0])/2,t[2]+U):(f[2]+l[0])/2:t[2]<e[2]?t[2]+U:n[2]+U,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((f[3]+l[1])/2,t[3]+y):(f[3]+l[1])/2:t[3]<e[3]?t[3]+y:n[3]+y],S=BQ([w,E]);if(!s&&w[2]-w[0]+E[2]-E[0]>S[2]-S[0]+1e-11&&w[3]-w[1]+E[3]-E[1]>S[3]-S[1]+1e-11){let[M,A]=[(E[0]+E[2])/2,(E[1]+E[3])/2];if(t[0]>e[2]&&e[1]>t[3]){let C=w[2]+(E[0]-w[2])/2,I=E[3]+(w[1]-E[3])/2;return Fr(yi(e[2]-M,e[1]-A),yi(e[0]-M,e[3]-A))>0?[[w[0],w[1],C,w[3]],[C,E[1],E[2],E[3]]]:[[w[0],I,w[2],w[3]],[E[0],E[1],E[2],I]]}else if(e[2]<t[0]&&e[3]<t[1]){let C=w[2]+(E[0]-w[2])/2,I=w[3]+(E[1]-w[3])/2;return Fr(yi(e[0]-M,e[1]-A),yi(e[2]-M,e[3]-A))>0?[[w[0],w[1],w[2],I],[E[0],I,E[2],E[3]]]:[[w[0],w[1],C,w[3]],[C,E[1],E[2],E[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){let C=E[2]+(w[0]-E[2])/2,I=w[3]+(E[1]-w[3])/2;return Fr(yi(e[2]-M,e[1]-A),yi(e[0]-M,e[3]-A))>0?[[C,w[1],w[2],w[3]],[E[0],E[1],C,E[3]]]:[[w[0],w[1],w[2],I],[E[0],I,E[2],E[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){let C=E[2]+(w[0]-E[2])/2,I=E[3]+(w[1]-E[3])/2;return Fr(yi(e[0]-M,e[1]-A),yi(e[2]-M,e[3]-A))>0?[[C,w[1],w[2],w[3]],[E[0],E[1],C,E[3]]]:[[w[0],I,w[2],w[3]],[E[0],E[1],E[2],I]]}}return[w,E]},ZIe=(e,t,n,r,i,s)=>{let o=new Set,a=new Set;n===Ls||n===er?a.add(t[1]):o.add(t[0]),i===Ls||i===er?a.add(r[1]):o.add(r[0]),e.forEach(c=>{o.add(c[0]),o.add(c[2]),a.add(c[1]),a.add(c[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);let l=Array.from(a).sort((c,d)=>c-d),f=Array.from(o).sort((c,d)=>c-d);return{row:l.length,col:f.length,data:l.flatMap((c,d)=>f.map((u,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[u,c]})))}},xF=(e,t,n)=>{switch(t){case Os:return P(n[0],e[1]);case er:return P(e[2],n[1]);case oi:return P(n[0],e[3])}return P(e[0],n[1])},qIe=(e,t,n,r)=>{if(r===er)switch(n){case er:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case Os:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case oi:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Ls:return e.pos[1]===t.pos[1]?4:2}else if(r===Ls)switch(n){case er:return e.pos[1]===t.pos[1]?4:2;case Os:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case oi:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case Ls:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(r===Os)switch(n){case er:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Os:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case oi:return e.pos[0]===t.pos[0]?4:2;case Ls:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(r===oi)switch(n){case er:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Os:return e.pos[0]===t.pos[0]?4:2;case oi:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case Ls:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},QIe=([e,t],n)=>[h5([e,t-1],n),h5([e+1,t],n),h5([e,t+1],n),h5([e-1,t],n)],h5=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,oy=(e,t)=>{for(let n=0;n<t.col;n++)for(let r=0;r<t.row;r++){let i=h5([n,r],t);if(i&&e[0]===i.pos[0]&&e[1]===i.pos[1])return i}return null},BQ=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],b6=(e,t)=>{let n=t.get(e);return n&&sl(n)?n:null},A0=(e,t,n,r)=>{let i=e[0][0],s=e[0][1],o=e.map(a=>V4(a,tr(Ye(e[0]),-1)));return(i<-pn||i>pn||s<-pn||s>pn||i+o[o.length-1][0]<-pn||s+o[o.length-1][0]>pn||i+o[o.length-1][1]<-pn||s+o[o.length-1][1]>pn)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:i,y:s,points:o,...h6(o)}),o=o.map(([a,l])=>P(At(a,-1e6,1e6),At(l,-1e6,1e6))),{points:o,x:At(i,-1e6,1e6),y:At(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...h6(o),startIsSpecial:n,endIsSpecial:r}},tI=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,r)=>{if(r===0||r===e.length-1)return!0;let i=e[r+1],s=Math.abs(n[1]-i[1])<Math.abs(n[0]-i[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},nI=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;let r=e[n-1];return Zt(r,t)>qT}):e,JIe=e=>{switch(e){case 0:return Os;case 1:return er;case 2:return oi}return Ls},vF=(e,t,n,r,i,s,o)=>{if(o){if(s){let a=V2(e,s,t);return kTe(s,a)}return r}if(i){let a=HC(n||[0,0],i);return Math.abs(j7(i,a)-gn)>.01?V2(e,i,t):a}return r},wF=(e,t,n,r,i)=>vTe(e,t,r,r&&zl(r,Array(4).fill(j7(r,e))),n,i),EF=(e,t,n,r)=>Ya(Xa(e),n,t,r,!0,!0),SF=(e,t)=>e[0]===t[0]&&e[1]===t[1],rI=(e,t=qT)=>e.slice(1).map((n,r)=>Math.abs(n[0]-e[r][0])<t||Math.abs(n[1]-e[r][1])<t).every(Boolean),eNe={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},tNe=e=>Object.keys(Fn).includes(e)?Fn[e]:B0,Q1=(e,t)=>{if(!t)return null;let n=t.focus||0;return Fe(e)?K4(t)?{...t,focus:n,fixedPoint:z7(t.fixedPoint??[0,0])}:null:{...t,focus:n}},xd=(e,t)=>{let n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||fa(),fillStyle:e.fillStyle||qn.fillStyle,strokeWidth:e.strokeWidth||qn.strokeWidth,strokeStyle:e.strokeStyle??qn.strokeStyle,roughness:e.roughness??qn.roughness,opacity:e.opacity==null?qn.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||qn.strokeColor,backgroundColor:e.backgroundColor||qn.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:N6(e.type)?Rr.LEGACY:Rr.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??I6(),link:e.link?go(e.link):null,locked:e.locked??!1};return("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData),{...e,...n,...tJ(n),...t}},nNe=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){let[c,d]=e.font.split(" ");t=parseFloat(c),n=tNe(d)}let r=typeof e.text=="string"&&e.text||"",i=e.lineHeight||(e.height?Mve(e):qh(e.fontFamily));return e=xd(e,{fontSize:t,fontFamily:n,text:r,textAlign:e.textAlign||Bb,verticalAlign:e.verticalAlign||O4,containerId:e.containerId??null,originalText:e.originalText||r,autoResize:e.autoResize??!0,lineHeight:i}),!r&&!e.isDeleted&&(e={...e,originalText:r,isDeleted:!0},e=q7(e)),e;case"freedraw":return xd(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return xd(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":let{startArrowhead:s=null,endArrowhead:o=null}=e,a=e.x,l=e.y,f=!Array.isArray(e.points)||e.points.length<2?[P(0,0),P(e.width,e.height)]:e.points;return(f[0][0]!==0||f[0][1]!==0)&&({points:f,x:a,y:l}=je.getNormalizedPoints(e)),xd(e,{type:e.type==="draw"?"line":e.type,startBinding:Q1(e,e.startBinding),endBinding:Q1(e,e.endBinding),lastCommittedPoint:null,startArrowhead:s,endArrowhead:o,points:f,x:a,y:l,...h6(f)});case"arrow":{let{startArrowhead:c=null,endArrowhead:d="arrow"}=e,u=e.x,h=e.y,g=!Array.isArray(e.points)||e.points.length<2?[P(0,0),P(e.width,e.height)]:e.points;(g[0][0]!==0||g[0][1]!==0)&&({points:g,x:u,y:h}=je.getNormalizedPoints(e));let U={type:e.type,startBinding:Q1(e,e.startBinding),endBinding:Q1(e,e.endBinding),lastCommittedPoint:null,startArrowhead:c,endArrowhead:d,points:g,x:u,y:h,elbowed:e.elbowed,...h6(g)};return Fe(e)?xd(e,{...U,elbowed:!0,startBinding:Q1(e,e.startBinding),endBinding:Q1(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):xd(e,U)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return xd(e,{});case"magicframe":case"frame":return xd(e,{name:e.name??null})}return null},rNe=(e,t)=>{if(e.boundElements){let n=e.boundElements.slice(),r=new Set;e.boundElements=n.reduce((i,s)=>{let o=t.get(s.id);if(o&&!r.has(s.id)){if(r.add(s.id),o.isDeleted)return i;i.push(s),Oe(o)&&!o.containerId&&(o.containerId=e.id)}return i},[])}},iNe=(e,t)=>{let n=e.containerId?t.get(e.containerId):null;if(!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(r=>r.id===e.id)){let r=(n.boundElements||(n.boundElements=[])).slice();r.push({type:"text",id:e.id}),n.boundElements=r}},sNe=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},iI=(e,t,n)=>{let r=new Set,i=t?ct(t):null,s=If((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!y6(l)){let f=nNe(l);if(f){let c=i==null?void 0:i.get(l.id);c&&c.version>f.version&&(f=q7(f,c.version)),r.has(f.id)&&(f={...f,id:fa()}),r.add(f.id),a.push(f)}}return a},[]));if(!(n!=null&&n.repairBindings))return s;let o=ct(s);for(let a of s)a.frameId&&sNe(a,o),Oe(a)&&a.containerId?iNe(a,o):a.boundElements&&rNe(a,o),n.refreshDimensions&&Oe(a)&&Object.assign(a,pQ(a,di(a,o),o)),mt(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!Et(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!Et(a))&&(a.endBinding=null));return s.map(a=>{if(Fe(a)&&a.startBinding==null&&a.endBinding==null&&!rI(a.points))return{...a,...QT(a,o,{points:[P(0,0),a.points[a.points.length-1]]}),index:a.index};if(Fe(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,f])=>Math.abs(l)>1e6||Math.abs(f)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);let l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[P(0,0),P(0,-10),P(l.width/2+5,-10),P(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},oNe=(e,t,n)=>{let r=t[e];return r!==void 0?r:n[e]},kF={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??oNe("defaultSidebarDockedPreference",e,t)]},aNe=(e,t)=>{var i;e=e||{};let n=oc(),r={};for(let s of Object.keys(kF))if(s in e){let[o,a]=kF[s](e,n);r[o]=a}for(let[s,o]of Object.entries(n)){let a=e[s],l=t?t[s]:void 0;r[s]=a!==void 0?a:l!==void 0?l:o}return{...r,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...Ur(n,r.activeTool.type&&eNe[r.activeTool.type]?r.activeTool:{type:"selection"}),lastActiveTool:null,locked:r.activeTool.locked??!1},zoom:{value:mf(j5(e.zoom)?e.zoom:((i=e.zoom)==null?void 0:i.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:Qa.name}:r.openSidebar,gridSize:_Te(j5(e.gridSize)?e.gridSize:B4),gridStep:Jq(j5(e.gridStep)?e.gridStep:kZ),editingFrame:null}},K7=(e,t,n,r)=>({elements:iI(e==null?void 0:e.elements,n,r),appState:aNe(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),CF=e=>{let t=iI(Un(e.elements),null);return t.length?{...e,elements:t}:null},sI=(e=[],t)=>{let n=[];for(let r of e)if(Array.isArray(r)){let i=CF({status:t,elements:r,id:fa(),created:Date.now()});i&&n.push(i)}else{let i=r,s=CF({...i,id:i.id||fa(),status:i.status||t,created:i.created||Date.now()});s&&n.push(s)}return n},ja=32,mn=12,v0=256,FQ=50,Cu="NOT_SPREADSHEET",Z2="VALID_SPREADSHEET",p5=e=>{let t=/^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},tS=(e,t)=>e.slice(1).every(n=>p5(n[t])!==null),MF=e=>{let t=e[0].length;if(t>2)return{type:Cu,reason:"More than 2 columns"};if(t===1){if(!tS(e,0))return{type:Cu,reason:"Value is not numeric"};let l=p5(e[0][0])===null,f=(l?e.slice(1):e).map(c=>p5(c[0]));return f.length<2?{type:Cu,reason:"Less than two rows"}:{type:Z2,spreadsheet:{title:l?e[0][0]:null,labels:null,values:f}}}let n=tS(e,0),r=tS(e,1);if(!n&&!r)return{type:Cu,reason:"Value is not numeric"};let[i,s]=r?[0,1]:[1,0],o=p5(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:Cu,reason:"Less than 2 rows"}:{type:Z2,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[i]),values:a.map(l=>p5(l[s]))}}},lNe=e=>{let t=[];for(let n=0;n<e[0].length;n++){let r=[];for(let i=0;i<e.length;i++)r.push(e[i][n]);t.push(r)}return t},cNe=e=>{let t=e.trim().split(`
`).map(i=>i.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(i=>i.trim().split(","))),t.length===0)return{type:Cu,reason:"No values"};let n=t[0].length;if(!t.every(i=>i.length===n))return{type:Cu,reason:"All rows don't have same number of columns"};let r=MF(t);if(r.type!==Z2){let i=MF(lNe(t));if(i.type===Z2)return i}return r},l9=dxe(lxe),sa={fillStyle:"hachure",fontFamily:B0,fontSize:Bf,opacity:100,roughness:1,strokeColor:Mt.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:mo.MIDDLE,locked:!1},$Q=e=>{let t=(ja+mn)*e.values.length+mn,n=v0+mn*2;return{chartWidth:t,chartHeight:n}},fNe=(e,t,n,r,i)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>yo({groupIds:[r],backgroundColor:i,...sa,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(ja+mn)+mn*2,y:n+mn/2,width:ja,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},dNe=(e,t,n,r,i)=>{let s=yo({groupIds:[r],backgroundColor:i,...sa,x:t-mn,y:n-mn,text:"0",textAlign:"right"}),o=yo({groupIds:[r],backgroundColor:i,...sa,x:t-mn,y:n-v0-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},uNe=(e,t,n,r,i)=>{let{chartWidth:s,chartHeight:o}=$Q(e),a=Sh({backgroundColor:i,groupIds:[r],...sa,type:"line",x:t,y:n,width:s,points:[P(0,0),P(s,0)]}),l=Sh({backgroundColor:i,groupIds:[r],...sa,type:"line",x:t,y:n,height:o,points:[P(0,0),P(0,-o)]}),f=Sh({backgroundColor:i,groupIds:[r],...sa,type:"line",x:t,y:n-v0-mn,strokeStyle:"dotted",width:s,opacity:FQ,points:[P(0,0),P(s,0)]});return[a,l,f]},zQ=(e,t,n,r,i,s)=>{let{chartWidth:o,chartHeight:a}=$Q(e),l=e.title?yo({backgroundColor:i,groupIds:[r],...sa,text:e.title,x:t+o/2,y:n-v0-mn*2-Bf,roundness:null,textAlign:"center"}):null,f=s?cc({backgroundColor:i,groupIds:[r],...sa,type:"rectangle",x:t,y:n-a,width:o,height:a,strokeColor:Mt.black,fillStyle:"solid",opacity:6}):null;return[...f?[f]:[],...l?[l]:[],...fNe(e,t,n,r,i),...dNe(e,t,n,r,i),...uNe(e,t,n,r,i)]},hNe=(e,t,n)=>{let r=Math.max(...e.values),i=fa(),s=l9[Math.floor(Math.random()*l9.length)];return[...e.values.map((o,a)=>{let l=o/r*v0;return cc({backgroundColor:s,groupIds:[i],...sa,type:"rectangle",x:t+a*(ja+mn)+mn,y:n-l-mn,width:ja,height:l})}),...zQ(e,t,n,i,s,vt.DEV)]},pNe=(e,t,n)=>{let r=Math.max(...e.values),i=fa(),s=l9[Math.floor(Math.random()*l9.length)],o=0,a=[];for(let U of e.values){let y=o*(ja+mn),x=-(U/r)*v0;a.push([y,x]),o++}let l=Math.max(...a.map(U=>U[0])),f=Math.max(...a.map(U=>U[1])),c=Math.min(...a.map(U=>U[0])),d=Math.min(...a.map(U=>U[1])),u=Sh({backgroundColor:s,groupIds:[i],...sa,type:"line",x:t+mn+ja/2,y:n-mn,height:f-d,width:l-c,strokeWidth:2,points:a}),h=e.values.map((U,y)=>{let x=y*(ja+mn)+mn/2,w=-(U/r)*v0+mn/2;return cc({backgroundColor:s,groupIds:[i],...sa,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+x+ja/2,y:n+w-mn*2,width:mn,height:mn})}),g=e.values.map((U,y)=>{let x=y*(ja+mn)+mn/2,w=U/r*v0+mn/2+mn;return Sh({backgroundColor:s,groupIds:[i],...sa,type:"line",x:t+x+ja/2+mn/2,y:n-w,height:w,strokeStyle:"dotted",opacity:FQ,points:[P(0,0),P(0,w)]})});return[...zQ(e,t,n,i,s,vt.DEV),u,...g,...h]},mNe=(e,t,n,r)=>e==="line"?pNe(t,n,r):hNe(t,n,r),oI="clipboard"in navigator&&"writeText"in navigator.clipboard,aI="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,gNe=e=>!!([ia.excalidraw,ia.excalidrawClipboard,ia.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),bNe=({types:e,files:t})=>{var r,i,s,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(let[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((r=n.clipboardData)==null||r.setData(a,l),((i=n.clipboardData)==null?void 0:i.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(f){throw new Error(f.message)}}if(t){let a=-1;for(let l of t){a++;try{if((s=n.clipboardData)==null||s.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(f){throw new Error(f.message)}}}return n},UNe=({elements:e,files:t})=>{let n=ct(e),r=new Set(e.filter(a=>at(a))),i=!1,s=e.reduce((a,l)=>(Zo(l)&&(i=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});i&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");let o={type:ia.excalidrawClipboard,elements:e.map(a=>{if(Hs(a,n)&&!r.has(Hs(a,n))){let l=d1(a);return ye(l,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},yNe=async(e,t,n)=>{await Xb(UNe({elements:e,files:t}),n)},xNe=e=>{let t=cNe(e);return t.type===Z2?{spreadsheet:t.spreadsheet}:null};function HQ(e){var n;let t=[];for(let r of e.childNodes)if(r.nodeType===3){let i=(n=r.textContent)==null?void 0:n.trim();i&&t.push({type:"text",value:i})}else if(r instanceof HTMLImageElement){let i=r.getAttribute("src");i&&i.startsWith("http")&&t.push({type:"imageUrl",value:i})}else t=t.concat(HQ(r));return t}var vNe=e=>{var n;let t=(n=e.clipboardData)==null?void 0:n.getData(rt.html);if(!t)return null;try{let r=new DOMParser().parseFromString(t,rt.html),i=HQ(r.body);if(i.length)return{type:"mixedContent",value:i}}catch(r){console.error(`error in parseHTMLFromPaste: ${r.message}`)}return null},wNe=async()=>{var n,r,i,s;let e={},t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((r=navigator.clipboard)!=null&&r.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);let a=await((i=navigator.clipboard)==null?void 0:i.readText());if(a)return{[rt.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(let o of t)for(let a of o.types)if(FZ(Cxe,a))try{if(a===rt.text||a===rt.html)e[a]=await(await o.getType(a)).text();else if(fJ(a)){let l=await o.getType(a),f=m5(l,a,void 0);e[a]=f}else throw new OB(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof OB?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},ENe=async(e,t=!1)=>{var n,r;try{let i=!t&&e&&vNe(e);return i?i.value.every(s=>s.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(rt.text))||i.value.map(s=>s.value).join(`
`).trim()}:i:{type:"text",value:(((r=e.clipboardData)==null?void 0:r.getData(rt.text))||"").trim()}}catch{return{type:"text",value:""}}},VQ=async(e,t=!1)=>{let n=await ENe(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{let r=!t&&xNe(n.value);if(r)return r}catch(r){console.error(r)}try{let r=JSON.parse(n.value),i=r.type===ia.excalidrawClipboardWithAPI;if(gNe(r))return{elements:r.elements,files:r.files,text:t?JSON.stringify(r.elements,null,2):void 0,programmaticAPI:i}}catch{}return{text:n.value}},SNe=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[rt.png]:e})])}catch(t){if(zb(e))await navigator.clipboard.write([new window.ClipboardItem({[rt.png]:await e})]);else throw t}},Xb=async(e,t)=>{var n,r;if(oI)try{await navigator.clipboard.writeText(e||"");return}catch(i){console.error(i)}try{if(t){if((n=t.clipboardData)==null||n.setData(rt.text,e||""),((r=t.clipboardData)==null?void 0:r.getData(rt.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(i){console.error(i)}if(!kNe(e))throw new Error("Error copying to clipboard.")},kNe=e=>{e||(e=" ");let t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";let r=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${r}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let i=!1;try{n.select(),n.setSelectionRange(0,n.value.length),i=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),i},lI=({elements:e,appState:t,files:n,maxWidthOrHeight:r,getDimensions:i,exportPadding:s,exportingFrame:o})=>{let{elements:a,appState:l}=K7({elements:e,appState:t},null,null),{exportBackground:f,viewBackgroundColor:c}=l;return jQ(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:f,exportPadding:s,viewBackgroundColor:c,exportingFrame:o},(d,u)=>{let h=document.createElement("canvas");if(r){typeof i=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");let U=Math.max(d,u),y=r<U?r/U:(t==null?void 0:t.exportScale)??1;return h.width=d*y,h.height=u*y,{canvas:h,scale:y}}let g=(i==null?void 0:i(d,u))||{width:d,height:u};return h.width=g.width,h.height=g.height,{canvas:h,scale:g.scale??1}})},WQ=async({elements:e,appState:t=oc(),files:n={},exportPadding:r,renderEmbeddables:i,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{let{elements:l,appState:f}=K7({elements:e,appState:t},null,null),c={...f,exportPadding:r};return YT(l,c,n,{exportingFrame:s,renderEmbeddables:i,skipInliningFonts:o,reuseImages:a})},CNe=e=>e.type==="diamond"?[P(e.width/2,0),P(e.width,e.height/2),P(e.width/2,e.height),P(0,e.height/2)]:[P(0,0),P(0+e.width,0),P(0+e.width,e.height),P(0,e.height)],MNe=e=>mt(e)||la(e)?e.points:CNe(e),AF=e=>{let t=e.reduce((n,[r,i])=>(n.minY=Math.min(n.minY,i),n.minX=Math.min(n.minX,r),n.maxX=Math.max(n.maxX,r),n.maxY=Math.max(n.maxY,i),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},GQ=e=>{let t=MNe(e),{cx:n,cy:r}=AF(t),i=P(n,r),s=t.map(c=>pe(c,i,e.angle)),{minX:o,minY:a,maxX:l,maxY:f}=AF(s);return[o+e.x,a+e.y,l+e.x,f+e.y]},TF=(e,t,n=!1)=>{let r=GQ(e),i=t[0]<=r[0]&&t[2]>=r[2]&&t[1]<=r[1]&&t[3]>=r[3];return n?i?!0:r[0]<=t[0]&&r[2]>=t[2]&&r[1]<=t[1]&&r[3]>=t[3]:i},ANe=(e,t)=>{let n=GQ(e);return(ty(n[0],ji(t[0],t[2]))||ty(t[0],ji(n[0],n[2])))&&(ty(n[1],ji(t[1],t[3]))||ty(t[1],ji(n[1],n[3])))},TNe=({elements:e,bounds:t,type:n,errorMargin:r=0})=>{var o;VZ(t)&&(t=ol(t,ct(e)));let i=[t[0]-r,t[1]-r,t[2]+r,t[3]+r],s=new Set;for(let a of e)if(!s.has(a.id)&&(n==="overlap"?ANe(a,i):n==="inside"?TF(a,i):TF(a,i,!0))){if(s.add(a.id),a.boundElements)for(let l of a.boundElements)s.add(l.id);Oe(a)&&a.containerId&&s.add(a.containerId),Et(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}return e.filter(a=>s.has(a.id))};function IF(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function INe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}var NNe=1e-6;function NF(e,t){let n=Ye(e[1],e[0]),r=Ye(t,e[0]),i=Fr(n,r);return Math.abs(i)<NNe}function nS(e,t){let n=Ye(e[1],e[0]),r=Ye(t,e[0]);return Fr(n,r)<0}function RF(e,t){return NF(e,t[0])||NF(e,t[1])||(nS(e,t[0])?!nS(e,t[1]):nS(e,t[1]))}function RNe(e,t){return INe(IF(e),IF(t))&&RF(e,t)&&RF(t,e)}var XQ=(e,t,n)=>{let r=ct(e);for(let i of t)if(i.frameId){let s=n.get(i.id),o=n.get(i.frameId);if(s){let a=r.get(s);a&&ye(a,{frameId:o??i.frameId},!1)}}};function cI(e,t,n){let r=GB(t,n),i=GB(e,n);return r.some(s=>i.some(o=>RNe(s,o)))}var KQ=(e,t,n)=>Z7(mI(e,t,n,!1)).filter(r=>!at(r)&&!r.frameId||r.frameId===t.id),fI=(e,t,n)=>mI([t],e,n).some(r=>r.id===t.id),Kb=(e,t,n)=>{let[r,i,s,o]=gt(t,n),[a,l,f,c]=tn(e);return r<=a&&i<=l&&s>=f&&o>=c},T0=(e,t,n)=>Kb([e],t,n)||cI(e,t,n)||fI(e,t,n),_F=(e,t,n)=>{let[r,i,s,o]=gt(t,n);return NZ(P(r,i),P(e.x,e.y),P(s,o))},_Ne=e=>{let t=new Map;for(let n of e){let r=at(n)?n.id:n.frameId;r&&!t.has(r)&&t.set(r,dc(e,r))}return t},dc=(e,t)=>{let n=[];for(let r of e.values())r.frameId===t&&n.push(r);return n},dI=e=>e.filter(t=>at(t)),uI=e=>{let t=ct(dI(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},o3=(e,t,n,r)=>{let i=dc(e,t.id),s=new Set(i),o=new Set([...KQ(e,t,r),...i.filter(u=>fI(u,t,r))]),a=i.filter(u=>!o.has(u)),l=new Set(Array.from(o).flatMap(u=>u.groupIds));for(let u of a)if(!cI(u,t,r))u.groupIds.length===0&&s.delete(u);else if(u.groupIds.length>0)for(let h of u.groupIds)l.add(h);for(let u of a)if(u.groupIds.length>0){let h=!0;for(let g of u.groupIds)l.has(g)&&(h=!1);h&&s.delete(u)}let f=Array.from(o).filter(u=>u.groupIds.length===0);for(let u of f)s.add(u);let c=Array.from(o).filter(u=>u.groupIds.length>0),d=rQ(c,n);for(let[u,h]of Object.entries(d))if(h){let g=Cn(e,u);if(Kb(g,t,r))for(let U of g)s.add(U)}return[...s].filter(u=>!(Oe(u)&&u.containerId))},PNe=(e,t,n)=>DNe(Z7(e,KQ(e,t,n)),t,n),DNe=(e,t,n)=>{let r=[],i=new Map;for(let s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>i.get(a)))o=!0;else{let a=new Set(s.groupIds.flatMap(l=>Cn(n,l)));o=!Kb(Array.from(a),t,n)}s.groupIds.forEach(a=>{i.set(a,o)})}o||r.push(s)}return r},Hs=(e,t)=>e.frameId&&t.get(e.frameId)||null,LNe=(e,t)=>{let n=new Set,r=ct(e);e=Z7(e);for(let o of e)at(o)&&o.id!==t.id&&n.add(o.id);let i=new Set,s=[];for(let o of e)if(!(at(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){let a=o.groupIds.at(-1);if(!i.has(a)){i.add(a);let l=Cn(e,a);if(l.some(f=>T0(f,t,r)))for(let f of l)s.push(f)}}else T0(o,t,r)&&s.push(o);return s},V5=(e,t,n,r)=>{let i=ct(e),s=new Map;for(let f of e.values())f.frameId===n.id&&s.set(f.id,!0);let o=new Set(t.map(f=>f.id)),a=[],l=new Set;for(let f of t)at(f)&&f.id!==n.id&&l.add(f.id);for(let f of Z7(e,t)){if(at(f)||f.frameId&&l.has(f.frameId)||f.frameId&&r.selectedElementIds[f.id]&&r.selectedElementIds[f.frameId])continue;s.has(f.id)||a.push(f);let c=xt(f,i);c&&!o.has(c.id)&&!s.has(c.id)&&a.push(c)}for(let f of a)ye(f,{frameId:n.id},!1);return e},Y7=(e,t)=>{let n=new Map,r=new Map;for(let i of e)if(i.frameId){n.set(i.id,i);let s=r.get(i.frameId)||[];s.push(i);let o=xt(i,t);o&&(n.set(o.id,o),s.push(o)),r.set(i.frameId,s)}for(let[,i]of n)ye(i,{frameId:null},!1)},YQ=(e,t)=>{let n=dc(e,t.id);return Y7(n,ct(e)),e},ZQ=(e,t,n,r)=>V5(YQ(e,n),t,n,r.state).slice(),U6=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),i=new Set(r);if(t.editingGroupId)for(let a of r)a.groupIds.length===0?i.add(a):a.groupIds.flatMap(l=>Cn(e,l)).forEach(l=>i.add(l));let s=new Set,o=ct(e);return i.forEach(a=>{a.frameId&&!at(a)&&!c9(a,o,t)&&s.add(a)}),s.size>0&&Y7(s,o),e},Z7=(e,t)=>{let n=new Set,r=t||e;for(let o of r.values()){let a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}let i=new Set;for(let o of n)Cn(e,o).some(a=>at(a))&&i.add(o);let s=[];for(let o of r.values())i.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},ZC=(e,t,n)=>{let r=Oe(e)&&di(e,t)||e;return r.frameId&&n.selectedElementIds[r.id]&&n.selectedElementIds[r.frameId]?Hs(r,t):n.selectedElementIds[r.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:Hs(r,t)},c9=(e,t,n,r)=>{var l;let i=(r==null?void 0:r.targetFrame)??ZC(e,t,n);if(!i)return!1;let s=Oe(e)&&di(e,t)||e,o=f=>{r!=null&&r.checkedGroups&&s.groupIds.forEach(c=>{var d;(d=r.checkedGroups)==null||d.set(c,f)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[i.id])return!0;if(s.groupIds.length===0)return T0(s,i,t);for(let f of s.groupIds)if((l=r==null?void 0:r.checkedGroups)!=null&&l.has(f))return r.checkedGroups.get(f);let a=new Set(s.groupIds.filter(f=>r!=null&&r.checkedGroups?!r.checkedGroups.has(f):!0).flatMap(f=>Cn(t,f)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){let f=new Set(wt(t,n));if(n.frameToHighlight!==null)return!0;f.forEach(c=>{a.delete(c)})}for(let f of a)if(at(f))return o(!1),!1;for(let f of a)if(T0(f,i,t))return o(!0),!0;return!1},PF=(e,t,n,r,i)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;let s=cI(e,t,r)||fI(e,t,r);if(s){for(let o of e.groupIds)i==null||i.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!Kb([e],t,r)){let o=!1;if(n.selectedElementsAreBeingDragged)o=c9(e,r,n,{targetFrame:t,checkedGroups:i});else{o=e.frameId===t.id;for(let a of e.groupIds)i==null||i.set(a,o)}for(let a of e.groupIds)i==null||i.set(a,o);return o}return!1},qQ=e=>e.name===null?zZ(e)?"Frame":"AI Frame":e.name,hI=(e,t)=>TNe({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),QQ=e=>{let t=ct(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},pI=e=>{let t=new Set;return e.forEach(n=>{at(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},mI=(e,t,n,r=!0)=>{let[i,s,o,a]=gt(t,n),l=e.filter(f=>{let[c,d,u,h]=ol(f,n),g=Hs(f,n);if(g){let[U,y,x,w]=ol(g,n);c=Math.max(U,c),d=Math.max(y,d),u=Math.min(x,u),h=Math.min(w,h)}return f.locked===!1&&f.type!=="selection"&&!An(f)&&i<=c&&s<=d&&o>=u&&a>=h});return l=r?pI(l):l,l=l.filter(f=>{let c=Hs(f,n);return c?T0(f,c,n):!0}),l},JQ=(e,t,n,r)=>{let i=new Set(t.map(s=>s.id));return e.filter(s=>{let o=f9(s,n.width,n.height,n,r);return!i.has(s.id)&&o})},_r=function(){let e=null,t=null,n=null,r=(i,s)=>(n!=null&&i===e&&s.selectedElementIds===t||(n=i.some(o=>s.selectedElementIds[o.id]),e=i,t=s.selectedElementIds),n);return r.clearCache=()=>{e=null,t=null,n=null},r}(),ONe=(e,t,n)=>{let r=Array.from(new Set(wt(e,t).map(i=>n(i))));return r.length===1?r[0]:null},wt=(e,t,n)=>{let r=new Set,i=[];for(let s of e.values()){if(t.selectedElementIds[s.id]){i.push(s),r.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&An(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){i.push(s),r.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){let s=[];return i.forEach(o=>{at(o)&&dc(e,o.id).forEach(a=>!r.has(a.id)&&s.push(a)),s.push(o)}),s}return i},eJ=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:wt(e,t,{includeBoundTextElement:!0}),Kt=(e,t)=>ki(t.selectedElementIds,e)?t.selectedElementIds:e,DF=e=>{let t=new Map,n=[];for(let r of e)r.isDeleted||(n.push(r),t.set(r.id,r));return{elementsMap:t,elements:n}},jNe=Ob(e=>{(vt.DEV||vt.MODE===Fs.TEST||window!=null&&window.DEBUG_FRACTIONAL_INDICES)&&HT(e,{shouldThrow:vt.DEV||vt.MODE===Fs.TEST,includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),BNe=e=>{let t=["includeBoundTextElement","includeElementsInFrames"],n="";for(let r of t)n+=`${r}:${e[r]?"1":"0"}`;return n},LF=e=>typeof e=="string",qC=class a3{constructor(){Z(this,"callbacks",new Set),Z(this,"nonDeletedElements",[]),Z(this,"nonDeletedElementsMap",aa(new Map)),Z(this,"elements",[]),Z(this,"nonDeletedFramesLikes",[]),Z(this,"frames",[]),Z(this,"elementsMap",aa(new Map)),Z(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map}),Z(this,"sceneNonce"),Z(this,"insertElement",t=>{let n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)}),Z(this,"insertElements",t=>{var r;if(!t.length)return;let n=(r=t[0])!=null&&r.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)}),Z(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null),Z(this,"getElementsFromId",t=>{let n=this.getNonDeletedElementsMap(),r=n.get(t);return r?[r]:Cn(n,t)})}static mapElementToScene(t,n){LF(t)?this.sceneMapById.set(t,n):(this.sceneMapByElement.set(t,n),this.sceneMapById.set(t.id,n))}static getScene(t){return LF(t)?this.sceneMapById.get(t)||null:this.sceneMapByElement.get(t)||null}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){let n=BNe(t),r=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===r&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){let s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();let i=wt(r,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,i)),i}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){let n=this.getElement(t);return n&&eM(n)?n:null}mapElements(t){let n=!1,r=this.elements.map(i=>{let s=t(i);return s!==i&&(n=!0),s});return n&&this.replaceAllElements(r),n}replaceAllElements(t){let n=t instanceof Array?t:Array.from(t.values()),r=[];jNe(n),this.elements=If(n),this.elementsMap.clear(),this.elements.forEach(s=>{at(s)&&r.push(s),this.elementsMap.set(s.id,s),a3.mapElementToScene(s,this)});let i=DF(this.elements);this.nonDeletedElements=i.elements,this.nonDeletedElementsMap=i.elementsMap,this.frames=r,this.nonDeletedFramesLikes=DF(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=lc();for(let t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),a3.sceneMapById.forEach((t,n)=>{t===this&&a3.sceneMapById.delete(n)}),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let r=[...this.elements.slice(0,n),t,...this.elements.slice(n)];fc(r,ct([t])),this.replaceAllElements(r)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");let r=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];fc(r,ct(t)),this.replaceAllElements(r)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}};Z(qC,"sceneMapByElement",new WeakMap),Z(qC,"sceneMapById",new Map);var FNe=qC,Nf=FNe,ye=(e,t,n=!0,r)=>{var c,d;let i=!1,{points:s,fixedSegments:o,fileId:a,startBinding:l,endBinding:f}=t;if(Fe(e)&&(Object.keys(t).length===0||typeof s<"u"||typeof o<"u"||typeof l<"u"||typeof f<"u")){let u=aa(((c=Nf.getScene(e))==null?void 0:c.getNonDeletedElementsMap())??new Map);t={...t,angle:0,...QT({...e,x:t.x||e.x,y:t.y||e.y},u,{fixedSegments:o,points:s,startBinding:l,endBinding:f},{isDragging:r==null?void 0:r.isDragging})}}else typeof s<"u"&&(t={...h6(s),...t});for(let u in t){let h=t[u];if(typeof h<"u"){if(e[u]===h&&(typeof h!="object"||h===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){let g=e[u],U=h;if(g[0]===U[0]&&g[1]===U[1])continue}else if(u==="points"){let g=e[u],U=h;if(g.length===U.length){let y=!1,x=g.length;for(;--x;){let w=g[x],E=U[x];if(w[0]!==E[0]||w[1]!==E[1]){y=!0;break}}if(!y)continue}}e[u]=h,i=!0}}return i&&((typeof t.height<"u"||typeof t.width<"u"||typeof a<"u"||typeof s<"u")&&Hn.delete(e),e.version++,e.versionNonce=lc(),e.updated=I6(),n&&((d=Nf.getScene(e))==null||d.triggerUpdate())),e},yt=(e,t,n=!1)=>{let r=!1;for(let i in t){let s=t[i];if(typeof s<"u"){if(e[i]===s&&(typeof s!="object"||s===null))continue;r=!0}}return!r&&!n?e:{...e,...t,updated:I6(),version:e.version+1,versionNonce:lc()}},q7=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=lc(),e.updated=I6(),e),y6=e=>mt(e)||la(e)?e.points.length<2:e.width===0&&e.height===0,f9=(e,t,n,r,i)=>{let[s,o,a,l]=ol(e,i),f=xn({clientX:r.offsetLeft,clientY:r.offsetTop},r),c=xn({clientX:r.offsetLeft+t,clientY:r.offsetTop+n},r);return f.x<=a&&f.y<=l&&c.x>=s&&c.y>=o},l3=(e,t,n,r,i,s)=>{let[o,a,l,f]=tn(e,i),c=xn({clientX:r.offsetLeft+((s==null?void 0:s.left)||0),clientY:r.offsetTop+((s==null?void 0:s.top)||0)},r),d=xn({clientX:r.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:r.offsetTop+n-((s==null?void 0:s.bottom)||0)},r);return o>=c.x&&a>=c.y&&l<=d.x&&f<=d.y},OF=(e,t,n)=>{let r=Math.abs(t),i=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){let s=Math.round(Math.atan(i/r)/C0)*C0;s===0?n=0:s===Math.PI/2?t=0:n=r*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=r*Math.sign(n));return{width:t,height:n}},QC=(e,t,n,r)=>{let i=n-e,s=r-t,o=Math.round(Math.atan(s/i)/C0)*C0;if(o===0)s=0;else if(o===Math.PI/2)i=0;else{let a=Math.tan(o),l=-1,f=t-a*e,c=-1/a,d=-1,u=r-c*n,h=(l*u-d*f)/(a*d-c*l),g=(f*c-u*a)/(a*d-c*l);i=h-e,s=g-t}return{width:i,height:s}},tJ=e=>{let t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){let n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){let n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},jF={mouse:8,pen:16,touch:28},$Ne=16,nJ={e:!0,s:!0,n:!0,w:!0},BF={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},rS={e:!0,s:!0,n:!0,w:!0},Lc=(e,t,n,r,i,s,o)=>{let[a,l]=pe(P(e+n/2,t+r/2),P(i,s),o);return[a-n/2,l-r/2,n,r]},gI=e=>!(e.viewport.isMobile||e.isTouchScreen&&(hxe||EZ)),W5=e=>gI(e)?nJ:{},bI=([e,t,n,r,i,s],o,a,l,f={},c=4,d=Wh)=>{let u=jF[l],h=u/a.value,g=u/a.value,U=u/a.value,y=u/a.value,x=n-e,w=r-t,E=c/a.value,S=(u-d*2)/(2*a.value),M={nw:f.nw?void 0:Lc(e-E-U+S,t-E-y+S,h,g,i,s,o),ne:f.ne?void 0:Lc(n+E-S,t-E-y+S,h,g,i,s,o),sw:f.sw?void 0:Lc(e-E-U+S,r+E-S,h,g,i,s,o),se:f.se?void 0:Lc(n+E-S,r+E-S,h,g,i,s,o),rotation:f.rotation?void 0:Lc(e+x/2-h/2,t-E-y+S-$Ne/a.value,h,g,i,s,o)},A=5*jF.mouse/a.value;return Math.abs(x)>A&&(f.n||(M.n=Lc(e+x/2-h/2,t-E-y+S,h,g,i,s,o)),f.s||(M.s=Lc(e+x/2-h/2,r+E-S,h,g,i,s,o))),Math.abs(w)>A&&(f.w||(M.w=Lc(e-E-U+S,t+w/2-g/2,h,g,i,s,o)),f.e||(M.e=Lc(n+E-S,t+w/2-g/2,h,g,i,s,o))),M},rJ=(e,t,n,r="mouse",i=nJ)=>{if(e.locked||Fe(e))return{};if(e.type==="freedraw"||mt(e)){if(e.points.length===2){let[,o]=e.points;o[0]===0||o[1]===0?i=rS:o[0]>0&&o[1]<0?i=BF:o[0]>0&&o[1]>0?i=rS:o[0]<0&&o[1]>0?i=BF:o[0]<0&&o[1]<0&&(i=rS)}}else at(e)&&(i={...i,rotation:!0});let s=mt(e)?Wh+8:Yt(e)?0:Wh;return bI(gt(e,n,!0),e.angle,t,r,i,s,Yt(e)?0:void 0)},iJ=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;let n=e[0];return Fe(n)?!1:mt(n)?n.points.length>2:!0},JC=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],zNe=(e,t,n,r,i,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;let{rotation:l,...f}=rJ(e,s,t,o,W5(a));if(l&&JC(l,r,i))return"rotation";let c=Object.keys(f).filter(d=>{let u=f[d];return u?JC(u,r,i):!1});if(c.length>0)return c[0];if(gI(a)){let[d,u,h,g,U,y]=gt(e,t);if(!(mt(e)&&e.points.length<=2)){let x=Yt(e)?0:j4/s.value,w=j4/s.value,E=sJ(P(d-x,u-x),P(h+x,g+x),P(U,y),e.angle);for(let[S,M]of Object.entries(E))if(Gh(P(r,i),M,w))return S}}return!1},FF=(e,t,n,r,i,s,o,a)=>e.reduce((l,f)=>{if(l)return l;let c=zNe(f,o,t,n,r,i,s,a);return c?{element:f,transformHandleType:c}:null},null),$F=([e,t,n,r],i,s,o,a,l)=>{let f=bI([e,t,n,r,(e+n)/2,(t+r)/2],0,o,a,W5(l)),c=Object.keys(f).find(d=>{let u=f[d];return u&&JC(u,i,s)});if(c)return c;if(gI(l)){let d=(e+n)/2,u=(t+r)/2,h=j4/o.value,g=sJ(P(e-h,t-h),P(n+h,r+h),P(d,u),0);for(let[U,y]of Object.entries(g))if(Gh(P(i,s),y,h))return U}return!1},iS=["ns","nesw","ew","nwse"],HNe=(e,t)=>{let n=iS.indexOf(e);if(n>=0){let r=Math.round(t/(Math.PI/4));e=iS[(n+r)%iS.length]}return e},zF=e=>{let{element:t,transformHandleType:n}=e,r=t&&Math.sign(t.height)*Math.sign(t.width)===-1,i=null;switch(n){case"n":case"s":i="ns";break;case"w":case"e":i="ew";break;case"nw":case"se":r?i="nesw":i="nwse";break;case"ne":case"sw":r?i="nwse":i="nesw";break;case"rotation":return"grab"}return i&&t&&(i=HNe(i,t.angle)),i?`${i}-resize`:""},sJ=([e,t],[n,r],i,s)=>{let o=pe(P(e,t),i,s),a=pe(P(n,t),i,s),l=pe(P(e,r),i,s),f=pe(P(n,r),i,s);return{n:[o,a],e:[a,f],s:[f,l],w:[l,o]}},VNe=(e,t,n,r,i,s,o,a,l,f,c,d)=>{if(n.length===1){let[u]=n;if(t==="rotation")Fe(u)||(WNe(u,r,i,l,f,s),zs(u,r));else{if(Oe(u)&&t)return GNe(e,u,r,t,o,l,f),zs(u,r),!0;if(t){let h=n[0].id,g=r.get(h),U=e.get(h);if(g&&U){let{nextWidth:y,nextHeight:x}=QNe(g,U,r,e,t,l,f,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});q2(y,x,g,U,r,e,t,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o})}}}return!0}else if(n.length>1){if(t==="rotation")return XNe(e,n,r,i,l,f,s,c,d),!0;if(t){let{nextWidth:u,nextHeight:h,flipByX:g,flipByY:U,originalBoundingBox:y}=JNe(n,e,r,t,l,f,{shouldMaintainAspectRatio:a,shouldResizeFromCenter:o});return oJ(n,r,t,i,e,{shouldResizeFromCenter:o,shouldMaintainAspectRatio:a,flipByX:g,flipByY:U,nextWidth:u,nextHeight:h,originalBoundingBox:y}),!0}}return!1},WNe=(e,t,n,r,i,s)=>{let[o,a,l,f]=gt(e,t),c=(o+l)/2,d=(a+f)/2,u;at(e)?u=0:(u=5*Math.PI/2+Math.atan2(i-d,r-c),s&&(u=u+C0/2,u=u-u%C0),u=z4(u));let h=Af(e);if(ye(e,{angle:u}),h){let g=n.getElement(h);g&&!Et(e)&&ye(g,{angle:u})}},UI=(e,t,n,r)=>mt(e)||la(e)?{points:J4(0,t,J4(1,n,e.points,r),r)}:{},yI=(e,t,n)=>{let r=e.width;if(An(e)){let s=di(e,t);s&&(r=Tf(s,e))}let i=e.fontSize*(n/r);return i<uT?null:{size:i}},GNe=(e,t,n,r,i,s,o)=>{let[a,l,f,c,d,u]=gt(t,n),[h,g]=pe(P(s,o),P(d,u),-t.angle),U=0,y=0;r!=="e"&&r!=="w"&&(r.includes("e")&&(U=(h-a)/(f-a)),r.includes("w")&&(U=(f-h)/(f-a)),r.includes("n")&&(y=(c-g)/(c-l)),r.includes("s")&&(y=(g-l)/(c-l)));let x=Math.max(U,y);if(x>0){let w=t.width*x,E=t.height*x,S=yI(t,n,w);if(S===null)return;let M=[a,l],A=[f,c],C=[d,u],I=P(a,l);if(["n","w","nw"].includes(r)&&(I=P(A[0]-Math.abs(w),A[1]-Math.abs(E))),r==="ne"){let F=[M[0],A[1]];I=P(F[0],F[1]-Math.abs(E))}if(r==="sw"){let F=[A[0],M[1]];I=P(F[0]-Math.abs(w),F[1])}["s","n"].includes(r)&&(I[0]=C[0]-w/2),["e","w"].includes(r)&&(I[1]=C[1]-E/2),i&&(I[0]=C[0]-Math.abs(w)/2,I[1]=C[1]-Math.abs(E)/2);let R=t.angle,L=pe(I,P(d,u),R),_=P(I[0]+Math.abs(w)/2,I[1]+Math.abs(E)/2),O=pe(_,P(d,u),R);I=pe(L,O,-R);let[$,B]=I;ye(t,{fontSize:S.size,width:w,height:E,x:$,y:B})}if(r==="e"||r==="w"){let w=e.get(t.id),[E,S,M,A]=x0(w,w.width,w.height,!0),C=P(E,S),I=P(M,A),R=$b(C,I),L=pe(P(s,o),R,-w.angle),[_,,O]=x0(t,t.width,t.height,!0),$=O-_,B=I[0]-C[0],F=vT(ln({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight),z=B/$;r.includes("e")&&(z=(L[0]-C[0])/$),r.includes("w")&&(z=(I[0]-L[0])/$);let H=t.width*z<F?F:t.width*z,G=f1(t.originalText,ln(t),Math.abs(H)),V=Xi(G,ln(t),t.lineHeight),Y=V.height,[K,q,se,de]=x0(w,H,Y,!0),xe=se-K,ve=de-q,ue=[...C];["n","w","nw"].includes(r)&&(ue=[I[0]-Math.abs(xe),C[1]]);let te=w.angle,le=pe(ue,R,te),he=P(ue[0]+Math.abs(xe)/2,ue[1]+Math.abs(ve)/2),we=pe(he,R,te);ue=pe(le,we,-te);let Se={width:Math.abs(H),height:Math.abs(V.height),x:ue[0],y:ue[1],text:G,autoResize:!1};ye(t,Se)}},XNe=(e,t,n,r,i,s,o,a,l)=>{var c;let f=5*Math.PI/2+Math.atan2(s-l,i-a);o&&(f+=C0/2,f-=f%C0);for(let d of t)if(!at(d)){let[u,h,g,U]=gt(d,n),y=(u+g)/2,x=(h+U)/2,w=((c=e.get(d.id))==null?void 0:c.angle)??d.angle,[E,S]=pe(P(y,x),P(a,l),f+w-d.angle);Fe(d)?ye(d,{points:NTe(d,n)}):ye(d,{x:d.x+(E-y),y:d.y+(S-x),angle:z4(f+w)},!1),zs(d,n,{simultaneouslyUpdated:t});let M=xt(d,n);M&&!Et(d)&&ye(M,{x:M.x+(E-y),y:M.y+(S-x),angle:z4(f+w)},!1)}r.triggerUpdate()},KNe=(e,t,n,r,i)=>{let[s,o,a,l]=t.length===1?gt(t[0],n):tn(t),f=(s+a)/2,c=(o+l)/2,d=t.length===1?t[0].angle:0;switch([r,i]=pe(P(r,i),P(f,c),-d),e){case"n":return pe(P(r-(s+a)/2,i-o),P(0,0),d);case"s":return pe(P(r-(s+a)/2,i-l),P(0,0),d);case"w":return pe(P(r-s,i-(o+l)/2),P(0,0),d);case"e":return pe(P(r-a,i-(o+l)/2),P(0,0),d);case"nw":return pe(P(r-s,i-o),P(0,0),d);case"ne":return pe(P(r-a,i-o),P(0,0),d);case"sw":return pe(P(r-s,i-l),P(0,0),d);case"se":return pe(P(r-a,i-l),P(0,0),d);default:return[0,0]}},YNe=(e,t)=>{let[,[n,r]]=t.points;return e==="nw"&&(n<0||r<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||r>0)?"end":"origin"},ZNe=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},qNe=(e,t,n,r,i,s,o,a,l)=>{let f=ZNe(o,a,l),[c,d]=e;switch(f){case"top-left":return{x:c+(t-r)/2+(r-t)/2*Math.cos(s)+(n-i)/2*Math.sin(s),y:d+(n-i)/2+(r-t)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"top-right":return{x:c+(t-r)/2*(Math.cos(s)+1)+(n-i)/2*Math.sin(s),y:d+(n-i)/2+(t-r)/2*Math.sin(s)+(i-n)/2*Math.cos(s)};case"bottom-left":return{x:c+(t-r)/2*(1-Math.cos(s))+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)+(r-t)/2*Math.sin(s)};case"bottom-right":return{x:c+(t-r)/2*(Math.cos(s)+1)+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)+(t-r)/2*Math.sin(s)};case"center":return{x:c-(r-t)/2,y:d-(i-n)/2};case"east-side":return{x:c+(t-r)/2*(Math.cos(s)+1),y:d+(t-r)/2*Math.sin(s)+(n-i)/2};case"west-side":return{x:c+(t-r)/2*(1-Math.cos(s)),y:d+(r-t)/2*Math.sin(s)+(n-i)/2};case"north-side":return{x:c+(t-r)/2+(n-i)/2*Math.sin(s),y:d+(i-n)/2*(Math.cos(s)-1)};case"south-side":return{x:c+(t-r)/2+(i-n)/2*Math.sin(s),y:d+(n-i)/2*(Math.cos(s)+1)}}},q2=(e,t,n,r,i,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:f=!1}={})=>{let c={},d=xt(n,i);if(d){let U=s.get(d.id);if(U&&(c={fontSize:U.fontSize}),l){let y={...n,width:e,height:t},x=yI(d,i,Tf(y,d));if(x===null)return;c={fontSize:x.size}}else{let y=XZ(ln(d),d.lineHeight),x=KZ(d.fontSize,d.lineHeight);e=Math.max(e,y),t=Math.max(t,x)}}let u=UI(r,e,t,!0),h=P(r.x,r.y);if(mt(r)){let[U,y]=ol(r,s);h=P(U,y)}let g=qNe(h,r.width,r.height,e,t,r.angle,o,l,f);if(mt(r)&&u.points){let U=r.x-h[0],y=r.y-h[1];g.x+=U,g.y+=y;let x=u.points[0][0],w=u.points[0][1];g.x+=x,g.y+=w,u.points=u.points.map(E=>P(E[0]-x,E[1]-w))}if(e<0&&(g.x=g.x+e),t<0&&(g.y=g.y+t),"scale"in n&&"scale"in r&&ye(n,{scale:[(Math.sign(e)||r.scale[0])*r.scale[0],(Math.sign(t)||r.scale[1])*r.scale[1]]}),Et(n)&&d&&l){let U=e/n.width*d.fontSize;if(U<uT)return;c.fontSize=U}if(e!==0&&t!==0&&Number.isFinite(g.x)&&Number.isFinite(g.y)){let U={...g,width:Math.abs(e),height:Math.abs(t),...u};ye(n,U,a),zs(n,i,{newSize:{width:e,height:t}}),d&&c!=null&&ye(d,{fontSize:c.fontSize}),Gb(n,i,o,l)}},QNe=(e,t,n,r,i,s,o,{shouldMaintainAspectRatio:a=!1,shouldResizeFromCenter:l=!1}={})=>{let[f,c,d,u]=x0(t,t.width,t.height,!0),h=P(f,c),g=P(d,u),U=$b(h,g),y=pe(P(s,o),U,-t.angle),[x,w,E,S]=x0(e,e.width,e.height,!0),M=E-x,A=S-w,C=g[0]-h[0],I=g[1]-h[1],R=C/M,L=I/A;i.includes("e")&&(R=(y[0]-h[0])/M),i.includes("s")&&(L=(y[1]-h[1])/A),i.includes("w")&&(R=(g[0]-y[0])/M),i.includes("n")&&(L=(g[1]-y[1])/A);let _=e.width*R,O=e.height*L;if(l&&(_=2*_-t.width,O=2*O-t.height),a){let $=Math.abs(_)/t.width,B=Math.abs(O)/t.height;if(i.length===1&&(O*=$,_*=B),i.length===2){let F=Math.max($,B);_=t.width*F*Math.sign(_),O=t.height*F*Math.sign(O)}}return{nextWidth:_,nextHeight:O}},JNe=(e,t,n,r,i,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{let l=e.map($=>t.get($.id)),f=l.reduce(($,B)=>{if(!mt(B))return $;let F=Af(B);if(!F)return $;let z=t.get(F)??null;return An(z)?[...$,{...z,...je.getBoundTextElementPosition(B,z,n)}]:$},[]),c=el(l.map($=>$).concat(f)),{minX:d,minY:u,maxX:h,maxY:g,midX:U,midY:y}=c,x=h-d,w=g-u,E={ne:[d,g],se:[d,u],sw:[h,u],nw:[h,g],e:[d,u+w/2],w:[h,u+w/2],n:[d+x/2,g],s:[d+x/2,u]},[S,M]=a?[U,y]:E[r],A=a?2:1,C=Math.max(Math.abs(i-S)/x||0,Math.abs(s-M)/w||0)*A,I=r.includes("e")||r.includes("w")?Math.abs(i-S)*A:x,R=r.includes("n")||r.includes("s")?Math.abs(s-M)*A:w;o&&(I=x*C*Math.sign(i-S),R=w*C*Math.sign(s-M));let L={ne:[i<S,s>M],se:[i<S,s<M],sw:[i>S,s<M],nw:[i>S,s>M],e:[i<S,!1],w:[i>S,!1],n:[!1,s>M],s:[!1,s<M]},[_,O]=L[r].map($=>$);return{originalBoundingBox:c,nextWidth:I,nextHeight:R,flipByX:_,flipByY:O}},oJ=(e,t,n,r,i,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:f,nextWidth:c,originalBoundingBox:d}={})=>{if(c===void 0&&f===void 0&&a===void 0&&l===void 0||f===0||c===0)return;i||(i=t);let u=e.reduce((A,C)=>{let I=i.get(C.id);return I&&A.push({orig:I,latest:C}),A},[]),h;if(d)h=d;else{let A=u.reduce((C,{orig:I})=>{if(!mt(I))return C;let R=Af(I);if(!R)return C;let L=i.get(R)??null;return An(L)?[...C,{...L,...je.getBoundTextElementPosition(I,L,t)}]:C},[]);h=el(u.map(({orig:C})=>C).concat(A))}let{minX:g,minY:U,maxX:y,maxY:x,midX:w,midY:E}=h,S=y-g,M=x-U;if(c===void 0&&f===void 0&&(c=S,f=M),s&&(c===void 0?c=f*(S/M):f===void 0?f=c*(M/S):Math.abs(c/f-S/M)>.001&&(c=f*(S/M))),c&&f){let A=n.includes("e")||n.includes("w")?Math.abs(c)/S:1,C=n.includes("n")||n.includes("s")?Math.abs(f)/M:1,I;n.length===1?I=n.includes("e")||n.includes("w")?A:C:I=Math.max(Math.abs(c)/S||0,Math.abs(f)/M||0);let R={ne:[g,x],se:[g,U],sw:[y,U],nw:[y,x],e:[g,U+M/2],w:[y,U+M/2],n:[g+S/2,x],s:[g+S/2,U]},[L,_]=o?[w,E]:R[n],O=s||u.some(H=>H.latest.angle!==0||Oe(H.latest)||p6(H.latest));O&&(A=I,C=I);let[$,B]=[a?-1:1,l?-1:1],F=[];for(let{orig:H,latest:G}of u){if(Oe(H)&&An(H))continue;let V=H.width*A,Y=H.height*C,K=z4(H.angle*$*B),q=mt(H)||la(H),se=H.x-L,de=H.y-_,xe=a&&!q?V:0,ve=l&&!q?Y:0,ue=L+$*(se*A+xe),te=_+B*(de*C+ve),le=UI(H,V*$,Y*B,!1),he={x:ue,y:te,width:V,height:Y,angle:K,...le};if(Fe(H)&&(H.startBinding&&(he.startBinding={...H.startBinding,fixedPoint:[a?-H.startBinding.fixedPoint[0]+1:H.startBinding.fixedPoint[0],l?-H.startBinding.fixedPoint[1]+1:H.startBinding.fixedPoint[1]]}),H.endBinding&&(he.endBinding={...H.endBinding,fixedPoint:[a?-H.endBinding.fixedPoint[0]+1:H.endBinding.fixedPoint[0],l?-H.endBinding.fixedPoint[1]+1:H.endBinding.fixedPoint[1]]}),H.fixedSegments&&le.points&&(he.fixedSegments=H.fixedSegments.map(Se=>({...Se,start:le.points[Se.index-1],end:le.points[Se.index]})))),Yt(H)&&(he.scale=[H.scale[0]*$,H.scale[1]*B]),Oe(H)){let Se=yI(H,t,V);if(!Se)return;he.fontSize=Se.size}let we=i.get(Af(H)??"");if(we)if(O){let Se=we.fontSize*I;if(Se<uT)return;he.boundTextFontSize=Se}else he.boundTextFontSize=we.fontSize;F.push({element:G,update:he})}let z=F.map(({element:H})=>H);for(let{element:H,update:{boundTextFontSize:G,...V}}of F){let{width:Y,height:K,angle:q}=V;ye(H,V,!1,{isDragging:!0}),zs(H,t,{simultaneouslyUpdated:z,newSize:{width:Y,height:K}});let se=xt(H,t);se&&G&&(ye(se,{fontSize:G,angle:mt(H)?void 0:q},!1),Gb(H,t,n,!0))}r.triggerUpdate()}},eRe=(e,t,n,r,i,s)=>{if(t.length===1&&Fe(t[0])&&(t[0].startBinding||t[0].endBinding))return;let o=t.filter(d=>{if(Fe(d)&&d.startBinding&&d.endBinding){let u=t.find(g=>{var U;return g.id===((U=d.startBinding)==null?void 0:U.elementId)}),h=t.find(g=>{var U;return g.id===((U=d.endBinding)==null?void 0:U.elementId)});return u&&h}return!0}),a=new Set(o),l=o.filter(d=>at(d)).map(d=>d.id);if(l.length>0)for(let d of r.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);let f=tn(Array.from(a).map(d=>e.originalElements.get(d.id)??d)),c=tRe(f,n,i,s);a.forEach(d=>{if(HF(e,d,c),!Et(d)){let u=xt(d,r.getNonDeletedElementsMap());u&&HF(e,u,c),zs(d,r.getElementsMapIncludingDeleted(),{simultaneouslyUpdated:Array.from(a)})}})},tRe=(e,t,n,r)=>{let[i,s]=e,o=i+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){let[l,f]=Ar(i+t.x,s+t.y,r);n.x===0&&(o=l),n.y===0&&(a=f)}return{x:o-i,y:a-s}},HF=(e,t,n)=>{let r=e.originalElements.get(t.id)??t,i=r.x+n.x,s=r.y+n.y;ye(t,{x:i,y:s})},nRe=(e,t,n)=>{let[r,i]=tn(e);return[t-r,n-i]},VF=({newElement:e,elementType:t,originX:n,originY:r,x:i,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:f,zoom:c,widthAspectRatio:d=null,originOffset:u=null,informMutation:h=!0})=>{l&&e.type!=="selection"&&(d?a=o/d:(Math.abs(s-r)>Math.abs(i-n)?{width:o,height:a}=OF(t,a,i<n?-o:o):{width:o,height:a}=OF(t,o,s<r?-a:a),a<0&&(a=-a)));let g=i<n?n-o:n,U=s<r?r-a:r;f&&(o+=o,a+=a,g=n-o/2,U=r-a/2);let y=null;if(Oe(e)){a=e.height;let x=vT(ln({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,x),Math.abs(i-n)>Uxe/c&&(y={autoResize:!1}),U=r,f&&(g=n-o/2)}if(o!==0&&a!==0){let x=null;Yt(e)&&(x={initialWidth:o,initialHeight:a}),ye(e,{x:g+((u==null?void 0:u.x)??0),y:U+((u==null?void 0:u.y)??0),width:o,height:a,...y,...x},h)}},xI=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||wt(t,e).length))},rRe=e=>{let t=5381;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)+t+r}return t>>>0},iRe=e=>e.filter(t=>!t.isDeleted&&!y6(t)),Un=e=>e.filter(t=>!t.isDeleted),eM=e=>!e.isDeleted,sRe=e=>Un(e).map(t=>xT(t.type)?{...t,lastCommittedPoint:null}:t),aJ=e=>sRe(e),lJ=async e=>{let t;if(e.type===rt.png)try{return await(await Ve(async()=>{const{decodePngMetadata:n}=await Promise.resolve().then(()=>Lre);return{decodePngMetadata:n}},void 0)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new Fu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Fu("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{let r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),e.type===rt.svg)try{return FIe({svg:t})}catch(n){throw n.message==="INVALID"?new Fu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Fu("Error: cannot restore image")}return t},cJ=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},oRe=e=>e==="png"||e==="svg",vI=e=>{let t=cJ(e);return t==="png"||t==="svg"},fJ=e=>!!e&&Object.values(s6).includes(e),kh=e=>{let{type:t}=e||{};return fJ(t)},dJ=async(e,t,n,r)=>{let i=await lJ(e),s;try{try{s=JSON.parse(i)}catch(o){throw kh(e)?new Fu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(RIe(s))return{type:rt.excalidraw,data:K7({elements:aJ(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:r||e.handle||null,...IZ(s.appState||{}),...t?G2(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(EQ(s))return{type:rt.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof Fu?o:new Error("Error: invalid file")}},uJ=async(e,t,n,r)=>{let i=await dJ(e,t,n,r);if(i.type!==rt.excalidraw)throw new Error("Error: invalid file");return i.data},hJ=(e,t="unpublished")=>{let n=JSON.parse(e);if(!EQ(n))throw new Error("Invalid library");let r=n.libraryItems||n.library;return sI(r,t)},aRe=async(e,t="unpublished")=>hJ(await lJ(e),t),Q2=async e=>new Promise(async(t,n)=>{try{zb(e)&&(e=await e),e.toBlob(r=>{if(!r)return n(new TEe("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(r)})}catch(r){n(r)}}),lRe=async e=>{try{let t=await window.crypto.subtle.digest("SHA-1",await zu(e));return pve(new Uint8Array(t))}catch(t){return console.error(t),cT(40)}},WF=async e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),cRe=(e,t)=>`data:${t};base64,${gJ(d9(e),!0)}`,fRe=(e,t="")=>{let n=e.indexOf(","),r=atob(e.slice(n+1)),i=e.slice(0,n).split(":")[1].split(";")[0],s=new ArrayBuffer(r.length),o=new Uint8Array(s);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return new File([s],t,{type:i})},dRe=e=>bJ(e.slice(e.indexOf(",")+1)),tM=async(e,t)=>{if(e.type===rt.svg)return e;let[n,r]=await Promise.all([Ve(()=>import("./pica-paFa05HP.js").then(s=>s.p),__vite__mapDeps([2,3])).then(s=>s.default),Ve(()=>import("./image-blob-reduce.esm-xKov1Fz_.js"),[]).then(s=>s.default)]),i=r({pica:n({features:["js","wasm"]})});if(t.outputType){let{outputType:s}=t;i._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!kh(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await i.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},GF=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:rt.svg}),uRe=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});let r=await n.blob();if(r.type&&kh(r)){let i=t||r.name||"";return new File([r],i,{type:r.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},hRe=async e=>{let t=e.dataTransfer.files.item(0),n=await pRe(e);return{file:t?await wI(t):null,fileHandle:n}},pRe=async e=>{if(c1)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},XF=e=>{let t=null,n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,r={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===r.png?t=rt.png:n.startsWith(r.jpg)?t=rt.jpg:n.startsWith(r.gif)&&(t=rt.gif),t},m5=(e,t,n)=>new File([e],n||"",{type:t}),wI=async e=>{var t,n;if(e.type){if(kh(e)){let r=await zu(e),i=XF(r);i&&i!==e.type&&(e=m5(r,i,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=m5(await zu(e),rt.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=m5(await zu(e),rt.excalidraw,e.name);else{let r=await zu(e),i=XF(r);i&&(e=m5(r,i,e.name))}return e},zu=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{let r=new FileReader;r.onload=i=>{var s;if(!((s=i.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),d9=e=>{let t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e),n="";for(let r of t)n+=String.fromCharCode(r);return n},pJ=e=>{let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},mJ=e=>new TextDecoder("utf-8").decode(pJ(e)),gJ=(e,t=!1)=>t?window.btoa(e):window.btoa(d9(e)),bJ=(e,t=!1)=>t?window.atob(e):mJ(window.atob(e)),UJ=({text:e,compress:t})=>{let n;if(t!==!1)try{n=d9(R9e(e))}catch(r){console.error("encode: cannot deflate",r)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||d9(e)}},yJ=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:mJ(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?_9e(new Uint8Array(pJ(t)),{to:"string"}):t},xJ=async e=>{let t=EY(new Uint8Array(await zu(e))).find(n=>n.name==="tEXt");return t?SY.decode(t.data):null},mRe=async({blob:e,metadata:t})=>{let n=EY(new Uint8Array(await zu(e))),r=SY.encode(rt.excalidraw,JSON.stringify(UJ({text:t,compress:!0})));return n.splice(-1,0,r),new Blob([Wye(n)],{type:rt.png})},gRe=async e=>{let t=await xJ(e);if((t==null?void 0:t.keyword)===rt.excalidraw)try{let n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===ia.excalidraw)return t.text;throw new Error("FAILED")}return yJ(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},vJ={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library",libraries:"Browse libraries",loadingScene:"Loading scene",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame"},wJ={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},EJ={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},SJ={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas..."},kJ={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},CJ={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},MJ={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},AJ={selection:"Selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw"},TJ={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},IJ={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},NJ={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},RJ={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},_J={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},PJ={or:"Or"},DJ={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},LJ={title:"Error"},OJ={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},jJ={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},BJ={title:"Clear canvas"},FJ={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},$J={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},zJ={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},HJ={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},VJ={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},WJ={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},GJ={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},XJ={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},KJ={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},YJ={mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},ZJ={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},qJ={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},QJ={placeholder:"Quick search"},JJ={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},eee={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},tee={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},EI={labels:vJ,elementLink:wJ,library:EJ,search:SJ,buttons:kJ,alerts:CJ,errors:MJ,toolBar:AJ,element:TJ,headings:IJ,hints:NJ,canvasError:RJ,errorSplash:_J,shareDialog:PJ,roomDialog:DJ,errorDialog:LJ,exportDialog:OJ,helpDialog:jJ,clearCanvasDialog:BJ,publishDialog:FJ,publishSuccessDialog:$J,confirmDialog:zJ,imageExportDialog:HJ,encrypted:VJ,stats:WJ,toast:GJ,colors:XJ,welcomeScreen:KJ,colorPicker:YJ,overwriteConfirm:ZJ,mermaid:qJ,quickSearch:QJ,fontList:JJ,userList:eee,commandPalette:tee},nee=100,ree=36,iee={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:nee,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:ree,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100};let bRe=0;function ui(e,t){const n=`atom${++bRe}`,r={toString(){return n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=URe,r.write=yRe),r}function URe(e){return e(this)}function yRe(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const KF=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,YF=e=>"init"in e,ZF=e=>!!e.write,u9=new WeakMap,nM=e=>{var t;return rM(e)&&!((t=u9.get(e))!=null&&t[1])},xRe=(e,t)=>{const n=u9.get(e);n&&(n[1]=!0,n[0].forEach(r=>r(t)))},vRe=e=>{if(u9.has(e))return;const t=[new Set,!1];u9.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=r=>{t[0].add(r)}},rM=e=>typeof(e==null?void 0:e.then)=="function",qF=e=>"v"in e||"e"in e,ay=e=>{if("e"in e)throw e.e;return e.v},see=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},QF=(e,t,n,r,i)=>{var s;n.d.set(r,i.n),nM(n.v)&&see(t,n.v,i),(s=i.m)==null||s.t.add(t),e&&wRe(e,r,t)},zg=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),G5=(e,t,n)=>{e[t].add(n)},JF=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),G5(e,"M",()=>{var r;(r=n.m)==null||r.l.forEach(i=>G5(e,"M",i))}))},wRe=(e,t,n)=>{const r=e.D.get(t);r&&r.add(n)},ERe=(e,t)=>e.D.get(t),cu=e=>{let t,n=!1;const r=i=>{try{i()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(r),e.H.clear(),e.M.forEach(r),e.M.clear(),e.L.forEach(r),e.L.clear();if(n)throw t},oee=(...[e,t,n,r])=>{const i=(x,w,E)=>{const S="v"in w,M=w.v,A=nM(w.v)?w.v:null;if(rM(E)){vRe(E);for(const C of w.d.keys())see(x,E,e(C));w.v=E}else w.v=E;delete w.e,delete w.x,(!S||!Object.is(M,w.v))&&(++w.n,A&&xRe(A,E))},s=(x,w)=>{var E;const S=e(w);if(qF(S)&&(S.m&&!S.x||Array.from(S.d).every(([L,_])=>s(x,L).n===_)))return S;S.d.clear();let M=!0;const A=L=>{if(KF(w,L)){const O=e(L);if(!qF(O))if(YF(L))i(L,O,L.init);else throw new Error("no atom init");return ay(O)}const _=s(x,L);try{return ay(_)}finally{if(M)QF(x,w,S,L,_);else{const O=zg();QF(O,w,S,L,_),d(O,w,S),cu(O)}}};let C,I;const R={get signal(){return C||(C=new AbortController),C.signal},get setSelf(){return!I&&ZF(w)&&(I=(...L)=>{if(!M)return c(w,...L)}),I}};try{const L=t(w,A,R);if(i(w,S,L),rM(L)){(E=L.onCancel)==null||E.call(L,()=>C==null?void 0:C.abort());const _=()=>{if(S.m){const O=zg();d(O,w,S),cu(O)}};L.then(_,_)}return S}catch(L){return delete S.v,S.e=L,delete S.x,++S.n,S}finally{M=!1}},o=x=>ay(s(void 0,x)),a=(x,w,E)=>{var S,M;const A=new Map;for(const C of((S=E.m)==null?void 0:S.t)||[]){const I=e(C);I.m&&A.set(C,I)}for(const C of E.p)A.set(C,e(C));return(M=ERe(x,w))==null||M.forEach(C=>{A.set(C,e(C))}),A},l=(x,w,E)=>{const S=[],M=new Set,A=new Set,C=[[w,E]];for(;C.length>0;){const[I,R]=C[C.length-1];if(A.has(I)){C.pop();continue}if(M.has(I)){S.push([I,R,R.n]),A.add(I),R.x=!0,C.pop();continue}M.add(I);for(const[L,_]of a(x,I,R))I!==L&&!M.has(L)&&C.push([L,_])}G5(x,"H",()=>{const I=new Set([w]);for(let R=S.length-1;R>=0;--R){const[L,_,O]=S[R];let $=!1;for(const B of _.d.keys())if(B!==L&&I.has(B)){$=!0;break}$&&(s(x,L),d(x,L,_),O!==_.n&&(JF(x,L,_),I.add(L))),delete _.x}})},f=(x,w,...E)=>{let S=!0;const M=C=>ay(s(x,C)),A=(C,...I)=>{const R=e(C);try{if(KF(w,C)){if(!YF(C))throw new Error("atom not writable");const L=R.n,_=I[0];i(C,R,_),d(x,C,R),L!==R.n&&(JF(x,C,R),l(x,C,R));return}else return f(x,C,...I)}finally{S||cu(x)}};try{return n(w,M,A,...E)}finally{S=!1}},c=(x,...w)=>{const E=zg();try{return f(E,x,...w)}finally{cu(E)}},d=(x,w,E)=>{if(E.m&&!nM(E.v)){for(const S of E.d.keys())E.m.d.has(S)||(u(x,S,e(S)).t.add(w),E.m.d.add(S));for(const S of E.m.d||[])if(!E.d.has(S)){E.m.d.delete(S);const M=h(x,S,e(S));M==null||M.t.delete(w)}}},u=(x,w,E)=>{if(!E.m){s(x,w);for(const S of E.d.keys())u(x,S,e(S)).t.add(w);if(E.m={l:new Set,d:new Set(E.d.keys()),t:new Set},ZF(w)){const S=E.m;let M;const A=(C,I)=>{let R=!0;M=(...L)=>{try{return f(C,w,...L)}finally{R||cu(C)}};try{return I()}finally{R=!1}};G5(x,"L",()=>{const C=A(x,()=>r(w,(...I)=>M(...I)));C&&(S.u=I=>A(I,C))})}}return E.m},h=(x,w,E)=>{if(E.m&&!E.m.l.size&&!Array.from(E.m.t).some(S=>{var M;return(M=e(S).m)==null?void 0:M.d.has(w)})){const S=E.m.u;S&&G5(x,"L",()=>S(x)),delete E.m;for(const M of E.d.keys()){const A=h(x,M,e(M));A==null||A.t.delete(w)}return}return E.m};return{get:o,set:c,sub:(x,w)=>{const E=zg(),S=e(x),A=u(E,x,S).l;return A.add(w),cu(E),()=>{A.delete(w);const C=zg();h(C,x,S),cu(C)}},unstable_derive:x=>oee(...x(e,t,n,r))}},SI=()=>{const e=new WeakMap;return oee(r=>{let i=e.get(r);return i||(i={d:new Map,p:new Set,n:0},e.set(r,i)),i},(r,...i)=>r.read(...i),(r,...i)=>r.write(...i),(r,...i)=>{var s;return(s=r.onMount)==null?void 0:s.call(r,...i)})};let sS;const SRe=()=>(sS||(sS=SI()),sS),kRe=T.createContext(void 0),Q7=e=>{const t=T.useContext(kRe);return(e==null?void 0:e.store)||t||SRe()},iM=e=>typeof(e==null?void 0:e.then)=="function",aee=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},CRe=Te.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(aee(e),e)}),oS=new WeakMap,e$=e=>{let t=oS.get(e);return t||(t=new Promise((n,r)=>{let i=e;const s=l=>f=>{i===l&&n(f)},o=l=>f=>{i===l&&r(f)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(f=>{iM(f)?(oS.set(f,t),i=f,f.then(s(f),o(f)),a(f)):n(f)})};e.then(s(e),o(e)),a(e)}),oS.set(e,t)),t};function lee(e,t){const n=Q7(t),[[r,i,s],o]=T.useReducer(f=>{const c=n.get(e);return Object.is(f[0],c)&&f[1]===n&&f[2]===e?f:[c,n,e]},void 0,()=>[n.get(e),n,e]);let a=r;(i!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(T.useEffect(()=>{const f=n.sub(e,()=>{if(typeof l=="number"){const c=n.get(e);iM(c)&&aee(e$(c)),setTimeout(o,l);return}o()});return o(),f},[n,e,l]),T.useDebugValue(a),iM(a)){const f=e$(a);return CRe(f)}return a}function cee(e,t){const n=Q7(t);return T.useCallback((...i)=>n.set(e,...i),[n,e])}function MRe(e,t){return[lee(e,t),cee(e,t)]}const t$=new WeakMap;function ARe(e,t){const n=Q7(t),r=TRe(n);for(const[i,s]of e)(!r.has(i)||t!=null&&t.dangerouslyForceHydrate)&&(r.add(i),n.set(i,s))}const TRe=e=>{let t=t$.get(e);return t||(t=new WeakSet,t$.set(e,t)),t};function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tp.apply(this,arguments)}function fee(){const e=T.createContext(null);function t({store:o,initialValues:a=[],children:l}){const f=T.useRef(o);return f.current||(f.current=SI()),ARe(a,{store:f.current}),m.jsx(e.Provider,{value:f.current,children:l})}const n=o=>{const a=T.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return Q7(Tp({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return MRe(o,Tp({store:l},a))},useAtomValue:(o,a)=>{const l=n();return lee(o,Tp({store:l},a))},useSetAtom:(o,a)=>{const l=n();return cee(o,Tp({store:l},a))}}}ui(null);T.createContext({scope:void 0,baseStore:void 0});function w0(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function n$(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function dee(...e){return t=>{let n=!1;const r=e.map(i=>{const s=n$(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():n$(e[i],null)}}}}function $0(...e){return T.useCallback(dee(...e),e)}function uee(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];const f=d=>{var x;const{scope:u,children:h,...g}=d,U=((x=u==null?void 0:u[e])==null?void 0:x[l])||a,y=T.useMemo(()=>g,Object.values(g));return m.jsx(U.Provider,{value:y,children:h})};f.displayName=s+"Provider";function c(d,u){var U;const h=((U=u==null?void 0:u[e])==null?void 0:U[l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,IRe(i,...t)]}function IRe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var kI=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(RRe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return m.jsx(sM,{...r,ref:t,children:T.isValidElement(o)?T.cloneElement(o,void 0,a):null})}return m.jsx(sM,{...r,ref:t,children:n})});kI.displayName="Slot";var sM=T.forwardRef((e,t)=>{const{children:n,...r}=e;if(T.isValidElement(n)){const i=PRe(n),s=_Re(r,n.props);return n.type!==T.Fragment&&(s.ref=t?dee(t,i):i),T.cloneElement(n,s)}return T.Children.count(n)>1?T.Children.only(null):null});sM.displayName="SlotClone";var NRe=({children:e})=>m.jsx(m.Fragment,{children:e});function RRe(e){return T.isValidElement(e)&&e.type===NRe}function _Re(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function PRe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var DRe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ff=DRe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?kI:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function LRe(e,t){e&&ii.flushSync(()=>e.dispatchEvent(t))}function I0(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function ORe(e,t=globalThis==null?void 0:globalThis.document){const n=I0(e);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var jRe="DismissableLayer",oM="dismissableLayer.update",BRe="dismissableLayer.pointerDownOutside",FRe="dismissableLayer.focusOutside",r$,hee=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pee=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,f=T.useContext(hee),[c,d]=T.useState(null),u=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=T.useState({}),g=$0(t,C=>d(C)),U=Array.from(f.layers),[y]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=U.indexOf(y),w=c?U.indexOf(c):-1,E=f.layersWithOutsidePointerEventsDisabled.size>0,S=w>=x,M=HRe(C=>{const I=C.target,R=[...f.branches].some(L=>L.contains(I));!S||R||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},u),A=VRe(C=>{const I=C.target;[...f.branches].some(L=>L.contains(I))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},u);return ORe(C=>{w===f.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},u),T.useEffect(()=>{if(c)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(r$=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(c)),f.layers.add(c),i$(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(u.body.style.pointerEvents=r$)}},[c,u,n,f]),T.useEffect(()=>()=>{c&&(f.layers.delete(c),f.layersWithOutsidePointerEventsDisabled.delete(c),i$())},[c,f]),T.useEffect(()=>{const C=()=>h({});return document.addEventListener(oM,C),()=>document.removeEventListener(oM,C)},[]),m.jsx(Ff.div,{...l,ref:g,style:{pointerEvents:E?S?"auto":"none":void 0,...e.style},onFocusCapture:w0(e.onFocusCapture,A.onFocusCapture),onBlurCapture:w0(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:w0(e.onPointerDownCapture,M.onPointerDownCapture)})});pee.displayName=jRe;var $Re="DismissableLayerBranch",zRe=T.forwardRef((e,t)=>{const n=T.useContext(hee),r=T.useRef(null),i=$0(t,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.jsx(Ff.div,{...e,ref:i})});zRe.displayName=$Re;function HRe(e,t=globalThis==null?void 0:globalThis.document){const n=I0(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){mee(BRe,n,f,{discrete:!0})};const f={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function VRe(e,t=globalThis==null?void 0:globalThis.document){const n=I0(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&mee(FRe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function i$(){const e=new CustomEvent(oM);document.dispatchEvent(e)}function mee(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?LRe(i,s):i.dispatchEvent(s)}var aS=0;function WRe(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??s$()),document.body.insertAdjacentElement("beforeend",e[1]??s$()),aS++,()=>{aS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),aS--}},[])}function s$(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var lS="focusScope.autoFocusOnMount",cS="focusScope.autoFocusOnUnmount",o$={bubbles:!1,cancelable:!0},GRe="FocusScope",gee=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[a,l]=T.useState(null),f=I0(i),c=I0(s),d=T.useRef(null),u=$0(t,U=>l(U)),h=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let U=function(E){if(h.paused||!a)return;const S=E.target;a.contains(S)?d.current=S:Ad(d.current,{select:!0})},y=function(E){if(h.paused||!a)return;const S=E.relatedTarget;S!==null&&(a.contains(S)||Ad(d.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const M of E)M.removedNodes.length>0&&Ad(a)};document.addEventListener("focusin",U),document.addEventListener("focusout",y);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",U),document.removeEventListener("focusout",y),w.disconnect()}}},[r,a,h.paused]),T.useEffect(()=>{if(a){l$.add(h);const U=document.activeElement;if(!a.contains(U)){const x=new CustomEvent(lS,o$);a.addEventListener(lS,f),a.dispatchEvent(x),x.defaultPrevented||(XRe(QRe(bee(a)),{select:!0}),document.activeElement===U&&Ad(a))}return()=>{a.removeEventListener(lS,f),setTimeout(()=>{const x=new CustomEvent(cS,o$);a.addEventListener(cS,c),a.dispatchEvent(x),x.defaultPrevented||Ad(U??document.body,{select:!0}),a.removeEventListener(cS,c),l$.remove(h)},0)}}},[a,f,c,h]);const g=T.useCallback(U=>{if(!n&&!r||h.paused)return;const y=U.key==="Tab"&&!U.altKey&&!U.ctrlKey&&!U.metaKey,x=document.activeElement;if(y&&x){const w=U.currentTarget,[E,S]=KRe(w);E&&S?!U.shiftKey&&x===S?(U.preventDefault(),n&&Ad(E,{select:!0})):U.shiftKey&&x===E&&(U.preventDefault(),n&&Ad(S,{select:!0})):x===w&&U.preventDefault()}},[n,r,h.paused]);return m.jsx(Ff.div,{tabIndex:-1,...o,ref:u,onKeyDown:g})});gee.displayName=GRe;function XRe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ad(r,{select:t}),document.activeElement!==n)return}function KRe(e){const t=bee(e),n=a$(t,e),r=a$(t.reverse(),e);return[n,r]}function bee(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function a$(e,t){for(const n of e)if(!YRe(n,{upTo:t}))return n}function YRe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ZRe(e){return e instanceof HTMLInputElement&&"select"in e}function Ad(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ZRe(e)&&t&&e.select()}}var l$=qRe();function qRe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=c$(e,t),e.unshift(t)},remove(t){var n;e=c$(e,t),(n=e[0])==null||n.resume()}}}function c$(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function QRe(e){return e.filter(t=>t.tagName!=="A")}var e1=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},JRe=PM.useId||(()=>{}),e_e=0;function t_e(e){const[t,n]=T.useState(JRe());return e1(()=>{e||n(r=>r??String(e_e++))},[e]),e||(t?`radix-${t}`:"")}const n_e=["top","right","bottom","left"],N0=Math.min,uo=Math.max,h9=Math.round,ly=Math.floor,ec=e=>({x:e,y:e}),r_e={left:"right",right:"left",bottom:"top",top:"bottom"},i_e={start:"end",end:"start"};function aM(e,t,n){return uo(e,N0(t,n))}function Rf(e,t){return typeof e=="function"?e(t):e}function _f(e){return e.split("-")[0]}function _6(e){return e.split("-")[1]}function CI(e){return e==="x"?"y":"x"}function MI(e){return e==="y"?"height":"width"}const s_e=new Set(["top","bottom"]);function Zl(e){return s_e.has(_f(e))?"y":"x"}function AI(e){return CI(Zl(e))}function o_e(e,t,n){n===void 0&&(n=!1);const r=_6(e),i=AI(e),s=MI(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=p9(o)),[o,p9(o)]}function a_e(e){const t=p9(e);return[lM(e),t,lM(t)]}function lM(e){return e.replace(/start|end/g,t=>i_e[t])}const f$=["left","right"],d$=["right","left"],l_e=["top","bottom"],c_e=["bottom","top"];function f_e(e,t,n){switch(e){case"top":case"bottom":return n?t?d$:f$:t?f$:d$;case"left":case"right":return t?l_e:c_e;default:return[]}}function d_e(e,t,n,r){const i=_6(e);let s=f_e(_f(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(lM)))),s}function p9(e){return e.replace(/left|right|bottom|top/g,t=>r_e[t])}function u_e(e){return{top:0,right:0,bottom:0,left:0,...e}}function Uee(e){return typeof e!="number"?u_e(e):{top:e,right:e,bottom:e,left:e}}function m9(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function u$(e,t,n){let{reference:r,floating:i}=e;const s=Zl(t),o=AI(t),a=MI(o),l=_f(t),f=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,u=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(_6(t)){case"start":h[o]-=u*(n&&f?-1:1);break;case"end":h[o]+=u*(n&&f?-1:1);break}return h}async function h_e(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:f="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:u=!1,padding:h=0}=Rf(t,e),g=Uee(h),y=a[u?d==="floating"?"reference":"floating":d],x=m9(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:f,rootBoundary:c,strategy:l})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},M=m9(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:E,strategy:l}):w);return{top:(x.top-M.top+g.top)/S.y,bottom:(M.bottom-x.bottom+g.bottom)/S.y,left:(x.left-M.left+g.left)/S.x,right:(M.right-x.right+g.right)/S.x}}const p_e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=u$(f,r,l),u=r,h={},g=0;for(let y=0;y<a.length;y++){var U;const{name:x,fn:w}=a[y],{x:E,y:S,data:M,reset:A}=await w({x:c,y:d,initialPlacement:r,placement:u,strategy:i,middlewareData:h,rects:f,platform:{...o,detectOverflow:(U=o.detectOverflow)!=null?U:h_e},elements:{reference:e,floating:t}});c=E??c,d=S??d,h={...h,[x]:{...h[x],...M}},A&&g<=50&&(g++,typeof A=="object"&&(A.placement&&(u=A.placement),A.rects&&(f=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):A.rects),{x:c,y:d}=u$(f,u,l)),y=-1)}return{x:c,y:d,placement:u,strategy:i,middlewareData:h}},m_e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:f,padding:c=0}=Rf(e,t)||{};if(f==null)return{};const d=Uee(c),u={x:n,y:r},h=AI(i),g=MI(h),U=await o.getDimensions(f),y=h==="y",x=y?"top":"left",w=y?"bottom":"right",E=y?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[h]-u[h]-s.floating[g],M=u[h]-s.reference[h],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let C=A?A[E]:0;(!C||!await(o.isElement==null?void 0:o.isElement(A)))&&(C=a.floating[E]||s.floating[g]);const I=S/2-M/2,R=C/2-U[g]/2-1,L=N0(d[x],R),_=N0(d[w],R),O=L,$=C-U[g]-_,B=C/2-U[g]/2+I,F=aM(O,B,$),z=!l.arrow&&_6(i)!=null&&B!==F&&s.reference[g]/2-(B<O?L:_)-U[g]/2<0,H=z?B<O?B-O:B-$:0;return{[h]:u[h]+H,data:{[h]:F,centerOffset:B-F-H,...z&&{alignmentOffset:H}},reset:z}}}),g_e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:f}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:U=!0,...y}=Rf(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const x=_f(i),w=Zl(a),E=_f(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(f.floating)),M=u||(E||!U?[p9(a)]:a_e(a)),A=g!=="none";!u&&A&&M.push(...d_e(a,U,g,S));const C=[a,...M],I=await l.detectOverflow(t,y),R=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(I[x]),d){const B=o_e(i,o,S);R.push(I[B[0]],I[B[1]])}if(L=[...L,{placement:i,overflows:R}],!R.every(B=>B<=0)){var _,O;const B=(((_=s.flip)==null?void 0:_.index)||0)+1,F=C[B];if(F&&(!(d==="alignment"?w!==Zl(F):!1)||L.every(G=>Zl(G.placement)===w?G.overflows[0]>0:!0)))return{data:{index:B,overflows:L},reset:{placement:F}};let z=(O=L.filter(H=>H.overflows[0]<=0).sort((H,G)=>H.overflows[1]-G.overflows[1])[0])==null?void 0:O.placement;if(!z)switch(h){case"bestFit":{var $;const H=($=L.filter(G=>{if(A){const V=Zl(G.placement);return V===w||V==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(V=>V>0).reduce((V,Y)=>V+Y,0)]).sort((G,V)=>G[1]-V[1])[0])==null?void 0:$[0];H&&(z=H);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function h$(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function p$(e){return n_e.some(t=>e[t]>=0)}const b_e=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:i="referenceHidden",...s}=Rf(e,t);switch(i){case"referenceHidden":{const o=await r.detectOverflow(t,{...s,elementContext:"reference"}),a=h$(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:p$(a)}}}case"escaped":{const o=await r.detectOverflow(t,{...s,altBoundary:!0}),a=h$(o,n.floating);return{data:{escapedOffsets:a,escaped:p$(a)}}}default:return{}}}}},yee=new Set(["left","top"]);async function U_e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=_f(n),a=_6(n),l=Zl(n)==="y",f=yee.has(o)?-1:1,c=s&&l?-1:1,d=Rf(t,e);let{mainAxis:u,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),l?{x:h*c,y:u*f}:{x:u*f,y:h*c}}const y_e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await U_e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},x_e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i,platform:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:w,y:E}=x;return{x:w,y:E}}},...f}=Rf(e,t),c={x:n,y:r},d=await s.detectOverflow(t,f),u=Zl(_f(i)),h=CI(u);let g=c[h],U=c[u];if(o){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",E=g+d[x],S=g-d[w];g=aM(E,g,S)}if(a){const x=u==="y"?"top":"left",w=u==="y"?"bottom":"right",E=U+d[x],S=U-d[w];U=aM(E,U,S)}const y=l.fn({...t,[h]:g,[u]:U});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:o,[u]:a}}}}}},v_e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:f=!0}=Rf(e,t),c={x:n,y:r},d=Zl(i),u=CI(d);let h=c[u],g=c[d];const U=Rf(a,t),y=typeof U=="number"?{mainAxis:U,crossAxis:0}:{mainAxis:0,crossAxis:0,...U};if(l){const E=u==="y"?"height":"width",S=s.reference[u]-s.floating[E]+y.mainAxis,M=s.reference[u]+s.reference[E]-y.mainAxis;h<S?h=S:h>M&&(h=M)}if(f){var x,w;const E=u==="y"?"width":"height",S=yee.has(_f(i)),M=s.reference[d]-s.floating[E]+(S&&((x=o.offset)==null?void 0:x[d])||0)+(S?0:y.crossAxis),A=s.reference[d]+s.reference[E]+(S?0:((w=o.offset)==null?void 0:w[d])||0)-(S?y.crossAxis:0);g<M?g=M:g>A&&(g=A)}return{[u]:h,[d]:g}}}},w_e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...f}=Rf(e,t),c=await o.detectOverflow(t,f),d=_f(i),u=_6(i),h=Zl(i)==="y",{width:g,height:U}=s.floating;let y,x;d==="top"||d==="bottom"?(y=d,x=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,y=u==="end"?"top":"bottom");const w=U-c.top-c.bottom,E=g-c.left-c.right,S=N0(U-c[y],w),M=N0(g-c[x],E),A=!t.middlewareData.shift;let C=S,I=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=w),A&&!u){const L=uo(c.left,0),_=uo(c.right,0),O=uo(c.top,0),$=uo(c.bottom,0);h?I=g-2*(L!==0||_!==0?L+_:uo(c.left,c.right)):C=U-2*(O!==0||$!==0?O+$:uo(c.top,c.bottom))}await l({...t,availableWidth:I,availableHeight:C});const R=await o.getDimensions(a.floating);return g!==R.width||U!==R.height?{reset:{rects:!0}}:{}}}};function J7(){return typeof window<"u"}function P6(e){return xee(e)?(e.nodeName||"").toLowerCase():"#document"}function bo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function mc(e){var t;return(t=(xee(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xee(e){return J7()?e instanceof Node||e instanceof bo(e).Node:!1}function ll(e){return J7()?e instanceof Element||e instanceof bo(e).Element:!1}function uc(e){return J7()?e instanceof HTMLElement||e instanceof bo(e).HTMLElement:!1}function m$(e){return!J7()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof bo(e).ShadowRoot}const E_e=new Set(["inline","contents"]);function Yb(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=cl(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!E_e.has(i)}const S_e=new Set(["table","td","th"]);function k_e(e){return S_e.has(P6(e))}const C_e=[":popover-open",":modal"];function ex(e){return C_e.some(t=>{try{return e.matches(t)}catch{return!1}})}const M_e=["transform","translate","scale","rotate","perspective"],A_e=["transform","translate","scale","rotate","perspective","filter"],T_e=["paint","layout","strict","content"];function TI(e){const t=II(),n=ll(e)?cl(e):e;return M_e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||A_e.some(r=>(n.willChange||"").includes(r))||T_e.some(r=>(n.contain||"").includes(r))}function I_e(e){let t=R0(e);for(;uc(t)&&!x6(t);){if(TI(t))return t;if(ex(t))return null;t=R0(t)}return null}function II(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const N_e=new Set(["html","body","#document"]);function x6(e){return N_e.has(P6(e))}function cl(e){return bo(e).getComputedStyle(e)}function tx(e){return ll(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function R0(e){if(P6(e)==="html")return e;const t=e.assignedSlot||e.parentNode||m$(e)&&e.host||mc(e);return m$(t)?t.host:t}function vee(e){const t=R0(e);return x6(t)?e.ownerDocument?e.ownerDocument.body:e.body:uc(t)&&Yb(t)?t:vee(t)}function J2(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=vee(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=bo(i);if(s){const a=cM(o);return t.concat(o,o.visualViewport||[],Yb(i)?i:[],a&&n?J2(a):[])}return t.concat(i,J2(i,[],n))}function cM(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function wee(e){const t=cl(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=uc(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=h9(n)!==s||h9(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function NI(e){return ll(e)?e:e.contextElement}function Wp(e){const t=NI(e);if(!uc(t))return ec(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=wee(t);let o=(s?h9(n.width):n.width)/r,a=(s?h9(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const R_e=ec(0);function Eee(e){const t=bo(e);return!II()||!t.visualViewport?R_e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function __e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==bo(e)?!1:t}function t1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=NI(e);let o=ec(1);t&&(r?ll(r)&&(o=Wp(r)):o=Wp(e));const a=__e(s,n,r)?Eee(s):ec(0);let l=(i.left+a.x)/o.x,f=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const u=bo(s),h=r&&ll(r)?bo(r):r;let g=u,U=cM(g);for(;U&&r&&h!==g;){const y=Wp(U),x=U.getBoundingClientRect(),w=cl(U),E=x.left+(U.clientLeft+parseFloat(w.paddingLeft))*y.x,S=x.top+(U.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,f*=y.y,c*=y.x,d*=y.y,l+=E,f+=S,g=bo(U),U=cM(g)}}return m9({width:c,height:d,x:l,y:f})}function nx(e,t){const n=tx(e).scrollLeft;return t?t.left+n:t1(mc(e)).left+n}function See(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-nx(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function P_e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=mc(r),a=t?ex(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},f=ec(1);const c=ec(0),d=uc(r);if((d||!d&&!s)&&((P6(r)!=="body"||Yb(o))&&(l=tx(r)),uc(r))){const h=t1(r);f=Wp(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const u=o&&!d&&!s?See(o,l):ec(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-l.scrollLeft*f.x+c.x+u.x,y:n.y*f.y-l.scrollTop*f.y+c.y+u.y}}function D_e(e){return Array.from(e.getClientRects())}function L_e(e){const t=mc(e),n=tx(e),r=e.ownerDocument.body,i=uo(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=uo(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+nx(e);const a=-n.scrollTop;return cl(r).direction==="rtl"&&(o+=uo(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const g$=25;function O_e(e,t){const n=bo(e),r=mc(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=II();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const f=nx(r);if(f<=0){const c=r.ownerDocument,d=c.body,u=getComputedStyle(d),h=c.compatMode==="CSS1Compat"&&parseFloat(u.marginLeft)+parseFloat(u.marginRight)||0,g=Math.abs(r.clientWidth-d.clientWidth-h);g<=g$&&(s-=g)}else f<=g$&&(s+=f);return{width:s,height:o,x:a,y:l}}const j_e=new Set(["absolute","fixed"]);function B_e(e,t){const n=t1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=uc(e)?Wp(e):ec(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,f=r*s.y;return{width:o,height:a,x:l,y:f}}function b$(e,t,n){let r;if(t==="viewport")r=O_e(e,n);else if(t==="document")r=L_e(mc(e));else if(ll(t))r=B_e(t,n);else{const i=Eee(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return m9(r)}function kee(e,t){const n=R0(e);return n===t||!ll(n)||x6(n)?!1:cl(n).position==="fixed"||kee(n,t)}function F_e(e,t){const n=t.get(e);if(n)return n;let r=J2(e,[],!1).filter(a=>ll(a)&&P6(a)!=="body"),i=null;const s=cl(e).position==="fixed";let o=s?R0(e):e;for(;ll(o)&&!x6(o);){const a=cl(o),l=TI(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&j_e.has(i.position)||Yb(o)&&!l&&kee(e,o))?r=r.filter(c=>c!==o):i=a,o=R0(o)}return t.set(e,r),r}function $_e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?ex(t)?[]:F_e(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((f,c)=>{const d=b$(t,c,i);return f.top=uo(d.top,f.top),f.right=N0(d.right,f.right),f.bottom=N0(d.bottom,f.bottom),f.left=uo(d.left,f.left),f},b$(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function z_e(e){const{width:t,height:n}=wee(e);return{width:t,height:n}}function H_e(e,t,n){const r=uc(t),i=mc(t),s=n==="fixed",o=t1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=ec(0);function f(){l.x=nx(i)}if(r||!r&&!s)if((P6(t)!=="body"||Yb(i))&&(a=tx(t)),r){const h=t1(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&f();s&&!r&&i&&f();const c=i&&!r&&!s?See(i,a):ec(0),d=o.left+a.scrollLeft-l.x-c.x,u=o.top+a.scrollTop-l.y-c.y;return{x:d,y:u,width:o.width,height:o.height}}function fS(e){return cl(e).position==="static"}function U$(e,t){if(!uc(e)||cl(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return mc(e)===n&&(n=n.ownerDocument.body),n}function Cee(e,t){const n=bo(e);if(ex(e))return n;if(!uc(e)){let i=R0(e);for(;i&&!x6(i);){if(ll(i)&&!fS(i))return i;i=R0(i)}return n}let r=U$(e,t);for(;r&&k_e(r)&&fS(r);)r=U$(r,t);return r&&x6(r)&&fS(r)&&!TI(r)?n:r||I_e(e)||n}const V_e=async function(e){const t=this.getOffsetParent||Cee,n=this.getDimensions,r=await n(e.floating);return{reference:H_e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function W_e(e){return cl(e).direction==="rtl"}const G_e={convertOffsetParentRelativeRectToViewportRelativeRect:P_e,getDocumentElement:mc,getClippingRect:$_e,getOffsetParent:Cee,getElementRects:V_e,getClientRects:D_e,getDimensions:z_e,getScale:Wp,isElement:ll,isRTL:W_e};function Mee(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function X_e(e,t){let n=null,r;const i=mc(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const f=e.getBoundingClientRect(),{left:c,top:d,width:u,height:h}=f;if(a||t(),!u||!h)return;const g=ly(d),U=ly(i.clientWidth-(c+u)),y=ly(i.clientHeight-(d+h)),x=ly(c),E={rootMargin:-g+"px "+-U+"px "+-y+"px "+-x+"px",threshold:uo(0,N0(1,l))||1};let S=!0;function M(A){const C=A[0].intersectionRatio;if(C!==l){if(!S)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Mee(f,e.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(M,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,E)}n.observe(e)}return o(!0),s}function K_e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,f=NI(e),c=i||s?[...f?J2(f):[],...J2(t)]:[];c.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),s&&x.addEventListener("resize",n)});const d=f&&a?X_e(f,n):null;let u=-1,h=null;o&&(h=new ResizeObserver(x=>{let[w]=x;w&&w.target===f&&h&&(h.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),f&&!l&&h.observe(f),h.observe(t));let g,U=l?t1(e):null;l&&y();function y(){const x=t1(e);U&&!Mee(U,x)&&n(),U=x,g=requestAnimationFrame(y)}return n(),()=>{var x;c.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(g)}}const Y_e=y_e,Z_e=x_e,q_e=g_e,Q_e=w_e,J_e=b_e,y$=m_e,ePe=v_e,tPe=(e,t,n)=>{const r=new Map,i={platform:G_e,...n},s={...i.platform,_c:r};return p_e(e,t,{...i,platform:s})};var nPe=typeof document<"u",rPe=function(){},c3=nPe?T.useLayoutEffect:rPe;function g9(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!g9(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!g9(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Aee(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function x$(e,t){const n=Aee(e);return Math.round(t*n)/n}function dS(e){const t=T.useRef(e);return c3(()=>{t.current=e}),t}function iPe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:f}=e,[c,d]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,h]=T.useState(r);g9(u,r)||h(r);const[g,U]=T.useState(null),[y,x]=T.useState(null),w=T.useCallback(G=>{G!==A.current&&(A.current=G,U(G))},[]),E=T.useCallback(G=>{G!==C.current&&(C.current=G,x(G))},[]),S=s||g,M=o||y,A=T.useRef(null),C=T.useRef(null),I=T.useRef(c),R=l!=null,L=dS(l),_=dS(i),O=dS(f),$=T.useCallback(()=>{if(!A.current||!C.current)return;const G={placement:t,strategy:n,middleware:u};_.current&&(G.platform=_.current),tPe(A.current,C.current,G).then(V=>{const Y={...V,isPositioned:O.current!==!1};B.current&&!g9(I.current,Y)&&(I.current=Y,ii.flushSync(()=>{d(Y)}))})},[u,t,n,_,O]);c3(()=>{f===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(G=>({...G,isPositioned:!1})))},[f]);const B=T.useRef(!1);c3(()=>(B.current=!0,()=>{B.current=!1}),[]),c3(()=>{if(S&&(A.current=S),M&&(C.current=M),S&&M){if(L.current)return L.current(S,M,$);$()}},[S,M,$,L,R]);const F=T.useMemo(()=>({reference:A,floating:C,setReference:w,setFloating:E}),[w,E]),z=T.useMemo(()=>({reference:S,floating:M}),[S,M]),H=T.useMemo(()=>{const G={position:n,left:0,top:0};if(!z.floating)return G;const V=x$(z.floating,c.x),Y=x$(z.floating,c.y);return a?{...G,transform:"translate("+V+"px, "+Y+"px)",...Aee(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:Y}},[n,a,z.floating,c.x,c.y]);return T.useMemo(()=>({...c,update:$,refs:F,elements:z,floatingStyles:H}),[c,$,F,z,H])}const sPe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?y$({element:r.current,padding:i}).fn(n):{}:r?y$({element:r,padding:i}).fn(n):{}}}},oPe=(e,t)=>({...Y_e(e),options:[e,t]}),aPe=(e,t)=>({...Z_e(e),options:[e,t]}),lPe=(e,t)=>({...ePe(e),options:[e,t]}),cPe=(e,t)=>({...q_e(e),options:[e,t]}),fPe=(e,t)=>({...Q_e(e),options:[e,t]}),dPe=(e,t)=>({...J_e(e),options:[e,t]}),uPe=(e,t)=>({...sPe(e),options:[e,t]});var hPe="Arrow",Tee=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return m.jsx(Ff.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});Tee.displayName=hPe;var pPe=Tee;function mPe(e){const[t,n]=T.useState(void 0);return e1(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,f=Array.isArray(l)?l[0]:l;o=f.inlineSize,a=f.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var RI="Popper",[Iee,Nee]=uee(RI),[gPe,Ree]=Iee(RI),_ee=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return m.jsx(gPe,{scope:t,anchor:r,onAnchorChange:i,children:n})};_ee.displayName=RI;var Pee="PopperAnchor",Dee=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=Ree(Pee,n),o=T.useRef(null),a=$0(t,o);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(Ff.div,{...i,ref:a})});Dee.displayName=Pee;var _I="PopperContent",[bPe,UPe]=Iee(_I),Lee=T.forwardRef((e,t)=>{var ue,te,le,he,we,Se;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:f=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:u=!1,updatePositionStrategy:h="optimized",onPlaced:g,...U}=e,y=Ree(_I,n),[x,w]=T.useState(null),E=$0(t,De=>w(De)),[S,M]=T.useState(null),A=mPe(S),C=(A==null?void 0:A.width)??0,I=(A==null?void 0:A.height)??0,R=r+(s!=="center"?"-"+s:""),L=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},_=Array.isArray(f)?f:[f],O=_.length>0,$={padding:L,boundary:_.filter(xPe),altBoundary:O},{refs:B,floatingStyles:F,placement:z,isPositioned:H,middlewareData:G}=iPe({strategy:"fixed",placement:R,whileElementsMounted:(...De)=>K_e(...De,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[oPe({mainAxis:i+I,alignmentAxis:o}),l&&aPe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?lPe():void 0,...$}),l&&cPe({...$}),fPe({...$,apply:({elements:De,rects:Ge,availableWidth:ht,availableHeight:st})=>{const{width:jt,height:En}=Ge.reference,cn=De.floating.style;cn.setProperty("--radix-popper-available-width",`${ht}px`),cn.setProperty("--radix-popper-available-height",`${st}px`),cn.setProperty("--radix-popper-anchor-width",`${jt}px`),cn.setProperty("--radix-popper-anchor-height",`${En}px`)}}),S&&uPe({element:S,padding:a}),vPe({arrowWidth:C,arrowHeight:I}),u&&dPe({strategy:"referenceHidden",...$})]}),[V,Y]=Bee(z),K=I0(g);e1(()=>{H&&(K==null||K())},[H,K]);const q=(ue=G.arrow)==null?void 0:ue.x,se=(te=G.arrow)==null?void 0:te.y,de=((le=G.arrow)==null?void 0:le.centerOffset)!==0,[xe,ve]=T.useState();return e1(()=>{x&&ve(window.getComputedStyle(x).zIndex)},[x]),m.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:H?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[(he=G.transformOrigin)==null?void 0:he.x,(we=G.transformOrigin)==null?void 0:we.y].join(" "),...((Se=G.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:m.jsx(bPe,{scope:n,placedSide:V,onArrowChange:M,arrowX:q,arrowY:se,shouldHideArrow:de,children:m.jsx(Ff.div,{"data-side":V,"data-align":Y,...U,ref:E,style:{...U.style,animation:H?void 0:"none"}})})})});Lee.displayName=_I;var Oee="PopperArrow",yPe={top:"bottom",right:"left",bottom:"top",left:"right"},jee=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=UPe(Oee,r),o=yPe[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(pPe,{...i,ref:n,style:{...i.style,display:"block"}})})});jee.displayName=Oee;function xPe(e){return e!==null}var vPe=e=>({name:"transformOrigin",options:e,fn(t){var y,x,w;const{placement:n,rects:r,middlewareData:i}=t,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[f,c]=Bee(n),d={start:"0%",center:"50%",end:"100%"}[c],u=(((x=i.arrow)==null?void 0:x.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let g="",U="";return f==="bottom"?(g=o?d:`${u}px`,U=`${-l}px`):f==="top"?(g=o?d:`${u}px`,U=`${r.floating.height+l}px`):f==="right"?(g=`${-l}px`,U=o?d:`${h}px`):f==="left"&&(g=`${r.floating.width+l}px`,U=o?d:`${h}px`),{data:{x:g,y:U}}}});function Bee(e){const[t,n="center"]=e.split("-");return[t,n]}var wPe=_ee,Fee=Dee,EPe=Lee,SPe=jee,kPe="Portal",$ee=T.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[i,s]=T.useState(!1);e1(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?JW.createPortal(m.jsx(Ff.div,{...r,ref:t}),o):null});$ee.displayName=kPe;function CPe(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var PI=e=>{const{present:t,children:n}=e,r=MPe(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=$0(r.ref,APe(i));return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};PI.displayName="Presence";function MPe(e){const[t,n]=T.useState(),r=T.useRef({}),i=T.useRef(e),s=T.useRef("none"),o=e?"mounted":"unmounted",[a,l]=CPe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const f=cy(r.current);s.current=a==="mounted"?f:"none"},[a]),e1(()=>{const f=r.current,c=i.current;if(c!==e){const u=s.current,h=cy(f);e?l("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(c&&u!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),e1(()=>{if(t){let f;const c=t.ownerDocument.defaultView??window,d=h=>{const U=cy(r.current).includes(h.animationName);if(h.target===t&&U&&(l("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",f=c.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},u=h=>{h.target===t&&(s.current=cy(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{c.clearTimeout(f),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function cy(e){return(e==null?void 0:e.animationName)||"none"}function APe(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function TPe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=IPe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=I0(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function IPe({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=I0(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var NPe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},J1=new WeakMap,fy=new WeakMap,dy={},uS=0,zee=function(e){return e&&(e.host||zee(e.parentNode))},RPe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=zee(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},_Pe=function(e,t,n,r){var i=RPe(t,Array.isArray(e)?e:[e]);dy[n]||(dy[n]=new WeakMap);var s=dy[n],o=[],a=new Set,l=new Set(i),f=function(d){!d||a.has(d)||(a.add(d),f(d.parentNode))};i.forEach(f);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(u){if(a.has(u))c(u);else try{var h=u.getAttribute(r),g=h!==null&&h!=="false",U=(J1.get(u)||0)+1,y=(s.get(u)||0)+1;J1.set(u,U),s.set(u,y),o.push(u),U===1&&g&&fy.set(u,!0),y===1&&u.setAttribute(n,"true"),g||u.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",u,x)}})};return c(t),a.clear(),uS++,function(){o.forEach(function(d){var u=J1.get(d)-1,h=s.get(d)-1;J1.set(d,u),s.set(d,h),u||(fy.has(d)||d.removeAttribute(r),fy.delete(d)),h||d.removeAttribute(n)}),uS--,uS||(J1=new WeakMap,J1=new WeakMap,fy=new WeakMap,dy={})}},PPe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=NPe(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),_Pe(r,i,n,"aria-hidden")):function(){return null}},Kl=function(){return Kl=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Kl.apply(this,arguments)};function Hee(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function DPe(e,t,n){for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var f3="right-scroll-bar-position",d3="width-before-scroll-bar",LPe="with-scroll-bars-hidden",OPe="--removed-body-scroll-bar-size";function hS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jPe(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var BPe=typeof window<"u"?T.useLayoutEffect:T.useEffect,v$=new WeakMap;function FPe(e,t){var n=jPe(null,function(r){return e.forEach(function(i){return hS(i,r)})});return BPe(function(){var r=v$.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||hS(a,null)}),s.forEach(function(a){i.has(a)||hS(a,o)})}v$.set(n,e)},[e]),n}function $Pe(e){return e}function zPe(e,t){t===void 0&&(t=$Pe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},f=function(){return Promise.resolve().then(l)};f(),n={push:function(c){o.push(c),f()},filter:function(c){return o=o.filter(c),n}}}};return i}function HPe(e){e===void 0&&(e={});var t=zPe(null);return t.options=Kl({async:!0,ssr:!1},e),t}var Vee=function(e){var t=e.sideCar,n=Hee(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,Kl({},n))};Vee.isSideCarExport=!0;function VPe(e,t){return e.useMedium(t),Vee}var Wee=HPe(),pS=function(){},rx=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:pS,onWheelCapture:pS,onTouchMoveCapture:pS}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,f=e.removeScrollBar,c=e.enabled,d=e.shards,u=e.sideCar,h=e.noRelative,g=e.noIsolation,U=e.inert,y=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,E=e.gapMode,S=Hee(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=u,A=FPe([n,t]),C=Kl(Kl({},S),i);return T.createElement(T.Fragment,null,c&&T.createElement(M,{sideCar:Wee,removeScrollBar:f,shards:d,noRelative:h,noIsolation:g,inert:U,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:E}),o?T.cloneElement(T.Children.only(a),Kl(Kl({},C),{ref:A})):T.createElement(w,Kl({},C,{className:l,ref:A}),a))});rx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rx.classNames={fullWidth:d3,zeroRight:f3};var WPe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function GPe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=WPe();return t&&e.setAttribute("nonce",t),e}function XPe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function KPe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var YPe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=GPe())&&(XPe(t,n),KPe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ZPe=function(){var e=YPe();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Gee=function(){var e=ZPe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},qPe={left:0,top:0,right:0,gap:0},mS=function(e){return parseInt(e||"",10)||0},QPe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[mS(n),mS(r),mS(i)]},JPe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return qPe;var t=QPe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},eDe=Gee(),Gp="data-scroll-locked",tDe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(LPe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Gp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(f3,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(d3,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(f3," .").concat(f3,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(d3," .").concat(d3,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gp,`] {
    `).concat(OPe,": ").concat(a,`px;
  }
`)},w$=function(){var e=parseInt(document.body.getAttribute(Gp)||"0",10);return isFinite(e)?e:0},nDe=function(){T.useEffect(function(){return document.body.setAttribute(Gp,(w$()+1).toString()),function(){var e=w$()-1;e<=0?document.body.removeAttribute(Gp):document.body.setAttribute(Gp,e.toString())}},[])},rDe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;nDe();var s=T.useMemo(function(){return JPe(i)},[i]);return T.createElement(eDe,{styles:tDe(s,!t,i,n?"":"!important")})},fM=!1;if(typeof window<"u")try{var uy=Object.defineProperty({},"passive",{get:function(){return fM=!0,!0}});window.addEventListener("test",uy,uy),window.removeEventListener("test",uy,uy)}catch{fM=!1}var ep=fM?{passive:!1}:!1,iDe=function(e){return e.tagName==="TEXTAREA"},Xee=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!iDe(e)&&n[t]==="visible")},sDe=function(e){return Xee(e,"overflowY")},oDe=function(e){return Xee(e,"overflowX")},E$=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Kee(e,r);if(i){var s=Yee(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},aDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},lDe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Kee=function(e,t){return e==="v"?sDe(t):oDe(t)},Yee=function(e,t){return e==="v"?aDe(t):lDe(t)},cDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},fDe=function(e,t,n,r,i){var s=cDe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),f=!1,c=o>0,d=0,u=0;do{if(!a)break;var h=Yee(e,a),g=h[0],U=h[1],y=h[2],x=U-y-s*g;(g||x)&&Kee(e,a)&&(d+=x,u+=g);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(d)<1||!i)||!c&&(Math.abs(u)<1||!i))&&(f=!0),f},hy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},S$=function(e){return[e.deltaX,e.deltaY]},k$=function(e){return e&&"current"in e?e.current:e},dDe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},uDe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hDe=0,tp=[];function pDe(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(hDe++)[0],s=T.useState(Gee)[0],o=T.useRef(e);T.useEffect(function(){o.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var U=DPe([e.lockRef.current],(e.shards||[]).map(k$)).filter(Boolean);return U.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),U.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=T.useCallback(function(U,y){if("touches"in U&&U.touches.length===2||U.type==="wheel"&&U.ctrlKey)return!o.current.allowPinchZoom;var x=hy(U),w=n.current,E="deltaX"in U?U.deltaX:w[0]-x[0],S="deltaY"in U?U.deltaY:w[1]-x[1],M,A=U.target,C=Math.abs(E)>Math.abs(S)?"h":"v";if("touches"in U&&C==="h"&&A.type==="range")return!1;var I=window.getSelection(),R=I&&I.anchorNode,L=R?R===A||R.contains(A):!1;if(L)return!1;var _=E$(C,A);if(!_)return!0;if(_?M=C:(M=C==="v"?"h":"v",_=E$(C,A)),!_)return!1;if(!r.current&&"changedTouches"in U&&(E||S)&&(r.current=M),!M)return!0;var O=r.current||M;return fDe(O,y,U,O==="h"?E:S,!0)},[]),l=T.useCallback(function(U){var y=U;if(!(!tp.length||tp[tp.length-1]!==s)){var x="deltaY"in y?S$(y):hy(y),w=t.current.filter(function(M){return M.name===y.type&&(M.target===y.target||y.target===M.shadowParent)&&dDe(M.delta,x)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var E=(o.current.shards||[]).map(k$).filter(Boolean).filter(function(M){return M.contains(y.target)}),S=E.length>0?a(y,E[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),f=T.useCallback(function(U,y,x,w){var E={name:U,delta:y,target:x,should:w,shadowParent:mDe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(S){return S!==E})},1)},[]),c=T.useCallback(function(U){n.current=hy(U),r.current=void 0},[]),d=T.useCallback(function(U){f(U.type,S$(U),U.target,a(U,e.lockRef.current))},[]),u=T.useCallback(function(U){f(U.type,hy(U),U.target,a(U,e.lockRef.current))},[]);T.useEffect(function(){return tp.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:u}),document.addEventListener("wheel",l,ep),document.addEventListener("touchmove",l,ep),document.addEventListener("touchstart",c,ep),function(){tp=tp.filter(function(U){return U!==s}),document.removeEventListener("wheel",l,ep),document.removeEventListener("touchmove",l,ep),document.removeEventListener("touchstart",c,ep)}},[]);var h=e.removeScrollBar,g=e.inert;return T.createElement(T.Fragment,null,g?T.createElement(s,{styles:uDe(i)}):null,h?T.createElement(rDe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function mDe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const gDe=VPe(Wee,pDe);var Zee=T.forwardRef(function(e,t){return T.createElement(rx,Kl({},e,{ref:t,sideCar:gDe}))});Zee.classNames=rx.classNames;var DI="Popover",[qee,OHe]=uee(DI,[Nee]),Zb=Nee(),[bDe,z0]=qee(DI),Qee=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,a=Zb(t),l=T.useRef(null),[f,c]=T.useState(!1),[d=!1,u]=TPe({prop:r,defaultProp:i,onChange:s});return m.jsx(wPe,{...a,children:m.jsx(bDe,{scope:t,contentId:t_e(),triggerRef:l,open:d,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(h=>!h),[u]),hasCustomAnchor:f,onCustomAnchorAdd:T.useCallback(()=>c(!0),[]),onCustomAnchorRemove:T.useCallback(()=>c(!1),[]),modal:o,children:n})})};Qee.displayName=DI;var Jee="PopoverAnchor",UDe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=z0(Jee,n),s=Zb(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return T.useEffect(()=>(o(),()=>a()),[o,a]),m.jsx(Fee,{...s,...r,ref:t})});UDe.displayName=Jee;var ete="PopoverTrigger",tte=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=z0(ete,n),s=Zb(n),o=$0(t,i.triggerRef),a=m.jsx(Ff.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ate(i.open),...r,ref:o,onClick:w0(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:m.jsx(Fee,{asChild:!0,...s,children:a})});tte.displayName=ete;var LI="PopoverPortal",[yDe,xDe]=qee(LI,{forceMount:void 0}),nte=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,s=z0(LI,t);return m.jsx(yDe,{scope:t,forceMount:n,children:m.jsx(PI,{present:n||s.open,children:m.jsx($ee,{asChild:!0,container:i,children:r})})})};nte.displayName=LI;var v6="PopoverContent",rte=T.forwardRef((e,t)=>{const n=xDe(v6,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,s=z0(v6,e.__scopePopover);return m.jsx(PI,{present:r||s.open,children:s.modal?m.jsx(vDe,{...i,ref:t}):m.jsx(wDe,{...i,ref:t})})});rte.displayName=v6;var vDe=T.forwardRef((e,t)=>{const n=z0(v6,e.__scopePopover),r=T.useRef(null),i=$0(t,r),s=T.useRef(!1);return T.useEffect(()=>{const o=r.current;if(o)return PPe(o)},[]),m.jsx(Zee,{as:kI,allowPinchZoom:!0,children:m.jsx(ite,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:w0(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:w0(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,f=a.button===2||l;s.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:w0(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),wDe=T.forwardRef((e,t)=>{const n=z0(v6,e.__scopePopover),r=T.useRef(!1),i=T.useRef(!1);return m.jsx(ite,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,f;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((f=n.triggerRef.current)==null?void 0:f.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),ite=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:c,...d}=e,u=z0(v6,n),h=Zb(n);return WRe(),m.jsx(gee,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(pee,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:c,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f,onDismiss:()=>u.onOpenChange(!1),children:m.jsx(EPe,{"data-state":ate(u.open),role:"dialog",id:u.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ste="PopoverClose",EDe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=z0(ste,n);return m.jsx(Ff.button,{type:"button",...r,ref:t,onClick:w0(e.onClick,()=>i.onOpenChange(!1))})});EDe.displayName=ste;var SDe="PopoverArrow",ote=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Zb(n);return m.jsx(SPe,{...i,...r,ref:t})});ote.displayName=SDe;function ate(e){return e?"open":"closed"}var ix=Qee,sx=tte,kDe=nte,OI=rte,lte=ote,gS={exports:{}},C$;function CDe(){return C$||(C$=1,function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,i){return i.filter(function(s){return n.test(r,s)})},n.test=function(r,i){return n.match(r,i)!==null},n.match=function(r,i,s){s=s||{};var o=0,a=[],l=i.length,f=0,c=0,d=s.pre||"",u=s.post||"",h=s.caseSensitive&&i||i.toLowerCase(),g;r=s.caseSensitive&&r||r.toLowerCase();for(var U=0;U<l;U++)g=i[U],h[U]===r[o]?(g=d+g+u,o+=1,c+=1+c):c=0,f+=c,a[a.length]=g;return o===r.length?(f=h===r?1/0:f,{rendered:a.join(""),score:f}):null},n.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(o,a,l,f){var c=a;s.extract&&(c=s.extract(a));var d=n.match(r,c,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()}(gS)),gS.exports}var MDe=CDe();const ADe=hc(MDe),{useDebugValue:TDe}=Te,{useSyncExternalStoreWithSelector:IDe}=ZW,NDe=e=>e;function RDe(e,t=NDe,n){const r=IDe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return TDe(r),r}const _De=e=>{const t=typeof e=="function"?qW(e):e,n=(r,i)=>RDe(t,r,i);return Object.assign(n,t),n},PDe=e=>_De(e);var M$,A$;const T$=typeof window<"u"&&((M$=window.document)!=null&&M$.createElement||((A$=window.navigator)==null?void 0:A$.product)==="ReactNative")?Te.useLayoutEffect:Te.useEffect;function El(){const e=PDe(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(i=>i.set),r=e(i=>i.version);return T$(()=>{n(i=>({version:i.version+1}))},[]),T$(()=>(n(({current:i})=>({current:[...i,t]})),()=>n(({current:i})=>({current:i.filter(s=>s!==t)}))),[t,r]),null},Out:()=>{const t=e(n=>n.current);return Te.createElement(Te.Fragment,null,t)}}}function Hr(){return Hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hr.apply(null,arguments)}function bS(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function DDe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,U=(u==null?void 0:u[e][l])||a,y=T.useMemo(()=>g,Object.values(g));return T.createElement(U.Provider,{value:y},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,LDe(i,...t)]}function LDe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Xp(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function ODe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,U=(u==null?void 0:u[e][l])||a,y=T.useMemo(()=>g,Object.values(g));return T.createElement(U.Provider,{value:y},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,jDe(i,...t)]}function jDe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function BDe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function cte(...e){return t=>e.forEach(n=>BDe(n,t))}function I$(...e){return T.useCallback(cte(...e),e)}const dM=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find($De);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(uM,Hr({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(uM,Hr({},r,{ref:t}),n)});dM.displayName="Slot";const uM=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...zDe(r,n.props),ref:cte(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});uM.displayName="SlotClone";const FDe=({children:e})=>T.createElement(T.Fragment,null,e);function $De(e){return T.isValidElement(e)&&e.type===FDe}function zDe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function HDe(e){const t=e+"CollectionProvider",[n,r]=ODe(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:g,children:U}=h,y=Te.useRef(null),x=Te.useRef(new Map).current;return Te.createElement(i,{scope:g,itemMap:x,collectionRef:y},U)},a=e+"CollectionSlot",l=Te.forwardRef((h,g)=>{const{scope:U,children:y}=h,x=s(a,U),w=I$(g,x.collectionRef);return Te.createElement(dM,{ref:w},y)}),f=e+"CollectionItemSlot",c="data-radix-collection-item",d=Te.forwardRef((h,g)=>{const{scope:U,children:y,...x}=h,w=Te.useRef(null),E=I$(g,w),S=s(f,U);return Te.useEffect(()=>(S.itemMap.set(w,{ref:w,...x}),()=>void S.itemMap.delete(w))),Te.createElement(dM,{[c]:"",ref:E},y)});function u(h){const g=s(e+"CollectionConsumer",h);return Te.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${c}]`));return Array.from(g.itemMap.values()).sort((S,M)=>x.indexOf(S.ref.current)-x.indexOf(M.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},u,r]}function VDe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function fte(...e){return t=>e.forEach(n=>VDe(n,t))}function WDe(...e){return T.useCallback(fte(...e),e)}function GDe(e,t=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function f(d){const{scope:u,children:h,...g}=d,U=(u==null?void 0:u[e][l])||a,y=T.useMemo(()=>g,Object.values(g));return T.createElement(U.Provider,{value:y},h)}function c(d,u){const h=(u==null?void 0:u[e][l])||a,g=T.useContext(h);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return f.displayName=s+"Provider",[f,c]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return i.scopeName=e,[r,XDe(i,...t)]}function XDe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:f})=>{const d=l(s)[`__scope${f}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}const KDe=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},YDe=PM.useId||(()=>{});let ZDe=0;function qDe(e){const[t,n]=T.useState(YDe());return KDe(()=>{n(r=>r??String(ZDe++))},[e]),t?`radix-${t}`:""}const dte=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(JDe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(hM,Hr({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(hM,Hr({},r,{ref:t}),n)});dte.displayName="Slot";const hM=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...eLe(r,n.props),ref:fte(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});hM.displayName="SlotClone";const QDe=({children:e})=>T.createElement(T.Fragment,null,e);function JDe(e){return T.isValidElement(e)&&e.type===QDe}function eLe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const tLe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],ute=tLe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?dte:t;return T.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),T.createElement(a,Hr({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function jI(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function nLe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=rLe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=jI(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function rLe({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=jI(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const iLe=T.createContext(void 0);function hte(e){const t=T.useContext(iLe);return e||t||"ltr"}const US="rovingFocusGroup.onEntryFocus",sLe={bubbles:!1,cancelable:!0},BI="RovingFocusGroup",[pM,pte,oLe]=HDe(BI),[aLe,mte]=GDe(BI,[oLe]),[lLe,cLe]=aLe(BI),fLe=T.forwardRef((e,t)=>T.createElement(pM.Provider,{scope:e.__scopeRovingFocusGroup},T.createElement(pM.Slot,{scope:e.__scopeRovingFocusGroup},T.createElement(dLe,Hr({},e,{ref:t}))))),dLe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:f,...c}=e,d=T.useRef(null),u=WDe(t,d),h=hte(s),[g=null,U]=nLe({prop:o,defaultProp:a,onChange:l}),[y,x]=T.useState(!1),w=jI(f),E=pte(n),S=T.useRef(!1),[M,A]=T.useState(0);return T.useEffect(()=>{const C=d.current;if(C)return C.addEventListener(US,w),()=>C.removeEventListener(US,w)},[w]),T.createElement(lLe,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:g,onItemFocus:T.useCallback(C=>U(C),[U]),onItemShiftTab:T.useCallback(()=>x(!0),[]),onFocusableItemAdd:T.useCallback(()=>A(C=>C+1),[]),onFocusableItemRemove:T.useCallback(()=>A(C=>C-1),[])},T.createElement(ute.div,Hr({tabIndex:y||M===0?-1:0,"data-orientation":r},c,{ref:u,style:{outline:"none",...e.style},onMouseDown:Xp(e.onMouseDown,()=>{S.current=!0}),onFocus:Xp(e.onFocus,C=>{const I=!S.current;if(C.target===C.currentTarget&&I&&!y){const R=new CustomEvent(US,sLe);if(C.currentTarget.dispatchEvent(R),!R.defaultPrevented){const L=E().filter(F=>F.focusable),_=L.find(F=>F.active),O=L.find(F=>F.id===g),B=[_,O,...L].filter(Boolean).map(F=>F.ref.current);gte(B)}}S.current=!1}),onBlur:Xp(e.onBlur,()=>x(!1))})))}),uLe="RovingFocusGroupItem",hLe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=e,a=qDe(),l=s||a,f=cLe(uLe,n),c=f.currentTabStopId===l,d=pte(n),{onFocusableItemAdd:u,onFocusableItemRemove:h}=f;return T.useEffect(()=>{if(r)return u(),()=>h()},[r,u,h]),T.createElement(pM.ItemSlot,{scope:n,id:l,focusable:r,active:i},T.createElement(ute.span,Hr({tabIndex:c?0:-1,"data-orientation":f.orientation},o,{ref:t,onMouseDown:Xp(e.onMouseDown,g=>{r?f.onItemFocus(l):g.preventDefault()}),onFocus:Xp(e.onFocus,()=>f.onItemFocus(l)),onKeyDown:Xp(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){f.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const U=gLe(g,f.orientation,f.dir);if(U!==void 0){g.preventDefault();let x=d().filter(w=>w.focusable).map(w=>w.ref.current);if(U==="last")x.reverse();else if(U==="prev"||U==="next"){U==="prev"&&x.reverse();const w=x.indexOf(g.currentTarget);x=f.loop?bLe(x,w+1):x.slice(w+1)}setTimeout(()=>gte(x))}})})))}),pLe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mLe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function gLe(e,t,n){const r=mLe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return pLe[r]}function gte(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function bLe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const ULe=fLe,yLe=hLe;function xLe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function bte(...e){return t=>e.forEach(n=>xLe(n,t))}function vLe(...e){return T.useCallback(bte(...e),e)}const mM=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{};function wLe(e,t){return T.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const Ute=e=>{const{present:t,children:n}=e,r=ELe(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=vLe(r.ref,i.ref);return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};Ute.displayName="Presence";function ELe(e){const[t,n]=T.useState(),r=T.useRef({}),i=T.useRef(e),s=T.useRef("none"),o=e?"mounted":"unmounted",[a,l]=wLe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const f=py(r.current);s.current=a==="mounted"?f:"none"},[a]),mM(()=>{const f=r.current,c=i.current;if(c!==e){const u=s.current,h=py(f);e?l("MOUNT"):h==="none"||(f==null?void 0:f.display)==="none"?l("UNMOUNT"):l(c&&u!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),mM(()=>{if(t){const f=d=>{const h=py(r.current).includes(d.animationName);d.target===t&&h&&ii.flushSync(()=>l("ANIMATION_END"))},c=d=>{d.target===t&&(s.current=py(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function py(e){return(e==null?void 0:e.animationName)||"none"}const yte=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(kLe);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return T.createElement(gM,Hr({},r,{ref:t}),T.isValidElement(o)?T.cloneElement(o,void 0,a):null)}return T.createElement(gM,Hr({},r,{ref:t}),n)});yte.displayName="Slot";const gM=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...CLe(r,n.props),ref:bte(t,n.ref)}):T.Children.count(n)>1?T.Children.only(null):null});gM.displayName="SlotClone";const SLe=({children:e})=>T.createElement(T.Fragment,null,e);function kLe(e){return T.isValidElement(e)&&e.type===SLe}function CLe(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const MLe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],ox=MLe.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?yte:t;return T.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),T.createElement(a,Hr({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function xte(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function ALe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=TLe({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:r,a=xte(n),l=T.useCallback(f=>{if(s){const d=typeof f=="function"?f(e):f;d!==e&&a(d)}else i(f)},[s,e,i,a]);return[o,l]}function TLe({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=xte(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const ILe=PM.useId||(()=>{});let NLe=0;function RLe(e){const[t,n]=T.useState(ILe());return mM(()=>{e||n(r=>r??String(NLe++))},[e]),e||(t?`radix-${t}`:"")}const vte="Tabs",[_Le,jHe]=DDe(vte,[mte]),wte=mte(),[PLe,FI]=_Le(vte),DLe=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...f}=e,c=hte(a),[d,u]=ALe({prop:r,onChange:i,defaultProp:s});return T.createElement(PLe,{scope:n,baseId:RLe(),value:d,onValueChange:u,orientation:o,dir:c,activationMode:l},T.createElement(ox.div,Hr({dir:c,"data-orientation":o},f,{ref:t})))}),LLe="TabsList",OLe=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=FI(LLe,n),o=wte(n);return T.createElement(ULe,Hr({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:r}),T.createElement(ox.div,Hr({role:"tablist","aria-orientation":s.orientation},i,{ref:t})))}),jLe="TabsTrigger",BLe=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,o=FI(jLe,n),a=wte(n),l=Ete(o.baseId,r),f=Ste(o.baseId,r),c=r===o.value;return T.createElement(yLe,Hr({asChild:!0},a,{focusable:!i,active:c}),T.createElement(ox.button,Hr({type:"button",role:"tab","aria-selected":c,"aria-controls":f,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:t,onMouseDown:bS(e.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:bS(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:bS(e.onFocus,()=>{const d=o.activationMode!=="manual";!c&&!i&&d&&o.onValueChange(r)})})))}),FLe="TabsContent",$Le=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=e,a=FI(FLe,n),l=Ete(a.baseId,r),f=Ste(a.baseId,r),c=r===a.value,d=T.useRef(c);return T.useEffect(()=>{const u=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(u)},[]),T.createElement(Ute,{present:i||c},({present:u})=>T.createElement(ox.div,Hr({"data-state":c?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!u,id:f,tabIndex:0},o,{ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0}}),u&&s))});function Ete(e,t){return`${e}-trigger-${t}`}function Ste(e,t){return`${e}-content-${t}`}const kte=DLe,Cte=OLe,Mte=BLe,Ate=$Le;var yS,N$;function zLe(){if(N$)return yS;N$=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof n0=="object"&&n0&&n0.Object===Object&&n0,f=typeof self=="object"&&self&&self.Object===Object&&self,c=l||f||Function("return this")(),d=Object.prototype,u=d.toString,h=Math.max,g=Math.min,U=function(){return c.Date.now()};function y(M,A,C){var I,R,L,_,O,$,B=0,F=!1,z=!1,H=!0;if(typeof M!="function")throw new TypeError(e);A=S(A)||0,x(C)&&(F=!!C.leading,z="maxWait"in C,L=z?h(S(C.maxWait)||0,A):L,H="trailing"in C?!!C.trailing:H);function G(ue){var te=I,le=R;return I=R=void 0,B=ue,_=M.apply(le,te),_}function V(ue){return B=ue,O=setTimeout(q,A),F?G(ue):_}function Y(ue){var te=ue-$,le=ue-B,he=A-te;return z?g(he,L-le):he}function K(ue){var te=ue-$,le=ue-B;return $===void 0||te>=A||te<0||z&&le>=L}function q(){var ue=U();if(K(ue))return se(ue);O=setTimeout(q,Y(ue))}function se(ue){return O=void 0,H&&I?G(ue):(I=R=void 0,_)}function de(){O!==void 0&&clearTimeout(O),B=0,I=$=R=O=void 0}function xe(){return O===void 0?_:se(U())}function ve(){var ue=U(),te=K(ue);if(I=arguments,R=this,$=ue,te){if(O===void 0)return V($);if(z)return O=setTimeout(q,A),G($)}return O===void 0&&(O=setTimeout(q,A)),_}return ve.cancel=de,ve.flush=xe,ve}function x(M){var A=typeof M;return!!M&&(A=="object"||A=="function")}function w(M){return!!M&&typeof M=="object"}function E(M){return typeof M=="symbol"||w(M)&&u.call(M)==n}function S(M){if(typeof M=="number")return M;if(E(M))return t;if(x(M)){var A=typeof M.valueOf=="function"?M.valueOf():M;M=x(A)?A+"":A}if(typeof M!="string")return M===0?M:+M;M=M.replace(r,"");var C=s.test(M);return C||o.test(M)?a(M.slice(2),C?2:8):i.test(M)?t:+M}return yS=y,yS}var HLe=zLe();const VLe=hc(HLe);function WLe(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var GLe={};WLe(GLe,"LaserPointer",()=>U9);function fr([e,t,n],[r,i,s]){return[e+r,t+i,n+s]}function g5([e,t,n],[r,i,s]){return[e-r,t-i,n-s]}function Mr([e,t,n],r){return[e*r,t*r,n*r]}function np([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function _i([e,t,n],r){return[Math.cos(r)*e-Math.sin(r)*t,Math.sin(r)*e+Math.cos(r)*t,n]}function XLe(e,t,n){return fr(e,Mr(g5(t,e),n))}function R$(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function _$(e){return Math.atan2(Math.sin(e),Math.cos(e))}function P$([e,t]){return Math.sqrt(e**2+t**2)}function Kp([e,t],[n,r]){return Math.sqrt((n-e)**2+(r-t)**2)}function KLe(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=Kp(e[n-1],e[n]);return t+=Kp(e[e.length-2],e[e.length-1]),t}const YLe=(e,t,n)=>Math.max(t,Math.min(n,e));function ZLe(e,t,n){const r=Kp(t,n);if(r===0)return Kp(e,t);const i=YLe(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r**2,0,1),s=[t[0]+i*(n[0]-t[0]),t[1]+i*(n[1]-t[1]),e[2]];return Kp(s,e)}function b9(e,t){if(t===0||e.length<=2)return e;const n=e[0],r=e[e.length-1],[i,s]=e.reduce(([o,a],l,f)=>{const c=ZLe(l,n,r);return c>o?[c,f]:[o,a]},[0,-1]);if(i>=t){const o=e[s];return[...b9([n,...e.slice(1,s),o],t).slice(0,-1),o,...b9([o,...e.slice(s,-1),r],t).slice(1)]}else return[n,r]}const Pd=class Pd{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},Pd.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=XLe(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),KLe(this.tailPoints)>Pd.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,r,i,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:r,totalLength:i})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=b9(n,this.options.simplify));const r=n.length;if(r===0)return[];if(r===1){const C=n[0],I=this.getSize(t,C[2],0,r,0);if(I<.5)return[];const R=[];for(let L=0;L<=Math.PI*2;L+=Math.PI/16)R.push(fr(C,Mr(_i([1,0,0],L),I)));return R.push(fr(C,Mr([1,0,0],this.getSize(t,C[2],0,r,0)))),R}if(r===2){const C=n[0],I=n[1],R=this.getSize(t,C[2],0,r,0),L=this.getSize(t,I[2],0,r,0);if(R<.5||L<.5)return[];const _=[],O=R$(C,[C[0],C[1]-100,C[2]],I);for(let $=O;$<=Math.PI+O;$+=Math.PI/16)_.push(fr(C,Mr(_i([1,0,0],$),R)));for(let $=Math.PI+O;$<=Math.PI*2+O;$+=Math.PI/16)_.push(fr(I,Mr(_i([1,0,0],$),L)));return _.push(_[0]),_}const i=[],s=[];let o=0,a=0,l=0,f=0;for(let C=1;C<r-1;C++){const I=n[C-1],R=n[C],L=n[C+1];let _=R[2];const O=Kp(I,R);f+=O,o=a+(O-a)*.2;const $=this.getSize(t,_,C,r,f);if($===0){l=C+1;continue}const B=np(g5(I,R)),F=np(g5(L,R)),z=_i(B,Math.PI/2),H=_i(B,-Math.PI/2),G=_i(F,Math.PI/2),V=_i(F,-Math.PI/2),Y=fr(R,Mr(z,$)),K=fr(R,Mr(H,$)),q=fr(R,Mr(G,$)),se=fr(R,Mr(V,$)),de=fr(z,V),xe=fr(H,G),ve=fr(R,Mr(P$(de)===0?B:np(de),$)),ue=fr(R,Mr(P$(xe)===0?F:np(xe),$)),te=_$(R$(R,I,L)),le=Pd.constants.cornerDetectionMaxAngle/180*Math.PI*Pd.constants.cornerDetectionVariance(o);if(Math.abs(te)<le){const he=Math.abs(_$(Math.PI-te));if(he===0)continue;if(te<0){s.push(K,ue);for(let we=0;we<=he;we+=he/4)i.push(fr(R,_i(Mr(z,$),we)));for(let we=he;we>=0;we-=he/4)s.push(fr(R,_i(Mr(z,$),we)));s.push(ue,q)}else{i.push(Y,ve);for(let we=0;we<=he;we+=he/4)s.push(fr(R,_i(Mr(z,-$),-we)));for(let we=he;we>=0;we-=he/4)i.push(fr(R,_i(Mr(z,-$),-we)));i.push(ve,se)}}else i.push(ve),s.push(ue);a=o}if(l>=r-2)if(this.options.keepHead){const C=n[r-1],I=[];for(let R=0;R<=Math.PI*2;R+=Math.PI/16)I.push(fr(C,Mr(_i([1,0,0],R),this.options.size)));return I.push(fr(C,Mr([1,0,0],this.options.size))),I}else return[];const c=n[l],d=n[l+1],u=n[r-2],h=n[r-1],g=np(g5(d,c)),U=np(g5(u,h)),y=_i(g,-Math.PI/2),x=_i(U,Math.PI/2),w=this.getSize(t,c[2],0,r,0),E=[],S=this.options.keepHead?this.options.size:this.getSize(t,u[2],r-2,r,f),M=[];if(w>1){for(let C=0;C<=Math.PI;C+=Math.PI/16)E.unshift(fr(c,_i(Mr(y,w),-C)));E.unshift(fr(c,Mr(y,-w)))}else E.push(c);for(let C=0;C<=Math.PI*3;C+=Math.PI/16)M.push(fr(h,_i(Mr(x,-S),-C)));const A=[...E,...i,...M.reverse(),...s.reverse()];return E.length>0&&A.push(E[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?b9(A,this.options.simplify):A}};Pd.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},Pd.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let U9=Pd;var Tte=fee(),{useAtom:rr,useSetAtom:ax,useAtomValue:Ite,useStore:BHe}=Tte,qLe=Tte.Provider,Za=SI(),QLe=_ye({"./locales/ar-SA.json":()=>Ve(()=>import("./ar-SA-G6X2FPQ2-JbfKnKKZ.js"),[]),"./locales/az-AZ.json":()=>Ve(()=>import("./az-AZ-76LH7QW2-C6r1QZG8.js"),[]),"./locales/bg-BG.json":()=>Ve(()=>import("./bg-BG-XCXSNQG7-CE1ukdro.js"),[]),"./locales/bn-BD.json":()=>Ve(()=>import("./bn-BD-2XOGV67Q-XZDwtN3L.js"),[]),"./locales/ca-ES.json":()=>Ve(()=>import("./ca-ES-6MX7JW3Y-DDwBJYHy.js"),[]),"./locales/cs-CZ.json":()=>Ve(()=>import("./cs-CZ-2BRQDIVT-Bufl_UxS.js"),[]),"./locales/da-DK.json":()=>Ve(()=>import("./da-DK-5WZEPLOC-fGaI-cZ8.js"),[]),"./locales/de-DE.json":()=>Ve(()=>import("./de-DE-XR44H4JA-C0F99x7Q.js"),[]),"./locales/el-GR.json":()=>Ve(()=>import("./el-GR-BZB4AONW-BhDYIusP.js"),[]),"./locales/en.json":()=>Ve(()=>Promise.resolve().then(()=>wHe),void 0),"./locales/es-ES.json":()=>Ve(()=>import("./es-ES-U4NZUMDT-DOTQv4l6.js"),[]),"./locales/eu-ES.json":()=>Ve(()=>import("./eu-ES-A7QVB2H4-Bj-7pqay.js"),[]),"./locales/fa-IR.json":()=>Ve(()=>import("./fa-IR-HGAKTJCU-B8TZcX5e.js"),[]),"./locales/fi-FI.json":()=>Ve(()=>import("./fi-FI-Z5N7JZ37-C7DY99xB.js"),[]),"./locales/fr-FR.json":()=>Ve(()=>import("./fr-FR-RHASNOE6-H4yd8DR0.js"),[]),"./locales/gl-ES.json":()=>Ve(()=>import("./gl-ES-HMX3MZ6V-CdznjivY.js"),[]),"./locales/he-IL.json":()=>Ve(()=>import("./he-IL-6SHJWFNN-CwEa8Tpm.js"),[]),"./locales/hi-IN.json":()=>Ve(()=>import("./hi-IN-IWLTKZ5I-CUAUSajg.js"),[]),"./locales/hu-HU.json":()=>Ve(()=>import("./hu-HU-A5ZG7DT2-eDXesEDl.js"),[]),"./locales/id-ID.json":()=>Ve(()=>import("./id-ID-SAP4L64H-Rcc8EZt8.js"),[]),"./locales/it-IT.json":()=>Ve(()=>import("./it-IT-JPQ66NNP-CKdwVH-a.js"),[]),"./locales/ja-JP.json":()=>Ve(()=>import("./ja-JP-DBVTYXUO-Dwnucwai.js"),[]),"./locales/kaa.json":()=>Ve(()=>import("./kaa-6HZHGXH3-BDn3QxVA.js"),[]),"./locales/kab-KAB.json":()=>Ve(()=>import("./kab-KAB-ZGHBKWFO-BiE3eZVE.js"),[]),"./locales/kk-KZ.json":()=>Ve(()=>import("./kk-KZ-P5N5QNE5-b3fuI2h7.js"),[]),"./locales/km-KH.json":()=>Ve(()=>import("./km-KH-HSX4SM5Z-Dm6TjfjN.js"),[]),"./locales/ko-KR.json":()=>Ve(()=>import("./ko-KR-MTYHY66A-CW-7kaiW.js"),[]),"./locales/ku-TR.json":()=>Ve(()=>import("./ku-TR-6OUDTVRD-ntD0G6yZ.js"),[]),"./locales/lt-LT.json":()=>Ve(()=>import("./lt-LT-XHIRWOB4-C0JwIY3F.js"),[]),"./locales/lv-LV.json":()=>Ve(()=>import("./lv-LV-5QDEKY6T-CbVIkTgT.js"),[]),"./locales/mr-IN.json":()=>Ve(()=>import("./mr-IN-CRQNXWMA-BVpmykbA.js"),[]),"./locales/my-MM.json":()=>Ve(()=>import("./my-MM-5M5IBNSE-CFZ2oY7C.js"),[]),"./locales/nb-NO.json":()=>Ve(()=>import("./nb-NO-T6EIAALU-8p8DOPqa.js"),[]),"./locales/nl-NL.json":()=>Ve(()=>import("./nl-NL-IS3SIHDZ-CG8OOqRT.js"),[]),"./locales/nn-NO.json":()=>Ve(()=>import("./nn-NO-6E72VCQL-BUMLePM2.js"),[]),"./locales/oc-FR.json":()=>Ve(()=>import("./oc-FR-POXYY2M6-Bo8rv4O5.js"),[]),"./locales/pa-IN.json":()=>Ve(()=>import("./pa-IN-N4M65BXN-BPpK8PdF.js"),[]),"./locales/percentages.json":()=>Ve(()=>Promise.resolve().then(()=>EHe),void 0),"./locales/pl-PL.json":()=>Ve(()=>import("./pl-PL-T2D74RX3-DYJpVAqY.js"),[]),"./locales/pt-BR.json":()=>Ve(()=>import("./pt-BR-5N22H2LF-Dkji3RhB.js"),[]),"./locales/pt-PT.json":()=>Ve(()=>import("./pt-PT-UZXXM6DQ-DXPSFKk4.js"),[]),"./locales/ro-RO.json":()=>Ve(()=>import("./ro-RO-JPDTUUEW-CKQi9ChS.js"),[]),"./locales/ru-RU.json":()=>Ve(()=>import("./ru-RU-B4JR7IUQ-DBMzr-jc.js"),[]),"./locales/si-LK.json":()=>Ve(()=>import("./si-LK-N5RQ5JYF-Bb1rw_Ey.js"),[]),"./locales/sk-SK.json":()=>Ve(()=>import("./sk-SK-C5VTKIMK-BDxqrblE.js"),[]),"./locales/sl-SI.json":()=>Ve(()=>import("./sl-SI-NN7IZMDC-BveIyXKy.js"),[]),"./locales/sv-SE.json":()=>Ve(()=>import("./sv-SE-XGPEYMSR-DmUU7zdD.js"),[]),"./locales/ta-IN.json":()=>Ve(()=>import("./ta-IN-2NMHFXQM-C53FJxSH.js"),[]),"./locales/th-TH.json":()=>Ve(()=>import("./th-TH-HPSO5L25-Y-ffJ-qK.js"),[]),"./locales/tr-TR.json":()=>Ve(()=>import("./tr-TR-DEFEU3FU-ByU9FfIR.js"),[]),"./locales/uk-UA.json":()=>Ve(()=>import("./uk-UA-QMV73CPH-JZdDzJ4W.js"),[]),"./locales/vi-VN.json":()=>Ve(()=>import("./vi-VN-M7AON7JQ-DZfpbBZb.js"),[]),"./locales/zh-CN.json":()=>Ve(()=>import("./zh-CN-LNUGB5OW-CNfCdsR1.js"),[]),"./locales/zh-HK.json":()=>Ve(()=>import("./zh-HK-E62DVLB3-DpVk4bGF.js"),[]),"./locales/zh-TW.json":()=>Ve(()=>import("./zh-TW-RAJ6MFWO-DrqE_-Fv.js"),[])}),JLe=85,D6={code:"en",label:"English"},$I=[D6,...[{code:"ar-SA",label:"",rtl:!0},{code:"bg-BG",label:""},{code:"ca-ES",label:"Catal"},{code:"cs-CZ",label:"esky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:""},{code:"es-ES",label:"Espaol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Franais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"",rtl:!0},{code:"hi-IN",label:""},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:""},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:" "},{code:"ko-KR",label:""},{code:"ku-TR",label:"Kurd"},{code:"lt-LT",label:"Lietuvi"},{code:"lv-LV",label:"Latvieu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokml"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:""},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugus Brasileiro"},{code:"pt-PT",label:"Portugus"},{code:"ro-RO",label:"Romn"},{code:"ru-RU",label:""},{code:"sk-SK",label:"Slovenina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenina"},{code:"tr-TR",label:"Trke"},{code:"uk-UA",label:""},{code:"zh-CN",label:""},{code:"zh-TW",label:""},{code:"vi-VN",label:"Ting Vit"},{code:"mr-IN",label:""}].filter(e=>iee[e.code]>=JLe).sort((e,t)=>e.label>t.label?1:-1)],y9="__test__";vt.DEV&&$I.unshift({code:y9,label:"test language"},{code:`${y9}.rtl`,label:"test language (rtl)",rtl:!0});var Ip=D6,u3={},Nte=async e=>{if(Ip=e,document.documentElement.dir=Ip.rtl?"rtl":"ltr",document.documentElement.lang=Ip.code,e.code.startsWith(y9))u3={};else try{u3=await QLe(`./locales/${Ip.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),u3=EI}Za.set(Rte,e.code)},eb=()=>Ip,D$=(e,t)=>{for(let n=0;n<t.length;++n){let r=t[n];if(e[r]===void 0)return;e=e[r]}if(typeof e=="string")return e},j=(e,t,n)=>{if(Ip.code.startsWith(y9))return`[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]`;let r=e.split("."),i=D$(u3,r)||D$(EI,r)||n;if(i===void 0){let s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(let s in t)i=i.replace(`{{${s}}}`,String(t[s]));return i},Rte=ui(D6.code),Zi=()=>{let e=Ite(Rte);return{t:j,langCode:e}},eOe=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:r=""})=>{let i=-(Te.useRef(Date.now()).current%1600);return m.jsx("div",{className:`Spinner ${r}`,children:m.jsx("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${i}ms`:0},children:m.jsx("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Pf=eOe,_te=({delay:e,theme:t})=>{let[n,r]=T.useState(!!e);return T.useEffect(()=>{if(!e)return;let i=setTimeout(()=>{r(!1)},e);return()=>clearTimeout(i)},[e]),n?null:m.jsxs("div",{className:ze("LoadingMessage",{"LoadingMessage--dark":t===It.DARK}),children:[m.jsx("div",{children:m.jsx(Pf,{})}),m.jsx("div",{className:"LoadingMessage-text",children:j("labels.loadingScene")})]})},tOe=e=>{let[t,n]=T.useState(!0);return T.useEffect(()=>{let r=async()=>{await Nte(i),n(!1)},i=$I.find(s=>s.code===e.langCode)||D6;r()},[e.langCode]),t?m.jsx(_te,{theme:e.theme}):e.children},Ot=Te.forwardRef(({size:e="medium",visible:t=!0,className:n="",...r},i)=>{let{id:s}=Uc(),o=Te.useRef(null);Te.useImperativeHandle(i,()=>o.current);let a=`ToolIcon_size_${e}`,[l,f]=T.useState(!1),c=T.useRef(!0),d=async h=>{var U;let g="onClick"in r&&((U=r.onClick)==null?void 0:U.call(r,h));if(zb(g))try{f(!0),await g}catch(y){if(y instanceof D7)console.warn(y);else throw y}finally{c.current&&f(!1)}};T.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]);let u=T.useRef(null);if(r.type==="button"||r.type==="icon"||r.type==="submit"){let h=r.type==="icon"?"button":r.type;return m.jsxs("button",{className:ze("ToolIcon_type_button",a,n,t&&!r.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!r.hidden,"ToolIcon--selected":r.selected,"ToolIcon--plain":r.type==="icon"}),style:r.style,"data-testid":r["data-testid"],hidden:r.hidden,title:r.title,"aria-label":r["aria-label"],type:h,onClick:d,ref:o,disabled:l||r.isLoading||!!r.disabled,children:[(r.icon||r.label)&&m.jsxs("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!r.disabled,children:[r.icon||r.label,r.keyBindingLabel&&m.jsx("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel}),r.isLoading&&m.jsx(Pf,{})]}),r.showAriaLabel&&m.jsxs("div",{className:"ToolIcon__label",children:[r["aria-label"]," ",l&&m.jsx(Pf,{})]}),r.children]})}return m.jsxs("label",{className:ze("ToolIcon",n),title:r.title,onPointerDown:h=>{var g;u.current=h.pointerType||null,(g=r.onPointerDown)==null||g.call(r,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{u.current=null})},children:[m.jsx("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:r.name,"aria-label":r["aria-label"],"aria-keyshortcuts":r["aria-keyshortcuts"],"data-testid":r["data-testid"],id:`${s}-${r.id}`,onChange:()=>{var h;(h=r.onChange)==null||h.call(r,{pointerType:u.current})},checked:r.checked,ref:o}),m.jsxs("div",{className:"ToolIcon__icon",children:[r.icon,r.keyBindingLabel&&m.jsx("span",{className:"ToolIcon__keybinding",children:r.keyBindingLabel})]})]})});Ot.displayName="ToolButton";var nOe=(e,t,n)=>{let r=new Set(wt(e.filter(c=>at(c)),t).map(c=>c.id)),i={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(let c of r){let d=dc(e,c);for(let u of d)if(!o.has(u.id)){if(An(u)){let h=di(u,s);h&&(i[h.id]=!0)}else i[u.id]=!0;o.add(u.id)}}let a=!0,l=e.map(c=>{if(t.selectedElementIds[c.id]){let d=An(c)?di(c,s):null;return c.frameId&&r.has(c.frameId)?(a=!1,i[c.id]=!0,c):d!=null&&d.frameId&&r.has(d==null?void 0:d.frameId)?c:(c.boundElements&&c.boundElements.forEach(u=>{var g,U;let h=n.scene.getNonDeletedElementsMap().get(u.id);h&&Fe(h)&&(ye(h,{startBinding:c.id===((g=h.startBinding)==null?void 0:g.elementId)?null:h.startBinding,endBinding:c.id===((U=h.endBinding)==null?void 0:U.elementId)?null:h.endBinding}),ye(h,{points:h.points}))}),yt(c,{isDeleted:!0}))}return c.frameId&&r.has(c.frameId)?(a=!1,An(c)||(i[c.id]=!0),yt(c,{frameId:null})):An(c)&&t.selectedElementIds[c.containerId]?yt(c,{isDeleted:!0}):c}),f=t.editingGroupId;if(a&&t.editingGroupId){let c=Cn(l,t.editingGroupId).filter(d=>!d.isDeleted);if(c.length>1)c[0]&&(i[c[0].id]=!0);else{f=null,c[0]&&(i[c[0].id]=!0);let d=c[0];if(d){let u=d.groupIds.findIndex(g=>g===t.editingGroupId),h=d.groupIds[u+1];if(h){let g=Cn(l,h).filter(U=>!U.isDeleted);g.length>1&&(f=h,g.forEach(U=>{i[U.id]=!0}))}}}}return{elements:l,appState:{...t,...is({selectedElementIds:i,editingGroupId:f},l,t,null)}}},L$=(e,t)=>{if(e.editingGroupId){let n=Cn(Un(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},Pte=_e({name:"deleteSelectedElements",label:"labels.delete",icon:Yh,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,r)=>{if(t.editingLinearElement){let{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:f}=t.editingLinearElement,c=r.scene.getNonDeletedElementsMap(),d=je.getElement(o,c);if(!d||a==null)return!1;if(d.points.length<2){let h=e.map(U=>U.id===d.id?yt(U,{isDeleted:!0}):U),g=L$(t,h);return{elements:h,appState:{...g,editingLinearElement:null},captureUpdate:me.IMMEDIATELY}}let u={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:f};return je.deletePoints(d,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...u,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:me.IMMEDIATELY}}let{elements:i,appState:s}=nOe(e,t,r);return qq(i,i.filter(o=>o.isDeleted)),s=L$(s,i),{elements:i,appState:{...s,activeTool:Ur(t,{type:"selection"}),multiElement:null,activeEmbeddable:null},captureUpdate:_r(Un(e),t)?me.IMMEDIATELY:me.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===Q.BACKSPACE||e.key===Q.DELETE)&&!e[Q.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Ot,{type:"button",icon:Yh,title:j("labels.delete"),"aria-label":j("labels.delete"),onClick:()=>n(null),visible:_r(Un(e),t)})}),bM=(e,t)=>e.frameId===t||e.id===t,Dte=(e,t,n)=>{let r=[],i=[],s=null,o=-1,a=ct(n||wt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){let l=e[o];a.get(l.id)?(i.length&&(r=r.concat(i),i=[]),r.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,i.push(o)):i=[]}return r},rOe=e=>{let t=0;return e.reduce((n,r,i)=>(i>0&&e[i-1]!==r-1&&(t=++t),(n[t]||(n[t]=[])).push(r),n),[])},O$=(e,t,n)=>{var r,i;if("containerId"in e&&e.containerId){let s=Nf.getScene(e).getElement(e.containerId);if(s)return n==="left"?Math.min(t.indexOf(s),t.indexOf(e)):Math.max(t.indexOf(s),t.indexOf(e))}else{let s=(i=(r=e.boundElements)==null?void 0:r.find(o=>o.type!=="arrow"))==null?void 0:i.id;if(s){let o=Nf.getScene(e).getElement(s);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}}},iOe=(e,t)=>{let n=-1,r=-1;return e.forEach((i,s)=>{bM(i,t)&&(n===-1&&(n=s),r=s)}),n===-1?[]:e.slice(n,r+1)},sOe=(e,t,n,r,i)=>{let s=t[n],o=d=>d.isDeleted?!1:i?d.frameId===i:e.editingGroupId?d.groupIds.includes(e.editingGroupId):!0,a=r==="left"?Su(t,d=>o(d),Math.max(0,n-1)):OZ(t,d=>o(d),n+1),l=t[a];if(!l)return-1;if(e.editingGroupId){if((s==null?void 0:s.groupIds.join(""))===(l==null?void 0:l.groupIds.join("")))return O$(l,t,r)??a;if(!(l!=null&&l.groupIds.includes(e.editingGroupId)))return-1}if(!i&&(l.frameId||at(l))){let d=iOe(t,l.frameId||l.id);return r==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1])}if(!l.groupIds.length)return O$(l,t,r)??a;let f=e.editingGroupId?l.groupIds[l.groupIds.indexOf(e.editingGroupId)-1]:l.groupIds[l.groupIds.length-1],c=Cn(t,f);return c.length?r==="left"?t.indexOf(c[0]):t.indexOf(c[c.length-1]):a},Lte=(e,t)=>t.reduce((n,r)=>{let i=e[r];return n.set(i.id,i),n},new Map),Ote=(e,t,n)=>{let r=Dte(e,t),i=Lte(e,r),s=rOe(r);n==="right"&&(s=s.reverse());let o=new Set(r.filter(a=>at(e[a])).map(a=>e[a].id));return s.forEach((a,l)=>{var w;let f=a[0],c=a[a.length-1],d=n==="left"?f:c,u=a.some(E=>{let S=e[E];return S.frameId&&o.has(S.frameId)})?null:(w=e[d])==null?void 0:w.frameId,h=sOe(t,e,d,n,u);if(h===-1||d===h)return;let g=n==="left"?e.slice(0,h):e.slice(0,f),U=e.slice(f,c+1),y=n==="left"?e.slice(h,f):e.slice(c+1,h+1),x=n==="left"?e.slice(c+1):e.slice(h+1);e=n==="left"?[...g,...U,...y,...x]:[...g,...y,...U,...x]}),fc(e,i),e},jte=(e,t,n,r,i)=>{let s=Dte(e,t,i),o=Lte(e,s),a=[],l,f;if(n==="left"){if(r)l=OZ(e,g=>bM(g,r));else if(t.editingGroupId){let g=Cn(e,t.editingGroupId);if(!g.length)return e;l=e.indexOf(g[0])}else l=0;f=s[s.length-1]}else{if(r)f=Su(e,g=>bM(g,r));else if(t.editingGroupId){let g=Cn(e,t.editingGroupId);if(!g.length)return e;f=e.indexOf(g[g.length-1])}else f=e.length-1;l=s[0]}l===-1&&(l=0);for(let g=l;g<f+1;g++)s.includes(g)||a.push(e[g]);let c=Array.from(o.values()),d=e.slice(0,l),u=e.slice(f+1),h=n==="left"?[...d,...c,...a,...u]:[...d,...a,...c,...u];return fc(h,o),h};function Bte(e,t,n,r){let i=ct(wt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(let f of e)i.has(f.id)&&at(f)&&o.add(f.id);for(let f of e)if(i.has(f.id))if(at(f)||f.frameId&&o.has(f.frameId))s.regularElements.push(f);else if(!f.frameId)s.regularElements.push(f);else{let c=s.frameChildren.get(f.frameId)||[];c.push(f),s.frameChildren.set(f.frameId,c)}let a=e,l=Array.from(s.frameChildren.entries());for(let[f,c]of l)a=r(e,t,n,f,c);return r(a,t,n,null,s.regularElements)}var oOe=(e,t)=>Ote(e,t,"left"),aOe=(e,t)=>Ote(e,t,"right"),lOe=(e,t)=>Bte(e,t,"left",jte),cOe=(e,t)=>Bte(e,t,"right",jte),fOe=_e({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:SB,trackEvent:{category:"element"},perform:(e,t)=>({elements:oOe(e,t),appState:t,captureUpdate:me.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[Q.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Ft.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${j("labels.sendBackward")}  ${Ue("CtrlOrCmd+[")}`,children:SB})}),dOe=_e({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:EB,trackEvent:{category:"element"},perform:(e,t)=>({elements:aOe(e,t),appState:t,captureUpdate:me.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[Q.CTRL_OR_CMD]&&!e.shiftKey&&e.code===Ft.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${j("labels.bringForward")}  ${Ue("CtrlOrCmd+]")}`,children:EB})}),uOe=_e({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:CB,trackEvent:{category:"element"},perform:(e,t)=>({elements:lOe(e,t),appState:t,captureUpdate:me.IMMEDIATELY}),keyTest:e=>sc?e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.BRACKET_LEFT:e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.code===Ft.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${j("labels.sendToBack")}  ${Ue(sc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:CB})}),hOe=_e({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:kB,trackEvent:{category:"element"},perform:(e,t)=>({elements:cOe(e,t),appState:t,captureUpdate:me.IMMEDIATELY}),keyTest:e=>sc?e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.BRACKET_RIGHT:e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.code===Ft.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>m.jsx("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${j("labels.bringToFront")}  ${Ue(sc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:kB})}),pOe=_e({name:"selectAll",label:"labels.selectAll",icon:uEe,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,r)=>{if(t.editingLinearElement)return!1;let i=e.filter(s=>!s.isDeleted&&!(Oe(s)&&s.containerId)&&!s.locked).reduce((s,o)=>(s[o.id]=!0,s),{});return{appState:{...t,...is({editingGroupId:null,selectedElementIds:i},Un(e),t,r),selectedLinearElement:Object.keys(i).length===1&&mt(e[0])?new je(e[0]):null},captureUpdate:me.IMMEDIATELY}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.A}),mOe=e=>{let t=e.slice(),n=new Set,r=s=>{var f,c,d;let o=(c=(f=s[0])==null?void 0:f.groupIds)==null?void 0:c.join(""),a=[s[0]],l=[];for(let u of s.slice(1))((d=u.groupIds)==null?void 0:d.join(""))===o?a.push(u):l.push(u);return l.length?[...a,...r(l)]:a},i=new Map;return t.forEach((s,o)=>{var a;if(!i.has(s.id))if((a=s.groupIds)!=null&&a.length){let l=s.groupIds[s.groupIds.length-1],f=t.slice(o).filter(c=>{var u;let d=(u=c==null?void 0:c.groupIds)==null?void 0:u.some(h=>h===l);return d&&i.set(c.id,!0),d});for(let c of r(f))n.add(c)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},gOe=e=>{let t=mve(e),n=e.slice(),r=new Set;return n.forEach((i,s)=>{var o,a,l;i&&((o=i.boundElements)!=null&&o.length?(r.add(i),n[s]=null,i.boundElements.forEach(f=>{let c=t.get(f.id);c&&f.type==="text"&&(r.add(c[0]),n[c[1]]=null)})):i.type==="text"&&i.containerId&&((l=(a=t.get(i.containerId))==null?void 0:a[0].boundElements)!=null&&l.find(f=>f.id===i.id))||(r.add(i),n[s]=null))}),r.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...r]},bOe=e=>gOe(mOe(e)),UOe=_e({name:"duplicateSelection",label:"labels.duplicateSelection",icon:NC,trackEvent:{category:"element"},perform:(e,t,n,r)=>{if(t.editingLinearElement)try{let s=je.duplicateSelectedPoints(t,r.scene.getNonDeletedElementsMap());return{elements:e,appState:s,captureUpdate:me.IMMEDIATELY}}catch{return!1}let i=yOe(e,t);if(r.props.onDuplicate&&i.elements){let s=r.props.onDuplicate(i.elements,e);s&&(i.elements=s)}return{...i,captureUpdate:me.IMMEDIATELY}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.D,PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Ot,{type:"button",icon:NC,title:`${j("labels.duplicateSelection")}  ${Ue("CtrlOrCmd+D")}`,"aria-label":j("labels.duplicateSelection"),onClick:()=>n(null),visible:_r(Un(e),t)})}),yOe=(e,t)=>{let n=new Map,r=[],i=[],s=new Map,o=new Map,a=ct(e),l=U=>{let y=bB(U).reduce((x,w)=>{if(c.has(w.id))return x;c.set(w.id,!0);let E=bQ(t.editingGroupId,n,w,{x:w.x+B4/2,y:w.y+B4/2});return c.set(E.id,!0),o.set(E.id,E),s.set(w.id,E.id),i.push(w),r.push(E),x.push(E),x},[]);return Array.isArray(U)?y:y[0]||null};e=bOe(e);let f=ct(wt(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),c=new Map,d=e.slice(),u=(U,y)=>{Gi(U!==-1,"targetIndex === -1 "),!(!Array.isArray(y)&&!y)&&d.splice(U+1,0,...bB(y))},h=new Set(e.filter(U=>f.has(U.id)&&at(U)).map(U=>U.id));for(let U of e){if(c.has(U.id)||!f.has(U.id))continue;let y=nQ(t,U);if(y){let x=Cn(e,y).flatMap(E=>at(E)?[...dc(e,E.id),E]:[E]),w=Su(d,E=>{var S;return(S=E.groupIds)==null?void 0:S.includes(y)});u(w,l(x));continue}if(!(U.frameId&&h.has(U.frameId))){if(at(U)){let x=U.id,w=dc(e,x),E=Su(d,S=>S.frameId===x||S.id===x);u(E,l([...w,U]));continue}if(ca(U)){let x=xt(U,a),w=Su(d,E=>E.id===U.id||"containerId"in E&&E.containerId===U.id);x?u(w,l([U,x])):u(w,l(U));continue}if(An(U)){let x=di(U,a),w=Su(d,E=>E.id===U.id||E.id===(x==null?void 0:x.id));x?u(w,l([x,U])):u(w,l(U));continue}u(Su(d,x=>x.id===U.id),l(U))}}aQ(d,i,s),Zq(d,i,s),XQ(d,i,s);let g=pI(r);return{elements:d,appState:{...t,...is({editingGroupId:t.editingGroupId,selectedElementIds:g.reduce((U,y)=>(An(y)||(U[y.id]=!0),U),{})},Un(d),t,null)}}},xOe=new Set(["command_palette","export"]),vn=(e,t,n,r)=>{try{if(typeof window>"u"||vt.VITE_WORKER_ID||vt.VITE_APP_ENABLE_TRACKING!=="true"||!xOe.has(e)||vt.DEV)return;vt.PROD||console.info("trackEvent",{category:e,action:t,label:n,value:r}),window.sa_event&&window.sa_event(t,{category:e,label:n,value:r})}catch(i){console.error("error during analytics",i)}},Fte=T.forwardRef((e,t)=>{let{title:n,className:r,testId:i,active:s,standalone:o,icon:a,onClick:l}=e;return m.jsx("button",{type:"button",ref:t,title:n,"data-testid":i,className:ze(r,{standalone:o,active:s}),onClick:l,children:a},n)}),gc=e=>m.jsx("div",{className:"buttonList",children:e.options.map(t=>e.type==="button"?m.jsx(Fte,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):m.jsxs("label",{className:ze({active:e.value===t.value}),title:t.text,children:[m.jsx("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))}),vOe=({onChange:e,type:t,activeColor:n,topPicks:r})=>{let i;return t==="elementStroke"&&(i=yZ),t==="elementBackground"&&(i=xZ),t==="canvasBackground"&&(i=vZ),r&&(i=r),i?m.jsx("div",{className:"color-picker__top-picks",children:i.map(s=>m.jsx("button",{className:ze("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:m.jsx("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},$te=()=>m.jsx("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),lx=({palette:e,color:t})=>{for(let[n,r]of Object.entries(e))if(Array.isArray(r)){let i=r.indexOf(t);if(i>-1)return{colorName:n,shade:i}}else if(r===t)return{colorName:n,shade:null};return null},UM=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),zte=({color:e,palette:t})=>!Object.values(t).flat().includes(e),wOe=(e,t,n)=>{let r={elementBackground:"backgroundColor",elementStroke:"strokeColor"},i=e.filter(o=>{if(o.isDeleted)return!1;let a=o[r[t]];return zte({color:a,palette:n})}),s=new Map;return i.forEach(o=>{let a=o[r[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,axe)},L6=ui(null),j$=(e,t,n)=>(e*299+t*587+n*114)/1e3>=160?"black":"white",EOe=(e,t)=>{if(t){let s=new Option().style;if(s.color=e,s.color){let o=s.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),a=parseInt(o[0]),l=parseInt(o[1]),f=parseInt(o[2]);return j$(a,l,f)}}if(e==="transparent")return"black";let n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return j$(n,r,i)},SOe=({color:e,keyLabel:t,isCustomColor:n=!1,isShade:r=!1})=>m.jsxs("div",{className:"color-picker__button__hotkey-label",style:{color:EOe(e,n)},children:[r&&"",t]}),zI=SOe,kOe=({hex:e,onChange:t,palette:n})=>{let r=lx({color:e||"transparent",palette:n}),[i,s]=rr(L6),o=T.useRef(null);if(T.useEffect(()=>{o.current&&i==="shades"&&o.current.focus()},[r,i]),r){let{colorName:a,shade:l}=r,f=n[a];if(Array.isArray(f))return m.jsx("div",{className:"color-picker-content--default shades",children:f.map((c,d)=>m.jsxs("button",{ref:d===l&&i==="shades"?o:void 0,tabIndex:-1,type:"button",className:ze("color-picker__button color-picker__button--large",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:c?{"--swatch-color":c}:void 0,onClick:()=>{t(c),s("shades")},children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(zI,{color:c,keyLabel:d+1,isShade:!0})]},d))})}return m.jsxs("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[m.jsx("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),m.jsx("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:j("colorPicker.noShades")})]})},COe=({palette:e,color:t,onChange:n,label:r,activeShade:i})=>{let s=lx({color:t||"transparent",palette:e}),[o,a]=rr(L6),l=T.useRef(null);return T.useEffect(()=>{l.current&&o==="baseColors"&&l.current.focus()},[s==null?void 0:s.colorName,o]),m.jsx("div",{className:"color-picker-content--default",children:Object.entries(e).map(([f,c],d)=>{let u=(Array.isArray(c)?c[i]:c)||"transparent",h=UM[d],g=j(`colors.${f.replace(/\d+/,"")}`,null,"");return m.jsxs("button",{ref:(s==null?void 0:s.colorName)===f?l:void 0,tabIndex:-1,type:"button",className:ze("color-picker__button color-picker__button--large",{active:(s==null?void 0:s.colorName)===f,"is-transparent":u==="transparent"||!u}),onClick:()=>{n(u),a("baseColors")},title:`${g}${u.startsWith("#")?` ${u}`:""}  ${h}`,"aria-label":`${g}  ${h}`,style:{"--swatch-color":u},"data-testid":`color-${f}`,children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(zI,{color:u,keyLabel:h})]},f)})})},MOe=COe,AOe=({colors:e,color:t,onChange:n,label:r})=>{let[i,s]=rr(L6),o=T.useRef(null);return T.useEffect(()=>{o.current&&o.current.focus()},[t,i]),m.jsx("div",{className:"color-picker-content--default",children:e.map((a,l)=>m.jsxs("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:ze("color-picker__button color-picker__button--large",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":r,style:{"--swatch-color":a},children:[m.jsx("div",{className:"color-picker__button-outline"}),m.jsx(zI,{color:a,keyLabel:l+1,isCustomColor:!0})]},l))})},xS=(e,t,n)=>{let r=Math.ceil(n/up);switch(t=t??-1,e){case"ArrowLeft":{let i=t-1;return i<0?n-1:i}case"ArrowRight":return(t+1)%n;case"ArrowDown":{let i=t+up;return i>=n?t%up:i}case"ArrowUp":{let i=t-up,s=i<0?up*r+i:i;return s>=n?void 0:s}}},TOe=({e,colorObj:t,onChange:n,palette:r,customColors:i,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){let a=Number(e.code.slice(-1))-1;return n(r[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&i[Number(e.key)-1])return n(i[Number(e.key)-1]),s("custom"),!0;if(UM.includes(e.key)){let a=UM.indexOf(e.key),l=Object.keys(r)[a],f=r[l],c=Array.isArray(f)?f[o]:f;return n(c),s("baseColors"),!0}return!1},IOe=({event:e,activeColorPickerSection:t,palette:n,color:r,onChange:i,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:f,onEscape:c})=>{if(e[Q.CTRL_OR_CMD])return!1;if(e.key===Q.ESCAPE)return c(e),!0;if(e.key===Q.ALT)return f(!0),!0;if(e.key===Q.I)return f(),!0;let d=lx({color:r,palette:n});if(e.key===Q.TAB){let u={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(u).reduce((w,[E,S])=>(S&&w.push(E),w),[]),g=h.indexOf(t),U=e.shiftKey?-1:1,y=g+U>h.length-1?0:g+U<0?h.length-1:g+U,x=h[y];return x&&o(x),x==="custom"?i(s[0]):x==="baseColors"&&(Object.entries(n).find(([w,E])=>Array.isArray(E)?E.includes(r):E===r?w:null)||i(Mt.black)),e.preventDefault(),e.stopPropagation(),!0}if(TOe({e,colorObj:d,onChange:i,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){let{shade:u}=d,h=xS(e.key,u,up);if(h!==void 0)return i(n[d.colorName][h]),!0}if(t==="baseColors"&&d){let{colorName:u}=d,h=Object.keys(n),g=h.indexOf(u),U=xS(e.key,g,h.length);if(U!==void 0){let y=h[U],x=n[y];return i(Array.isArray(x)?x[l]:x),!0}}if(t==="custom"){let u=s.indexOf(r),h=xS(e.key,u,s.length);if(h!==void 0){let g=s[h];return i(g),!0}}return!1},NOe=({children:e})=>m.jsx("div",{className:"color-picker__heading",children:e}),h3=NOe,ROe=({color:e,onChange:t,label:n,type:r,elements:i,palette:s,updateData:o,children:a,onEyeDropperToggle:l,onEscape:f})=>{let[c]=Te.useState(()=>r==="canvasBackground"?[]:wOe(i,r,s)),[d,u]=rr(L6),h=lx({color:e,palette:s});T.useEffect(()=>{if(!d){let x=zte({color:e,palette:s}),w=x&&!c.includes(e);u(w?"hex":x?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,s,u,h,c]);let[g,U]=T.useState((h==null?void 0:h.shade)??(r==="elementBackground"?f5:c5));T.useEffect(()=>{(h==null?void 0:h.shade)!=null&&U(h.shade);let x=w=>{w.key===Q.ALT&&l(!1)};return document.addEventListener("keyup",x,{capture:!0}),()=>{document.removeEventListener("keyup",x,{capture:!0})}},[h,l]);let y=Te.useRef(null);return m.jsx("div",{role:"dialog","aria-modal":"true","aria-label":j("labels.colorPicker"),children:m.jsxs("div",{ref:y,onKeyDown:x=>{IOe({event:x,activeColorPickerSection:d,palette:s,color:e,onChange:t,onEyeDropperToggle:l,customColors:c,setActiveColorPickerSection:u,updateData:o,activeShade:g,onEscape:f})&&(x.preventDefault(),x.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!c.length&&m.jsxs("div",{children:[m.jsx(h3,{children:j("colorPicker.mostUsedCustomColors")}),m.jsx(AOe,{colors:c,color:e,label:j("colorPicker.mostUsedCustomColors"),onChange:t})]}),m.jsxs("div",{children:[m.jsx(h3,{children:j("colorPicker.colors")}),m.jsx(MOe,{color:e,label:n,palette:s,onChange:t,activeShade:g})]}),m.jsxs("div",{children:[m.jsx(h3,{children:j("colorPicker.shades")}),m.jsx(kOe,{hex:e,onChange:t,palette:s})]}),a]})})},Hte=Te.createContext(null),Us=()=>Te.useContext(Hte),Vte=e=>{let[t,n]=T.useState(null),r=Wr(),{theme:i}=Us(),{container:s}=Uc();return T.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",r.editor.isMobile),t.classList.toggle("theme--dark",i===It.DARK))},[t,i,r.editor.isMobile,e==null?void 0:e.className]),T.useLayoutEffect(()=>{let o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;let a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function HI(e,t,n){T.useEffect(()=>{function r(i){let s=i;if(!e.current)return;let o=n==null?void 0:n(s,e.current);if(o!==!0){if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}}return document.addEventListener("pointerdown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("pointerdown",r),document.removeEventListener("touchstart",r)}},[e,t,n])}var cx=e=>{let t=T.useRef(e);return Object.assign(t.current,e),t.current},fx=ui(null),_Oe=({onCancel:e,onChange:t,onSelect:n,colorPickerType:r})=>{let i=Vte({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=Us(),o=bx(),a=bc(),l=wt(o,s),f=cx({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:c}=Uc();T.useEffect(()=>{let u=d.current;if(!u||!a.canvas||!i)return;let h=!1,g=a.canvas.getContext("2d"),U=({clientX:A,clientY:C})=>{let I=g.getImageData((A-s.offsetLeft)*window.devicePixelRatio,(C-s.offsetTop)*window.devicePixelRatio,1,1).data;return uxe(I[0],I[1],I[2])},y=({clientX:A,clientY:C,altKey:I})=>{u.style.top=`${C+20}px`,u.style.left=`${A+20}px`;let R=U({clientX:A,clientY:C});h&&f.onChange(r,R,f.selectedElements,{altKey:I}),u.style.background=R},x=()=>{f.onCancel()},w=(A,C)=>{f.onSelect(A,C)},E=A=>{h=!0,A.stopImmediatePropagation()},S=A=>{h=!1,c==null||c.focus(),A.stopImmediatePropagation(),A.preventDefault(),w(U(A),A)},M=A=>{A.key===Q.ESCAPE&&(A.preventDefault(),A.stopImmediatePropagation(),x())};return i.tabIndex=-1,i.focus(),y({clientX:f.app.lastViewportPosition.x,clientY:f.app.lastViewportPosition.y,altKey:!1}),i.addEventListener("keydown",M),i.addEventListener("pointerdown",E),i.addEventListener("pointerup",S),window.addEventListener("pointermove",y,{passive:!0}),window.addEventListener("blur",x),()=>{h=!1,i.removeEventListener("keydown",M),i.removeEventListener("pointerdown",E),i.removeEventListener("pointerup",S),window.removeEventListener("pointermove",y),window.removeEventListener("blur",x)}},[f,a.canvas,i,r,c,s.offsetLeft,s.offsetTop]);let d=T.useRef(null);return HI(d,()=>{e()},u=>!!u.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),i?ii.createPortal(m.jsx("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),i):null},POe=({color:e,onChange:t,label:n,colorPickerType:r})=>{let i=Wr(),[s,o]=T.useState(e),[a,l]=rr(L6);T.useEffect(()=>{o(e)},[e]);let f=T.useCallback(g=>{let U=g.toLowerCase(),y=DOe(U);y&&t(y),o(U)},[t]),c=T.useRef(null),d=T.useRef(null);T.useEffect(()=>{c.current&&c.current.focus()},[a]);let[u,h]=rr(fx);return T.useEffect(()=>()=>{h(null)},[h]),m.jsxs("div",{className:"color-picker__input-label",children:[m.jsx("div",{className:"color-picker__input-hash",children:"#"}),m.jsx("input",{ref:a==="hex"?c:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:g=>{f(g.target.value)},value:(s||"").replace(/^#/,""),onBlur:()=>{o(e)},tabIndex:-1,onFocus:()=>l("hex"),onKeyDown:g=>{var U;g.key!==Q.TAB&&(g.key===Q.ESCAPE&&((U=d.current)==null||U.focus()),g.stopPropagation())}}),!i.editor.isMobile&&m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),m.jsx("div",{ref:d,className:ze("excalidraw-eye-dropper-trigger",{selected:u}),onClick:()=>h(g=>g?null:{keepOpenOnAlt:!1,onSelect:U=>t(U),colorPickerType:r}),title:`${j("labels.eyeDropper")}  ${Q.I.toLocaleUpperCase()} or ${Ue("Alt")} `,children:iEe})]})]})},tl=Te.forwardRef(({children:e,padding:t,className:n,style:r},i)=>m.jsx("div",{className:ze("Island",n),style:{"--padding":t,...r},ref:i,children:e})),Wte=Te.forwardRef(({className:e,container:t,children:n,style:r,onClose:i,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},f)=>{let c=Wr();return m.jsx(kDe,{container:t,children:m.jsxs(OI,{ref:f,className:ze("focus-visible-none",e),"data-prevent-outside-click":!0,side:c.editor.isMobile&&!c.viewport.isLandscape?"bottom":"right",align:c.editor.isMobile&&!c.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!sve(document.activeElement)&&t.focus(),i()},children:[m.jsx(tl,{padding:3,style:r,children:n}),m.jsx(lte,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),B$=e=>{let t=new Option().style;return t.color=e,!!t.color},DOe=e=>Ka(e)?e:B$(`#${e}`)?`#${e}`:B$(e)?e:null,LOe=({type:e,color:t,onChange:n,label:r,elements:i,palette:s=Mt,updateData:o})=>{let{container:a}=Uc(),[,l]=rr(L6),[f,c]=rr(fx),d=m.jsxs("div",{children:[m.jsx(h3,{children:j("colorPicker.hexCode")}),m.jsx(POe,{color:t,label:r,onChange:g=>{n(g)},colorPickerType:e})]}),u=T.useRef(null),h=()=>{var g,U;(U=(g=u.current)==null?void 0:g.querySelector(".color-picker-content"))==null||U.focus()};return m.jsx(Wte,{container:a,style:{maxWidth:"13rem"},onFocusOutside:g=>{h(),g.preventDefault()},onPointerDownOutside:g=>{f&&g.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:s?m.jsx(ROe,{palette:s,color:t,onChange:g=>{n(g)},onEyeDropperToggle:g=>{c(U=>g?(U=U||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},U.keepOpenOnAlt=!0,U):g===!1||U?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:g=>{f?c(null):o({openPopup:null})},label:r,type:e,elements:i,updateData:o,children:d}):d})},OOe=({label:e,color:t,type:n})=>m.jsx(sx,{type:"button",className:ze("color-picker__button active-color properties-trigger",{"is-transparent":t==="transparent"||!t}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:j(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:m.jsx("div",{className:"color-picker__button-outline"})}),VI=({type:e,color:t,onChange:n,label:r,elements:i,palette:s=Mt,topPicks:o,updateData:a,appState:l})=>m.jsx("div",{children:m.jsxs("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[m.jsx(vOe,{activeColor:t,onChange:n,type:e,topPicks:o}),m.jsx($te,{}),m.jsxs(ix,{open:l.openPopup===e,onOpenChange:f=>{a({openPopup:f?e:null})},children:[m.jsx(OOe,{color:t,label:r,type:e}),l.openPopup===e&&m.jsx(LOe,{type:e,color:t,onChange:n,label:r,elements:i,palette:s,updateData:a})]})]})}),dx=({icon:e})=>m.jsx("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),jOe=({label:e,open:t,openTrigger:n,children:r,className:i})=>m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:i,onClick:n,children:[e,m.jsx(dx,{icon:t?MEe:uq})]}),t&&m.jsx("div",{style:{display:"flex",flexDirection:"column"},children:r})]}),yM=jOe,BOe=ui(!1);function FOe({options:e,value:t,label:n,onChange:r,onClose:i,numberOfOptionsToAlwaysShow:s=e.length}){let o=Wr(),a=h=>{let g=e.find(U=>U.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&g)r(g.value),h.preventDefault();else if(h.key===Q.TAB){let U=e.findIndex(x=>x.value===t),y=h.shiftKey?(e.length+U-1)%e.length:(U+1)%e.length;r(e[y].value)}else if(d5(h.key)){let U=eb().rtl,y=e.findIndex(x=>x.value===t);if(y!==-1){let x=e.length,w=y;switch(h.key){case(U?Q.ARROW_LEFT:Q.ARROW_RIGHT):w=(y+1)%x;break;case(U?Q.ARROW_RIGHT:Q.ARROW_LEFT):w=(x+y-1)%x;break;case Q.ARROW_DOWN:{w=(y+(s??1))%x;break}case Q.ARROW_UP:{w=(x+y-(s??1))%x;break}}r(e[w].value)}h.preventDefault()}else(h.key===Q.ESCAPE||h.key===Q.ENTER)&&(h.preventDefault(),i());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,f]=rr(BOe),c=Te.useMemo(()=>e.slice(0,s),[e,s]),d=Te.useMemo(()=>e.slice(s),[e,s]);T.useEffect(()=>{c.some(h=>h.value===t)||f(!0)},[t,c,f]);let u=h=>m.jsx("div",{className:"picker-content",children:h.map((g,U)=>m.jsxs("button",{type:"button",className:ze("picker-option",{active:t===g.value}),onClick:y=>{r(g.value)},title:`${g.text} ${g.keyBinding&&` ${g.keyBinding.toUpperCase()}`}`,"aria-label":g.text||"none","aria-keyshortcuts":g.keyBinding||void 0,ref:y=>{t===g.value&&setTimeout(()=>{y==null||y.focus()},0)},children:[g.icon,g.keyBinding&&m.jsx("span",{className:"picker-keybinding",children:g.keyBinding})]},g.text))});return m.jsx(OI,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:m.jsxs("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[u(c),d.length>0&&m.jsx(yM,{label:j("labels.more_options"),open:l,openTrigger:()=>{f(h=>!h)},className:"picker-collapsible",children:u(d)})]})})}function F$({value:e,label:t,options:n,onChange:r,group:i="",numberOfOptionsToAlwaysShow:s}){var f;let[o,a]=Te.useState(!1),l=Te.useRef(null);return m.jsx("div",{children:m.jsxs(ix,{open:o,onOpenChange:c=>a(c),children:[m.jsx(sx,{name:i,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(f=n.find(c=>c.value===e))==null?void 0:f.icon}),o&&m.jsx(FOe,{options:n,value:e,label:t,onChange:r,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}var Gte=Te.forwardRef(({className:e,placeholder:t,onChange:n},r)=>m.jsxs("div",{className:ze("QuickSearch__wrapper",e),children:[Zh,m.jsx("input",{ref:r,className:"QuickSearch__input",type:"text",placeholder:t,onChange:i=>n(i.target.value.trim().toLowerCase())})]})),Xte=({className:e,placeholder:t,children:n})=>{let r=!T.Children.count(n);return m.jsx("div",{className:ze("ScrollableList__wrapper",e),role:"menu",children:r?m.jsx("div",{className:"empty",children:t}):n})},Kte=({children:e,className:t="",style:n,title:r})=>m.jsxs("div",{className:`dropdown-menu-group ${t}`,style:n,children:[r&&m.jsx("p",{className:"dropdown-menu-group-title",children:r}),e]}),xM=Kte;Kte.displayName="DropdownMenuGroup";var Yte=Te.createContext({}),Zte=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),qte=(e,t)=>{let n=T.useContext(Yte);return I7(e,r=>{var s;let i=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||((s=n.onSelect)==null||s.call(n,i))})},$Oe=({textStyle:e,icon:t,shortcut:n,children:r})=>{let i=Wr();return m.jsxs(m.Fragment,{children:[t&&m.jsx("div",{className:"dropdown-menu-item__icon",children:t}),m.jsx("div",{style:e,className:"dropdown-menu-item__text",children:r}),n&&!i.editor.isMobile&&m.jsx("div",{className:"dropdown-menu-item__shortcut",children:n})]})},Qte=$Oe,WI=({icon:e,value:t,order:n,children:r,shortcut:i,className:s,hovered:o,selected:a,textStyle:l,onSelect:f,onClick:c,...d})=>{let u=qte(c,f),h=T.useRef(null);return T.useEffect(()=>{var g,U;o&&(n===0?(g=h.current)==null||g.scrollIntoView({block:"end"}):(U=h.current)==null||U.scrollIntoView({block:"nearest"}))},[o,n]),m.jsx("button",{...d,ref:h,value:t,onClick:u,className:Zte(s,a,o),title:d.title??d["aria-label"],children:m.jsx(Qte,{textStyle:l,icon:e,shortcut:i,children:r})})};WI.displayName="DropdownMenuItem";var b5={GREEN:"green",RED:"red",BLUE:"blue"},GI=({type:e=b5.BLUE,children:t})=>{let{theme:n}=e8(),r={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===It.LIGHT?"1.5px solid white":"none"};switch(e){case b5.GREEN:Object.assign(r,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case b5.RED:Object.assign(r,{backgroundColor:"pink",color:"darkred"});break;case b5.BLUE:default:Object.assign(r,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return m.jsx("div",{className:"DropDownMenuItemBadge",style:r,children:t})};GI.displayName="DropdownMenuItemBadge";WI.Badge=GI;var da=WI,zOe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:r,onClose:i,onSelect:s,onHover:o})=>{var a,l,f;if(!e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===Q.F)return(a=t.current)==null||a.focus(),!0;if(e.key===Q.ESCAPE)return i(),!0;if(e.key===Q.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===Q.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=r[0])!=null&&l.value&&o(r[0].value),!0;if(e.key===Q.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(f=r[r.length-1])!=null&&f.value&&o(r[r.length-1].value),!0},HOe=Te.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:r,onLeave:i,onOpen:s,onClose:o})=>{let{container:a}=Uc(),{fonts:l}=bc(),{showDeprecatedFonts:f}=Jb(),[c,d]=T.useState(""),u=T.useRef(null),h=T.useMemo(()=>Array.from(xf.registered.entries()).filter(([I,{metadata:R}])=>!R.serverSide&&!R.fallback).map(([I,{metadata:R,fontFaces:L}])=>{var O,$;let _={value:I,icon:R.icon??Y4,text:(($=(O=L[0])==null?void 0:O.fontFace)==null?void 0:$.family)??"Unknown"};return R.deprecated&&Object.assign(_,{deprecated:R.deprecated,badge:{type:b5.RED,placeholder:j("fontList.badge.old")}}),_}).sort((I,R)=>I.text.toLowerCase()>R.text.toLowerCase()?1:-1),[]),g=T.useMemo(()=>new Set(l.getSceneFamilies()),[e]),U=T.useMemo(()=>h.filter(I=>g.has(I.value)),[h,g]),y=T.useMemo(()=>h.filter(I=>!g.has(I.value)&&(f||!I.deprecated)),[h,g,f]),x=T.useMemo(()=>gve([...U,...y].filter(I=>{var R;return(R=I.text)==null?void 0:R.toLowerCase().includes(c)})),[U,y,c]),w=T.useMemo(()=>{var R;let I;return t?I=x.find(L=>L.value===t):e&&(I=x.find(L=>L.value===e)),!I&&c&&((R=x[0])!=null&&R.value?r(x[0].value):i()),I},[t,e,c,x,r,i]),E=T.useCallback(I=>{zOe({event:I,inputRef:u,hoveredFont:w,filteredFonts:x,onSelect:n,onHover:r,onClose:o})&&(I.preventDefault(),I.stopPropagation())},[w,x,n,r,o]);T.useEffect(()=>(s(),()=>{o()}),[]);let S=T.useMemo(()=>x.filter(I=>g.has(I.value)),[x,g]),M=T.useMemo(()=>x.filter(I=>!g.has(I.value)),[x,g]),A=(I,R)=>m.jsxs(da,{icon:I.icon,value:I.value,order:R,textStyle:{fontFamily:a6({fontFamily:I.value})},hovered:I.value===(w==null?void 0:w.value),selected:I.value===e,tabIndex:I.value===e?0:-1,onClick:L=>{n(Number(L.currentTarget.value))},onMouseMove:()=>{(w==null?void 0:w.value)!==I.value&&r(I.value)},children:[I.text,I.badge&&m.jsx(GI,{type:I.badge.type,children:I.badge.placeholder})]},I.value),C=[];return S.length&&C.push(m.jsx(xM,{title:j("fontList.sceneFonts"),children:S.map(A)},"group_1")),M.length&&C.push(m.jsx(xM,{title:j("fontList.availableFonts"),children:M.map((I,R)=>A(I,R+S.length))},"group_2")),m.jsxs(Wte,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:i,onKeyDown:E,children:[m.jsx(Gte,{ref:u,placeholder:j("quickSearch.placeholder"),onChange:l6(d,20)}),m.jsx(Xte,{className:"dropdown-menu fonts manual-hover",placeholder:j("fontList.empty"),children:C.length?C:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),VOe=({selectedFontFamily:e})=>{let t=T.useMemo(()=>!!(e&&!GOe(e)),[e]);return m.jsx(sx,{asChild:!0,children:m.jsx("div",{children:m.jsx(Fte,{standalone:!0,icon:ZZ,title:j("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},Jte=[{value:Fn.Excalifont,icon:z2,text:j("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:Fn.Nunito,icon:Y4,text:j("labels.normal"),testId:"font-family-normal"},{value:Fn["Comic Shanns"],icon:DC,text:j("labels.code"),testId:"font-family-code"}],WOe=new Set(Jte.map(e=>e.value)),GOe=e=>e?WOe.has(e):!1,XOe=Te.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:r,onHover:i,onLeave:s,onPopupChange:o})=>{let a=T.useMemo(()=>Jte,[]),l=T.useCallback(f=>{f&&r(f)},[r]);return m.jsxs("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[m.jsx(gc,{type:"button",options:a,value:t,onClick:l}),m.jsx($te,{}),m.jsxs(ix,{open:e,onOpenChange:o,children:[m.jsx(VOe,{selectedFontFamily:t}),e&&m.jsx(HOe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:i,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),KOe=({updateData:e,appState:t,elements:n,testId:r})=>{let i=Te.useRef(null),s=Te.useRef(null),o=bs(n,t,a=>a.opacity,!0,t.currentItemOpacity);return T.useEffect(()=>{if(i.current&&s.current){let a=i.current,l=s.current,f=a.offsetWidth,c=15,d=o/100*(f-c)+c/2;l.style.left=`${d}px`,a.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${o}%, var(--button-bg) ${o}%, var(--button-bg) 100%)`}},[o]),m.jsxs("label",{className:"control-label",children:[j("labels.opacity"),m.jsxs("div",{className:"range-wrapper",children:[m.jsx("input",{ref:i,type:"range",min:"0",max:"100",step:"10",onChange:a=>{e(+a.target.value)},value:o,className:"range-input","data-testid":r}),m.jsx("div",{className:"value-bubble",ref:s,children:o!==0?o:null}),m.jsx("div",{className:"zero-label",children:"0"})]})]})},ene=.1,gs=(e,t,n,r=!1)=>{let i=ct(wt(e,t,{includeBoundTextElement:r}));return e.map(s=>{var o;return i.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},bs=function(e,t,n,r,i){let s=t.editingTextElement,o=Un(e),a=null;return s&&(a=n(s)),a||(_r(o,t)?a=ONe(r===!0?o:o.filter(l=>r(l)),t,n)??(typeof i=="function"?i(!0):i):a=typeof i=="function"?i(!1):i),a},YOe=(e,t)=>An(t)||!t.autoResize?t:ye(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2},!1),XI=(e,t,n,r,i)=>{let s=new Set,o=gs(e,t,l=>{if(Oe(l)){let f=r(l);s.add(f);let c=yt(l,{fontSize:f});return ms(c,n.scene.getContainerElement(l),n.scene.getNonDeletedElementsMap()),c=YOe(l,c),c}return l},!0),a=ct(o);return wt(e,t,{includeBoundTextElement:!0}).forEach(l=>{Oe(l)&&zs(l,a)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:i??t.currentItemFontSize},captureUpdate:me.IMMEDIATELY}};_e({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:gs(e,t,r=>FC(r.type)?yt(r,{strokeColor:n.currentItemStrokeColor}):r,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?me.IMMEDIATELY:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{"aria-hidden":"true",children:j("labels.stroke")}),m.jsx(VI,{topPicks:yZ,palette:cxe,type:"elementStroke",label:j("labels.stroke"),color:bs(e,t,i=>i.strokeColor,!0,t.currentItemStrokeColor),onChange:i=>n({currentItemStrokeColor:i}),elements:e,appState:t,updateData:n})]})});_e({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:gs(e,t,r=>yt(r,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?me.IMMEDIATELY:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{"aria-hidden":"true",children:j("labels.background")}),m.jsx(VI,{topPicks:xZ,palette:fxe,type:"elementBackground",label:j("labels.background"),color:bs(e,t,i=>i.backgroundColor,!0,t.currentItemBackgroundColor),onChange:i=>n({currentItemBackgroundColor:i}),elements:e,appState:t,updateData:n})]})});_e({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,r)=>(vn("element","changeFillStyle",`${n} (${r.device.editor.isMobile?"mobile":"desktop"})`),{elements:gs(e,t,i=>yt(i,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=wt(e,t),i=r.length>0&&r.every(s=>s.fillStyle==="zigzag");return m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.fill")}),m.jsx(gc,{type:"button",options:[{value:"hachure",text:`${j(i?"labels.zigzag":"labels.hachure")} (${Ue("Alt-Click")})`,icon:i?bwe:Uwe,active:i?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:j("labels.crossHatch"),icon:ywe,testId:"fill-cross-hatch"},{value:"solid",text:j("labels.solid"),icon:xwe,testId:"fill-solid"}],value:bs(e,t,s=>s.fillStyle,s=>s.hasOwnProperty("fillStyle"),s=>s?null:t.currentItemFillStyle),onClick:(s,o)=>{let a=o.altKey&&s==="hachure"&&r.every(l=>l.fillStyle==="hachure")?"zigzag":s;n(a)}})]})}});_e({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:gs(e,t,r=>yt(r,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.strokeWidth")}),m.jsx(gc,{group:"stroke-width",options:[{value:FE.thin,text:j("labels.thin"),icon:rq,testId:"strokeWidth-thin"},{value:FE.bold,text:j("labels.bold"),icon:vwe,testId:"strokeWidth-bold"},{value:FE.extraBold,text:j("labels.extraBold"),icon:wwe,testId:"strokeWidth-extraBold"}],value:bs(e,t,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:t.currentItemStrokeWidth),onChange:r=>n(r)})]})});_e({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:gs(e,t,r=>yt(r,{seed:lc(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.sloppiness")}),m.jsx(gc,{group:"sloppiness",options:[{value:0,text:j("labels.architect"),icon:kwe},{value:1,text:j("labels.artist"),icon:Cwe},{value:2,text:j("labels.cartoonist"),icon:Mwe}],value:bs(e,t,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:t.currentItemRoughness),onChange:r=>n(r)})]})});_e({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:gs(e,t,r=>yt(r,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.strokeStyle")}),m.jsx(gc,{group:"strokeStyle",options:[{value:"solid",text:j("labels.strokeStyle_solid"),icon:rq},{value:"dashed",text:j("labels.strokeStyle_dashed"),icon:Ewe},{value:"dotted",text:j("labels.strokeStyle_dotted"),icon:Swe}],value:bs(e,t,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:t.currentItemStrokeStyle),onChange:r=>n(r)})]})});_e({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:gs(e,t,r=>yt(r,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(KOe,{updateData:n,elements:e,appState:t,testId:"opacity"})});_e({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,r)=>XI(e,t,r,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.fontSize")}),m.jsx(gc,{group:"font-size",options:[{value:16,text:j("labels.small"),icon:zwe,testId:"fontSize-small"},{value:20,text:j("labels.medium"),icon:Hwe,testId:"fontSize-medium"},{value:28,text:j("labels.large"),icon:Vwe,testId:"fontSize-large"},{value:36,text:j("labels.veryLarge"),icon:Wwe,testId:"fontSize-veryLarge"}],value:bs(e,t,i=>{if(Oe(i))return i.fontSize;let s=xt(i,r.scene.getNonDeletedElementsMap());return s?s.fontSize:null},i=>Oe(i)||xt(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:t.currentItemFontSize||Bf),onChange:i=>n(i)})]})});var $$=_e({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:P7,trackEvent:!1,perform:(e,t,n,r)=>XI(e,t,r,i=>Math.round(1/(1+ene)*i.fontSize)),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&(e.key===Q.CHEVRON_LEFT||e.key===Q.COMMA)}),z$=_e({name:"increaseFontSize",label:"labels.increaseFontSize",icon:P7,trackEvent:!1,perform:(e,t,n,r)=>XI(e,t,r,i=>Math.round(i.fontSize*(1+ene))),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&(e.key===Q.CHEVRON_RIGHT||e.key===Q.PERIOD)});_e({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,r)=>{var g;let{cachedElements:i,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:gs(e,t,U=>{let y=i==null?void 0:i.get(U.id);return y?yt(U,{...y}):U},!0),appState:{...t,...a},captureUpdate:me.NEVER};let{currentItemFontFamily:l,currentHoveredFontFamily:f}=n,c=me.EVENTUALLY,d,u=!1;if(l)d=l,c=me.IMMEDIATELY;else if(f){d=f,c=me.EVENTUALLY;let U=wt(e,t,{includeBoundTextElement:!0}).filter(y=>Oe(y));if(U.length>200)u=!0;else{let y=0,x=0;for(;y<U.length&&x<5e3;){let w=U[y];x+=(w==null?void 0:w.originalText.length)||0,y++}x>5e3&&(u=!0)}}let h={appState:{...t,...a},captureUpdate:c};if(d&&!u){let U=new Map,y=new Set,x=!1,w=Array.from(xf.loadedFontsCache.values()),E=(g=Object.entries(Fn).find(([A,C])=>C===d))==null?void 0:g[0];f&&E&&w.some(A=>A.startsWith(E))&&(x=!0),Object.assign(h,{elements:gs(e,t,A=>{if(Oe(A)&&(A.fontFamily!==d||l)){let C=yt(A,{fontFamily:d,lineHeight:qh(d)}),I=(i==null?void 0:i.get(A.containerId||""))||{},R=r.scene.getContainerElement(A);return o&&R&&I&&ye(R,{...I},!1),x||(y=new Set([...y,...Array.from(C.originalText)])),U.set(C,R),C}return A},!0)});let S=`10px ${a6({fontFamily:d})}`,M=Array.from(y.values()).join();if(x||window.document.fonts.check(S,M))for(let[A,C]of U)ms(A,C,r.scene.getNonDeletedElementsMap(),!1);else window.document.fonts.load(S,M).then(A=>{for(let[C,I]of U){let R=r.scene.getElement(C.id),L=I?r.scene.getElement(I.id):null;R&&ms(R,L,r.scene.getNonDeletedElementsMap(),!1)}r.fonts.onLoaded(A)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:r})=>{let i=T.useRef(new Map),s=T.useRef(null),[o,a]=T.useState({}),l=T.useRef(!0),f=T.useMemo(()=>{var d;let c=(u,h)=>bs(u,t,g=>{if(Oe(g))return g.fontFamily;let U=xt(g,h);return U?U.fontFamily:null},g=>Oe(g)||xt(g,h)!==null,g=>g?null:t.currentItemFontFamily||B0);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?c(Array.from(((d=i.current)==null?void 0:d.values())??[]),i.current):!o.openPopup&&t.openPopup!=="fontFamily"?c(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n.scene]);return T.useEffect(()=>{s.current=f},[f]),T.useEffect(()=>{Object.keys(o).length&&(r(o),a({}))},[o]),T.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.fontFamily")}),m.jsx(XOe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:f,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:c=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:c}),i.current.clear()},onHover:c=>{a({currentHoveredFontFamily:c,cachedElements:new Map(i.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0})},onPopupChange:c=>{if(c){i.current.clear();let{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){let u=n.scene.getElement(d.id);i.current.set(d.id,yt(u||d,{},!0))}else{let u=wt(e,t,{includeBoundTextElement:!0});for(let h of u)i.current.set(h.id,yt(h,{},!0))}a({openPopup:"fontFamily"})}else{let d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(i.current),resetAll:!0};l.current?r({...o,...d}):a(d),i.current.clear()}}})]})}});_e({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,r)=>({elements:gs(e,t,i=>{if(Oe(i)){let s=yt(i,{textAlign:n});return ms(s,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),s}return i},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>{let i=r.scene.getNonDeletedElementsMap();return m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.textAlign")}),m.jsx(gc,{group:"text-align",options:[{value:"left",text:j("labels.left"),icon:Xwe,testId:"align-left"},{value:"center",text:j("labels.center"),icon:Kwe,testId:"align-horizontal-center"},{value:"right",text:j("labels.right"),icon:Ywe,testId:"align-right"}],value:bs(e,t,s=>{if(Oe(s))return s.textAlign;let o=xt(s,i);return o?o.textAlign:null},s=>Oe(s)||xt(s,i)!==null,s=>s?null:t.currentItemTextAlign),onChange:s=>n(s)})]})}});_e({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:gs(e,t,i=>{if(Oe(i)){let s=yt(i,{verticalAlign:n});return ms(s,r.scene.getContainerElement(i),r.scene.getNonDeletedElementsMap()),s}return i},!0),appState:{...t},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx("fieldset",{children:m.jsx(gc,{group:"text-align",options:[{value:mo.TOP,text:j("labels.alignTop"),icon:m.jsx(Zwe,{theme:t.theme}),testId:"align-top"},{value:mo.MIDDLE,text:j("labels.centerVertically"),icon:m.jsx(Qwe,{theme:t.theme}),testId:"align-middle"},{value:mo.BOTTOM,text:j("labels.alignBottom"),icon:m.jsx(qwe,{theme:t.theme}),testId:"align-bottom"}],value:bs(e,t,i=>{if(Oe(i)&&i.containerId)return i.verticalAlign;let s=xt(i,r.scene.getNonDeletedElementsMap());return s?s.verticalAlign:null},i=>Oe(i)||xt(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:mo.MIDDLE),onChange:i=>n(i)})})});_e({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:gs(e,t,r=>Fe(r)?r:yt(r,{roundness:n==="round"?{type:N6(r.type)?Rr.ADAPTIVE_RADIUS:Rr.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=eJ(Un(e),t).some(i=>{var s;return((s=i.roundness)==null?void 0:s.type)===Rr.LEGACY});return m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.edges")}),m.jsx(gc,{group:"edges",options:[{value:"sharp",text:j("labels.sharp"),icon:Awe},{value:"round",text:j("labels.round"),icon:Twe}],value:bs(e,t,i=>r?null:i.roundness?"round":"sharp",i=>!Et(i)&&i.hasOwnProperty("roundness"),i=>i?null:t.currentItemRoundness),onChange:i=>n(i)})]})}});var H$=e=>[{value:null,text:j("labels.arrowhead_none"),keyBinding:"q",icon:Iwe},{value:"arrow",text:j("labels.arrowhead_arrow"),keyBinding:"w",icon:m.jsx(Nwe,{flip:e})},{value:"triangle",text:j("labels.arrowhead_triangle"),icon:m.jsx(Dwe,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:j("labels.arrowhead_triangle_outline"),icon:m.jsx(Lwe,{flip:e}),keyBinding:"r"},{value:"circle",text:j("labels.arrowhead_circle"),keyBinding:"a",icon:m.jsx(Rwe,{flip:e})},{value:"circle_outline",text:j("labels.arrowhead_circle_outline"),keyBinding:"s",icon:m.jsx(_we,{flip:e})},{value:"diamond",text:j("labels.arrowhead_diamond"),icon:m.jsx(Owe,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:j("labels.arrowhead_diamond_outline"),icon:m.jsx(jwe,{flip:e}),keyBinding:"f"},{value:"bar",text:j("labels.arrowhead_bar"),keyBinding:"z",icon:m.jsx(Pwe,{flip:e})},{value:"crowfoot_one",text:j("labels.arrowhead_crowfoot_one"),icon:m.jsx(Fwe,{flip:e}),keyBinding:"c"},{value:"crowfoot_many",text:j("labels.arrowhead_crowfoot_many"),icon:m.jsx(Bwe,{flip:e}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:j("labels.arrowhead_crowfoot_one_or_many"),icon:m.jsx($we,{flip:e}),keyBinding:"v"}];_e({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:gs(e,t,r=>{if(mt(r)){let{position:i,type:s}=n;if(i==="start")return yt(r,{startArrowhead:s});if(i==="end")return yt(r,{endArrowhead:s})}return r}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=eb().rtl;return m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.arrowheads")}),m.jsxs("div",{className:"iconSelectList buttonList",children:[m.jsx(F$,{label:"arrowhead_start",options:H$(!r),value:bs(e,t,i=>mt(i)&&Q4(i.type)?i.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:i=>n({position:"start",type:i}),numberOfOptionsToAlwaysShow:4}),m.jsx(F$,{label:"arrowhead_end",group:"arrowheads",options:H$(!!r),value:bs(e,t,i=>mt(i)&&Q4(i.type)?i.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:i=>n({position:"end",type:i}),numberOfOptionsToAlwaysShow:4})]})]})}});_e({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,r)=>{var a;let i=gs(e,t,l=>{if(!Et(l))return l;let f=yt(l,{roundness:n===ni.round?{type:Rr.PROPORTIONAL_RADIUS}:null,elbowed:n===ni.elbow,points:n===ni.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(Fe(f)){let c=r.scene.getNonDeletedElementsMap();r.dismissLinearEditor();let d=je.getPointAtIndexGlobalCoordinates(f,0,c),u=je.getPointAtIndexGlobalCoordinates(f,-1,c),h=!f.startBinding&&Ya(Xa(d),e,c,t.zoom,!1,!0),g=!f.endBinding&&Ya(Xa(u),e,c,t.zoom,!1,!0),U=h||f.startBinding&&c.get(f.startBinding.elementId),y=g||f.endBinding&&c.get(f.endBinding.elementId),x=h?V2(f,h,"start"):d,w=g?V2(f,g,"end"):u;h&&ac(f,h,"start",c),g&&ac(f,g,"end",c),ye(f,{points:[x,w].map(E=>P(E[0]-f.x,E[1]-f.y)),...U&&f.startBinding?{startBinding:{...f.startBinding,...t9(f,U,"start")}}:{},...y&&f.endBinding?{endBinding:{...f.endBinding,...t9(f,y,"end")}}:{}}),je.updateEditorMidPointsCache(f,c,r.state)}return f}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){let l=i.find(f=>f.id===o);l&&(s.selectedLinearElement=new je(l))}return{elements:i,appState:s,captureUpdate:me.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.arrowtypes")}),m.jsx(gc,{group:"arrowtypes",options:[{value:ni.sharp,text:j("labels.arrowtype_sharp"),icon:SEe,testId:"sharp-arrow"},{value:ni.round,text:j("labels.arrowtype_round"),icon:CEe,testId:"round-arrow"},{value:ni.elbow,text:j("labels.arrowtype_elbowed"),icon:kEe,testId:"elbow-arrow"}],value:bs(e,t,r=>Et(r)?r.elbowed?ni.elbow:r.roundness?ni.round:ni.sharp:null,r=>Et(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})]})});var Hu=({viewportX:e,viewportY:t,nextZoom:n},r)=>{let i=e-r.offsetLeft,s=t-r.offsetTop,o=r.zoom.value,a=r.scrollX+(i-i/o),l=r.scrollY+(s-s/o),f=-(i-i/n),c=-(s-s/n);return{scrollX:a+f,scrollY:l+c,zoom:{value:n}}},X5=()=>{let e=document.querySelector(".excalidraw-tooltip");if(e)return e;let t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},tne=(e,t,n="bottom")=>{let r=e.getBoundingClientRect(),i=window.innerWidth,s=window.innerHeight,o=5,a=t.left+t.width/2-r.width/2;a<0?a=o:a+r.width>=i&&(a=i-r.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+r.height>=s&&(l=t.top-r.height-o)):(l=t.top-r.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},ZOe=(e,t,n,r)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=r?"50ch":"10ch",t.style.maxWidth=r?"50ch":"15ch",t.textContent=n;let i=e.getBoundingClientRect();tne(t,i)},n1=({children:e,label:t,long:n=!1,style:r,disabled:i})=>(T.useEffect(()=>()=>X5().classList.remove("excalidraw-tooltip--visible"),[]),i?null:m.jsx("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>ZOe(s.currentTarget,X5(),t,n),onPointerLeave:()=>X5().classList.remove("excalidraw-tooltip--visible"),style:r,children:e}));_e({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?me.IMMEDIATELY:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:r})=>m.jsx(VI,{palette:null,topPicks:vZ,label:j("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:i=>n({viewBackgroundColor:i}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});var K5=_e({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:Yh,trackEvent:{category:"canvas"},predicate:(e,t,n,r)=>{var i;return!!r.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((i=t.openDialog)==null?void 0:i.name)!=="elementLinkSelector"},perform:(e,t,n,r)=>(r.imageCache.clear(),{elements:e.map(i=>yt(i,{isDeleted:!0})),appState:{...oc(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:me.IMMEDIATELY})}),V$=_e({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:UB,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Hu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:mf(t.zoom.value+M7)},t),userToFollow:null},captureUpdate:me.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(Ot,{type:"button",className:"zoom-in-button zoom-button",icon:UB,title:`${j("buttons.zoomIn")}  ${Ue("CtrlOrCmd++")}`,"aria-label":j("buttons.zoomIn"),disabled:t.zoom.value>=mT,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Ft.EQUAL||e.code===Ft.NUM_ADD)&&(e[Q.CTRL_OR_CMD]||e.shiftKey)}),W$=_e({name:"zoomOut",label:"buttons.zoomOut",icon:yB,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Hu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:mf(t.zoom.value-M7)},t),userToFollow:null},captureUpdate:me.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(Ot,{type:"button",className:"zoom-out-button zoom-button",icon:yB,title:`${j("buttons.zoomOut")}  ${Ue("CtrlOrCmd+-")}`,"aria-label":j("buttons.zoomOut"),disabled:t.zoom.value<=pT,onClick:()=>{e(null)}}),keyTest:e=>(e.code===Ft.MINUS||e.code===Ft.NUM_SUBTRACT)&&(e[Q.CTRL_OR_CMD]||e.shiftKey)}),G$=_e({name:"resetZoom",label:"buttons.resetZoom",icon:rwe,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>({appState:{...t,...Hu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:mf(1)},t),userToFollow:null},captureUpdate:me.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>m.jsx(n1,{label:j("buttons.resetZoom"),style:{height:"100%"},children:m.jsxs(Ot,{type:"button",className:"reset-zoom-button zoom-button",title:j("buttons.resetZoom"),"aria-label":j("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===Ft.ZERO||e.code===Ft.NUM_ZERO)&&(e[Q.CTRL_OR_CMD]||e.shiftKey)}),qOe=(e,t,n=1)=>{let[r,i,s,o]=e,a=s-r,l=t.width/a,f=o-i,c=t.height/f,d=Math.min(l,c)*At(n,.1,1);return Math.min(d,1)},QOe=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:r=!1,viewportZoomFactor:i=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{i=At(i,pT,mT);let[a,l,f,c]=e,d=(a+f)/2,u=(l+c)/2,h=(n==null?void 0:n.left)??0,g=(n==null?void 0:n.top)??0,U=(n==null?void 0:n.right)??0,y=(n==null?void 0:n.bottom)??0,x=t.width-h-U,w=t.height-g-y,E;if(r){let A=f-a,C=c-l;E=Math.min(x/A,w/C)*i}else E=qOe(e,{width:x,height:w},i);let S=mf(At(Gxe(E,M7,"floor"),s,o)),M=Qq({scenePoint:{x:d,y:u},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:S}});return{appState:{...t,scrollX:M.scrollX,scrollY:M.scrollY,zoom:{value:S}},captureUpdate:me.EVENTUALLY}},ux=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:o})=>{let a=tn(Un(t));return QOe({canvasOffsets:e,bounds:a,appState:n,fitToViewport:r,viewportZoomFactor:i,minZoom:s,maxZoom:o})};_e({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:NT,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return ux({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===Ft.TWO&&e.shiftKey&&!e.altKey&&!e[Q.CTRL_OR_CMD]});_e({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:NT,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return ux({targetElements:i.length?i:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:r.getEditorUIOffsets()})},keyTest:e=>e.code===Ft.THREE&&e.shiftKey&&!e.altKey&&!e[Q.CTRL_OR_CMD]});_e({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:NT,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,r)=>ux({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:r.getEditorUIOffsets()}),keyTest:e=>e.code===Ft.ONE&&e.shiftKey&&!e.altKey&&!e[Q.CTRL_OR_CMD]});var x9=_e({name:"toggleTheme",label:(e,t)=>t.theme===It.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===It.LIGHT?RC:_C,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===It.LIGHT?It.DARK:It.LIGHT)},captureUpdate:me.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===Ft.D,predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.toggleTheme});_e({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return Il(t)?n=Ur(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=Ur(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:me.IMMEDIATELY}},keyTest:e=>e.key===Q.E});var JOe=_e({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:sq,viewMode:!1,perform:(e,t,n,r)=>{let i;return o6(t)?i=Ur(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(i=Ur(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),on(r.interactiveCanvas,nn.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:i},captureUpdate:me.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[Q.CTRL_OR_CMD]&&e.key===Q.H}),ka=_e({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,r)=>{var u;let{interactiveCanvas:i,focusContainer:s,scene:o}=r,a=o.getNonDeletedElementsMap();if(t.editingLinearElement){let{elementId:h,startBindingElement:g,endBindingElement:U}=t.editingLinearElement,y=je.getElement(h,a);if(y)return Xl(y)&&B7(y,g,U,a,o),{elements:y.points.length<2||y6(y)?e.filter(x=>x.id!==y.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:me.IMMEDIATELY}}let l=e,f=t.pendingImageElementId&&o.getElement(t.pendingImageElementId);f&&ye(f,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&s();let c=t.multiElement?t.multiElement:((u=t.newElement)==null?void 0:u.type)==="freedraw"?t.newElement:null;if(c){if(c.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){let{points:g,lastCommittedPoint:U}=c;(!U||g[g.length-1]!==U)&&ye(c,{points:c.points.slice(0,-1)})}y6(c)&&(l=l.filter(g=>g.id!==c.id));let h=Cf(c.points,t.zoom.value);if((c.type==="line"||c.type==="freedraw")&&h){let g=c.points,U=g[0];ye(c,{points:g.map((y,x)=>x===g.length-1?P(U[0],U[1]):y)})}if(Xl(c)&&!h&&c.points.length>1){let[g,U]=je.getPointAtIndexGlobalCoordinates(c,-1,ct(e));zC(c,t,{x:g,y:U},a,e)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!c)&&Aa(i);let d;return t.activeTool.type==="eraser"?d=Ur(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=Ur(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&c?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:c&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[c.id]:!0}:t.selectedElementIds,selectedLinearElement:c&&mt(c)?new je(c):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:me.IMMEDIATELY}},keyTest:(e,t)=>e.key===Q.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===Q.ESCAPE||e.key===Q.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>m.jsx(Ot,{type:"button",icon:hwe,title:j("buttons.done"),"aria-label":j("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),eje=e=>{let{id:t}=Uc(),[n,r]=T.useState(e.value),i=o=>{e.ignoreFocus||hve(o.target);let a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===Q.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return m.jsxs("div",{className:"ProjectName",children:[m.jsx("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),m.jsx("input",{type:"text",className:"TextInput",onBlur:i,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>r(o.target.value)})]})},tje=e=>{let t=e.title||(e.value===It.DARK?j("buttons.lightMode"):j("buttons.darkMode"));return m.jsx(Ot,{type:"icon",icon:e.value===It.LIGHT?X$.MOON:X$.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===It.DARK?It.LIGHT:It.DARK),"data-testid":"toggle-dark-mode"})},X$={SUN:m.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:m.jsx("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:m.jsx("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},hx=(e,{selectedElementIds:t},n)=>{e=Un(e);let r=n&&_r(e,{selectedElementIds:t}),i=null,s=r?wt(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return r&&(s.length===1&&at(s[0])?(i=s[0],s=hI(e,i)):s.length>1&&(s=wt(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:i,exportedElements:yf(s)}},px=async(e,t,n,r,{exportBackground:i,exportPadding:s=T6,viewBackgroundColor:o,name:a=n.name||AZ,fileHandle:l=null,exportingFrame:f=null})=>{if(t.length===0)throw new Error(j("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){let d=YT(t,{exportBackground:i,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},r,{exportingFrame:f});if(e==="svg")return o9(d.then(u=>new Blob([u.outerHTML],{type:rt.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[s6.svg],fileHandle:l});if(e==="clipboard-svg"){let u=await d.then(h=>h.outerHTML);try{await Xb(u)}catch{throw new Error(j("errors.copyToSystemClipboardFailed"))}return}}let c=jQ(t,n,r,{exportBackground:i,viewBackgroundColor:o,exportPadding:s,exportingFrame:f});if(e==="png"){let d=Q2(c);return n.exportEmbedScene&&(d=d.then(u=>Ve(async()=>{const{encodePngMetadata:h}=await Promise.resolve().then(()=>Lre);return{encodePngMetadata:h}},void 0).then(({encodePngMetadata:h})=>h({blob:u,metadata:WT(t,n,r)})))),o9(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[s6.png],fileHandle:l})}else if(e==="clipboard")try{let d=Q2(c);await SNe(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(j("canvasError.canvasTooBig")):O2&&d.name==="TypeError"?new Error(`${j("alerts.couldNotCopyToClipboard")}

${j("hints.firefox_clipboard_write")}`):new Error(j("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},nje=async(e,t,n,r)=>{let{exportBackground:i,viewBackgroundColor:s,fileHandle:o}=t,a=cJ(o);if(!o||!oRe(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};let{exportedElements:l,exportingFrame:f}=hx(e,t,!1);return await px(a,l,t,n,{exportBackground:i,viewBackgroundColor:s,name:r,fileHandle:o,exportingFrame:f}),{fileHandle:o}},KI=({children:e,checked:t,onChange:n,className:r})=>m.jsxs("div",{className:ze("Checkbox",r,{"is-checked":t}),onClick:i=>{n(!t,i),i.currentTarget.querySelector(".Checkbox-box").focus()},children:[m.jsx("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:lwe}),m.jsx("div",{className:"Checkbox-label",children:e})]}),rje=_e({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:r,app:i})=>m.jsx(eje,{label:j("labels.fileTitle"),value:i.getName(),onChange:s=>t(s),ignoreFocus:(r==null?void 0:r.ignoreFocus)??!1})}),ije=_e({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=Un(e),i=_r(r,t)?wt(r,t):r;return m.jsx(m.Fragment,{children:bT.map(s=>{let[o,a]=$Ie(i,T6,s),l=`${j("imageExportDialog.label.scale")} ${s}x (${o}x${a})`;return m.jsx(Ot,{size:"small",type:"radio",icon:`${s}x`,name:"export-canvas-scale",title:l,"aria-label":l,id:"export-canvas-scale",checked:s===t.exportScale,onChange:()=>n(s)},s)})})}}),sje=_e({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx(KI,{checked:e.exportBackground,onChange:n=>t(n),children:j("imageExportDialog.label.withBackground")})}),nne=_e({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsxs(KI,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[j("imageExportDialog.label.embedScene"),m.jsx(n1,{label:j("imageExportDialog.tooltip.embedScene"),long:!0,children:m.jsx("div",{className:"excalidraw-tooltip-icon",children:pwe})})]})}),K$=_e({name:"saveToActiveFile",label:"buttons.save",icon:_7,trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{let i=!!t.fileHandle;try{let{fileHandle:s}=vI(t.fileHandle)?await nje(e,t,r.files,r.getName()):await wQ(e,t,r.files,r.getName());return{captureUpdate:me.EVENTUALLY,appState:{...t,fileHandle:s,toast:i?{message:s!=null&&s.name?j("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):j("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:me.EVENTUALLY}}},keyTest:e=>e.key===Q.S&&e[Q.CTRL_OR_CMD]&&!e.shiftKey}),rne=_e({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:_7,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,r)=>{try{let{fileHandle:i}=await wQ(e,{...t,fileHandle:null},r.files,r.getName());return{captureUpdate:me.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:i,toast:{message:j("toast.fileSaved")}}}}catch(i){return(i==null?void 0:i.name)!=="AbortError"?console.error(i):console.warn(i),{captureUpdate:me.EVENTUALLY}}},keyTest:e=>e.key===Q.S&&e.shiftKey&&e[Q.CTRL_OR_CMD],PanelComponent:({updateData:e})=>m.jsx(Ot,{type:"button",icon:fwe,title:j("buttons.saveAs"),"aria-label":j("buttons.saveAs"),showAriaLabel:Wr().editor.isMobile,hidden:!c1,onClick:()=>e(null),"data-testid":"save-as-button"})}),vM=_e({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,r)=>!!r.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,r)=>{try{let{elements:i,appState:s,files:o}=await NIe(t,e);return{elements:i,appState:s,files:o,captureUpdate:me.IMMEDIATELY}}catch(i){return(i==null?void 0:i.name)==="AbortError"?(console.warn(i),!1):{elements:e,appState:{...t,errorMessage:i.message},files:r.files,captureUpdate:me.EVENTUALLY}}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.O}),oje=_e({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:m.jsx(tje,{value:e.exportWithDarkMode?It.DARK:It.LIGHT,onChange:n=>{t(n===It.DARK)},title:j("imageExportDialog.label.darkMode")})})}),ine="{}",aje=_e({name:"copyStyles",label:"labels.copyStyles",icon:dq,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=[],s=e.find(o=>t.selectedElementIds[o.id]);if(i.push(s),s&&ca(s)){let o=xt(s,r.scene.getNonDeletedElementsMap());i.push(o)}return s&&(ine=JSON.stringify(i)),{appState:{...t,toast:{message:j("toast.copyStyles")}},captureUpdate:me.EVENTUALLY}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.C}),lje=_e({name:"pasteStyles",label:"labels.pasteStyles",icon:dq,trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=JSON.parse(ine),s=i[0],o=i[1];if(!VZ(s))return{elements:e,captureUpdate:me.EVENTUALLY};let a=wt(e,t,{includeBoundTextElement:!0}),l=a.map(f=>f.id);return{elements:e.map(f=>{if(l.includes(f.id)){let c=s;if(Oe(f)&&f.containerId&&(c=o),!c)return f;let d=yt(f,{backgroundColor:c==null?void 0:c.backgroundColor,strokeWidth:c==null?void 0:c.strokeWidth,strokeColor:c==null?void 0:c.strokeColor,strokeStyle:c==null?void 0:c.strokeStyle,fillStyle:c==null?void 0:c.fillStyle,opacity:c==null?void 0:c.opacity,roughness:c==null?void 0:c.roughness,roundness:c.roundness?Sve(c.roundness.type,f)?c.roundness:kve(f):null});if(Oe(d)){let u=c.fontSize||Bf,h=c.fontFamily||B0;d=yt(d,{fontSize:u,fontFamily:h,textAlign:c.textAlign||Bb,lineHeight:c.lineHeight||qh(h)});let g=null;d.containerId&&(g=a.find(U=>Oe(d)&&U.id===d.containerId)||null),ms(d,g,r.scene.getNonDeletedElementsMap())}return d.type==="arrow"&&Et(c)&&(d=yt(d,{startArrowhead:c.startArrowhead,endArrowhead:c.endArrowhead})),at(f)&&(d=yt(d,{roundness:null,backgroundColor:"transparent"})),d}return f}),captureUpdate:me.IMMEDIATELY}},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.V});_e({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:me.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>m.jsx(Ot,{type:"button",icon:qZ,"aria-label":j("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});_e({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:me.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Ot,{visible:xI(t,Un(e)),type:"button",icon:dwe,"aria-label":j("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});var YI=_e({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:swe,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:r})=>{var i,s;return((i=t.openDialog)==null?void 0:i.name)==="help"&&r(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"}},captureUpdate:me.EVENTUALLY}},keyTest:e=>e.key===Q.QUESTION_MARK}),cje=e=>{if(e.length>=2){let t=e[0].groupIds;for(let n of t)if(e.reduce((r,i)=>r&&X2(i,n),!0))return!0}return!1},Y$=(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return r.length>=2&&!cje(r)&&!QQ(r)},fje=_e({name:"group",label:"labels.group",icon:e=>m.jsx(_B,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=uI(r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(i.length<2)return{appState:t,elements:e,captureUpdate:me.EVENTUALLY};let s=Eh(t);if(s.length===1){let U=s[0],y=new Set(Cn(e,U).map(w=>w.id)),x=new Set(i.map(w=>w.id));if(new Set([...Array.from(y),...Array.from(x)]).size===y.size)return{appState:t,elements:e,captureUpdate:me.EVENTUALLY}}let o=[...e];new Set(i.map(U=>U.frameId)).size>1&&_Ne(i).forEach((U,y)=>{Y7(U,r.scene.getNonDeletedElementsMap())});let a=fa(),l=ct(i);o=o.map(U=>l.get(U.id)?yt(U,{groupIds:OTe(U.groupIds,a,t.editingGroupId)}):U);let f=Cn(o,a),c=f[f.length-1],d=o.lastIndexOf(c),u=o.slice(d+1),h=o.slice(0,d).filter(U=>!X2(U,a)),g=fc([...h,...f,...u],ct(f));return{appState:{...t,...eQ(a,{...t,selectedGroupIds:{}},Un(o))},elements:g,captureUpdate:me.IMMEDIATELY}},predicate:(e,t,n,r)=>Y$(e,t,r),keyTest:e=>!e.shiftKey&&e[Q.CTRL_OR_CMD]&&e.key===Q.G,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!Y$(e,t,r),type:"button",icon:m.jsx(_B,{theme:t.theme}),onClick:()=>n(null),title:`${j("labels.group")}  ${Ue("CtrlOrCmd+G")}`,"aria-label":j("labels.group"),visible:_r(Un(e),t)})}),dje=_e({name:"ungroup",label:"labels.ungroup",icon:e=>m.jsx(PB,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=Eh(t),s=ct(e);if(i.length===0)return{appState:t,elements:e,captureUpdate:me.EVENTUALLY};let o=[...e],a=[];o=o.map(d=>{An(d)&&a.push(d.id);let u=jTe(d.groupIds,t.selectedGroupIds);return u.length===d.groupIds.length?d:yt(d,{groupIds:u})});let l=is(t,Un(o),t,null),f=r.scene.getSelectedElements(t),c=new Set(f.filter(d=>d.frameId).map(d=>d.frameId));return dI(e).filter(d=>c.has(d.id)).forEach(d=>{d&&(o=ZQ(o,o3(o,d,t,s),d,r))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((d,[u,h])=>(h&&!a.includes(u)&&(d[u]=!0),d),{}),{appState:{...t,...l},elements:o,captureUpdate:me.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[Q.CTRL_OR_CMD]&&e.key===Q.G.toUpperCase(),predicate:(e,t)=>Eh(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>m.jsx(Ot,{type:"button",hidden:Eh(t).length===0,icon:m.jsx(PB,{theme:t.theme}),onClick:()=>n(null),title:`${j("labels.ungroup")}  ${Ue("CtrlOrCmd+Shift+G")}`,"aria-label":j("labels.ungroup"),visible:_r(Un(e),t)})}),sne=(e,t,n,r,i,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadraticCurveTo(t+r,n+i,t+r-s,n+i),e.lineTo(t+s,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function uje(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)-t+r}return t}var mx=(e,t)=>`hsl(${Math.abs(uje((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,hje=e=>{var n;let t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},pje=({context:e,renderConfig:t,appState:n,normalizedWidth:r,normalizedHeight:i})=>{for(let[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o,f=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;let c=11,d=14,u=a<0||a>r-c||l<0||l>i-d;a=Math.max(a,0),a=Math.min(a,r-c),l=Math.max(l,0),l=Math.min(l,i-d);let h=mx(s,f);e.save(),e.strokeStyle=h,e.fillStyle=h;let g=t.remotePointerUserStates.get(s),U=u||g==="idle"||g==="away";U&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());let y=n.theme===It.DARK?"#2f6330":kxe,x=f==null?void 0:f.isSpeaking;x&&(e.fillStyle=y,e.strokeStyle=y,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=JU,e.strokeStyle=JU,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),U?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());let w=t.remotePointerUsernames.get(s)||"";if(!u&&w){e.font="600 12px sans-serif";let E=(x?a+0:a)+c/2,S=(x?l+0:l)+d+2,M=5,A=3,C=e.measureText(w),I=C.actualBoundingBoxDescent+C.actualBoundingBoxAscent,R=Math.max(I,12),L=E-1,_=S-1,O=C.width+2+M*2+2,$=R+2+A*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(L,_,O,$,8),e.fillStyle=h,e.fill(),e.strokeStyle=JU,e.stroke(),x&&(e.beginPath(),e.roundRect(L-2,_-2,O+4,$+4,8),e.strokeStyle=y,e.stroke())):sne(e,L,_,O,$,8,JU),e.fillStyle=Sxe,e.fillText(w,E+M+1,S+A+C.actualBoundingBoxAscent+Math.floor((R-I)/2)+2),x){e.fillStyle=y;let B=8,F=8,z=5;e.fillRect(L+O+F,_+($/2-B/2),2,B),e.fillRect(L+O+F+z,_+($/2-B*2/2),2,B*2),e.fillRect(L+O+F+z*2,_+($/2-B/2),2,B)}}e.restore(),e.closePath()}},Z$=({color:e,onClick:t,name:n,src:r,className:i})=>{let s=hje(n),[o,a]=T.useState(!1),l=!o&&r,f=l?void 0:{background:e};return m.jsx("div",{className:ze("Avatar",i),style:f,onClick:t,children:l?m.jsx("img",{className:"Avatar-img",src:r,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};_e({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var r;return!n.socketId||((r=t.userToFollow)==null?void 0:r.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:me.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:me.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{let{socketId:r,collaborator:i,withName:s,isBeingFollowed:o}=t,a=mx(r,i),l=ze({"is-followed":o,"is-current-user":i.isCurrentUser===!0,"is-speaking":i.isSpeaking,"is-in-call":i.isInCall,"is-muted":i.isMuted}),f=i.isInCall?i.isSpeaking?m.jsxs("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:j("userList.hint.isSpeaking"),children:[m.jsx("div",{}),m.jsx("div",{}),m.jsx("div",{})]}):i.isMuted?m.jsx("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:j("userList.hint.micMuted"),children:dEe}):m.jsx("div",{title:j("userList.hint.inCall"),children:fEe}):null;return s?m.jsxs("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(i),children:[m.jsx(Z$,{color:a,onClick:()=>{},name:i.username||"",src:i.avatarUrl,className:l}),m.jsx("div",{className:"UserList__collaborator-name",children:i.username}),m.jsxs("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&m.jsx("div",{className:"UserList__collaborator-status-icon-is-followed",title:j("userList.hint.followStatus"),children:IT}),f]})]}):m.jsxs("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[m.jsx(Z$,{color:a,onClick:()=>{e(i)},name:i.username||"",src:i.avatarUrl,className:l}),f&&m.jsx("div",{className:"UserList__collaborator-status-icon",children:f})]})}});var mje=_e({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(let s of MZ)if(i.some(o=>o.type===s))return{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:j(`errors.libraryElementTypeError.${s}`)}};return r.library.getLatestLibrary().then(s=>r.library.setLibrary([{id:fa(),status:"unpublished",elements:i.map(d1),created:Date.now()},...s])).then(()=>({captureUpdate:me.EVENTUALLY,appState:{...t,toast:{message:j("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),gje=(e,t,n,r)=>{let i=H7(e,t),s=el(e);return i.flatMap(o=>{let a=bje(o,s,n);return o.map(l=>{let f=ye(l,{x:l.x+a.x,y:l.y+a.y});return zs(l,r.getNonDeletedElementsMap(),{simultaneouslyUpdated:o}),f})})},bje=(e,t,{axis:n,position:r})=>{let i=el(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return r==="start"?{...a,[n]:t[s]-i[s]}:r==="end"?{...a,[n]:t[o]-i[o]}:{...a,[n]:(t[s]+t[o])/2-(i[s]+i[o])/2}},xo=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>at(r))},O6=(e,t,n,r)=>{let i=n.scene.getSelectedElements(t),s=ct(e),o=gje(i,s,r,n.scene),a=ct(o);return U6(e.map(l=>a.get(l.id)||l),t,n)};_e({name:"alignTop",label:"labels.alignTop",icon:MB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>xo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"start",axis:"y"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key===Q.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!xo(t,r),type:"button",icon:MB,onClick:()=>n(null),title:`${j("labels.alignTop")}  ${Ue("CtrlOrCmd+Shift+Up")}`,"aria-label":j("labels.alignTop"),visible:_r(Un(e),t)})});_e({name:"alignBottom",label:"labels.alignBottom",icon:AB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>xo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"end",axis:"y"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key===Q.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!xo(t,r),type:"button",icon:AB,onClick:()=>n(null),title:`${j("labels.alignBottom")}  ${Ue("CtrlOrCmd+Shift+Down")}`,"aria-label":j("labels.alignBottom"),visible:_r(Un(e),t)})});_e({name:"alignLeft",label:"labels.alignLeft",icon:TB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>xo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"start",axis:"x"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key===Q.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!xo(t,r),type:"button",icon:TB,onClick:()=>n(null),title:`${j("labels.alignLeft")}  ${Ue("CtrlOrCmd+Shift+Left")}`,"aria-label":j("labels.alignLeft"),visible:_r(Un(e),t)})});_e({name:"alignRight",label:"labels.alignRight",icon:IB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>xo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"end",axis:"x"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.shiftKey&&e.key===Q.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!xo(t,r),type:"button",icon:IB,onClick:()=>n(null),title:`${j("labels.alignRight")}  ${Ue("CtrlOrCmd+Shift+Right")}`,"aria-label":j("labels.alignRight"),visible:_r(Un(e),t)})});_e({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:NB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>xo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"center",axis:"y"}),captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!xo(t,r),type:"button",icon:NB,onClick:()=>n(null),title:j("labels.centerVertically"),"aria-label":j("labels.centerVertically"),visible:_r(Un(e),t)})});_e({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:RB,trackEvent:{category:"element"},predicate:(e,t,n,r)=>xo(t,r),perform:(e,t,n,r)=>({appState:t,elements:O6(e,t,r,{position:"center",axis:"x"}),captureUpdate:me.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!xo(t,r),type:"button",icon:RB,onClick:()=>n(null),title:j("labels.centerHorizontally"),"aria-label":j("labels.centerHorizontally"),visible:_r(Un(e),t)})});var Uje=(e,t,n)=>{let[r,i,s,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=el(e),l=H7(e,t).map(u=>[u,el(u)]).sort((u,h)=>u[1][i]-h[1][i]),f=0;for(let u of l)f+=u[1][o];let c=(a[o]-f)/(l.length-1);if(c<0){let u=l.findIndex(y=>y[1][r]===a[r]),h=l.findIndex(y=>y[1][s]===a[s]),g=(l[h][1][i]-l[u][1][i])/(l.length-1),U=l[u][1][i];return l.flatMap(([y,x],w)=>{let E={x:0,y:0};return w!==u&&w!==h&&(U+=g,E[n.axis]=U-x[i]),y.map(S=>yt(S,{x:S.x+E.x,y:S.y+E.y}))})}let d=a[r];return l.flatMap(([u,h])=>{let g={x:0,y:0};return g[n.axis]=d-h[r],d+=c,d+=h[o],u.map(U=>yt(U,{x:U.x+g.x,y:U.y+g.y}))})},one=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(r=>at(r))},ane=(e,t,n,r)=>{let i=n.scene.getSelectedElements(t),s=Uje(i,n.scene.getNonDeletedElementsMap(),r),o=ct(s);return U6(e.map(a=>o.get(a.id)||a),t,n)};_e({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:ane(e,t,r,{space:"between",axis:"x"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.H,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!one(t,r),type:"button",icon:mwe,onClick:()=>n(null),title:`${j("labels.distributeHorizontally")}  ${Ue("Alt+H")}`,"aria-label":j("labels.distributeHorizontally"),visible:_r(Un(e),t)})});_e({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,r)=>({appState:t,elements:ane(e,t,r,{space:"between",axis:"y"}),captureUpdate:me.IMMEDIATELY}),keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.V,PanelComponent:({elements:e,appState:t,updateData:n,app:r})=>m.jsx(Ot,{hidden:!one(t,r),type:"button",icon:gwe,onClick:()=>n(null),title:`${j("labels.distributeVertically")}  ${Ue("Alt+V")}`,"aria-label":j("labels.distributeVertically"),visible:_r(Un(e),t)})});var yje=_e({name:"flipHorizontal",label:"labels.flipHorizontal",icon:mEe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:U6(lne(e,r.scene.getNonDeletedElementsMap(),t,"horizontal",r),t,r),appState:t,captureUpdate:me.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Ft.H}),xje=_e({name:"flipVertical",label:"labels.flipVertical",icon:pEe,trackEvent:{category:"element"},perform:(e,t,n,r)=>({elements:U6(lne(e,r.scene.getNonDeletedElementsMap(),t,"vertical",r),t,r),appState:t,captureUpdate:me.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===Ft.V&&!e[Q.CTRL_OR_CMD]}),lne=(e,t,n,r,i)=>{let s=wt(Un(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=vje(s,t,n,r,i),a=ct(o);return e.map(l=>a.get(l.id)||l)},vje=(e,t,n,r,i)=>{if(e.every(h=>Et(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{let g=h;return yt(g,{startArrowhead:g.endArrowhead,endArrowhead:g.startArrowhead})});let{midX:s,midY:o}=el(e);oJ(e,t,"nw",i.scene,new Map(Array.from(t.values()).map(h=>[h.id,d1(h)])),{flipByX:r==="horizontal",flipByY:r==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),e9(e.filter(mt),t,i.scene.getNonDeletedElements(),i.scene,$u(n),[],n.zoom);let{elbowArrows:a,otherElements:l}=e.reduce((h,g)=>Fe(g)?{...h,elbowArrows:h.elbowArrows.concat(g)}:{...h,otherElements:h.otherElements.concat(g)},{elbowArrows:[],otherElements:[]}),{midX:f,midY:c}=el(e),[d,u]=[s-f,o-c];return l.forEach(h=>ye(h,{x:h.x+d,y:h.y+u})),a.forEach(h=>ye(h,{x:h.x+d,y:h.y+u})),e},p3=_e({name:"copy",label:"labels.copy",icon:NC,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await yNe(i,r.files,n)}catch(s){return{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:me.EVENTUALLY}},keyTest:void 0}),q$=_e({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i;try{i=await wNe()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),O2?{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:j("hints.firefox_clipboard_write")}}:{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:j("errors.asyncPasteFailedOnRead")}})}try{r.pasteFromClipboard(bNe({types:i}))}catch(s){return console.error(s),{captureUpdate:me.EVENTUALLY,appState:{...t,errorMessage:j("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:me.EVENTUALLY}},keyTest:void 0}),Q$=_e({name:"cut",label:"labels.cut",icon:eEe,trackEvent:{category:"element"},perform:(e,t,n,r)=>(p3.perform(e,t,n,r),Pte.perform(e,t,null,r)),keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.X}),J$=_e({name:"copyAsSvg",label:"labels.copyAsSvg",icon:gEe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:me.EVENTUALLY};let{exportedElements:i,exportingFrame:s}=hx(e,t,!0);try{await px("clipboard-svg",i,t,r.files,{...t,exportingFrame:s,name:r.getName()});let o=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:j("toast.copyToClipboardAsSvg",{exportSelection:o.length?j("toast.selection"):j("toast.canvas"),exportColorScheme:t.exportWithDarkMode?j("buttons.darkMode"):j("buttons.lightMode")})}},captureUpdate:me.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:me.EVENTUALLY}}},predicate:e=>oI&&e.length>0,keywords:["svg","clipboard","copy"]}),ez=_e({name:"copyAsPng",label:"labels.copyAsPng",icon:bEe,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{if(!r.canvas)return{captureUpdate:me.EVENTUALLY};let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=hx(e,t,!0);try{return await px("clipboard",s,t,r.files,{...t,exportingFrame:o,name:r.getName()}),{appState:{...t,toast:{message:j("toast.copyToClipboardAsPng",{exportSelection:i.length?j("toast.selection"):j("toast.canvas"),exportColorScheme:t.exportWithDarkMode?j("buttons.darkMode"):j("buttons.lightMode")})}},captureUpdate:me.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:me.EVENTUALLY}}},predicate:e=>aI&&e.length>0,keyTest:e=>e.code===Ft.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),tz=_e({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{Xb(iIe(i))}catch{throw new Error(j("errors.copyToSystemClipboardFailed"))}return{captureUpdate:me.EVENTUALLY}},predicate:(e,t,n,r)=>oI&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(Oe),keywords:["text","clipboard","copy"]}),nz=_e({name:"gridMode",icon:wEe,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:me.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[Q.CTRL_OR_CMD]&&e.code===Ft.QUOTE}),wM=_e({name:"zenMode",label:"buttons.zenMode",icon:yEe,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:me.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.Z}),wje=_e({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:UEe,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:me.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.S}),EM=_e({name:"stats",label:"stats.fullTitle",icon:hEe,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:me.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.SLASH}),Eje=_e({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>r.scene.getSelectedElements(t).some(i=>ca(i)),perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=r.scene.getNonDeletedElementsMap();return i.forEach(o=>{var l;let a=xt(o,s);if(a){let{width:f,height:c}=Xi(a.originalText,ln(a),a.lineHeight),d=qTe(o.id);oQ(o.id);let{x:u,y:h}=W7(o,a,s);ye(a,{containerId:null,width:f,height:c,text:a.originalText,x:u,y:h}),ye(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(g=>g.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:me.IMMEDIATELY}}}),Sje=_e({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);if(i.length===2){let s=Oe(i[0])||Oe(i[1]),o;if(wh(i[0])?o=i[0]:wh(i[1])&&(o=i[1]),s&&o&&xt(o,r.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s,o;Oe(i[0])&&wh(i[1])?(s=i[0],o=i[1]):(s=i[1],o=i[0]),ye(s,{containerId:o.id,verticalAlign:mo.MIDDLE,textAlign:B2.CENTER,autoResize:!0}),ye(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});let a=o.height;return ms(s,o,r.scene.getNonDeletedElementsMap()),n9(o.id,a),{elements:kje(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:me.IMMEDIATELY}}}),kje=(e,t,n)=>{let r=e.slice(),i=r.findIndex(o=>o.id===n.id);r.splice(i,1);let s=r.findIndex(o=>o.id===t.id);return r.splice(s+1,0,n),fc(r,ct([t,n])),r},Cje=(e,t,n)=>{let r=e.slice(),i=r.findIndex(o=>o.id===t.id);r.splice(i,1);let s=r.findIndex(o=>o.id===n.id);return r.splice(s,0,t),fc(r,ct([t,n])),r},Mje=_e({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t),s=i.every(o=>Oe(o));return i.length>0&&s},perform:(e,t,n,r)=>{var a;let i=r.scene.getSelectedElements(t),s=e.slice(),o={};for(let l of i)if(Oe(l)){let f=cc({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:N6("rectangle")?Rr.ADAPTIVE_RADIUS:Rr.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-Nr,y:l.y-Nr,width:Jh(l.width,"rectangle"),height:Jh(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){let c=l.boundElements.filter(d=>d.type==="arrow").map(d=>d.id);s.filter(d=>c.includes(d.id)).forEach(d=>{let u=d.startBinding,h=d.endBinding;(u==null?void 0:u.elementId)===l.id&&(u={...u,elementId:f.id}),(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:f.id}),(u||h)&&ye(d,{startBinding:u,endBinding:h},!1)})}ye(l,{containerId:f.id,verticalAlign:mo.MIDDLE,boundElements:null,textAlign:B2.CENTER,autoResize:!0},!1),ms(l,f,r.scene.getNonDeletedElementsMap()),s=Cje([...s,f],f,l),o[f.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:me.IMMEDIATELY}}}),ZI=380,Aje=42,SM=5,cne=85,Tje=500,kM=!1,my=new Map,Ije=({element:e,elementsMap:t,setAppState:n,onLinkOpen:r,setToast:i,updateEmbedValidationStatus:s})=>{let o=e8(),a=Jb(),l=Wr(),f=e.link||"",[c,d]=T.useState(f),u=T.useRef(null),h=o.showHyperlinkPopup==="editor",g=T.useCallback(()=>{var S;if(!u.current)return;let E=go(u.current.value)||null;if(!e.link&&E&&vn("hyperlink","create"),Rs(e)){if(((S=o.activeEmbeddable)==null?void 0:S.element)===e&&n({activeEmbeddable:null}),!E){ye(e,{link:null}),s(e,!1);return}if(!i3(E,a.validateEmbeddable))E&&i({message:j("toast.unableToEmbed"),closable:!0}),e.link&&my.set(e.id,e.link),ye(e,{link:E}),s(e,!1);else{let{width:M,height:A}=e,C=Ap(E);(C==null?void 0:C.error)instanceof URIError&&i({message:j("toast.unrecognizedLinkFormat"),closable:!0});let I=C?C.intrinsicSize.w/C.intrinsicSize.h:1,R=my.get(e.id)!==e.link;ye(e,{...R?{width:(C==null?void 0:C.type)==="video"?M>A?M:A*I:M,height:(C==null?void 0:C.type)==="video"&&M>A?M/I:A}:{},link:E}),s(e,!0),my.has(e.id)&&my.delete(e.id)}}else ye(e,{link:E})},[e,i,a.validateEmbeddable,o.activeEmbeddable,n,s]);T.useLayoutEffect(()=>()=>{g()},[g]),T.useEffect(()=>{h&&(u!=null&&u.current)&&!(l.viewport.isMobile||l.isTouchScreen)&&u.current.select()},[h,l.viewport.isMobile,l.isTouchScreen]),T.useEffect(()=>{let E=null,S=M=>{h||(E&&clearTimeout(E),_je(e,t,o,P(M.clientX,M.clientY))&&(E=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},Tje)))};return window.addEventListener("pointermove",S,!1),()=>{window.removeEventListener("pointermove",S,!1),E&&clearTimeout(E)}},[o,e,h,n,t]);let U=T.useCallback(()=>{vn("hyperlink","delete"),ye(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e]),y=()=>{vn("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x,y:w}=fne(e,o,t);return o.contextMenu||o.selectedElementsAreBeingDragged||o.resizingElement||o.isRotating||o.openMenu||o.viewModeEnabled?null:m.jsxs("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${w}px`,left:`${x}px`,width:ZI,padding:SM},children:[h?m.jsx("input",{className:ze("excalidraw-hyperlinkContainer-input"),placeholder:j("labels.link.hint"),ref:u,value:c,onChange:E=>d(E.target.value),autoFocus:!0,onKeyDown:E=>{E.stopPropagation(),E[Q.CTRL_OR_CMD]&&E.key===Q.K&&E.preventDefault(),(E.key===Q.ENTER||E.key===Q.ESCAPE)&&(g(),n({showHyperlinkPopup:"info"}))}}):e.link?m.jsx("a",{href:go(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:lQ(e.link)?"_self":"_blank",onClick:E=>{if(e.link&&r){let S=BZ("excalidraw-link",E.nativeEvent);r({...e,link:go(e.link)},S),S.defaultPrevented&&E.preventDefault()}},rel:"noopener noreferrer",children:e.link}):m.jsx("div",{className:"excalidraw-hyperlinkContainer-link",children:j("labels.link.empty")}),m.jsxs("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!h&&m.jsx(Ot,{type:"button",title:j("buttons.edit"),"aria-label":j("buttons.edit"),label:j("buttons.edit"),onClick:y,className:"excalidraw-hyperlinkContainer--edit",icon:z2}),m.jsx(Ot,{type:"button",title:j("labels.linkToElement"),"aria-label":j("labels.linkToElement"),label:j("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:hq}),f&&!Rs(e)&&m.jsx(Ot,{type:"button",title:j("buttons.remove"),"aria-label":j("buttons.remove"),label:j("buttons.remove"),onClick:U,className:"excalidraw-hyperlinkContainer--remove",icon:Yh})]})]})},fne=(e,t,n)=>{let[r,i]=gt(e,n),{x:s,y:o}=Ga({sceneX:r+e.width/2,sceneY:i},t),a=s-t.offsetLeft-ZI/2,l=o-t.offsetTop-cne;return{x:a,y:l}},rz=(e,t)=>{var r;let n=wt(e,t);return Rs(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"},Y5=null,Nje=(e,t,n)=>{Y5&&clearTimeout(Y5),Y5=window.setTimeout(()=>Rje(e,t,n),Nxe)},Rje=(e,t,n)=>{if(!e.link)return;let r=X5();r.classList.add("excalidraw-tooltip--visible"),r.style.maxWidth="20rem",r.textContent=H5(e.link)?j("labels.link.goToElement"):e.link;let[i,s,o,a]=gt(e,n),[l,f,c,d]=GT([i,s,o,a],e.angle,t),u=Ga({sceneX:l,sceneY:f},t);tne(r,{left:u.x,top:u.y,width:c,height:d},"top"),vn("hyperlink","tooltip","link-icon"),kM=!0},iz=()=>{Y5&&clearTimeout(Y5),kM&&(kM=!1,X5().classList.remove("excalidraw-tooltip--visible"))},_je=(e,t,n,[r,i])=>{let{x:s,y:o}=xn({clientX:r,clientY:i},n),a=15/n.zoom.value;if(_T(s,o,e,t))return!1;let[l,f,c]=gt(e,t);if(s>=l&&s<=c&&o>=f-cne&&o<=f)return!1;let{x:d,y:u}=fne(e,n,t);return!(r>=d-a&&r<=d+ZI+SM*2+a&&i>=u-a&&i<=u+a+SM*2+Aje)},dne=_e({name:"hyperlink",label:(e,t)=>rz(e,t),icon:PC,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:me.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.K,predicate:(e,t)=>wt(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{let r=wt(e,t);return m.jsx(Ot,{type:"button",icon:PC,"aria-label":j(rz(e,t)),title:`${Rs(e[0])?j("labels.link.labelEmbed"):j("labels.link.label")} - ${Ue("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:r.length===1&&!!r[0].link})}}),vS=e=>e.every(t=>!t.locked),Pje=_e({name:"toggleElementLock",label:(e,t,n)=>{let r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return r.length===1&&!at(r[0])?r[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":vS(r)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{let n=wt(t,e);return vS(n)?CT:R7},trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return i.length>0&&!i.some(s=>s.locked&&s.frameId)},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!i.length)return!1;let s=vS(i),o=ct(i);return{elements:e.map(a=>o.has(a.id)?yt(a,{locked:s}):a),appState:{...t,selectedLinearElement:s?null:t.selectedLinearElement},captureUpdate:me.IMMEDIATELY}},keyTest:(e,t,n,r)=>e.key.toLocaleLowerCase()===Q.L&&e[Q.CTRL_OR_CMD]&&e.shiftKey&&r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),Dje=_e({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:R7,predicate:(e,t)=>wt(e,t).length===0&&e.some(n=>n.locked),perform:(e,t)=>{let n=e.filter(r=>r.locked);return{elements:e.map(r=>r.locked?yt(r,{locked:!1}):r),appState:{...t,selectedElementIds:Object.fromEntries(n.map(r=>[r.id,!0]))},captureUpdate:me.IMMEDIATELY}},label:"labels.elementLock.unlockAll"}),Lje=()=>{let[e,t]=T.useState(null),n=T.useCallback(r=>t(r),[]);return[e,n]},Oje=e=>{let{closeOnClickOutside:t=!0}=e,n=Vte({className:"excalidraw-modal-container"}),r=T.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;let i=s=>{s.key===Q.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return ii.createPortal(m.jsxs("div",{className:ze("Modal",e.className,{"animations-disabled":r.current}),role:"dialog","aria-modal":"true",onKeyDown:i,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[m.jsx("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),m.jsx("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)},une=ui(new Map),sz=async e=>await WQ({elements:e,appState:{exportBackground:!1,viewBackgroundColor:Mt.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),jje=(e,t,n)=>{let[r,i]=T.useState();return T.useEffect(()=>{if(t)if(e){let s=n.get(e);s?i(s):(async()=>{var a;let o=await sz(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),i(o))})()}else(async()=>{let s=await sz(t);i(s)})()},[e,t,n,i]),r},hne=()=>{let[e]=rr(une);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:t=>{t.forEach(n=>e.delete(n))},svgCache:e}},Bje=class{constructor(){Z(this,"jobs",[]),Z(this,"running",!1)}tick(){if(this.running)return;let e=this.jobs.shift();e?(this.running=!0,e.promise.resolve(c6(e.jobFactory,...e.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(e,...t){let n=dve();return this.jobs.push({jobFactory:e,promise:n,args:t}),this.tick(),n}},Fje=new Nl,tb=ui({status:"loaded",isInitialized:!1,libraryItems:[]}),Hg=e=>yf(e),$je=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((r,i)=>r.id===t.elements[i].id&&r.versionNonce===t.elements[i].versionNonce)),zje=(e,t)=>{let n=[];for(let r of t)$je(e,r)&&n.push(r);return[...n,...e]},Hje=(e,t)=>{let n=ct(t),r={deletedItems:new Map,addedItems:new Map};for(let s of e)n.has(s.id)||r.deletedItems.set(s.id,s);let i=ct(e);for(let s of t)i.has(s.id)||r.addedItems.set(s.id,s);return r},Vje=class{constructor(e){Z(this,"currLibraryItems",[]),Z(this,"prevLibraryItems",Hg(this.currLibraryItems)),Z(this,"app"),Z(this,"updateQueue",[]),Z(this,"getLastUpdateTask",()=>this.updateQueue[this.updateQueue.length-1]),Z(this,"notifyListeners",()=>{var t,n;if(this.updateQueue.length>0)Za.set(tb,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{Za.set(tb,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{let r=this.prevLibraryItems;this.prevLibraryItems=Hg(this.currLibraryItems);let i=Hg(this.currLibraryItems);(n=(t=this.app.props).onLibraryChange)==null||n.call(t,i),Fje.trigger(Hje(r,i),i)}catch(r){console.error(r)}}}),Z(this,"destroy",()=>{this.updateQueue=[],this.currLibraryItems=[],Za.set(une,new Map)}),Z(this,"resetLibrary",()=>this.setLibrary([])),Z(this,"getLatestLibrary",()=>new Promise(async t=>{try{let n=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?t(this.getLatestLibrary()):t(Hg(n))}catch{return t(this.currLibraryItems)}})),Z(this,"updateLibrary",async({libraryItems:t,prompt:n=!1,merge:r=!1,openLibraryMenu:i=!1,defaultStatus:s="unpublished"})=>(i&&this.app.setState({openSidebar:{name:Qa.name,tab:F4}}),this.setLibrary(()=>new Promise(async(o,a)=>{try{let l=await(typeof t=="function"&&!(t instanceof Blob)?t(this.currLibraryItems):t),f;l instanceof Blob?f=await aRe(l,s):f=sI(l,s),!n||window.confirm(j("alerts.confirmAddLibrary",{numShapes:f.length}))?(n&&this.app.focusContainer(),o(r?zje(this.currLibraryItems,f):f)):a(new D7)}catch(l){a(l)}})))),Z(this,"setLibrary",t=>{let n=new Promise(async(r,i)=>{try{await this.getLastUpdateTask(),typeof t=="function"&&(t=t(this.currLibraryItems)),this.currLibraryItems=Hg(await t),r(this.currLibraryItems)}catch(s){i(s)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==n),this.notifyListeners()});return this.updateQueue.push(n),this.notifyListeners(),n}),this.app=e}},Wje=Vje,pne=e=>{let t=Math.ceil(Math.sqrt(e.length)),n=[],r=u=>e.slice(u*t,u*t+t).reduce((h,g)=>{let{height:U}=el(g.elements);return Math.max(h,U)},0),i=u=>{let h=0,g=0,U=0;for(let y of e){if(h%t===0&&(g=0),g===u){let{width:x}=el(y.elements);U=Math.max(U,x)}h++,g++}return U},s=0,o=0,a=0,l=0,f=0,c=0,d=0;for(let u of e){f&&f%t===0&&(o+=a+50,s=0,c=0,d++),c===0&&(a=r(d)),l=i(c);let{minX:h,minY:g,width:U,height:y}=el(u.elements),x=(l-U)/2,w=(a-y)/2;n.push(...u.elements.map(E=>({...E,x:E.x+s+x-h,y:E.y+o+w-g}))),s+=l+50,f++,c++}return n},gy=class CM{constructor(t){Z(this,"adapter"),this.adapter=t}static async getLibraryItems(t,n,r=!0){let i=()=>new Promise(async(s,o)=>{try{let a=await t.load({source:n});s(sI((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return r?CM.queue.push(i):i()}getLibraryItems(t){return CM.getLibraryItems(this.adapter,t,!1)}};Z(gy,"queue",new Bje),Z(gy,"run",async(e,t)=>{let n=new gy(e);return gy.queue.push(()=>t(n))});var Gje=T.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:s},o)=>m.jsx("div",{className:ze("Stack Stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...s},ref:o,children:e})),Xje=T.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:s},o)=>m.jsx("div",{className:ze("Stack Stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...s},ref:o,children:e})),Jo={Row:Gje,Col:Xje},Kje=({theme:e,id:t,libraryReturnUrl:n})=>{let r=n||window.location.origin+window.location.pathname;return m.jsx("a",{className:"library-menu-browse-button",href:`${vt.VITE_APP_LIBRARY_URL}?target=${window.name||"_blank"}&referrer=${r}&useHash=true&token=${t}&theme=${e}&version=${A7.excalidrawLibrary}`,target:"_excalidraw_libraries",children:j("labels.libraries")})},Yje=Kje,mne=({libraryReturnUrl:e,theme:t,id:n,style:r,children:i,className:s})=>m.jsxs("div",{className:ze("library-menu-control-buttons",s),style:r,children:[m.jsx(Yje,{id:n,libraryReturnUrl:e,theme:t}),i]}),Zje=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,qje=/{{([\w-]+)}}/,Qje=/<([\w-]+)>/,Jje=/<\/([\w-]+)>/,eBe=(e,t)=>{let n=[{name:"",children:[]}];return e.split(Zje).filter(Boolean).forEach(r=>{let i=r.match(Qje),s=r.match(Jje),o=r.match(qje);if(i!==null){let a=i[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){let a=n.pop(),l=Te.createElement(Te.Fragment,{},...a.children),f=t[a.name];typeof f=="function"&&n[n.length-1].children.push(f(l))}else console.warn(`Trans: unexpected end tag ${r} for interpolating ${e}`);else if(o!==null){let a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(r)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},tBe=({i18nKey:e,children:t,...n})=>{let{t:r}=Zi();return Te.createElement(Te.Fragment,{},...eBe(r(e),n))},ql=tBe,nBe=({label:e,onClick:t,className:n,children:r,actionType:i,type:s="button",isLoading:o,...a})=>{let l=i?`Dialog__action-button--${i}`:"";return m.jsxs("button",{className:ze("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[r&&m.jsx("div",{style:o?{visibility:"hidden"}:{},children:r}),m.jsx("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&m.jsx("div",{style:{position:"absolute",inset:0},children:m.jsx(Pf,{})})]})},w6=nBe,rBe=e=>{let{onConfirm:t,onCancel:n,children:r,confirmText:i=j("buttons.confirm"),cancelText:s=j("buttons.cancel"),className:o="",...a}=e,l=Gr(),f=ax(qI),{container:c}=Uc();return m.jsxs(ul,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[r,m.jsxs("div",{className:"confirm-dialog-buttons",children:[m.jsx(w6,{label:s,onClick:()=>{l({openMenu:null}),f(!1),ii.flushSync(()=>{n()}),c==null||c.focus()}}),m.jsx(w6,{label:i,onClick:()=>{l({openMenu:null}),f(!1),ii.flushSync(()=>{t()}),c==null||c.focus()},actionType:"danger"})]})]})},gne=rBe,Ch=class{static has(e){try{return!!window.localStorage.getItem(e)}catch(t){return console.warn(`localStorage.getItem error: ${t.message}`),!1}}static get(e){try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn(`localStorage.getItem error: ${t.message}`),null}}};Z(Ch,"set",(e,t)=>{try{return window.localStorage.setItem(e,JSON.stringify(t)),!0}catch(n){return console.warn(`localStorage.setItem error: ${n.message}`),!1}}),Z(Ch,"delete",e=>{try{window.localStorage.removeItem(e)}catch(t){console.warn(`localStorage.removeItem error: ${t.message}`)}});var iBe=async e=>{let t=Math.round(8),n=Math.max(Math.round(128/64),2),r=ave(e,6),i=document.createElement("canvas");i.width=r[0].length*128+(r[0].length+1)*(t*2)-t*2,i.height=r.length*128+(r.length+1)*(t*2)-t*2;let s=i.getContext("2d");s.fillStyle=li.white,s.fillRect(0,0,i.width,i.height);for(let[o,a]of e.entries()){let l=await lI({elements:a.elements,files:null,maxWidthOrHeight:128}),{width:f,height:c}=l,d=Math.floor(o/6)*(128+t*2),u=o%6*(128+t*2);s.drawImage(l,u+(128-f)/2+t,d+(128-c)/2+t),s.lineWidth=n,s.strokeStyle=li.gray[4],s.strokeRect(u+t/2,d+t/2,128+t,128+t)}return await tM(new File([await Q2(i)],"preview",{type:rt.png}),{outputType:rt.jpg,maxWidthOrHeight:5e3})},sBe=({libItem:e,appState:t,index:n,onChange:r,onRemove:i})=>{let s=T.useRef(null),o=T.useRef(null);return T.useEffect(()=>{let a=s.current;a&&(async()=>{let l=await WQ({elements:e.elements,appState:{...t,viewBackgroundColor:li.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),m.jsxs("div",{className:"single-library-item",children:[e.status==="published"&&m.jsx("span",{className:"single-library-item-status",children:j("labels.statusPublished")}),m.jsx("div",{ref:s,className:"single-library-item__svg"}),m.jsx(Ot,{"aria-label":j("buttons.remove"),type:"button",icon:R6,className:"single-library-item--remove",onClick:i.bind(null,e.id),title:j("buttons.remove")}),m.jsxs("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[m.jsxs("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[m.jsxs("div",{style:{padding:"0.5em 0"},children:[m.jsx("span",{style:{fontWeight:500,color:li.gray[6]},children:j("publishDialog.itemName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{r(a.target.value,n)}})]}),m.jsx("span",{className:"error",children:e.error})]})]})},oBe=({onClose:e,libraryItems:t,appState:n,onSuccess:r,onError:i,updateItemsInStorage:s,onRemove:o})=>{let[a,l]=T.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[f,c]=T.useState(!1);T.useEffect(()=>{let E=Ch.get(O5.PUBLISH_LIBRARY);E&&l(E)},[]);let[d,u]=T.useState(t.slice());T.useEffect(()=>{u(t.slice())},[t]);let h=E=>{l({...a,[E.target.name]:E.target.value})},g=async E=>{E.preventDefault(),c(!0);let S=[],M=!1;if(d.forEach(_=>{let O="";_.name||(O=j("publishDialog.errors.required"),M=!0),S.push({..._,error:O})}),M){u(S),c(!1);return}let A=await iBe(d),C={type:ia.excalidrawLibrary,version:A7.excalidrawLibrary,source:hT,libraryItems:d},I=JSON.stringify(C,null,2),R=new Blob([I],{type:"application/json"}),L=new FormData;L.append("excalidrawLib",R),L.append("previewImage",A),L.append("previewImageType",A.type),L.append("title",a.name),L.append("authorName",a.authorName),L.append("githubHandle",a.githubHandle),L.append("name",a.name),L.append("description",a.description),L.append("twitterHandle",a.twitterHandle),L.append("website",a.website),fetch(`${vt.VITE_APP_LIBRARY_BACKEND}/submit`,{method:"post",body:L}).then(_=>_.ok?_.json().then(({url:O})=>{Ch.delete(O5.PUBLISH_LIBRARY),r({url:O,authorName:a.authorName,items:d})}):_.json().catch(()=>{throw new Error(_.statusText||"something went wrong")}).then(O=>{throw new Error(O.message||_.statusText||"something went wrong")}),_=>{console.error(_),i(_),c(!1)}).catch(_=>{console.error(_),i(_),c(!1)})},U=()=>{let E=[];return d.forEach((S,M)=>{E.push(m.jsx("div",{className:"single-library-item-wrapper",children:m.jsx(sBe,{libItem:S,appState:n,index:M,onChange:(A,C)=>{let I=d.slice();I[C].name=A,u(I)},onRemove:o})},M))}),m.jsx("div",{className:"selected-library-items",children:E})},y=T.useCallback(()=>{s(d),Ch.set(O5.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),x=!!t.length,w=t.some(E=>E.status==="published");return m.jsx(ul,{onCloseRequest:y,title:j("publishDialog.title"),className:"publish-library",children:x?m.jsxs("form",{onSubmit:g,children:[m.jsx("div",{className:"publish-library-note",children:m.jsx(ql,{i18nKey:"publishDialog.noteDescription",link:E=>m.jsx("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:E})})}),m.jsx("span",{className:"publish-library-note",children:m.jsx(ql,{i18nKey:"publishDialog.noteGuidelines",link:E=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:E})})}),m.jsx("div",{className:"publish-library-note",children:j("publishDialog.noteItems")}),w&&m.jsx("span",{className:"publish-library-note publish-library-warning",children:j("publishDialog.republishWarning")}),U(),m.jsxs("div",{className:"publish-library__fields",children:[m.jsxs("label",{children:[m.jsxs("div",{children:[m.jsx("span",{children:j("publishDialog.libraryName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:j("publishDialog.placeholder.libraryName")})]}),m.jsxs("label",{style:{alignItems:"flex-start"},children:[m.jsxs("div",{children:[m.jsx("span",{children:j("publishDialog.libraryDesc")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:j("publishDialog.placeholder.libraryDesc")})]}),m.jsxs("label",{children:[m.jsxs("div",{children:[m.jsx("span",{children:j("publishDialog.authorName")}),m.jsx("span",{"aria-hidden":"true",className:"required",children:"*"})]}),m.jsx("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:j("publishDialog.placeholder.authorName")})]}),m.jsxs("label",{children:[m.jsx("span",{children:j("publishDialog.githubUsername")}),m.jsx("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:j("publishDialog.placeholder.githubHandle")})]}),m.jsxs("label",{children:[m.jsx("span",{children:j("publishDialog.twitterUsername")}),m.jsx("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:j("publishDialog.placeholder.twitterHandle")})]}),m.jsxs("label",{children:[m.jsx("span",{children:j("publishDialog.website")}),m.jsx("input",{type:"text",name:"website",pattern:"https?://.+",title:j("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:j("publishDialog.placeholder.website")})]}),m.jsx("span",{className:"publish-library-note",children:m.jsx(ql,{i18nKey:"publishDialog.noteLicense",link:E=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:E})})})]}),m.jsxs("div",{className:"publish-library__buttons",children:[m.jsx(w6,{label:j("buttons.cancel"),onClick:y,"data-testid":"cancel-clear-canvas-button"}),m.jsx(w6,{type:"submit",label:j("buttons.submit"),actionType:"primary",isLoading:f})]})]}):m.jsx("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:j("publishDialog.atleastOneLibItem")})})},aBe=oBe,bne=({className:e="",children:t,onToggle:n,title:r,...i})=>{let s=Wr(),o=ze(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.editor.isMobile}).trim();return m.jsx("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:r,...i,children:t})},lBe=bne;bne.displayName="DropdownMenuTrigger";var Une=()=>m.jsx("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}}),cBe=Une;Une.displayName="DropdownMenuSeparator";var yne=({children:e,onClickOutside:t,className:n="",onSelect:r,style:i})=>{let s=Wr(),o=T.useRef(null),a=cx({onClickOutside:t});HI(o,()=>{var f;(f=a.onClickOutside)==null||f.call(a)}),T.useEffect(()=>{let f=d=>{var u;d.key===Q.ESCAPE&&(d.stopImmediatePropagation(),(u=a.onClickOutside)==null||u.call(a))},c={capture:!0};return document.addEventListener("keydown",f,c),()=>{document.removeEventListener("keydown",f,c)}},[a]);let l=ze(`dropdown-menu ${n}`,{"dropdown-menu--mobile":s.editor.isMobile}).trim();return m.jsx(Yte.Provider,{value:{onSelect:r},children:m.jsx("div",{ref:o,className:l,style:i,"data-testid":"dropdown-menu",children:s.editor.isMobile?m.jsx(Jo.Col,{className:"dropdown-menu-container",children:e}):m.jsx(tl,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};yne.displayName="DropdownMenuContent";var fBe=yne,xne=({icon:e,shortcut:t,href:n,children:r,onSelect:i,className:s="",selected:o,rel:a="noreferrer",...l})=>{let f=qte(l.onClick,i);return m.jsx("a",{...l,href:n,target:"_blank",rel:"noreferrer",className:Zte(s,o),title:l.title??l["aria-label"],onClick:f,children:m.jsx(Qte,{icon:e,shortcut:t,children:r})})},m3=xne;xne.displayName="DropdownMenuItemLink";var dBe=({children:e,className:t="",selected:n,...r})=>m.jsx("div",{...r,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),uBe=dBe,hBe=e=>Te.Children.toArray(e).find(n=>Te.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger")||null,pBe=e=>Te.Children.toArray(e).find(n=>Te.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent")||null,$f=({children:e,open:t})=>{let n=hBe(e),r=pBe(e);return m.jsxs(m.Fragment,{children:[n,t&&r]})};$f.Trigger=lBe;$f.Content=fBe;$f.Item=da;$f.ItemLink=m3;$f.ItemCustom=uBe;$f.Group=xM;$f.Separator=cBe;var _n=$f;$f.displayName="DropdownMenu";var mBe=(e,t)=>e.filter(n=>t.includes(n.id)),gBe=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:r,resetLibrary:i,onSelectItems:s,appState:o,className:a})=>{let[l]=rr(tb),[f,c]=rr(qI),d=()=>{let L=t.length?j("alerts.removeItemsFromsLibrary",{count:t.length}):j("alerts.resetLibrary"),_=t.length?j("confirmDialog.removeItemsFromLib"):j("confirmDialog.resetLibrary");return m.jsx(gne,{onConfirm:()=>{t.length?r():i(),h(!1)},onCancel:()=>{h(!1)},title:_,children:m.jsx("p",{children:L})})},[u,h]=T.useState(!1),g=!!t.length,U=g?l.libraryItems.filter(L=>t.includes(L.id)):l.libraryItems,y=j(g?"buttons.remove":"buttons.resetLibrary"),[x,w]=T.useState(!1),[E,S]=T.useState(null),M=T.useCallback(()=>m.jsxs(ul,{onCloseRequest:()=>S(null),title:j("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[m.jsx("p",{children:m.jsx(ql,{i18nKey:"publishSuccessDialog.content",authorName:E.authorName,link:L=>m.jsx("a",{href:E==null?void 0:E.url,target:"_blank",rel:"noopener noreferrer",children:L})})}),m.jsx(Ot,{type:"button",title:j("buttons.close"),"aria-label":j("buttons.close"),label:j("buttons.close"),onClick:()=>S(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[S,E]),A=(L,_)=>{w(!1),S({url:L.url,authorName:L.authorName});let O=_.slice();O.forEach($=>{t.includes($.id)&&($.status="published")}),n.setLibrary(O)},C=async()=>{try{await n.updateLibrary({libraryItems:VT({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(L){if((L==null?void 0:L.name)==="AbortError"){console.warn(L);return}e({errorMessage:j("errors.importLibraryError")})}},I=async()=>{let L=g?U:await n.getLatestLibrary();_Ie(L).catch(LZ).catch(_=>{e({errorMessage:_.message})})},R=()=>m.jsxs(_n,{open:f,children:[m.jsx(_n.Trigger,{onToggle:()=>c(!f),children:Hve}),m.jsxs(_n.Content,{onClickOutside:()=>c(!1),onSelect:()=>c(!1),className:"library-menu",children:[!g&&m.jsx(_n.Item,{onSelect:C,icon:AT,"data-testid":"lib-dropdown--load",children:j("buttons.load")}),!!U.length&&m.jsx(_n.Item,{onSelect:I,icon:_7,"data-testid":"lib-dropdown--export",children:j("buttons.export")}),!!U.length&&m.jsx(_n.Item,{onSelect:()=>h(!0),icon:Yh,children:y}),g&&m.jsx(_n.Item,{icon:Jwe,onSelect:()=>w(!0),"data-testid":"lib-dropdown--remove",children:j("buttons.publishLibrary")})]})]});return m.jsxs("div",{className:ze("library-menu-dropdown-container",a),children:[R(),t.length>0&&m.jsx("div",{className:"library-actions-counter",children:t.length}),u&&d(),x&&m.jsx(aBe,{onClose:()=>w(!1),libraryItems:mBe(l.libraryItems,t),appState:o,onSuccess:L=>A(L,l.libraryItems),onError:L=>window.alert(L),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:L=>s(t.filter(_=>_!==L))}),E&&M()]})},oz=({selectedItems:e,onSelectItems:t,className:n})=>{let{library:r}=bc(),{clearLibraryCache:i,deleteItemsFromLibraryCache:s}=hne(),o=Us(),a=Gr(),[l]=rr(tb),f=async c=>{let d=c.filter(u=>!e.includes(u.id));r.setLibrary(d).catch(()=>{a({errorMessage:j("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return m.jsx(gBe,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:r,onRemoveFromLibrary:()=>f(l.libraryItems),resetLibrary:()=>{r.resetLibrary(),i()},className:n})},bBe=T.memo(({id:e,elements:t,isPending:n,onClick:r,selected:i,onToggle:s,onDrag:o,svgCache:a})=>{let l=T.useRef(null),f=jje(e,t,a);T.useEffect(()=>{let g=l.current;if(g)return f&&(g.innerHTML=f.outerHTML),()=>{g.innerHTML=""}},[f]);let[c,d]=T.useState(!1),u=Wr().editor.isMobile,h=n&&m.jsx("div",{className:"library-unit__adder",children:zve});return m.jsxs("div",{className:ze("library-unit",{"library-unit__active":t,"library-unit--hover":t&&c,"library-unit--selected":i,"library-unit--skeleton":!f}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[m.jsx("div",{className:ze("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?g=>{e&&g.shiftKey?s(e,g):r(e)}:void 0,onDragStart:g=>{if(!e){g.preventDefault();return}d(!1),o(e,g)}}),h,e&&t&&(c||u||i)&&m.jsx(KI,{checked:i,onChange:(g,U)=>s(e,U),className:"library-unit__checkbox"})]})}),UBe=()=>m.jsx("div",{className:"library-unit library-unit--skeleton"});function yBe(){return[!1,T.useCallback(e=>e(),[])]}var xBe=Te.useTransition||yBe,az=({children:e})=>m.jsx("div",{className:"library-menu-items-container__grid",children:e}),wS=T.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:r,onClick:i,svgCache:s,itemsRenderedPerBatch:o})=>{let[,a]=xBe(),[l,f]=T.useState(0);return T.useEffect(()=>{l<e.length&&a(()=>{f(l+o)})},[l,e.length,a,o]),m.jsx(m.Fragment,{children:e.map((c,d)=>d<l?m.jsx(bBe,{elements:c==null?void 0:c.elements,isPending:!(c!=null&&c.id)&&!!(c!=null&&c.elements),onClick:i,svgCache:s,id:c==null?void 0:c.id,selected:r(c.id),onToggle:t,onDrag:n},(c==null?void 0:c.id)??d):m.jsx(UBe,{},d))})}),vBe=ui(0),wBe=e=>{let[t,n]=rr(vBe);return T.useEffect(()=>{let{current:r}=e;if(!r)return;let i=Ob(()=>{let{scrollTop:s}=r;n(s)},200);return r.addEventListener("scroll",i),()=>{i.cancel(),r.removeEventListener("scroll",i)}},[e,n]),t},EBe=17,SBe=64;function kBe({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:r,pendingElements:i,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:f}){let c=T.useRef(null),d=wBe(c);T.useEffect(()=>{var L;d>0&&((L=c.current)==null||L.scrollTo(0,d))},[]);let{svgCache:u}=hne(),h=T.useMemo(()=>t.filter(L=>L.status!=="published"),[t]),g=T.useMemo(()=>t.filter(L=>L.status==="published"),[t]),U=!t.length&&!i.length,y=!i.length&&!h.length&&!g.length,[x,w]=T.useState(null),E=T.useCallback((L,_)=>{let O=!f.includes(L),$=[...h,...g];if(O){if(_.shiftKey&&x){let B=$.findIndex(G=>G.id===x),F=$.findIndex(G=>G.id===L);if(B===-1||F===-1){l([...f,L]);return}let z=ct(f),H=$.reduce((G,V,Y)=>((Y>=B&&Y<=F||z.has(V.id))&&G.push(V.id),G),[]);l(H)}else l([...f,L]);w(L)}else w(null),l(f.filter(B=>B!==L))},[x,l,g,f,h]),S=T.useCallback(L=>{let _;return f.includes(L)?_=t.filter(O=>f.includes(O.id)):_=t.filter(O=>O.id===L),_.map(O=>({...O,elements:UQ(O.elements,{randomizeSeed:!0})}))},[t,f]),M=T.useCallback((L,_)=>{_.dataTransfer.setData(rt.excalidrawlib,SQ(S(L)))},[S]),A=T.useCallback(L=>L?f.includes(L):!1,[f]),C=T.useCallback(()=>{n(i)},[i,n]),I=T.useCallback(L=>{L&&r(S(L))},[S,r]),R=u.size>=t.length?SBe:EBe;return m.jsxs("div",{className:"library-menu-items-container",style:i.length||h.length||g.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!y&&m.jsx(oz,{selectedItems:f,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),m.jsxs(Jo.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:g.length>0?1:"0 1 auto",marginBottom:0},ref:c,children:[m.jsxs(m.Fragment,{children:[!y&&m.jsx("div",{className:"library-menu-items-container__header",children:j("labels.personalLib")}),e&&m.jsx("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:m.jsx(Pf,{})}),!i.length&&!h.length?m.jsxs("div",{className:"library-menu-items__no-items",children:[m.jsx("div",{className:"library-menu-items__no-items__label",children:j("library.noItems")}),m.jsx("div",{className:"library-menu-items__no-items__hint",children:g.length>0?j("library.hint_emptyPrivateLibrary"):j("library.hint_emptyLibrary")})]}):m.jsxs(az,{children:[i.length>0&&m.jsx(wS,{itemsRenderedPerBatch:R,items:[{id:null,elements:i}],onItemSelectToggle:E,onItemDrag:M,onClick:C,isItemSelected:A,svgCache:u}),m.jsx(wS,{itemsRenderedPerBatch:R,items:h,onItemSelectToggle:E,onItemDrag:M,onClick:I,isItemSelected:A,svgCache:u})]})]}),m.jsxs(m.Fragment,{children:[(g.length>0||i.length>0||h.length>0)&&m.jsx("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:j("labels.excalidrawLib")}),g.length>0?m.jsx(az,{children:m.jsx(wS,{itemsRenderedPerBatch:R,items:g,onItemSelectToggle:E,onItemDrag:M,onClick:I,isItemSelected:A,svgCache:u})}):h.length>0?m.jsx("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:j("library.noItems")}):null]}),U&&m.jsx(mne,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s,children:m.jsx(oz,{selectedItems:f,onSelectItems:l})})]})]})}var qI=ui(!1),lz=({children:e})=>m.jsx("div",{className:"layer-ui__library",children:e}),CBe=T.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:r,libraryReturnUrl:i,library:s,id:o,theme:a,selectedItems:l,onSelectItems:f})=>{let[c]=rr(tb),d=T.useCallback(g=>{(async(U,y)=>{vn("element","addToLibrary","ui");for(let w of MZ)if(U.some(E=>E.type===w))return r({errorMessage:j(`errors.libraryElementTypeError.${w}`)});let x=[{status:"unpublished",elements:U,id:fa(),created:Date.now()},...y];n(),s.setLibrary(x).catch(()=>{r({errorMessage:j("alerts.errorAddingToLibrary")})})})(g,c.libraryItems)},[n,s,r,c.libraryItems]),u=T.useMemo(()=>c.libraryItems,[c]);if(c.status==="loading"&&!c.isInitialized)return m.jsx(lz,{children:m.jsx("div",{className:"layer-ui__library-message",children:m.jsxs("div",{children:[m.jsx(Pf,{size:"2em"}),m.jsx("span",{children:j("labels.libraryLoadingMessage")})]})})});let h=c.libraryItems.length>0||t.length>0;return m.jsxs(lz,{children:[m.jsx(kBe,{isLoading:c.status==="loading",libraryItems:u,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:i,theme:a,onSelectItems:f,selectedItems:l}),h&&m.jsx(mne,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:i,theme:a})]})}),ES=(e,t)=>({elements:e,pending:wt(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),MBe=(e,t)=>{let n=bx(),[r,i]=T.useState(()=>ES(n,e.selectedElementIds)),s=T.useRef(new Map);return T.useEffect(()=>{for(let o of r.pending)s.current.set(o.id,o.version)},[r.pending]),T.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&i(o=>{var l;if(!ki(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),ES(n,e.selectedElementIds);let a=t.scene.getNonDeletedElementsMap();for(let f of Object.keys(e.selectedElementIds)){let c=(l=a.get(f))==null?void 0:l.version;if(c&&c!==s.current.get(f))return ES(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),r.pending},ABe=T.memo(()=>{let e=bc(),{onInsertElements:t}=e,n=Jb(),r=Us(),i=Gr(),[s,o]=T.useState([]),a=T.useMemo(()=>e.library,[e.library]),l=MBe(r,e),f=T.useCallback(d=>{t(pne(d))},[t]),c=T.useCallback(()=>{i({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[i]);return m.jsx(CBe,{pendingElements:l,onInsertLibraryItems:f,onAddToLibrary:c,setAppState:i,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:r.theme,selectedItems:s,onSelectItems:o})});function TBe(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}var ul=e=>{let[t,n]=Lje(),[r]=T.useState(document.activeElement),{id:i}=Uc(),s=Wr().viewport.isMobile;T.useEffect(()=>{if(!t)return;let f=IC(t);setTimeout(()=>{f.length>0&&e.autofocus!==!1&&(f[1]||f[0]).focus()});let c=d=>{if(d.key===Q.TAB){let u=IC(t),{activeElement:h}=document,g=u.findIndex(U=>U===h);g===0&&d.shiftKey?(u[u.length-1].focus(),d.preventDefault()):g===u.length-1&&!d.shiftKey&&(u[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",c),()=>t.removeEventListener("keydown",c)},[t,e.autofocus]);let o=Gr(),a=ax(qI),l=()=>{o({openMenu:null}),a(!1),r.focus(),e.onCloseRequest()};return m.jsx(Oje,{className:ze("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:TBe(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:m.jsxs(tl,{ref:n,children:[e.title&&m.jsx("h2",{id:`${i}-dialog-title`,className:"Dialog__title",children:m.jsx("span",{className:"Dialog__titleContent",children:e.title})}),s&&m.jsx("button",{className:"Dialog__close",onClick:l,title:j("buttons.close"),"aria-label":j("buttons.close"),type:"button",children:R6}),m.jsx("div",{className:"Dialog__content",children:e.children})]})})},E6=({type:e="button",onSelect:t,selected:n,children:r,className:i="",...s})=>m.jsx("button",{onClick:I7(s.onClick,o=>{t()}),type:e,className:ze("excalidraw-button",i,{selected:n}),...s,children:r}),QI=T.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:r,readonly:i,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:f,...c},d)=>{let u=T.useRef(null);T.useImperativeHandle(d,()=>u.current),T.useLayoutEffect(()=>{var U,y;s&&((U=u.current)==null||U.focus(),(y=u.current)==null||y.select())},[s]);let[h,g]=T.useState(!1);return m.jsxs("div",{className:ze("ExcTextField",f,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var U;(U=u.current)==null||U.focus()},children:[l,t&&m.jsx("div",{className:"ExcTextField__label",children:t}),m.jsxs("div",{className:ze("ExcTextField__input",{"ExcTextField__input--readonly":i}),children:[m.jsx("input",{className:ze({"is-redacted":"value"in c&&c.value&&a&&!h}),readOnly:i,value:"value"in c?c.value:void 0,defaultValue:"defaultValue"in c?c.defaultValue:void 0,placeholder:r,ref:u,onChange:U=>e==null?void 0:e(U.target.value),onKeyDown:o}),a&&m.jsx(E6,{onSelect:()=>g(!h),style:{border:0,userSelect:"none"},children:h?aEe:IT})]})]})}),IBe={toggleTheme:[Ue("Shift+Alt+D")],saveScene:[Ue("CtrlOrCmd+S")],loadScene:[Ue("CtrlOrCmd+O")],clearCanvas:[Ue("CtrlOrCmd+Delete")],imageExport:[Ue("CtrlOrCmd+Shift+E")],commandPalette:[Ue("CtrlOrCmd+/"),Ue("CtrlOrCmd+Shift+P")],cut:[Ue("CtrlOrCmd+X")],copy:[Ue("CtrlOrCmd+C")],paste:[Ue("CtrlOrCmd+V")],copyStyles:[Ue("CtrlOrCmd+Alt+C")],pasteStyles:[Ue("CtrlOrCmd+Alt+V")],selectAll:[Ue("CtrlOrCmd+A")],deleteSelectedElements:[Ue("Delete")],duplicateSelection:[Ue("CtrlOrCmd+D"),Ue(`Alt+${j("helpDialog.drag")}`)],sendBackward:[Ue("CtrlOrCmd+[")],bringForward:[Ue("CtrlOrCmd+]")],sendToBack:[Ue(sc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Ue(sc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Ue("Shift+Alt+C")],group:[Ue("CtrlOrCmd+G")],ungroup:[Ue("CtrlOrCmd+Shift+G")],gridMode:[Ue("CtrlOrCmd+'")],zenMode:[Ue("Alt+Z")],objectsSnapMode:[Ue("Alt+S")],stats:[Ue("Alt+/")],addToLibrary:[],flipHorizontal:[Ue("Shift+H")],flipVertical:[Ue("Shift+V")],viewMode:[Ue("Alt+R")],hyperlink:[Ue("CtrlOrCmd+K")],toggleElementLock:[Ue("CtrlOrCmd+Shift+L")],resetZoom:[Ue("CtrlOrCmd+0")],zoomOut:[Ue("CtrlOrCmd+-")],zoomIn:[Ue("CtrlOrCmd++")],zoomToFitSelection:[Ue("Shift+3")],zoomToFit:[Ue("Shift+1")],zoomToFitSelectionInViewport:[Ue("Shift+2")],toggleEraserTool:[Ue("E")],toggleHandTool:[Ue("H")],setFrameAsActiveTool:[Ue("F")],saveFileToDisk:[Ue("CtrlOrCmd+S")],saveToActiveFile:[Ue("CtrlOrCmd+S")],toggleShortcuts:[Ue("?")],searchMenu:[Ue("CtrlOrCmd+F")],wrapSelectionInFrame:[]},Vi=(e,t=0)=>{let n=IBe[e];return n&&n.length>0?n[t]||n[0]:""},NBe="\\u0300-\\u036f",RBe="\\ufe20-\\ufe2f",_Be="\\u20d0-\\u20ff",PBe=NBe+RBe+_Be,DBe=`[${PBe}]`,LBe=RegExp(DBe,"g"),OBe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jBe={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"E",:"e",:"T",:"t",:"s",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"I",:"i",:"E",:"e",:"n",:"s"},cz=e=>e.replace(OBe,t=>jBe[t]||t).replace(LBe,""),vne=Te.createContext(null),vo=()=>Te.useContext(vne),BBe=fee(),FBe=()=>Te.useMemo(()=>({MainMenuTunnel:El(),WelcomeScreenMenuHintTunnel:El(),WelcomeScreenToolbarHintTunnel:El(),WelcomeScreenHelpHintTunnel:El(),WelcomeScreenCenterTunnel:El(),FooterCenterTunnel:El(),DefaultSidebarTriggerTunnel:El(),DefaultSidebarTabTriggersTunnel:El(),OverwriteConfirmDialogTunnel:El(),TTDDialogTriggerTunnel:El(),tunnelsJotai:BBe}),[]),wne=(e,t)=>{var r;let n=((r=t[0])==null?void 0:r.type)||null;for(let i of t)if(i.type!==n){n=null;break}return FC(e.activeTool.type)&&e.activeTool.type!=="image"&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(i=>FC(i.type))},Ene=(e,t)=>u6(e.activeTool.type)||t.some(n=>u6(n.type)),Sne=({appState:e,elementsMap:t,renderAction:n,app:r})=>{let i=eJ(t,e),s=!1;i.length===2&&(ca(i[0])||ca(i[1]))&&(s=!0);let o=!!(e.editingTextElement||e.newElement),a=Wr(),l=document.documentElement.getAttribute("dir")==="rtl",f=u6(e.activeTool.type)&&!Ka(e.currentItemBackgroundColor)||i.some(g=>u6(g.type)&&!Ka(g.backgroundColor)),c=i.length===1||s,d=!e.editingLinearElement&&i.length===1&&mt(i[0])&&!Fe(i[0]),u=!e.croppingElementId&&i.length===1&&Yt(i[0]),h=!s&&xo(e,r);return m.jsxs("div",{className:"panelColumn",children:[m.jsx("div",{children:wne(e,i)&&n("changeStrokeColor")}),Ene(e,i)&&m.jsx("div",{children:n("changeBackgroundColor")}),f&&n("changeFillStyle"),($B(e.activeTool.type)||i.some(g=>$B(g.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||i.some(g=>g.type==="freedraw"))&&n("changeStrokeShape"),(zB(e.activeTool.type)||i.some(g=>zB(g.type)))&&m.jsxs(m.Fragment,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),($C(e.activeTool.type)||i.some(g=>$C(g.type)))&&m.jsx(m.Fragment,{children:n("changeRoundness")}),(HB(e.activeTool.type)||i.some(g=>HB(g.type)))&&m.jsx(m.Fragment,{children:n("changeArrowType")}),(e.activeTool.type==="text"||i.some(Oe))&&m.jsxs(m.Fragment,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||tIe(i,t))&&n("changeTextAlign")]}),eIe(i,t)&&n("changeVerticalAlign"),(Q4(e.activeTool.type)||i.some(g=>Q4(g.type)))&&m.jsx(m.Fragment,{children:n("changeArrowhead")}),n("changeOpacity"),m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.layers")}),m.jsxs("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.align")}),m.jsxs("div",{className:"buttonList",children:[l?m.jsxs(m.Fragment,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):m.jsxs(m.Fragment,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),i.length>2&&n("distributeHorizontally"),m.jsx("div",{style:{flexBasis:"100%",height:0}}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),i.length>2&&n("distributeVertically")]})]})]}),!o&&i.length>0&&m.jsxs("fieldset",{children:[m.jsx("legend",{children:j("labels.actions")}),m.jsxs("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),c&&n("hyperlink"),u&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},kne=({activeTool:e,appState:t,app:n,UIOptions:r})=>{let[i,s]=T.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="embeddable",{TTDDialogTriggerTunnel:f}=vo();return m.jsxs(m.Fragment,{children:[PT.map(({value:c,icon:d,key:u,numericKey:h,fillable:g},U)=>{var E;if(((E=r.tools)==null?void 0:E[c])===!1)return null;let y=j(`toolBar.${c}`),x=u&&F5(typeof u=="string"?u:u[0]),w=x?`${x} ${j("helpDialog.or")} ${h}`:`${h}`;return m.jsx(Ot,{className:ze("Shape",{fillable:g}),type:"radio",icon:d,checked:e.type===c,name:"editor-current-shape",title:`${F5(y)}  ${w}`,keyBindingLabel:h||x,"aria-label":F5(y),"aria-keyshortcuts":w,"data-testid":`toolbar-${c}`,onPointerDown:({pointerType:S})=>{!t.penDetected&&S==="pen"&&n.togglePenMode(!0)},onChange:({pointerType:S})=>{t.activeTool.type!==c&&vn("toolbar",c,"ui"),c==="image"?n.setActiveTool({type:c,insertOnCanvasDirectly:S!=="mouse"}):n.setActiveTool({type:c})}},c)}),m.jsx("div",{className:"App-toolbar__divider"}),m.jsxs(_n,{open:i,children:[m.jsx(_n.Trigger,{className:ze("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||l||a&&!n.props.isCollaborating}),onToggle:()=>s(!i),title:j("toolBar.extraTools"),children:sEe}),m.jsxs(_n.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[m.jsx(_n.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:oq,shortcut:Q.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:j("toolBar.frame")}),m.jsx(_n.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:iwe,"data-testid":"toolbar-embeddable",selected:l,children:j("toolBar.embeddable")}),m.jsx(_n.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:lq,"data-testid":"toolbar-laser",selected:a,shortcut:Q.K.toLocaleUpperCase(),children:j("toolBar.laser")}),m.jsx("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&m.jsx(f.Out,{}),m.jsx(_n.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:aq,"data-testid":"toolbar-embeddable",children:j("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&m.jsx(m.Fragment,{children:m.jsxs(_n.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:cq,"data-testid":"toolbar-magicframe",children:[j("toolBar.magicframe"),m.jsx(_n.Item.Badge,{children:"AI"})]})})]})]})]})},$Be=({renderAction:e,zoom:t})=>m.jsx(Jo.Col,{gap:1,className:i6.ZOOM_ACTIONS,children:m.jsxs(Jo.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),zBe=({renderAction:e,className:t})=>m.jsxs("div",{className:`undo-redo-buttons ${t}`,children:[m.jsx("div",{className:"undo-button-container",children:m.jsx(n1,{label:j("buttons.undo"),children:e("undo")})}),m.jsx("div",{className:"redo-button-container",children:m.jsxs(n1,{label:j("buttons.redo"),children:[" ",e("redo")]})})]}),HBe=({actionManager:e,showExitZenModeBtn:t})=>m.jsx("button",{type:"button",className:ze("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(wM),children:j("buttons.exitZenMode")}),VBe=({renderAction:e,className:t})=>m.jsx("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),fz=e=>{let t=T.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},gx=ui(null),WBe=()=>{let[e,t]=rr(gx),n=Gs();return e&&e==="clearCanvas"?m.jsx(gne,{onConfirm:()=>{n.executeAction(K5),t(null)},onCancel:()=>t(null),title:j("clearCanvasDialog.title"),children:m.jsxs("p",{className:"clear-canvas__content",children:[" ",j("alerts.clearReset")]})}):null},Cne={};wY(Cne,{toggleTheme:()=>GBe});var GBe={...x9,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(x9,"commandPalette")}},Mne=_e({name:"copyElementLink",label:"labels.copyElementLink",icon:TT,trackEvent:{category:"element"},perform:async(e,t,n,r)=>{let i=wt(e,t);try{if(window.location){let s=RQ(i,t);return s?(await Xb(r.props.generateLinkForSelection?r.props.generateLinkForSelection(s.id,s.type):NQ(s.id,s.type)),{appState:{toast:{message:j("toast.elementLinkCopied"),closable:!0}},captureUpdate:me.EVENTUALLY}):{appState:t,elements:e,app:r,captureUpdate:me.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:r,captureUpdate:me.EVENTUALLY}},predicate:(e,t)=>a9(wt(e,t))}),XBe=_e({name:"linkToElement",label:"labels.linkToElement",icon:hq,perform:(e,t,n,r)=>{let i=wt(e,t);return i.length!==1||!a9(i)?{elements:e,appState:t,app:r,captureUpdate:me.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:wt(e,t)[0].id}},captureUpdate:me.IMMEDIATELY}},predicate:(e,t,n,r)=>{var s;let i=wt(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&i.length===1&&a9(i)},trackEvent:!1}),KBe=ui(null),dr={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},YBe=e=>{switch(e){case dr.app:return 1;case dr.export:return 2;case dr.editor:return 3;case dr.tools:return 4;case dr.elements:return 5;case dr.links:return 6;default:return 10}},g3=({shortcut:e,className:t,children:n})=>{let r=e.replace("++","+$").split("+");return m.jsxs("div",{className:ze("shortcut",t),children:[r.map((i,s)=>m.jsx("div",{className:"shortcut-wrapper",children:m.jsx("div",{className:"shortcut-key",children:i==="$"?"+":i})},i)),m.jsx("div",{className:"shortcut-desc",children:n})]})},Ane=e=>!e.altKey&&e[Q.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===Q.P||e.key===Q.SLASH);Object.assign(e=>{var r;let t=Us(),n=Gr();return T.useEffect(()=>{let i=s=>{Ane(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;let a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&vn("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener("keydown",i,{capture:!0}),()=>window.removeEventListener("keydown",i,{capture:!0})},[n]),((r=t.openDialog)==null?void 0:r.name)!=="commandPalette"?null:m.jsx(ZBe,{...e})},{defaultItems:Cne});function ZBe({customCommandPaletteItems:e}){let t=bc(),n=Us(),r=Gr(),i=Jb(),s=Gs(),[o,a]=rr(KBe),[l,f]=T.useState(null),c=T.useRef(null),d=cx({uiAppState:n,customCommandPaletteItems:e,appProps:i});T.useEffect(()=>{let{uiAppState:A,customCommandPaletteItems:C,appProps:I}=d,R=$=>{let B="";return $.label&&(typeof $.label=="function"?B=j($.label(t.scene.getNonDeletedElements(),A,t)):B=j($.label)),B},L=$=>typeof $.icon=="function"?$.icon(A,t.scene.getNonDeletedElements()):$.icon,_=[],O=($,B,F)=>{let z={label:R($),icon:L($),category:B,shortcut:Vi($.name),keywords:$.keywords,predicate:$.predicate,viewMode:$.viewMode,perform:()=>{s.executeAction($,"commandPalette")}};return F?F(z,$):z};if(A&&t.scene&&s){let $=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,dne,Mne,XBe].map(V=>O(V,dr.elements,(Y,K)=>({...Y,predicate:K.predicate?K.predicate:(q,se,de,xe)=>wt(q,se).length>0}))),B=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool].map(V=>O(V,dr.tools)),F=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(V=>O(V,dr.editor)),z=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(V=>O(V,dr.export));_=[...$,...F,{label:R(K5),icon:L(K5),shortcut:Vi(K5.name),category:dr.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Za.set(gx,"clearCanvas")}},{label:j("buttons.exportImage"),category:dr.export,icon:JZ,shortcut:Vi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{r({openDialog:{name:"imageExport"}})}},...z];let H=[{label:j("toolBar.library"),category:dr.app,icon:kT,viewMode:!1,perform:()=>{A.openSidebar?r({openSidebar:null}):r({openSidebar:{name:Qa.name,tab:Qa.defaultTab}})}},{label:j("search.title"),category:dr.app,icon:Zh,viewMode:!0,perform:()=>{s.executeAction(Tne)}},{label:j("labels.changeStroke"),keywords:["color","outline"],category:dr.elements,icon:WE,viewMode:!1,predicate:(V,Y)=>{let K=wt(V,Y);return K.length>0&&wne(Y,K)},perform:()=>{r(V=>({openMenu:V.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:j("labels.changeBackground"),keywords:["color","fill"],icon:WE,category:dr.elements,viewMode:!1,predicate:(V,Y)=>{let K=wt(V,Y);return K.length>0&&Ene(Y,K)},perform:()=>{r(V=>({openMenu:V.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:j("labels.canvasBackground"),keywords:["color"],icon:WE,category:dr.editor,viewMode:!1,perform:()=>{r(V=>({openMenu:V.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...PT.reduce((V,Y)=>{var ue;let{value:K,icon:q,key:se,numericKey:de}=Y;if(((ue=I.UIOptions.tools)==null?void 0:ue[K])===!1)return V;let xe=se&&F5(typeof se=="string"?se:se[0])||de,ve={label:j(`toolBar.${K}`),category:dr.tools,shortcut:xe,icon:q,keywords:["toolbar"],viewMode:!1,perform:({event:te})=>{K==="image"?t.setActiveTool({type:K,insertOnCanvasDirectly:te.type==="keydown"}):t.setActiveTool({type:K})}};return V.push(ve),V},[]),...B,{label:j("toolBar.lock"),category:dr.tools,icon:A.activeTool.locked?CT:R7,shortcut:Q.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${j("labels.textToDiagram")}...`,category:dr.tools,icon:lEe,viewMode:!1,predicate:I.aiEnabled,perform:()=>{r(V=>({...V,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${j("toolBar.mermaidToExcalidraw")}...`,category:dr.tools,icon:aq,viewMode:!1,predicate:I.aiEnabled,perform:()=>{r(V=>({...V,openDialog:{name:"ttd",tab:"mermaid"}}))}}],G=[..._,...H,...C||[]].map(V=>{var Y;return{...V,icon:V.icon||fq,order:V.order??YBe(V.category),haystack:`${cz(V.label.toLocaleLowerCase())} ${((Y=V.keywords)==null?void 0:Y.join(" "))||""}`}});f(G),a(G.find(V=>V.label===(o==null?void 0:o.label))??null)}},[d,t,s,f,o==null?void 0:o.label,a,r]);let[u,h]=T.useState(""),[g,U]=T.useState(null),[y,x]=T.useState({}),w=A=>{r({openDialog:null},A),h("")},E=(A,C)=>{var I;((I=n.openDialog)==null?void 0:I.name)==="commandPalette"&&(C.stopPropagation(),C.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),w(()=>{A.perform({actionManager:s,event:C}),a(A),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},S=fz(A=>A.viewMode===!1&&n.viewModeEnabled?!1:typeof A.predicate=="function"?A.predicate(t.scene.getNonDeletedElements(),n,i,t):A.predicate===void 0||A.predicate),M=fz(A=>{var L;let C=Eu(A.target)||Ane(A)||A.key===Q.ESCAPE;if(C&&A.key!==Q.ARROW_UP&&A.key!==Q.ARROW_DOWN&&A.key!==Q.ENTER)return;let I=Object.values(y).flat(),R=o&&!u&&S(o);if(A.key===Q.ARROW_UP){A.preventDefault();let _=I.findIndex(B=>B.label===(g==null?void 0:g.label));if(R){if(_===0){U(o);return}if(g===o){let B=I[I.length-1];B&&U(B);return}}let O;_===-1?O=I.length-1:O=_===0?I.length-1:(_-1)%I.length;let $=I[O];$&&U($);return}if(A.key===Q.ARROW_DOWN){A.preventDefault();let _=I.findIndex(B=>B.label===(g==null?void 0:g.label));if(R){if(!g||_===I.length-1){U(o);return}if(g===o){let B=I[0];B&&U(B);return}}let O=(_+1)%I.length,$=I[O];$&&U($);return}if(A.key===Q.ENTER&&g&&setTimeout(()=>{E(g,A)}),!C){if(A.stopPropagation(),/^[a-zA-Z0-9]$/.test(A.key)){(L=c==null?void 0:c.current)==null||L.focus();return}A.preventDefault()}});return T.useEffect(()=>(window.addEventListener("keydown",M,{capture:!0}),()=>window.removeEventListener("keydown",M,{capture:!0})),[M]),T.useEffect(()=>{if(!l)return;let A=L=>{let _={};for(let O of L)_[O.category]?_[O.category].push(O):_[O.category]=[O];return _},C=l.filter(S).sort((L,_)=>L.order-_.order),I=!u&&o&&S(o);if(!u){x(A(I?C.filter(L=>L.label!==(o==null?void 0:o.label)):C)),U(I?o:C[0]||null);return}let R=cz(u.toLocaleLowerCase().replace(/[<>_| -]/g,""));C=ADe.filter(R,C,{extract:L=>L.haystack}).sort((L,_)=>_.score-L.score).map(L=>L.original),x(A(C)),U(C[0]??null)},[u,l,S,o]),m.jsxs(ul,{onCloseRequest:()=>w(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[m.jsx(QI,{value:u,placeholder:j("commandPalette.search.placeholder"),onChange:A=>{h(A)},selectOnRender:!0,ref:c}),!t.device.viewport.isMobile&&m.jsxs("div",{className:"shortcuts-wrapper",children:[m.jsx(g3,{shortcut:"",children:j("commandPalette.shortcuts.select")}),m.jsx(g3,{shortcut:"",children:j("commandPalette.shortcuts.confirm")}),m.jsx(g3,{shortcut:Ue("Esc"),children:j("commandPalette.shortcuts.close")})]}),m.jsxs("div",{className:"commands",children:[o&&!u&&m.jsxs("div",{className:"command-category",children:[m.jsxs("div",{className:"command-category-title",children:[j("commandPalette.recents"),m.jsx("div",{className:"icon",style:{marginLeft:"6px"},children:cEe})]}),m.jsx(dz,{command:o,isSelected:o.label===(g==null?void 0:g.label),onClick:A=>E(o,A),disabled:!S(o),onMouseMove:()=>U(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(y).length>0?Object.keys(y).map((A,C)=>m.jsxs("div",{className:"command-category",children:[m.jsx("div",{className:"command-category-title",children:A}),y[A].map(I=>m.jsx(dz,{command:I,isSelected:I.label===(g==null?void 0:g.label),onClick:R=>E(I,R),onMouseMove:()=>U(I),showShortcut:!t.device.viewport.isMobile,appState:n},I.label))]},A)):l?m.jsxs("div",{className:"no-match",children:[m.jsx("div",{className:"icon",children:Zh})," ",j("commandPalette.search.noMatch")]}):null]})]})}var dz=({command:e,isSelected:t,disabled:n,onMouseMove:r,onClick:i,showShortcut:s,appState:o})=>{let a=()=>{};return m.jsxs("div",{className:ze("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var f;t&&!n&&((f=l==null?void 0:l.scrollIntoView)==null||f.call(l,{block:"nearest"}))},onClick:n?a:i,onMouseMove:n?a:r,title:n?j("commandPalette.itemNotAvailable"):"",children:[m.jsxs("div",{className:"name",children:[e.icon&&m.jsx(dx,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),s&&e.shortcut&&m.jsx(g3,{shortcut:e.shortcut})]})},qBe=_e({name:"toggleLinearEditor",category:dr.elements,label:(e,t,n)=>{var r;return((r=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0])==null?void 0:r.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&i.length===1&&mt(i[0])&&!Fe(i[0]))},perform(e,t,n,r){var o;let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],s=((o=t.editingLinearElement)==null?void 0:o.elementId)===i.id?null:new je(i);return{appState:{...t,editingLinearElement:s},captureUpdate:me.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{let r=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],i=j(r.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return m.jsx(Ot,{type:"button",icon:EEe,title:i,"aria-label":i,onClick:()=>t(null)})}}),Tne=_e({name:"searchMenu",icon:Zh,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,r){var i,s;if(((i=t.openSidebar)==null?void 0:i.name)===Qa.name&&t.openSidebar.tab===Vp){let o=(s=r.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${i6.SEARCH_MENU_INPUT_WRAPPER} input`);return o!=null&&o.matches(":focus")?{appState:{...t,openSidebar:null},captureUpdate:me.EVENTUALLY}:(o==null||o.focus(),o==null||o.select(),!1)}return{appState:{...t,openSidebar:{name:Qa.name,tab:Vp},openDialog:null},captureUpdate:me.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[Q.CTRL_OR_CMD]&&e.key===Q.F}),QBe=_e({name:"cropEditor",label:"helpDialog.cropStart",icon:LB,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,r){let i=r.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:i.id},captureUpdate:me.IMMEDIATELY}},predicate:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t);return!!(!t.croppingElementId&&i.length===1&&Yt(i[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{let r=j("helpDialog.cropStart");return m.jsx(Ot,{type:"button",icon:LB,title:r,"aria-label":r,onClick:()=>t(null)})}}),v9=class{constructor(e=!0,t=!0){this.isUndoStackEmpty=e,this.isRedoStackEmpty=t}},uz=class U5{constructor(){Z(this,"onHistoryChangedEmitter",new Nl),Z(this,"undoStack",[]),Z(this,"redoStack",[])}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t,n){let r=JBe.create(n,t);r.isEmpty()||(this.undoStack.push(r.inverse()),r.elementsChange.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new v9(this.isUndoStackEmpty,this.isRedoStackEmpty)))}undo(t,n,r){return this.perform(t,n,r,()=>U5.pop(this.undoStack),i=>U5.push(this.redoStack,i,t))}redo(t,n,r){return this.perform(t,n,r,()=>U5.pop(this.redoStack),i=>U5.push(this.undoStack,i,t))}perform(t,n,r,i,s){try{let o=i();if(o===null)return;let a=t,l=n,f=!1;for(;o;){try{[a,l,f]=o.applyTo(a,l,r)}finally{s(o)}if(f)break;o=i()}return[a,l]}finally{this.onHistoryChangedEmitter.trigger(new v9(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;let n=t.pop();return n!==void 0?n:null}static push(t,n,r){let i=n.inverse().applyLatestChanges(r);return t.push(i)}},JBe=class b3{constructor(t,n){this.appStateChange=t,this.elementsChange=n}static create(t,n){return new b3(t,n)}inverse(){return new b3(this.appStateChange.inverse(),this.elementsChange.inverse())}applyTo(t,n,r){let[i,s]=this.elementsChange.applyTo(t,r.elements),[o,a]=this.appStateChange.applyTo(n,i);return[i,o,s||a]}applyLatestChanges(t){let n=this.elementsChange.applyLatestChanges(t);return b3.create(this.appStateChange,n)}isEmpty(){return this.appStateChange.isEmpty()&&this.elementsChange.isEmpty()}},Ine=(e,t)=>{let[n,r]=T.useState(t);return T.useEffect(()=>{let i=e.on(s=>{r(s)});return()=>{i()}},[e]),n},Nne=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){let r=n();if(!r)return{captureUpdate:me.EVENTUALLY};let[i,s]=r,o=Array.from(i.values());return{appState:s,elements:o,captureUpdate:me.NEVER}}return{captureUpdate:me.EVENTUALLY}},eFe=(e,t)=>({name:"undo",label:"buttons.undo",icon:vB,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,s)=>Nne(s,r,()=>e.undo(ct(n),r,t.snapshot)),keyTest:n=>n[Q.CTRL_OR_CMD]&&jC(n,Q.Z)&&!n.shiftKey,PanelComponent:({updateData:n,data:r})=>{let{isUndoStackEmpty:i}=Ine(e.onHistoryChangedEmitter,new v9(e.isUndoStackEmpty,e.isRedoStackEmpty));return m.jsx(Ot,{type:"button",icon:vB,"aria-label":j("buttons.undo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-undo"})}}),tFe=(e,t)=>({name:"redo",label:"buttons.redo",icon:wB,trackEvent:{category:"history"},viewMode:!1,perform:(n,r,i,s)=>Nne(s,r,()=>e.redo(ct(n),r,t.snapshot)),keyTest:n=>n[Q.CTRL_OR_CMD]&&n.shiftKey&&jC(n,Q.Z)||wZ&&n.ctrlKey&&!n.shiftKey&&jC(n,Q.Y),PanelComponent:({updateData:n,data:r})=>{let{isRedoStackEmpty:i}=Ine(e.onHistoryChangedEmitter,new v9(e.isUndoStackEmpty,e.isRedoStackEmpty));return m.jsx(Ot,{type:"button",icon:wB,"aria-label":j("buttons.redo"),onClick:n,size:(r==null?void 0:r.size)||"medium",disabled:i,"data-testid":"button-redo"})}}),SS=(e,t,n,r,i,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,r,s))&&vn(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${i.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}},nFe=class{constructor(e,t,n,r){Z(this,"actions",{}),Z(this,"updater"),Z(this,"getAppState"),Z(this,"getElementsIncludingDeleted"),Z(this,"app"),Z(this,"renderAction",(i,s)=>{let o=this.app.props.UIOptions.canvasActions;if(this.actions[i]&&"PanelComponent"in this.actions[i]&&(!(i in o)||o[i])){let a=this.actions[i],l=a.PanelComponent;l.displayName="PanelComponent";let f=this.getElementsIncludingDeleted(),c=this.getAppState(),d=u=>{SS(a,"ui",c,f,this.app,u),this.updater(a.perform(this.getElementsIncludingDeleted(),this.getAppState(),u,this.app))};return m.jsx(l,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:d,appProps:this.app.props,app:this.app,data:s})}return null}),Z(this,"isActionEnabled",i=>{let s=this.getElementsIncludingDeleted(),o=this.getAppState();return!i.predicate||i.predicate(s,o,this.app.props,this.app)}),this.updater=i=>{if(zb(i))i.then(s=>e(s));else return e(i)},this.getAppState=t,this.getElementsIncludingDeleted=n,this.app=r}registerAction(e){this.actions[e.name]=e}registerAll(e){e.forEach(t=>this.registerAction(t))}handleKeyDown(e){let t=this.app.props.UIOptions.canvasActions,n=Object.values(this.actions).sort((a,l)=>(l.keyPriority||0)-(a.keyPriority||0)).filter(a=>(a.name in t?t[a.name]:!0)&&a.keyTest&&a.keyTest(e,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(n.length!==1)return n.length>1&&console.warn("Canceling as multiple actions match this shortcut",n),!1;let r=n[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;let i=this.getElementsIncludingDeleted(),s=this.getAppState();return SS(r,"keyboard",s,i,this.app,null),e.preventDefault(),e.stopPropagation(),this.updater(n[0].perform(i,s,null,this.app)),!0}executeAction(e,t="api",n=null){let r=this.getElementsIncludingDeleted(),i=this.getAppState();SS(e,t,i,r,this.app,n),this.updater(e.perform(r,i,n,this.app))}},hz=e=>{let t=Array.from(e.values());return{x:mz(t,n=>n.x)/t.length,y:mz(t,n=>n.y)/t.length}},pz=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),mz=(e,t)=>e.reduce((n,r)=>n+t(r),0),rFe=({children:e,left:t,top:n,onCloseRequest:r,fitInViewport:i=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{let f=T.useRef(null);T.useEffect(()=>{let d=f.current;if(!d)return;d.contains(document.activeElement)||d.focus();let u=h=>{var g,U,y;if(h.key===Q.TAB){let x=IC(d),{activeElement:w}=document,E=x.findIndex(S=>S===w);w===d?(h.shiftKey?(g=x[x.length-1])==null||g.focus():x[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):E===0&&h.shiftKey?((U=x[x.length-1])==null||U.focus(),h.preventDefault(),h.stopImmediatePropagation()):E===x.length-1&&!h.shiftKey&&((y=x[0])==null||y.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",u),()=>d.removeEventListener("keydown",u)},[]);let c=T.useRef(null);return T.useLayoutEffect(()=>{var d,u;if(i&&f.current&&n!=null&&t!=null){let h=f.current,{width:g,height:U}=h.getBoundingClientRect();if(((d=c.current)==null?void 0:d.top)===n&&((u=c.current)==null?void 0:u.left)===t)return;c.current={top:n,left:t},g>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+g-s>a?h.style.left=`${a-g-10}px`:h.style.left=`${t}px`,U>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+U-o>l?h.style.top=`${l-U}px`:h.style.top=`${n}px`}},[n,t,i,a,l,s,o]),T.useEffect(()=>{if(r){let d=u=>{var h;(h=f.current)!=null&&h.contains(u.target)||ii.unstable_batchedUpdates(()=>r(u))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[r]),m.jsx("div",{className:"popover",ref:f,tabIndex:-1,children:e})},Br="separator",iFe=Te.memo(({actionManager:e,items:t,top:n,left:r,onClose:i})=>{let s=e8(),o=bx(),a=t.reduce((l,f)=>(f&&(f===Br||!f.predicate||f.predicate(o,s,e.app.props,e.app))&&l.push(f),l),[]);return m.jsx(rFe,{onCloseRequest:()=>{i()},top:n,left:r,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,children:m.jsx("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,f)=>{var u;if(l===Br)return!a[f-1]||a[f-1]===Br?null:m.jsx("hr",{className:"context-menu-item-separator"},f);let c=l.name,d="";return l.label&&(typeof l.label=="function"?d=j(l.label(o,s,e.app)):d=j(l.label)),m.jsx("li",{"data-testid":c,onClick:()=>{i(()=>{e.executeAction(l,"contextMenu")})},children:m.jsxs("button",{type:"button",className:ze("context-menu-item",{dangerous:c==="deleteSelectedElements",checkmark:(u=l.checked)==null?void 0:u.call(l,s)}),children:[m.jsx("div",{className:"context-menu-item__label",children:d}),m.jsx("kbd",{className:"context-menu-item__shortcut",children:c?Vi(c):""})]})},f)})})})}),sFe=({children:e,onClose:t})=>{let[n,r]=T.useState(!!e),{container:i}=Uc(),s=Te.useCallback(()=>{r(!1),t&&t(),i==null||i.focus()},[t,i]);return m.jsx(m.Fragment,{children:n&&m.jsx(ul,{size:"small",onCloseRequest:s,title:j("errorDialog.title"),children:m.jsx("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},Rne=function({onChange:e,value:t,choices:n,name:r}){return m.jsx("div",{className:"RadioGroup",children:n.map(i=>m.jsxs("div",{className:ze("RadioGroup__choice",{active:i.value===t}),title:i.ariaLabel,children:[m.jsx("input",{name:r,type:"radio",checked:i.value===t,onChange:()=>e(i.value),"aria-label":i.ariaLabel}),i.label]},String(i.value)))})},by=({title:e,name:t,checked:n,onChange:r,disabled:i=!1})=>m.jsx("div",{className:ze("Switch",{toggled:n,disabled:i}),children:m.jsx("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:i,onChange:()=>r(!n),onKeyDown:s=>{s.key===" "&&r(!n)}})}),Z5=T.forwardRef(({children:e,icon:t,onClick:n,label:r,variant:i="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:f},c)=>{let[d,u]=T.useState(!1),h=async U=>{let y=n==null?void 0:n(U);if(zb(y)){let x=window.setTimeout(()=>{u(!0)},50);try{await y}catch(w){if(w instanceof D7)console.warn(w);else throw w}finally{clearTimeout(x),u(!1)}}},g=d?"loading":f;return s=g==="success"?"success":s,m.jsx("button",{className:ze("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${i}`,`ExcButton--size-${o}`,`ExcButton--status-${g}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":r,ref:c,disabled:g==="loading"||g==="success",children:m.jsxs("div",{className:"ExcButton__contents",children:[g==="loading"?m.jsx(Pf,{className:"ExcButton__statusIcon"}):g==="success"&&m.jsx("div",{className:"ExcButton__statusIcon",children:nEe}),t&&m.jsx("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),i!=="icon"&&(e??r)]})})}),oFe=2e3,aFe=()=>{let[e,t]=T.useState(null),n=T.useRef(0),r=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},oFe)},i=T.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:i,onCopy:r}},lFe="filter"in document.createElement("canvas").getContext("2d"),cFe=()=>m.jsxs("div",{children:[m.jsx("h3",{children:j("canvasError.cannotShowPreview")}),m.jsx("p",{children:m.jsx("span",{children:j("canvasError.canvasTooBig")})}),m.jsxs("em",{children:["(",j("canvasError.canvasTooBigTip"),")"]})]}),fFe=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:r,onExportImage:i,name:s})=>{let o=_r(t,e),[a,l]=T.useState(s),[f,c]=T.useState(o),[d,u]=T.useState(e.exportBackground),[h,g]=T.useState(e.exportWithDarkMode),[U,y]=T.useState(e.exportEmbedScene),[x,w]=T.useState(e.exportScale),E=T.useRef(null),[S,M]=T.useState(null),{onCopy:A,copyStatus:C,resetCopyStatus:I}=aFe();T.useEffect(()=>{I()},[a,d,h,x,U,I]);let{exportedElements:R,exportingFrame:L}=hx(t,e,f);return T.useEffect(()=>{let _=E.current;if(!_)return;let O=_.offsetWidth,$=_.offsetHeight;O&&lI({elements:R,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:x,exportEmbedScene:U},files:n,exportPadding:T6,maxWidthOrHeight:Math.max(O,$),exportingFrame:L}).then(B=>(M(null),Q2(B).then(()=>{_.replaceChildren(B)}).catch(F=>{throw F.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(j("canvasError.canvasTooBig")):F}))).catch(B=>{console.error(B),M(B)})},[e,n,R,L,a,d,h,x,U]),m.jsxs("div",{className:"ImageExportModal",children:[m.jsx("h3",{children:j("imageExportDialog.header")}),m.jsxs("div",{className:"ImageExportModal__preview",children:[m.jsx("div",{className:"ImageExportModal__preview__canvas",ref:E,children:S&&m.jsx(cFe,{})}),m.jsx("div",{className:"ImageExportModal__preview__filename",children:!c1&&m.jsx("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:_=>{l(_.target.value),r.executeAction(rje,"ui",_.target.value)}})})]}),m.jsxs("div",{className:"ImageExportModal__settings",children:[m.jsx("h3",{children:j("imageExportDialog.header")}),o&&m.jsx(Vg,{label:j("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:m.jsx(by,{name:"exportOnlySelected",checked:f,onChange:_=>{c(_)}})}),m.jsx(Vg,{label:j("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:m.jsx(by,{name:"exportBackgroundSwitch",checked:d,onChange:_=>{u(_),r.executeAction(sje,"ui",_)}})}),lFe&&m.jsx(Vg,{label:j("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:m.jsx(by,{name:"exportDarkModeSwitch",checked:h,onChange:_=>{g(_),r.executeAction(oje,"ui",_)}})}),m.jsx(Vg,{label:j("imageExportDialog.label.embedScene"),tooltip:j("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:m.jsx(by,{name:"exportEmbedSwitch",checked:U,onChange:_=>{y(_),r.executeAction(nne,"ui",_)}})}),m.jsx(Vg,{label:j("imageExportDialog.label.scale"),name:"exportScale",children:m.jsx(Rne,{name:"exportScale",value:x,onChange:_=>{w(_),r.executeAction(ije,"ui",_)},choices:bT.map(_=>({value:_,label:`${_}`}))})}),m.jsxs("div",{className:"ImageExportModal__settings__buttons",children:[m.jsx(Z5,{className:"ImageExportModal__settings__buttons__button",label:j("imageExportDialog.title.exportToPng"),onClick:()=>i(jE.png,R,{exportingFrame:L}),icon:DB,children:j("imageExportDialog.button.exportToPng")}),m.jsx(Z5,{className:"ImageExportModal__settings__buttons__button",label:j("imageExportDialog.title.exportToSvg"),onClick:()=>i(jE.svg,R,{exportingFrame:L}),icon:DB,children:j("imageExportDialog.button.exportToSvg")}),(aI||O2)&&m.jsx(Z5,{className:"ImageExportModal__settings__buttons__button",label:j("imageExportDialog.title.copyPngToClipboard"),status:C,onClick:async()=>{await i(jE.clipboard,R,{exportingFrame:L}),A()},icon:TT,children:j("imageExportDialog.button.copyPngToClipboard")})]})]})]})},Vg=({label:e,children:t,tooltip:n,name:r})=>m.jsxs("div",{className:"ImageExportModal__settings__setting",title:e,children:[m.jsxs("label",{htmlFor:r,className:"ImageExportModal__settings__setting__label",children:[e,n&&m.jsx(n1,{label:n,long:!0,children:tEe})]}),m.jsx("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),dFe=({elements:e,appState:t,files:n,actionManager:r,onExportImage:i,onCloseRequest:s,name:o})=>{let[{appStateSnapshot:a,elementsSnapshot:l}]=T.useState(()=>({appStateSnapshot:yf(t),elementsSnapshot:yf(e)}));return m.jsx(ul,{onCloseRequest:s,size:"wide",title:!1,children:m.jsx(fFe,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:r,onExportImage:i,name:o})})},_ne=({children:e,side:t,className:n})=>m.jsx("div",{className:ze("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),Yp=100,Zp=100,gz=e=>{switch(e){case Q.ARROW_UP:return"up";case Q.ARROW_DOWN:return"down";case Q.ARROW_RIGHT:return"right";case Q.ARROW_LEFT:return"left";default:return"right"}},Pne=(e,t,n,r)=>{let i=[...n.values()].reduce((s,o)=>{var l;let a;if(Fe(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){let f=n.get(a.elementId);if(!f)return s;Gi(sl(f),"not an ExcalidrawBindableElement");let c=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=Fq(t,zl(t),[c[0]+o.x,c[1]+o.y]);s.push({relative:f,heading:d})}return s},[]);switch(r){case"up":return i.filter(s=>nr(s.heading,Os)).map(s=>s.relative);case"down":return i.filter(s=>nr(s.heading,oi)).map(s=>s.relative);case"right":return i.filter(s=>nr(s.heading,er)).map(s=>s.relative);case"left":return i.filter(s=>nr(s.heading,Ls)).map(s=>s.relative)}},MM=(e,t,n)=>Pne("successors",e,t,n),AM=(e,t,n)=>Pne("predecessors",e,t,n),uFe=(e,t,n)=>{let r=Zp+e.width;if(n==="up"||n==="down"){let a=Yp+e.height,l=e.x,f=e.x+e.width;if(t.every(c=>c.x+c.width<l||c.x>f))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){let a=e.y,l=e.y+e.height;if(t.every(f=>f.y+f.height<a||f.y>l))return{x:(Zp+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){let a=Yp+e.height,l=(t.length,a),f=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="up"?{x:f,y:l*-1}:{x:f,y:l}}let i=Yp+e.height,s=(t.length,Zp+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},hFe=(e,t,n,r)=>{let i=MM(e,t,r),s=AM(e,t,r),o=uFe(e,[...i,...s],r),a=cc({type:e.type,x:e.x+o.x,y:e.y+o.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Gi(N7(a),"not an ExcalidrawFlowchartNodeElement");let l=Dne(e,a,t,r,n);return{nextNode:a,bindingArrow:l}},pFe=(e,t,n,r,i)=>{let s=[];for(let o=0;o<i;o++){let a,l;if(r==="left"||r==="right"){let d=Yp*(i-1)+i*e.height,u=e.y+e.height/2-d/2,h=Zp+e.width;r==="left"&&(h*=-1),a=e.x+h;let g=(Yp+e.height)*o;l=u+g}else{let d=Zp*(i-1)+i*e.width,u=e.x+e.width/2-d/2,h=Yp+e.height;r==="up"&&(h*=-1),l=e.y+h;let g=(Zp+e.width)*o;a=u+g}let f=cc({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});Gi(N7(f),"not an ExcalidrawFlowchartNodeElement");let c=Dne(e,f,t,r,n);s.push(f),s.push(c)}return s},Dne=(e,t,n,r,i)=>{let s,o;switch(r){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let a,l;switch(r){case"up":{a=t.x+t.width/2-s,l=t.y+t.height-o+6;break}case"down":{a=t.x+t.width/2-s,l=t.y-o-6;break}case"right":{a=t.x-s-6,l=t.y-o+t.height/2;break}case"left":{a=t.x+t.width-s+6,l=t.y-o+t.height/2;break}}let f=zT({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[P(0,0),P(a,l)],elbowed:!0});ac(f,e,"start",n),ac(f,t,"end",n);let c=new Map;c.set(e.id,e),c.set(t.id,t),c.set(f.id,f),je.movePoints(f,[{index:1,point:f.points[1]}]);let d=QT(f,aa(new Map([...n.entries(),[e.id,e],[t.id,t],[f.id,f]])),{points:f.points});return{...f,...d}},mFe=class{constructor(){Z(this,"isExploring",!1),Z(this,"sameLevelNodes",[]),Z(this,"sameLevelIndex",0),Z(this,"direction",null),Z(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(e,t,n){if(!sl(e))return null;if(n!==this.direction&&this.clear(),this.visitedNodes.has(e.id)||this.visitedNodes.add(e.id),this.isExploring&&n===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;let r=[...MM(e,t,n),...AM(e,t,n)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=n,this.visitedNodes.add(r[0].id),r[0].id;if(n===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(e.id);let i=["up","right","down","left"].filter(s=>s!==n).map(s=>[...MM(e,t,s),...AM(e,t,s)]).flat().filter(s=>!this.visitedNodes.has(s.id));for(let s of i)if(!this.visitedNodes.has(s.id))return this.visitedNodes.add(s.id),this.isExploring=!0,this.direction=n,s.id}return null}},gFe=class{constructor(){Z(this,"isCreatingChart",!1),Z(this,"numberOfNodes",0),Z(this,"direction","right"),Z(this,"pendingNodes",null)}createNodes(e,t,n,r){if(r!==this.direction){let{nextNode:i,bindingArrow:s}=hFe(e,t,n,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=r,this.pendingNodes=[i,s]}else{this.numberOfNodes+=1;let i=pFe(e,t,n,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=r,this.pendingNodes=i}if(e.frameId){let i=t.get(e.frameId);Gi(i&&zZ(i),"not an ExcalidrawFrameElement"),i&&this.pendingNodes.every(s=>Kb([s],i,t)||T0(s,i,t))&&(this.pendingNodes=this.pendingNodes.map(s=>ye(s,{frameId:e.frameId},!1)))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}},bFe=(e,t)=>{var n,r;for(let[,i]of t)if(i.type==="arrow"&&(((n=i.startBinding)==null?void 0:n.elementId)===e.id||((r=i.endBinding)==null?void 0:r.elementId)===e.id))return!0;return!1},UFe=({appState:e,isMobile:t,device:n,app:r})=>{var c,d;let{activeTool:i,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((c=e.openSidebar)==null?void 0:c.name)===Qa.name&&e.openSidebar.tab===Vp&&((d=e.searchMatches)!=null&&d.length))return j("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(Il(e))return j("hints.eraserRevert");if(i.type==="arrow"||i.type==="line")return l?j("hints.linearElementMulti"):i.type==="arrow"?j("hints.arrowTool",{arrowShortcut:Ue("A")}):j("hints.linearElement");if(i.type==="freedraw")return j("hints.freeDraw");if(i.type==="text")return j("hints.text");if(i.type==="embeddable")return j("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return j("hints.placeImage");let f=r.scene.getSelectedElements(e);if(s&&a==="mouse"&&f.length===1){let u=f[0];return mt(u)&&u.points.length===2?j("hints.lockAngle"):Yt(u)?j("hints.resizeImage"):j("hints.resize")}if(o&&a==="mouse")return j("hints.rotate");if(f.length===1&&Oe(f[0]))return j("hints.text_selected");if(e.editingTextElement)return j("hints.text_editing");if(e.croppingElementId)return j("hints.leaveCropEditor");if(f.length===1&&Yt(f[0]))return j("hints.enterCropEditor");if(i.type==="selection"){if(e.selectionElement&&!f.length&&!e.editingTextElement&&!e.editingLinearElement)return j("hints.deepBoxSelect");if(K2(r)&&e.selectedElementsAreBeingDragged)return j("hints.disableSnapping");if(!f.length&&!t)return j("hints.canvasPanning");if(f.length===1){if(mt(f[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?j("hints.lineEditor_pointSelected"):j("hints.lineEditor_nothingSelected"):j("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&wh(f[0]))return N7(f[0])?bFe(f[0],r.scene.getNonDeletedElementsMap())?[j("hints.bindTextToElement"),j("hints.createFlowchart")]:[j("hints.bindTextToElement"),j("hints.createFlowchart")]:j("hints.bindTextToElement")}}return null},Lne=({appState:e,isMobile:t,device:n,app:r})=>{let i=UFe({appState:e,isMobile:t,device:n,app:r});if(!i)return null;let s=Array.isArray(i)?i.map(o=>Ue(o).replace(/\. ?$/,"")).join(". "):Ue(i);return m.jsx("div",{className:"HintViewer",children:m.jsx("span",{children:s})})},yFe="medium",bz={CHECKED:CT,UNCHECKED:R7},One=e=>m.jsxs("label",{className:ze("ToolIcon ToolIcon__lock",`ToolIcon_size_${yFe}`,{"is-mobile":e.isMobile}),title:`${e.title}  Q`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),m.jsx("div",{className:"ToolIcon__icon",children:e.checked?bz.CHECKED:bz.UNCHECKED})]}),nb=({heading:e,children:t,...n})=>{let{id:r}=Uc(),i=m.jsx("h2",{className:"visually-hidden",id:`${r}-${e}-title`,children:j(`headings.${e}`)});return m.jsx("section",{...n,"aria-labelledby":`${r}-${e}-title`,children:typeof t=="function"?t(i):m.jsxs(m.Fragment,{children:[i,t]})})},Rl=4,c0=6,xFe="rgba(0,0,0,0.3)",vFe=(e,t,n,r)=>{if(!e.length)return{horizontal:null,vertical:null};let[i,s,o,a]=tn(e),l=t/r.zoom.value,f=n/r.zoom.value,c=t-l,d=n-f,u={top:parseInt(ny("sat"))||0,bottom:parseInt(ny("sab"))||0,left:parseInt(ny("sal"))||0,right:parseInt(ny("sar"))||0},h=eb().rtl,g=-r.scrollX+c/2+u.left,U=-r.scrollY+d/2+u.top,y=g+l-u.right,x=U+f-u.bottom,w=Math.min(i,g),E=Math.min(s,U),S=Math.max(o,y),M=Math.max(a,x);return{horizontal:g===w&&y===S?null:{x:Math.max(u.left,Rl)+(g-w)/(S-w)*t,y:n-c0-Math.max(Rl,u.bottom),width:(y-g)/(S-w)*t-Math.max(Rl*2,u.left+u.right),height:c0},vertical:U===E&&x===M?null:{x:h?Math.max(u.left,Rl):t-c0-Math.max(u.right,Rl),y:(U-E)/(M-E)*n+Math.max(u.top,Rl),width:c0,height:(x-U)/(M-E)*n-Math.max(Rl*2,u.top+u.bottom)}}},Uz=(e,t,n)=>{let[r,i]=[e.horizontal,e.vertical].map(s=>s!=null&&s.x<=t&&t<=s.x+s.width&&s.y<=n&&n<=s.y+s.height);return{isOverEither:r||i,isOverHorizontal:r,isOverVertical:i}},wFe="medium",jne=e=>e.penDetected?m.jsxs("label",{className:ze("ToolIcon ToolIcon__penMode",`ToolIcon_size_${wFe}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m.jsx("div",{className:"ToolIcon__icon",children:ewe})]}):null,Bne=e=>m.jsx(Ot,{className:ze("Shape",{fillable:!1}),type:"radio",icon:sq,name:"editor-current-shape",checked:e.checked,title:`${e.title}  H`,keyBindingLabel:e.isMobile?void 0:Q.H.toLocaleUpperCase(),"aria-label":`${e.title}  H`,"aria-keyshortcuts":Q.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),EFe=({appState:e,elements:t,actionManager:n,setAppState:r,onLockToggle:i,onHandToolToggle:s,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:f,device:c,renderWelcomeScreen:d,UIOptions:u,app:h})=>{var E,S;let{WelcomeScreenCenterTunnel:g,MainMenuTunnel:U,DefaultSidebarTriggerTunnel:y}=vo(),x=()=>m.jsxs(_ne,{side:"top",className:"App-top-bar",children:[d&&m.jsx(g.Out,{}),m.jsx(nb,{heading:"shapes",children:M=>{var A;return m.jsx(Jo.Col,{gap:4,align:"center",children:m.jsxs(Jo.Row,{gap:1,className:"App-toolbar-container",children:[m.jsxs(tl,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[M,m.jsx(Jo.Row,{gap:1,children:m.jsx(kne,{appState:e,activeTool:e.activeTool,UIOptions:u,app:h})})]}),a&&a(!0,e),m.jsxs("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((A=e.openDialog)==null?void 0:A.name)!=="elementLinkSelector"&&m.jsx(y.Out,{}),m.jsx(jne,{checked:e.penMode,onChange:()=>o(null),title:j("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),m.jsx(One,{checked:e.activeTool.locked,onChange:i,title:j("toolBar.lock"),isMobile:!0}),m.jsx(Bne,{checked:o6(e),onChange:()=>s(),title:j("toolBar.hand"),isMobile:!0})]})]})})}}),m.jsx(Lne,{appState:e,isMobile:!0,device:c,app:h})]}),w=()=>{var M;return e.viewModeEnabled||((M=e.openDialog)==null?void 0:M.name)==="elementLinkSelector"?m.jsx("div",{className:"App-toolbar-content",children:m.jsx(U.Out,{})}):m.jsxs("div",{className:"App-toolbar-content",children:[m.jsx(U.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),m.jsxs("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return m.jsxs(m.Fragment,{children:[f(),!e.viewModeEnabled&&((E=e.openDialog)==null?void 0:E.name)!=="elementLinkSelector"&&x(),m.jsx("div",{className:"App-bottom-bar",style:{marginBottom:c0+Rl*2,marginLeft:c0+Rl*2,marginRight:c0+Rl*2},children:m.jsxs(tl,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((S=e.openDialog)==null?void 0:S.name)!=="elementLinkSelector"&&xI(e,t)?m.jsx(nb,{className:"App-mobile-menu",heading:"selectedShapeActions",children:m.jsx(Sne,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,m.jsxs("footer",{className:"App-toolbar",children:[w(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&m.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(M=>({...G2(t,M)}))},children:j("buttons.scrollBackToContent")})]})]})})]})},yz=e=>{let t=T.useRef(null),[n,r]=T.useState(null);return T.useLayoutEffect(()=>{if(!e.spreadsheet)return;let i=mNe(e.chartType,e.spreadsheet,0,0);r(i);let s,o=t.current;return(async()=>{var a;return s=await YT(i,{exportBackground:!1,viewBackgroundColor:li.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),m.jsx("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:m.jsx("div",{ref:t})})},SFe=({setAppState:e,appState:t,onClose:n})=>{let{onInsertElements:r}=bc(),i=Te.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{r(a),vn("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return m.jsx(ul,{size:"small",onCloseRequest:i,title:j("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:m.jsxs("div",{className:"container",children:[m.jsx(yz,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),m.jsx(yz,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},kFe=()=>m.jsxs("div",{className:"HelpDialog__header",children:[m.jsxs("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:xB}),j("helpDialog.documentation")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:xB}),j("helpDialog.blog")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:QZ}),j("helpDialog.github")]}),m.jsxs("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:"HelpDialog__link-icon",children:vEe}),"YouTube"]})]}),CFe=e=>m.jsxs(m.Fragment,{children:[m.jsx("h3",{children:e.title}),m.jsx("div",{className:"HelpDialog__islands-container",children:e.children})]}),kS=e=>m.jsxs("div",{className:`HelpDialog__island ${e.className}`,children:[m.jsx("h4",{className:"HelpDialog__island-title",children:e.caption}),m.jsx("div",{className:"HelpDialog__island-content",children:e.children})]});function*MFe(e,t){let n=!0;for(let r of e)n||(yield t),n=!1,yield r}var AFe=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),$e=({label:e,shortcuts:t,isOr:n=!0})=>{let r=t.map(i=>(i.endsWith("++")?[...i.slice(0,-2).split("+"),"+"]:i.split("+")).map(s=>m.jsx(TFe,{children:AFe(s)},s)));return m.jsxs("div",{className:"HelpDialog__shortcut",children:[m.jsx("div",{children:e}),m.jsx("div",{className:"HelpDialog__key-container",children:[...MFe(r,n?j("helpDialog.or"):null)]})]})},TFe=e=>m.jsx("kbd",{className:"HelpDialog__key",...e}),IFe=({onClose:e})=>{let t=Te.useCallback(()=>{e&&e()},[e]);return m.jsx(m.Fragment,{children:m.jsxs(ul,{onCloseRequest:t,title:j("helpDialog.title"),className:"HelpDialog",children:[m.jsx(kFe,{}),m.jsxs(CFe,{title:j("helpDialog.shortcuts"),children:[m.jsxs(kS,{className:"HelpDialog__island--tools",caption:j("helpDialog.tools"),children:[m.jsx($e,{label:j("toolBar.hand"),shortcuts:[Q.H]}),m.jsx($e,{label:j("toolBar.selection"),shortcuts:[Q.V,Q[1]]}),m.jsx($e,{label:j("toolBar.rectangle"),shortcuts:[Q.R,Q[2]]}),m.jsx($e,{label:j("toolBar.diamond"),shortcuts:[Q.D,Q[3]]}),m.jsx($e,{label:j("toolBar.ellipse"),shortcuts:[Q.O,Q[4]]}),m.jsx($e,{label:j("toolBar.arrow"),shortcuts:[Q.A,Q[5]]}),m.jsx($e,{label:j("toolBar.line"),shortcuts:[Q.L,Q[6]]}),m.jsx($e,{label:j("toolBar.freedraw"),shortcuts:[Q.P,Q[7]]}),m.jsx($e,{label:j("toolBar.text"),shortcuts:[Q.T,Q[8]]}),m.jsx($e,{label:j("toolBar.image"),shortcuts:[Q[9]]}),m.jsx($e,{label:j("toolBar.eraser"),shortcuts:[Q.E,Q[0]]}),m.jsx($e,{label:j("toolBar.frame"),shortcuts:[Q.F]}),m.jsx($e,{label:j("toolBar.laser"),shortcuts:[Q.K]}),m.jsx($e,{label:j("labels.eyeDropper"),shortcuts:[Q.I,"Shift+S","Shift+G"]}),m.jsx($e,{label:j("helpDialog.editLineArrowPoints"),shortcuts:[Ue("CtrlOrCmd+Enter")]}),m.jsx($e,{label:j("helpDialog.editText"),shortcuts:[Ue("Enter")]}),m.jsx($e,{label:j("helpDialog.textNewLine"),shortcuts:[Ue("Enter"),Ue("Shift+Enter")]}),m.jsx($e,{label:j("helpDialog.textFinish"),shortcuts:[Ue("Esc"),Ue("CtrlOrCmd+Enter")]}),m.jsx($e,{label:j("helpDialog.curvedArrow"),shortcuts:["A",j("helpDialog.click"),j("helpDialog.click"),j("helpDialog.click")],isOr:!1}),m.jsx($e,{label:j("helpDialog.curvedLine"),shortcuts:["L",j("helpDialog.click"),j("helpDialog.click"),j("helpDialog.click")],isOr:!1}),m.jsx($e,{label:j("helpDialog.cropStart"),shortcuts:[j("helpDialog.doubleClick"),Ue("Enter")],isOr:!0}),m.jsx($e,{label:j("helpDialog.cropFinish"),shortcuts:[Ue("Enter"),Ue("Escape")],isOr:!0}),m.jsx($e,{label:j("toolBar.lock"),shortcuts:[Q.Q]}),m.jsx($e,{label:j("helpDialog.preventBinding"),shortcuts:[Ue("CtrlOrCmd")]}),m.jsx($e,{label:j("toolBar.link"),shortcuts:[Ue("CtrlOrCmd+K")]})]}),m.jsxs(kS,{className:"HelpDialog__island--view",caption:j("helpDialog.view"),children:[m.jsx($e,{label:j("buttons.zoomIn"),shortcuts:[Ue("CtrlOrCmd++")]}),m.jsx($e,{label:j("buttons.zoomOut"),shortcuts:[Ue("CtrlOrCmd+-")]}),m.jsx($e,{label:j("buttons.resetZoom"),shortcuts:[Ue("CtrlOrCmd+0")]}),m.jsx($e,{label:j("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),m.jsx($e,{label:j("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),m.jsx($e,{label:j("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),m.jsx($e,{label:j("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),m.jsx($e,{label:j("buttons.zenMode"),shortcuts:[Ue("Alt+Z")]}),m.jsx($e,{label:j("buttons.objectsSnapMode"),shortcuts:[Ue("Alt+S")]}),m.jsx($e,{label:j("labels.toggleGrid"),shortcuts:[Ue("CtrlOrCmd+'")]}),m.jsx($e,{label:j("labels.viewMode"),shortcuts:[Ue("Alt+R")]}),m.jsx($e,{label:j("labels.toggleTheme"),shortcuts:[Ue("Alt+Shift+D")]}),m.jsx($e,{label:j("stats.fullTitle"),shortcuts:[Ue("Alt+/")]}),m.jsx($e,{label:j("search.title"),shortcuts:[Vi("searchMenu")]}),m.jsx($e,{label:j("commandPalette.title"),shortcuts:O2?[Vi("commandPalette")]:[Vi("commandPalette"),Vi("commandPalette",1)]})]}),m.jsxs(kS,{className:"HelpDialog__island--editor",caption:j("helpDialog.editor"),children:[m.jsx($e,{label:j("helpDialog.createFlowchart"),shortcuts:[Ue("CtrlOrCmd+Arrow Key")],isOr:!0}),m.jsx($e,{label:j("helpDialog.navigateFlowchart"),shortcuts:[Ue("Alt+Arrow Key")],isOr:!0}),m.jsx($e,{label:j("labels.moveCanvas"),shortcuts:[Ue(`Space+${j("helpDialog.drag")}`),Ue(`Wheel+${j("helpDialog.drag")}`)],isOr:!0}),m.jsx($e,{label:j("buttons.clearReset"),shortcuts:[Ue("CtrlOrCmd+Delete")]}),m.jsx($e,{label:j("labels.delete"),shortcuts:[Ue("Delete")]}),m.jsx($e,{label:j("labels.cut"),shortcuts:[Ue("CtrlOrCmd+X")]}),m.jsx($e,{label:j("labels.copy"),shortcuts:[Ue("CtrlOrCmd+C")]}),m.jsx($e,{label:j("labels.paste"),shortcuts:[Ue("CtrlOrCmd+V")]}),m.jsx($e,{label:j("labels.pasteAsPlaintext"),shortcuts:[Ue("CtrlOrCmd+Shift+V")]}),m.jsx($e,{label:j("labels.selectAll"),shortcuts:[Ue("CtrlOrCmd+A")]}),m.jsx($e,{label:j("labels.multiSelect"),shortcuts:[Ue(`Shift+${j("helpDialog.click")}`)]}),m.jsx($e,{label:j("helpDialog.deepSelect"),shortcuts:[Ue(`CtrlOrCmd+${j("helpDialog.click")}`)]}),m.jsx($e,{label:j("helpDialog.deepBoxSelect"),shortcuts:[Ue(`CtrlOrCmd+${j("helpDialog.drag")}`)]}),(aI||O2)&&m.jsx($e,{label:j("labels.copyAsPng"),shortcuts:[Ue("Shift+Alt+C")]}),m.jsx($e,{label:j("labels.copyStyles"),shortcuts:[Ue("CtrlOrCmd+Alt+C")]}),m.jsx($e,{label:j("labels.pasteStyles"),shortcuts:[Ue("CtrlOrCmd+Alt+V")]}),m.jsx($e,{label:j("labels.sendToBack"),shortcuts:[Ue(sc?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),m.jsx($e,{label:j("labels.bringToFront"),shortcuts:[Ue(sc?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),m.jsx($e,{label:j("labels.sendBackward"),shortcuts:[Ue("CtrlOrCmd+[")]}),m.jsx($e,{label:j("labels.bringForward"),shortcuts:[Ue("CtrlOrCmd+]")]}),m.jsx($e,{label:j("labels.alignTop"),shortcuts:[Ue("CtrlOrCmd+Shift+Up")]}),m.jsx($e,{label:j("labels.alignBottom"),shortcuts:[Ue("CtrlOrCmd+Shift+Down")]}),m.jsx($e,{label:j("labels.alignLeft"),shortcuts:[Ue("CtrlOrCmd+Shift+Left")]}),m.jsx($e,{label:j("labels.alignRight"),shortcuts:[Ue("CtrlOrCmd+Shift+Right")]}),m.jsx($e,{label:j("labels.duplicateSelection"),shortcuts:[Ue("CtrlOrCmd+D"),Ue(`Alt+${j("helpDialog.drag")}`)]}),m.jsx($e,{label:j("helpDialog.toggleElementLock"),shortcuts:[Ue("CtrlOrCmd+Shift+L")]}),m.jsx($e,{label:j("buttons.undo"),shortcuts:[Ue("CtrlOrCmd+Z")]}),m.jsx($e,{label:j("buttons.redo"),shortcuts:wZ?[Ue("CtrlOrCmd+Y"),Ue("CtrlOrCmd+Shift+Z")]:[Ue("CtrlOrCmd+Shift+Z")]}),m.jsx($e,{label:j("labels.group"),shortcuts:[Ue("CtrlOrCmd+G")]}),m.jsx($e,{label:j("labels.ungroup"),shortcuts:[Ue("CtrlOrCmd+Shift+G")]}),m.jsx($e,{label:j("labels.flipHorizontal"),shortcuts:[Ue("Shift+H")]}),m.jsx($e,{label:j("labels.flipVertical"),shortcuts:[Ue("Shift+V")]}),m.jsx($e,{label:j("labels.showStroke"),shortcuts:[Ue("S")]}),m.jsx($e,{label:j("labels.showBackground"),shortcuts:[Ue("G")]}),m.jsx($e,{label:j("labels.showFonts"),shortcuts:[Ue("Shift+F")]}),m.jsx($e,{label:j("labels.decreaseFontSize"),shortcuts:[Ue("CtrlOrCmd+Shift+<")]}),m.jsx($e,{label:j("labels.increaseFontSize"),shortcuts:[Ue("CtrlOrCmd+Shift+>")]})]})]})]})})},NFe=4,RFe=8,_Fe=({shouldWrap:e,children:t,username:n})=>e?m.jsx(n1,{label:n||"Unknown user",children:t}):m.jsx(m.Fragment,{children:t}),CS=({actionManager:e,collaborator:t,socketId:n,withName:r=!1,shouldWrapWithTooltip:i=!1,isBeingFollowed:s})=>{let o={socketId:n,collaborator:t,withName:r,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return m.jsx(_Fe,{username:t.username,shouldWrap:i,children:a},n)},PFe=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],Fne=Te.memo(({className:e,mobile:t,collaborators:n,userToFollow:r})=>{let i=Gs(),s=new Map;n.forEach((g,U)=>{let y=g.id||U;s.set(y,{...g,socketId:U})});let o=Array.from(s.values()).filter(g=>{var U;return(U=g.username)==null?void 0:U.trim()}),[a,l]=Te.useState(""),f=o.filter(g=>{var U;return(U=g.username)==null?void 0:U.toLowerCase().includes(a)}),c=Te.useRef(null);T.useLayoutEffect(()=>{if(c.current){let g=y=>{let x=Math.max(1,Math.min(8,Math.floor(y/38)));u(x)};if(g(c.current.clientWidth),!CC)return;let U=new ResizeObserver(y=>{for(let x of y){let{width:w}=x.contentRect;g(w)}});return U.observe(c.current),()=>{U.disconnect()}}},[]);let[d,u]=Te.useState(NFe),h=o.slice(0,d-1).map(g=>CS({actionManager:i,collaborator:g,socketId:g.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:g.socketId===r}));return t?m.jsx("div",{className:ze("UserList UserList_mobile",e),children:o.map(g=>CS({actionManager:i,collaborator:g,socketId:g.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:g.socketId===r}))}):m.jsx("div",{className:"UserList__wrapper",ref:c,children:m.jsxs("div",{className:ze("UserList",e),style:{"--max-avatars":d},children:[h,o.length>d-1&&m.jsxs(ix,{children:[m.jsxs(sx,{className:"UserList__more",children:["+",o.length-d+1]}),m.jsx(OI,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:m.jsxs(tl,{padding:2,children:[o.length>=RFe&&m.jsx(Gte,{placeholder:j("quickSearch.placeholder"),onChange:l}),m.jsx(Xte,{className:"dropdown-menu UserList__collaborators",placeholder:j("userList.empty"),children:f.length>0?[m.jsx("div",{className:"hint",children:j("userList.hint.text")}),f.map(g=>CS({actionManager:i,collaborator:g,socketId:g.socketId,withName:!0,isBeingFollowed:g.socketId===r}))]:[]}),m.jsx(lte,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;let n=t.collaborators.keys();for(let[r,i]of e.collaborators){let s=t.collaborators.get(r);if(!s||r!==n.next().value||!ki(i,s,PFe))return!1}return!0}),xz=({children:e,color:t})=>m.jsx("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":li[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":li[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":li[t][9]},children:e}),DFe=({elements:e,appState:t,setAppState:n,files:r,actionManager:i,exportOpts:s,canvas:o,onCloseRequest:a})=>{let{onExportToBackend:l}=s;return m.jsx("div",{className:"ExportDialog ExportDialog--json",children:m.jsxs("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&m.jsxs(xz,{color:"lime",children:[m.jsx("div",{className:"Card-icon",children:uwe}),m.jsx("h2",{children:j("exportDialog.disk_title")}),m.jsxs("div",{className:"Card-details",children:[j("exportDialog.disk_details"),!c1&&i.renderAction("changeProjectName")]}),m.jsx(Ot,{className:"Card-button",type:"button",title:j("exportDialog.disk_button"),"aria-label":j("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{i.executeAction(rne,"ui")}})]}),l&&m.jsxs(xz,{color:"pink",children:[m.jsx("div",{className:"Card-icon",children:PC}),m.jsx("h2",{children:j("exportDialog.link_title")}),m.jsx("div",{className:"Card-details",children:j("exportDialog.link_details")}),m.jsx(Ot,{className:"Card-button",type:"button",title:j("exportDialog.link_button"),"aria-label":j("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{vn("export","link",`ui (${Uve()})`),await l(e,t,r),a()}catch(f){n({errorMessage:f.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,r,o)]})})},LFe=({elements:e,appState:t,files:n,actionManager:r,exportOpts:i,canvas:s,setAppState:o})=>{var l;let a=Te.useCallback(()=>{o({openDialog:null})},[o]);return m.jsx(m.Fragment,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&m.jsx(ul,{onCloseRequest:a,title:j("buttons.export"),children:m.jsx(DFe,{elements:e,appState:t,setAppState:o,files:n,actionManager:r,onCloseRequest:a,exportOpts:i,canvas:s})})})},OFe=e=>m.jsx("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${j("helpDialog.title")}  ?`,"aria-label":j("helpDialog.title"),children:MT}),$ne=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:r})=>{let{FooterCenterTunnel:i,WelcomeScreenHelpHintTunnel:s}=vo(),o=Wr(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return m.jsxs("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[m.jsx("div",{className:ze("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:m.jsx(Jo.Col,{gap:2,children:m.jsxs(nb,{heading:"canvasActions",children:[m.jsx($Be,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&m.jsx(zBe,{renderAction:t.renderAction,className:ze("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&m.jsx(VBe,{renderAction:t.renderAction,className:ze("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),m.jsx(i.Out,{}),m.jsx("div",{className:ze("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:m.jsxs("div",{style:{position:"relative"},children:[r&&m.jsx(s.Out,{}),m.jsx(OFe,{onClick:()=>t.executeAction(YI)})]})}),m.jsx(HBe,{actionManager:t,showExitZenModeBtn:n})]})},jFe=$ne;$ne.displayName="Footer";var zne=Te.createContext({}),Hne=({children:e,className:t})=>{let n=Wr(),r=T.useContext(zne),i=!!(n.editor.canFitSidebar&&r.shouldRenderDockButton);return m.jsxs("div",{className:ze("sidebar__header",t),"data-testid":"sidebar-header",children:[e,m.jsxs("div",{className:"sidebar__header__buttons",children:[i&&m.jsx(n1,{label:j("labels.sidebarLock"),children:m.jsx(E6,{onSelect:()=>{var s;return(s=r.onDock)==null?void 0:s.call(r,!r.docked)},selected:!!r.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":j("labels.sidebarLock"),children:Vve})}),m.jsx(E6,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:r.onCloseRequest,"aria-label":j("buttons.close"),children:R6})]})]})};Hne.displayName="SidebarHeader";var Vne=({name:e,tab:t,icon:n,title:r,children:i,onToggle:s,className:o,style:a})=>{var c;let l=Gr(),f=Us();return m.jsxs("label",{title:r,className:"sidebar-trigger__label-element",children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");let u=d.target.checked;l({openSidebar:u?{name:e,tab:t}:null}),s==null||s(u)},checked:((c=f.openSidebar)==null?void 0:c.name)===e,"aria-label":r,"aria-keyshortcuts":"0"}),m.jsxs("div",{className:ze("sidebar-trigger",o),style:a,children:[n&&m.jsx("div",{children:n}),i&&m.jsx("div",{className:"sidebar-trigger__label",children:i})]})]})};Vne.displayName="SidebarTrigger";var Wne=({children:e,...t})=>m.jsx(Cte,{className:"sidebar-triggers",...t,children:e});Wne.displayName="SidebarTabTriggers";var Gne=({children:e,tab:t,onSelect:n,...r})=>m.jsx(Mte,{value:t,asChild:!0,onSelect:n,children:m.jsx("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...r,children:e})});Gne.displayName="SidebarTabTrigger";var Xne=({children:e,...t})=>{let n=Us(),r=Gr();if(!n.openSidebar)return null;let{name:i}=n.openSidebar;return m.jsx(kte,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>r(o=>({...o,openSidebar:{...o.openSidebar,name:i,tab:s}})),...t,children:e})};Xne.displayName="SidebarTabs";var Kne=({tab:e,children:t,...n})=>m.jsx(Ate,{...n,value:e,"data-testid":e,children:t});Kne.displayName="SidebarTab";var JI=ui(!1),Yne=T.forwardRef(({name:e,children:t,onDock:n,docked:r,className:i,...s},o)=>{vt.DEV&&n&&r==null&&console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");let a=Gr(),l=ax(JI);T.useLayoutEffect(()=>(l(!!r),()=>{l(!1)}),[l,r]);let f=T.useRef({});f.current.onCloseRequest=()=>{a({openSidebar:null})},f.current.onDock=h=>n==null?void 0:n(h),f.current=Zy(f.current,{docked:r,shouldRenderDockButton:!!n&&r!=null});let c=T.useRef(null);T.useImperativeHandle(o,()=>c.current);let d=Wr(),u=T.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return HI(c,T.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!r||!d.editor.canFitSidebar)&&u()},[u,r,d.editor.canFitSidebar])),T.useEffect(()=>{let h=g=>{g.key===Q.ESCAPE&&(!r||!d.editor.canFitSidebar)&&u()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[u,r,d.editor.canFitSidebar]),m.jsx(tl,{...s,className:ze("sidebar",{"sidebar--docked":r},i),ref:c,children:m.jsx(zne.Provider,{value:f.current,children:t})})});Yne.displayName="SidebarInner";var Tl=Object.assign(T.forwardRef((e,t)=>{var a;let n=Us(),{onStateChange:r}=e,i=T.useRef(n.openSidebar);T.useEffect(()=>{var l,f,c,d,u;(!n.openSidebar&&((l=i==null?void 0:i.current)==null?void 0:l.name)===e.name||((f=n.openSidebar)==null?void 0:f.name)===e.name&&((c=i==null?void 0:i.current)==null?void 0:c.name)!==e.name||((d=i.current)==null?void 0:d.name)===e.name)&&n.openSidebar!==i.current&&(r==null||r(((u=n.openSidebar)==null?void 0:u.name)!==e.name?null:n.openSidebar)),i.current=n.openSidebar},[n.openSidebar,r,e.name]);let[s,o]=T.useState(!1);return T.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((a=n.openSidebar)==null?void 0:a.name)===e.name?T.createElement(Yne,{...e,ref:t,key:e.name}):null}),{Header:Hne,TabTriggers:Wne,TabTrigger:Gne,Tabs:Xne,Tab:Kne,Trigger:Vne});Tl.displayName="Sidebar";var Zne={};wY(Zne,{ChangeCanvasBackground:()=>are,ClearCanvas:()=>sre,CommandPalette:()=>nre,Export:()=>lre,Help:()=>ire,LiveCollaborationTrigger:()=>fre,LoadScene:()=>Jne,SaveAsImage:()=>tre,SaveToActiveFile:()=>ere,SearchMenu:()=>rre,Socials:()=>cre,ToggleTheme:()=>ore});var qne=ui({active:!1});async function BFe({title:e,description:t,actionLabel:n,color:r}){return new Promise(i=>{Za.set(qne,{active:!0,onConfirm:()=>i(!0),onClose:()=>i(!1),onReject:()=>i(!1),title:e,description:t,actionLabel:n,color:r})})}var Qne=({value:e,shortcut:t,onChange:n,choices:r,children:i,name:s})=>{let o=Wr();return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[m.jsx("label",{className:"dropdown-menu-item__text",htmlFor:s,children:i}),m.jsx(Rne,{name:s,value:e,onChange:n,choices:r})]}),t&&!o.editor.isMobile&&m.jsx("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};Qne.displayName="DropdownMenuItemContentRadio";var FFe=Qne,Jne=()=>{let{t:e}=Zi(),t=Gs(),n=bx();return t.isActionEnabled(vM)?m.jsx(da,{icon:AT,onSelect:async()=>{(!n.length||await BFe({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:m.jsx(ql,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>m.jsx("strong",{children:r}),br:()=>m.jsx("br",{})})}))&&t.executeAction(vM)},"data-testid":"load-button",shortcut:Vi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};Jne.displayName="LoadScene";var ere=()=>{let{t:e}=Zi(),t=Gs();return t.isActionEnabled(K$)?m.jsx(da,{shortcut:Vi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(K$),icon:cwe,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};ere.displayName="SaveToActiveFile";var tre=()=>{let e=Gr(),{t}=Zi();return m.jsx(da,{icon:JZ,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Vi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};tre.displayName="SaveAsImage";var nre=e=>{let t=Gr(),{t:n}=Zi();return m.jsx(da,{icon:fq,"data-testid":"command-palette-button",onSelect:()=>{vn("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Vi("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};nre.displayName="CommandPalette";var rre=e=>{let{t}=Zi(),n=Gs();return m.jsx(da,{icon:Zh,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(Tne)},shortcut:Vi("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};rre.displayName="SearchMenu";var ire=()=>{let{t:e}=Zi(),t=Gs();return m.jsx(da,{"data-testid":"help-menu-item",icon:MT,onSelect:()=>t.executeAction(YI),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};ire.displayName="Help";var sre=()=>{let{t:e}=Zi(),t=ax(gx);return Gs().isActionEnabled(K5)?m.jsx(da,{icon:Yh,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};sre.displayName="ClearCanvas";var ore=e=>{let{t}=Zi(),n=Us(),r=Gs(),i=Vi("toggleTheme");return r.isActionEnabled(x9)?e!=null&&e.allowSystemTheme?m.jsx(FFe,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:It.LIGHT,label:_C,ariaLabel:`${t("buttons.lightMode")} - ${i}`},{value:It.DARK,label:RC,ariaLabel:`${t("buttons.darkMode")} - ${i}`},{value:"system",label:xEe,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):m.jsx(da,{onSelect:s=>{if(s.preventDefault(),e==null?void 0:e.onSelect)e.onSelect(n.theme===It.DARK?It.LIGHT:It.DARK);else return r.executeAction(x9)},icon:n.theme===It.DARK?_C:RC,"data-testid":"toggle-dark-mode",shortcut:i,"aria-label":n.theme===It.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===It.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};ore.displayName="ToggleTheme";var are=()=>{let{t:e}=Zi(),t=Us(),n=Gs(),r=Jb();return t.viewModeEnabled||!r.UIOptions.canvasActions.changeViewBackgroundColor?null:m.jsxs("div",{style:{marginTop:"0.5rem"},children:[m.jsx("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),m.jsx("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};are.displayName="ChangeCanvasBackground";var lre=()=>{let{t:e}=Zi(),t=Gr();return m.jsx(da,{icon:_7,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};lre.displayName="Export";var cre=()=>{let{t:e}=Zi();return m.jsxs(m.Fragment,{children:[m.jsx(m3,{icon:QZ,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),m.jsx(m3,{icon:awe,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),m.jsx(m3,{icon:owe,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};cre.displayName="Socials";var fre=({onSelect:e,isCollaborating:t})=>{let{t:n}=Zi();return m.jsx(da,{"data-testid":"collab-button",icon:nq,className:ze({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};fre.displayName="LiveCollaborationTrigger";var qb=(e,t)=>{let n=ui(0),r=i=>{let{tunnelsJotai:{useAtom:s}}=vo(),[,o]=s(n),a=T.useRef({preferHost:!1,counter:0});return T.useLayoutEffect(()=>{let l=a.current;return o(f=>{let c=f+1;return l.counter=c,c}),()=>{o(f=>{let c=f-1;return l.counter=c,c||(l.preferHost=!1),c})}},[o]),i.__fallback||(a.current.preferHost=!0),!a.current.counter&&i.__fallback&&a.current.preferHost||a.current.counter>1&&i.__fallback?null:m.jsx(t,{...i})};return r.displayName=e,r},$Fe=Object.assign(qb("MainMenu",({children:e,onSelect:t})=>{var a;let{MainMenuTunnel:n}=vo(),r=Wr(),i=Us(),s=Gr(),o=r.editor.isMobile?void 0:()=>s({openMenu:null});return m.jsx(n.In,{children:m.jsxs(_n,{open:i.openMenu==="canvas",children:[m.jsx(_n.Trigger,{onToggle:()=>{s({openMenu:i.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:qZ}),m.jsxs(_n.Content,{onClickOutside:o,onSelect:I7(t,()=>{s({openMenu:null})}),children:[e,r.editor.isMobile&&i.collaborators.size>0&&m.jsxs("fieldset",{className:"UserList-Wrapper",children:[m.jsx("legend",{children:j("labels.collaborators")}),m.jsx(Fne,{mobile:!0,collaborators:i.collaborators,userToFollow:((a=i.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:_n.Trigger,Item:_n.Item,ItemLink:_n.ItemLink,ItemCustom:_n.ItemCustom,Group:_n.Group,Separator:_n.Separator,DefaultItems:Zne}),Ms=$Fe,eN=({title:e,children:t,actionLabel:n,onClick:r})=>m.jsxs("div",{className:"OverwriteConfirm__Actions__Action",children:[m.jsx("h4",{children:e}),m.jsx("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),m.jsx(Z5,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:r})]}),zFe=()=>{let{t:e}=Zi(),t=Gs(),n=Gr();return m.jsx(eN,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(nne,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},HFe=()=>{let{t:e}=Zi(),t=Gs();return m.jsx(eN,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(rne,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},vz=Object.assign(({children:e})=>m.jsx("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:zFe,SaveToDisk:HFe}),MS=Object.assign(qb("OverwriteConfirmDialog",({children:e})=>{let{OverwriteConfirmDialogTunnel:t}=vo(),[n,r]=rr(qne);if(!n.active)return null;let i=()=>{n.onClose(),r(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),r(o=>({...o,active:!1}))};return m.jsx(t.In,{children:m.jsx(ul,{onCloseRequest:i,title:!1,size:916,children:m.jsxs("div",{className:"OverwriteConfirm",children:[m.jsx("h3",{children:n.title}),m.jsxs("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[m.jsx("div",{className:"OverwriteConfirm__Description__icon",children:rEe}),m.jsx("div",{children:n.description}),m.jsx("div",{className:"OverwriteConfirm__Description__spacer"}),m.jsx(Z5,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),m.jsx(vz,{children:e})]})})})}),{Actions:vz,Action:eN}),VFe=ui(""),dre=ui(null),WFe=350,GFe=()=>{let e=bc(),t=Gr(),n=T.useRef(null),[r,i]=rr(VFe),s=r.trim(),[o,a]=T.useState(!1),[l,f]=T.useState({nonce:null,items:[]}),c=T.useRef(null),d=T.useRef(void 0),[u,h]=rr(dre),g=e.scene.getNonDeletedElementsMap();T.useEffect(()=>{o||(s!==c.current||e.scene.getSceneNonce()!==d.current)&&(c.current=null,wz(s,e,(E,S)=>{f({nonce:lc(),items:E}),c.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:E.map(M=>({id:M.textElement.id,focus:!1,matchedLines:M.matchedLines}))})}))},[o,s,g,e,t,h,d]);let U=()=>{l.items.length>0&&h(E=>E===null?0:(E+1)%l.items.length)},y=()=>{l.items.length>0&&h(E=>E===null?0:E-1<0?l.items.length-1:E-1)};T.useEffect(()=>{t(E=>({searchMatches:E.searchMatches.map((S,M)=>M===u?{...S,focus:!0}:{...S,focus:!1})}))},[u,t]),T.useEffect(()=>{var E,S,M,A;if(l.items.length>0&&u!==null){let C=l.items[u];if(C){let I=e.state.zoom.value,R=yo({text:C.searchQuery,x:C.textElement.x+(((E=C.matchedLines[0])==null?void 0:E.offsetX)??0),y:C.textElement.y+(((S=C.matchedLines[0])==null?void 0:S.offsetY)??0),width:(M=C.matchedLines[0])==null?void 0:M.width,height:(A=C.matchedLines[0])==null?void 0:A.height,fontSize:C.textElement.fontSize,fontFamily:C.textElement.fontFamily}),L=14,_=C.textElement.fontSize,O=_*I<L;if(!l3([R],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||O){let $;O?_>=L?$={fitToContent:!0}:$={fitToViewport:!0,maxZoom:Jl(L/_,1)}:$={fitToContent:!0},e.scrollToContent(R,{animate:!0,duration:300,...$,canvasOffsets:e.getEditorUIOffsets()})}}}},[u,l,e]),T.useEffect(()=>()=>{h(null),c.current=null,d.current=void 0,t({searchMatches:[]}),a(!1)},[t,h]);let x=cx({goToNextItem:U,goToPreviousItem:y,searchMatches:l});T.useEffect(()=>jn(window,"keydown",S=>{var M,A,C;if(S.key===Q.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){S.preventDefault(),S.stopPropagation(),t({openSidebar:null});return}S[Q.CTRL_OR_CMD]&&S.key===Q.F&&(S.preventDefault(),S.stopPropagation(),(M=n.current)!=null&&M.matches(":focus")?t({openSidebar:null}):(e.state.openDialog&&t({openDialog:null}),(A=n.current)==null||A.focus(),(C=n.current)==null||C.select())),S.target instanceof HTMLElement&&S.target.closest(".layer-ui__search")&&x.searchMatches.items.length&&(S.key===Q.ENTER&&(S.stopPropagation(),x.goToNextItem()),S.key===Q.ARROW_UP?(S.stopPropagation(),x.goToPreviousItem()):S.key===Q.ARROW_DOWN&&(S.stopPropagation(),x.goToNextItem()))},{capture:!0,passive:!1}),[t,x,e]);let w=`${l.items.length} ${l.items.length===1?j("search.singleResult"):j("search.multipleResults")}`;return m.jsxs("div",{className:"layer-ui__search",children:[m.jsx("div",{className:"layer-ui__search-header",children:m.jsx(QI,{className:i6.SEARCH_MENU_INPUT_WRAPPER,value:r,ref:n,placeholder:j("search.placeholder"),icon:Zh,onChange:E=>{i(E),a(!0);let S=E.trim();wz(S,e,(M,A)=>{f({nonce:lc(),items:M}),h(A),c.current=S,d.current=e.scene.getSceneNonce(),t({searchMatches:M.map(C=>({id:C.textElement.id,focus:!1,matchedLines:C.matchedLines}))}),a(!1)})},selectOnRender:!0})}),m.jsxs("div",{className:"layer-ui__search-count",children:[l.items.length>0&&m.jsxs(m.Fragment,{children:[u!==null&&u>-1?m.jsxs("div",{children:[u+1," / ",w]}):m.jsx("div",{children:w}),m.jsxs("div",{className:"result-nav",children:[m.jsx(E6,{onSelect:()=>{U()},className:"result-nav-btn",children:uq}),m.jsx(E6,{onSelect:()=>{y()},className:"result-nav-btn",children:AEe})]})]}),l.items.length===0&&s&&c.current&&m.jsx("div",{style:{margin:"1rem auto"},children:j("search.noMatch")})]}),m.jsx(ZFe,{matches:l,onItemClick:h,focusIndex:u,searchQuery:s})]})},XFe=e=>{let t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return m.jsx("div",{tabIndex:-1,className:ze("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:m.jsx("div",{className:"preview-text",children:t.flatMap((n,r)=>m.jsx(T.Fragment,{children:r===2?m.jsx("b",{children:n}):n},r))})})},KFe=e=>m.jsx("div",{className:"layer-ui__search-result-container",children:e.matches.items.map((t,n)=>m.jsx(XFe,{searchQuery:e.searchQuery,preview:t.preview,highlighted:n===e.focusIndex,onClick:()=>e.onItemClick(n)},t.textElement.id+t.index))}),YFe=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,ZFe=T.memo(KFe,YFe),qFe=(e,t,n)=>{let r=e.slice(0,t),i=r.split(/\s+/),s=r.endsWith(" "),o=i.length-2-1-(s?0:1),a=i.slice(o<=0?0:o).join(" ")+(s?" ":""),l=20;a=a.length>l?a.slice(-l):a;let f=e.slice(t+n.length),c=f.split(/\s+/),d=!f.startsWith(" "),u=d?6:5,h=(d?"":" ")+c.slice(0,u).join(" ");return{indexInSearchQuery:a.length,previewText:a+n+h,moreBefore:o>0,moreAfter:c.length>u}},QFe=(e,t)=>{let n=e.split(`
`),r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s],a=n[s+1];if(a){let l=t.indexOf(a,i);if(l>o.length+i){let f=l-(o.length+i);for(;f>0;)o+=" ",f--}}r.push(o),i=i+o.length}return r.join(`
`)},JFe=(e,t,n)=>{let r=QFe(e.text,e.originalText).split(`
`),i=[],s=0,o=0;for(let c of r){let d=s,u=d+c.length-1;i.push({line:c,startIndex:d,endIndex:u,lineNumber:o}),s=u+1,o++}let a=n,l=e.originalText.slice(n,n+t.length),f=[];for(let c of i){if(l==="")break;if(a>=c.startIndex&&a<=c.endIndex){let d=c.endIndex+1-a,u=c.line.slice(0,a-c.startIndex),h=l.slice(0,d);l=l.slice(d);let g=Xi(u,ln(e),e.lineHeight);if(u===""&&(g.width=0),e.textAlign!=="left"&&c.line.length>0){let E=Xi(c.line,ln(e),e.lineHeight),S=e.textAlign==="center"?(e.width-E.width)/2:e.width-E.width;g.width+=S}let{width:U,height:y}=Xi(h,ln(e),e.lineHeight),x=g.width,w=c.lineNumber*g.height;f.push({offsetX:x,offsetY:w,width:U,height:y}),a+=d}}return f},e$e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),wz=VLe((e,t,n)=>{if(!e||e===""){n([],null);return}let r=t.scene.getNonDeletedElements().filter(l=>Oe(l));r.sort((l,f)=>l.y-f.y);let i=[],s=new RegExp(e$e(e),"gi");for(let l of r){let f=null,c=l.originalText;for(;(f=s.exec(c))!==null;){let d=qFe(c,f.index,e),u=JFe(l,e,f.index);u.length>0&&i.push({textElement:l,searchQuery:e,preview:d,index:f.index,matchedLines:u})}}let o=new Set(t.visibleElements.map(l=>l.id)),a=i.findIndex(l=>o.has(l.textElement.id))??null;n(i,a)},WFe),ure=qb("DefaultSidebarTrigger",e=>{let{DefaultSidebarTriggerTunnel:t}=vo();return m.jsx(t.In,{children:m.jsx(Tl.Trigger,{...e,className:"default-sidebar-trigger",name:Qa.name})})});ure.displayName="DefaultSidebarTrigger";var hre=({children:e})=>{let{DefaultSidebarTabTriggersTunnel:t}=vo();return m.jsx(t.In,{children:e})};hre.displayName="DefaultTabTriggers";var Ez=Object.assign(qb("DefaultSidebar",({children:e,className:t,onDock:n,docked:r,...i})=>{var f;let s=Us(),o=Gr(),{DefaultSidebarTabTriggersTunnel:a}=vo(),l=((f=s.openSidebar)==null?void 0:f.tab)===Vp;return T.createElement(Tl,{...i,name:"default",key:"default",className:ze("default-sidebar",t),docked:l||(r??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&r!=null?void 0:I7(n,c=>{o({defaultSidebarDockedPreference:c})})},m.jsxs(Tl.Tabs,{children:[m.jsx(Tl.Header,{children:m.jsxs(Tl.TabTriggers,{children:[m.jsx(Tl.TabTrigger,{tab:Vp,children:Zh}),m.jsx(Tl.TabTrigger,{tab:F4,children:kT}),m.jsx(a.Out,{})]})}),m.jsx(Tl.Tab,{tab:F4,children:m.jsx(ABe,{})}),m.jsx(Tl.Tab,{tab:Vp,children:m.jsx(GFe,{})}),e]}))}),{Trigger:ure,TabTriggers:hre}),t$e="small",n$e=e=>m.jsxs("label",{className:ze("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${t$e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),m.jsx("div",{className:"ToolIcon__icon",children:lq})]}),r$e=({canvasRef:e,setError:t})=>{let n=e.current;if(!n)return;let r=n.parentElement;r&&(r.style.background="",t(null),n.replaceChildren())},pre=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:r,data:i})=>{let s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){r$e({canvasRef:e,setError:r});return}try{let a=await t.api,l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}let{elements:f,files:c}=l;r(null),i.current={elements:RM(f,{regenerateIds:!0}),files:c};let d=await lI({elements:i.current.elements,files:i.current.files,exportPadding:T6,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await Q2(d)}catch(u){throw u.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(j("canvasError.canvasTooBig")):u}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&r(a),a}}},tN=e=>{Ch.set(O5.MERMAID_TO_EXCALIDRAW,e)},mre=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:r})=>{let{elements:i,files:s}=t.current;i.length&&(e.addElementsFromPasteOrLibrary({elements:i,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),r&&n&&tN(n))},gre=({children:e})=>m.jsx("div",{className:"ttd-dialog-panels",children:e}),w9=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgess:i,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>m.jsxs("div",{className:"ttd-dialog-panel",children:[m.jsxs("div",{className:"ttd-dialog-panel__header",children:[m.jsx("label",{children:e}),s==null?void 0:s()]}),t,m.jsxs("div",{className:ze("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[m.jsxs(E6,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:r||i,children:[m.jsxs("div",{className:ze({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&m.jsx("span",{children:n.icon})]}),i&&m.jsx(Pf,{})]}),!r&&!i&&(o==null?void 0:o()),a==null?void 0:a()]})]}),bre=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{let i=T.useRef(null),s=T.useRef(r);return s.current=r,T.useEffect(()=>{if(!s.current)return;let o=i.current;if(o){let a=l=>{var f;l[Q.CTRL_OR_CMD]&&l.key===Q.ENTER&&(l.preventDefault(),(f=s.current)==null||f.call(s))};return o.addEventListener("keydown",a),()=>{o.removeEventListener("keydown",a)}}},[]),m.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},i$e=({error:e})=>m.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",m.jsx("p",{children:e})]}),Ure=({error:e,canvasRef:t,loaded:n})=>m.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&m.jsx(i$e,{error:e.message}),n?m.jsx("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):m.jsx(Pf,{size:"2rem"})]}),yre=()=>m.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[m.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Ue("CtrlOrCmd")}),m.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Ue("Enter")})]}),s$e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,Sz=l6(tN,300),o$e=({mermaidToExcalidrawLib:e})=>{let[t,n]=T.useState(()=>Ch.get(O5.MERMAID_TO_EXCALIDRAW)||s$e),r=T.useDeferredValue(t.trim()),[i,s]=T.useState(null),o=T.useRef(null),a=T.useRef({elements:[],files:null}),l=bc();T.useEffect(()=>{pre({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:r}).catch(c=>{jZ()&&console.error("Failed to parse mermaid definition",c)}),Sz(r)},[r,e]),T.useEffect(()=>()=>{Sz.flush()},[]);let f=()=>{mre({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"ttd-dialog-desc",children:m.jsx(ql,{i18nKey:"mermaid.description",flowchartLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:c}),sequenceLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:c}),classLink:c=>m.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:c})})}),m.jsxs(gre,{children:[m.jsx(w9,{label:j("mermaid.syntax"),children:m.jsx(bre,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:c=>n(c.target.value),onKeyboardSubmit:()=>{f()}})}),m.jsx(w9,{label:j("mermaid.preview"),panelAction:{action:()=>{f()},label:j("mermaid.button"),icon:Jy},renderSubmitShortcut:()=>m.jsx(yre,{}),children:m.jsx(Ure,{canvasRef:o,loaded:e.loaded,error:i})})]})]})},a$e=o$e,xre=e=>{let t=Gr(),n=T.useRef(null),r=T.useRef(0);return m.jsx(kte,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:i=>{var o;if(!i)return;let s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){let a=s.offsetHeight||0;a>r.current&&(r.current=a,s.style.minHeight=`min(${r.current}px, 100%)`)}e.dialog==="ttd"&&FZ(["text-to-diagram","mermaid"],i)&&t({openDialog:{name:e.dialog,tab:i}})},children:e.children})};xre.displayName="TTDDialogTabs";var l$e=xre,vre=({children:e,...t})=>m.jsx(Cte,{className:"ttd-dialog-triggers",...t,children:e});vre.displayName="TTDDialogTabTriggers";var TM=({children:e,tab:t,onSelect:n,...r})=>m.jsx(Mte,{value:t,asChild:!0,onSelect:n,children:m.jsx("button",{type:"button",className:"ttd-dialog-tab-trigger",...r,children:e})});TM.displayName="TTDDialogTabTrigger";var IM=({tab:e,children:t,...n})=>m.jsx(Ate,{...n,value:e,children:t});IM.displayName="TTDDialogTab";var AS=3,rp=1e3,c$e=ui(null),f$e=ui(null),d$e=e=>{var n;let t=Us();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:m.jsx(u$e,{...e,tab:t.openDialog.tab})},u$e=qb("TTDDialogBase",({tab:e,...t})=>{let n=bc(),r=Gr(),i=T.useRef(null),[s,o]=rr(f$e),[a,l]=T.useState((s==null?void 0:s.prompt)??""),f=a.trim(),c=A=>{l(A.target.value),o(C=>({generatedResponse:(C==null?void 0:C.generatedResponse)??null,prompt:A.target.value}))},[d,u]=T.useState(!1),[h,g]=rr(c$e),U=async()=>{if(f.length>rp||f.length<AS||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){f.length<AS&&M(new Error(`Prompt is too short (min ${AS} characters)`)),f.length>rp&&M(new Error(`Prompt is too long (max ${rp} characters)`));return}try{u(!0),vn("ai","generate","ttd");let{generatedResponse:A,error:C,rateLimit:I,rateLimitRemaining:R}=await t.onTextSubmit(f);if(typeof A=="string"&&o(L=>({generatedResponse:A,prompt:(L==null?void 0:L.prompt)??null})),j5(I)&&j5(R)&&g({rateLimit:I,rateLimitRemaining:R}),C){M(C);return}if(!A){M(new Error("Generation failed"));return}try{await pre({canvasRef:i,data:E,mermaidToExcalidrawLib:x,setError:M,mermaidDefinition:A}),vn("ai","mermaid parse success","ttd")}catch(L){console.info(`%cTTD mermaid render errror: ${L.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${L.message}`,"color: yellow"),vn("ai","mermaid parse failed","ttd"),M(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(A){let C=A.message;(!C||C==="Failed to fetch")&&(C="Request failed"),M(new Error(C))}finally{u(!1)}},y=T.useRef(U);y.current=U;let[x,w]=T.useState({loaded:!1,api:Ve(()=>import("./index-BIQatzAd.js").then(A=>A.aR),[])});T.useEffect(()=>{(async()=>(await x.api,w(A=>({...A,loaded:!0}))))()},[x.api]);let E=T.useRef({elements:[],files:null}),[S,M]=T.useState(null);return m.jsx(ul,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:m.jsxs(l$e,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?m.jsx("p",{className:"dialog-mermaid-title",children:j("mermaid.title")}):m.jsxs(vre,{children:[m.jsx(TM,{tab:"text-to-diagram",children:m.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[j("labels.textToDiagram"),m.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),m.jsx(TM,{tab:"mermaid",children:"Mermaid"})]}),m.jsx(IM,{className:"ttd-dialog-content",tab:"mermaid",children:m.jsx(a$e,{mermaidToExcalidrawLib:x})}),!("__fallback"in t)&&m.jsxs(IM,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[m.jsx("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),m.jsxs(gre,{children:[m.jsx(w9,{label:j("labels.prompt"),panelAction:{action:U,label:"Generate",icon:Jy},onTextSubmitInProgess:d,panelActionDisabled:f.length>rp||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?m.jsxs("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>m.jsx(yre,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return m.jsxs("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(tN(s.generatedResponse),r({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",m.jsx(dx,{icon:Jy})]});let A=f.length/rp;return A>.8?m.jsxs("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:A>1?"var(--color-danger)":void 0},children:["Length: ",f.length,"/",rp]}):null},children:m.jsx(bre,{onChange:c,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{y.current()}})}),m.jsx(w9,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),mre({app:n,data:E})},label:"Insert",icon:Jy},children:m.jsx(Ure,{canvasRef:i,error:S,loaded:x.loaded})})]})]})]})})}),h$e=.01,Df=(e,t)=>!(t==="height"&&Oe(e)||t==="width"&&Oe(e)||t==="angle"&&at(e)),$i=(e,t)=>{let n=e+t/2;return n-n%t},E9=(e,t,n)=>Object.keys(e).map(r=>({original:(n??t).get(r),latest:t.get(r)})).filter(r=>r.original!==void 0&&r.latest!==void 0),rb=(e,t,n,r,i,s,o,a=!0)=>{let l=r.get(n.id);if(!l)return;let[f,c]=[n.x+n.width/2,n.y+n.height/2],[d,u]=pe(P(n.x,n.y),P(f,c),n.angle),h=e-d,g=t-u,[U,y]=pe(P(e,t),P(f+h,c+g),-n.angle);ye(l,{x:U,y},a),NM(l,r,i,s);let x=xt(n,o);if(x){let w=r.get(x.id);w&&ye(w,{x:x.x+h,y:x.y+g},a)}},nN=(e,t)=>{let n=Eh(t).map(r=>Cn(e,r).reduce((i,s)=>(i[s.id]=!0,i),{}));return e.filter(r=>!p6(r)).forEach(r=>{n.push({[r.id]:!0})}),n},NM=(e,t,n,r,i)=>{mt(e)?e9([e],t,n,r,!0,[],i==null?void 0:i.zoom):zs(e,t,i)},p$e=({label:e,icon:t,dragInputCallback:n,value:r,elements:i,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:f,sensitivity:c=1})=>{let d=bc(),u=T.useRef(null),h=T.useRef(null),[g,U]=T.useState(r.toString()),y=T.useRef(null);y.current||(y.current={originalAppState:yf(f),originalElements:i,lastUpdatedValue:g,updatePending:!1}),T.useEffect(()=>{let E=r.toString();U(E),y.current.lastUpdatedValue=E},[r]);let x=(E,S,M)=>{if(!y.current.updatePending)return!1;y.current.updatePending=!1;let A=Number(E);if(isNaN(A)){U(r.toString());return}let C=Number(A.toFixed(2)),I=Number(r);(isNaN(I)||Math.abs(C-I)>=h$e)&&(y.current.lastUpdatedValue=E,n({accumulatedChange:0,instantChange:0,originalElements:S,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:C,property:a,originalAppState:M,setInputValue:R=>U(String(R))}),d.syncActionResult({captureUpdate:me.IMMEDIATELY}))},w=T.useRef({});return w.current.handleInputValue=x,T.useEffect(()=>{let E=u.current,S=w.current;return()=>{var A;let M=E==null?void 0:E.value;M&&((A=S.handleInputValue)==null||A.call(S,M,y.current.originalElements,y.current.originalAppState)),window.removeEventListener("pointermove",S.onPointerMove,!1),window.removeEventListener("pointerup",S.onPointerUp,!1)}},[s]),s?m.jsxs("div",{className:ze("drag-input-container",!s&&"disabled"),"data-testid":e,children:[m.jsx("div",{className:"drag-input-label",ref:h,onPointerDown:E=>{if(u.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(u.current.value);let S=null,M=d.scene.getNonDeletedElements().reduce((O,$)=>(O.set($.id,d1($)),O),new Map),A=i.map(O=>M.get(O.id)),C=yf(f),I=0,R=0,L=O=>{if(S&&M!==null&&A!==null){let $=O.clientX-S.x;$!==0&&(R+=$,Math.abs(R)>=c&&(R=Math.sign(R)*Math.floor(Math.abs(R)/c),I+=R,n({accumulatedChange:I,instantChange:R,originalElements:A,originalElementsMap:M,shouldKeepAspectRatio:o,shouldChangeByStepSize:O.shiftKey,property:a,scene:l,originalAppState:C,setInputValue:B=>U(String(B))}),R=0))}S={x:O.clientX,y:O.clientY}},_=()=>{window.removeEventListener("pointermove",L,!1),d.syncActionResult({captureUpdate:me.IMMEDIATELY}),S=null,I=0,R=0,A=null,M=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener("pointerup",_,!1)};w.current.onPointerMove=L,w.current.onPointerUp=_,window.addEventListener("pointermove",L,!1),window.addEventListener("pointerup",_,!1)}},onPointerEnter:()=>{h.current&&(h.current.style.cursor="ew-resize")},children:t?m.jsx(dx,{icon:t}):e}),m.jsx("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:E=>{if(s){let S=E.target;S instanceof HTMLInputElement&&E.key===Q.ENTER&&(x(S.value,i,f),d.focusContainer())}},ref:u,value:g,onChange:E=>{y.current.updatePending=!0,U(E.target.value)},onFocus:E=>{E.target.select(),y.current.originalElements=i,y.current.originalAppState=yf(f)},onBlur:E=>{g?s&&x(E.target.value,y.current.originalElements,y.current.originalAppState):U(r.toString())},disabled:!s})]}):null},zf=p$e,kz=10,m$e=e=>e.type==="image",g$e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:r,shouldChangeByStepSize:i,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:f})=>{let c=f.getNonDeletedElementsMap(),d=t[0],u=c.get(d.id);if(d&&u){let h=r||m$e(d),g=d.width/d.height;if(a.croppingElementId===d.id){let E=c.get(d.id);if(!E||!Yt(E)||!E.crop)return;let S=E.crop,M={...S},A=E.scale[0]===-1,C=E.scale[1]===-1,{width:I,height:R}=Mf(E),L=S.naturalWidth/I,_=S.naturalHeight/R,O=A?S.width+S.x:S.naturalWidth-S.x,$=C?S.height+S.y:S.naturalHeight-S.y,B=Jr*L,F=Jr*_;if(s!==void 0){if(o==="width"){let Y=s*L,K=At(Y,B,O);M={...M,width:K,x:A?S.x+S.width-K:S.x}}else if(o==="height"){let Y=s*_,K=At(Y,F,$);M={...M,height:K,y:C?S.y+S.height-K:S.y}}ye(E,{crop:M,width:M.width/(S.naturalWidth/I),height:M.height/(S.naturalHeight/R)});return}let z=o==="width"?l:0,H=o==="height"?l:0,G=At(S.width+z,B,O),V=At(S.height+H,B,$);M={...S,x:A?S.x+S.width-G:S.x,y:C?S.y+S.height-V:S.y,width:G,height:V},ye(E,{crop:M,width:M.width/(S.naturalWidth/I),height:M.height/(S.naturalHeight/R)});return}if(s!==void 0){let E=Math.max(o==="width"?s:h?s*g:d.width,Xo),S=Math.max(o==="height"?s:h?s/g:d.height,Xo);q2(E,S,u,d,c,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h});return}let U=o==="width"?e:0,y=o==="height"?e:0,x=Math.max(0,d.width+U);o==="width"&&(i?x=$i(x,kz):x=Math.round(x));let w=Math.max(0,d.height+y);o==="height"&&(i?w=$i(w,kz):w=Math.round(w)),h&&(o==="width"?w=Math.round(x/g*100)/100:x=Math.round(w*g*100)/100),w=Math.max(Xo,w),x=Math.max(Xo,x),q2(x,w,u,d,c,n,o==="width"?"e":"s",{shouldMaintainAspectRatio:h})}},b$e=({property:e,element:t,scene:n,appState:r})=>{let i=Jl(e==="width"?t.width:t.height,2);if(r.croppingElementId&&r.croppingElementId===t.id&&Yt(t)&&t.crop){let{width:s,height:o}=Mf(t);if(e==="width"){let a=s/t.crop.naturalWidth;i=Jl(t.crop.width*a,2)}if(e==="height"){let a=o/t.crop.naturalHeight;i=Jl(t.crop.height*a,2)}}return m.jsx(zf,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:g$e,value:i,editable:Df(t,e),scene:n,appState:r,property:e})},Cz=b$e,U$e=15,y$e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=i.getNonDeletedElements(),a=t[0];if(a&&!Fe(a)){let l=s.get(a.id);if(!l)return;if(r!==void 0){let g=xh(r);ye(l,{angle:g}),NM(l,s,o,i);let U=xt(l,s);U&&!Et(l)&&ye(U,{angle:g});return}let f=Math.round(Fb(a.angle)*100)/100,c=Math.round(e),d=(f+c)%360;n&&(d=$i(d,U$e)),d=d<0?d+360:d;let u=xh(d);ye(l,{angle:u}),NM(l,s,o,i);let h=xt(l,s);h&&!Et(l)&&ye(h,{angle:u})}},x$e=({element:e,scene:t,appState:n,property:r})=>m.jsx(zf,{label:"A",icon:iq,value:Math.round(Fb(e.angle)%360*100)/100,elements:[e],dragInputCallback:y$e,editable:Df(e,"angle"),scene:t,appState:n,property:r}),v$e=x$e,Mz=4,w$e=4,E$e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=t[0];if(o){let a=s.get(o.id);if(!a||!Oe(a))return;let l;if(r!==void 0)l=Math.max(Math.round(r),Mz);else if(o.type==="text"){let f=Math.round(o.fontSize),c=Math.round(e);l=Math.max(f+c,Mz),n&&(l=$i(l,w$e))}l&&(ye(a,{fontSize:l}),ms(a,i.getContainerElement(a),i.getNonDeletedElementsMap()))}},S$e=({element:e,scene:t,appState:n,property:r})=>{let i=Oe(e)?e:ca(e)?xt(e,t.getNonDeletedElementsMap()):null;return i?m.jsx(zf,{label:"F",value:Math.round(i.fontSize*10)/10,elements:[i],dragInputCallback:E$e,icon:P7,appState:n,scene:t,property:r}):null},k$e=S$e,ip=10,C$e=(e,t,n,r)=>{let i=r.x-e,s=r.y-t,o=r.width*n,a=r.height*n,l=e+i*n,f=t+s*n;return{width:o,height:a,x:l,y:f,...UI(r,o,a,!1),...Oe(r)?{fontSize:r.fontSize*n}:{}}},M$e=(e,t,n,r,i,s,o,a)=>{let l=C$e(e,t,r,s);ye(i,l,!1);let f=xt(s,a);if(f){let c=f.fontSize*r;zs(i,o,{newSize:{width:l.width,height:l.height}});let d=o.get(f.id);d&&Oe(d)&&(ye(d,{fontSize:c},!1),Gb(i,o,n==="width"?"e":"s",!0))}},Az=(e,t,n,r,i,s,o,a,l,f)=>{s==="width"?t=Math.round(e/r*100)/100:e=Math.round(t*r*100)/100;let c=t/n;for(let d=0;d<a.length;d++){let u=a[d],h=o[d];M$e(i[0],i[1],s,c,h,u,l,f)}},A$e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:r,shouldChangeByStepSize:i,nextValue:s,scene:o,property:a})=>{let l=o.getNonDeletedElementsMap(),f=nN(t,r);if(s!==void 0){for(let u of f){let h=E9(u,l,n);if(h.length>1){let g=h.map(R=>R.latest),U=h.map(R=>R.original),[y,x,w,E]=tn(U),S=w-y,M=E-x,A=S/M,C=Math.max(Xo,a==="width"?Math.max(0,s):S),I=Math.max(Xo,a==="height"?Math.max(0,s):M);Az(C,I,M,A,P(y,x),a,g,U,l,n)}else{let[g]=h,U=g==null?void 0:g.latest,y=g==null?void 0:g.original;if(U&&y&&Df(U,a)){let x=a==="width"?Math.max(0,s):U.width;a==="width"&&(i?x=$i(x,ip):x=Math.round(x));let w=a==="height"?Math.max(0,s):U.height;a==="height"&&(i?w=$i(w,ip):w=Math.round(w)),x=Math.max(Xo,x),w=Math.max(Xo,w),q2(x,w,U,y,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate();return}let c=a==="width"?e:0,d=a==="height"?e:0;for(let u of f){let h=E9(u,l,n);if(h.length>1){let g=h.map(R=>R.latest),U=h.map(R=>R.original),[y,x,w,E]=tn(U),S=w-y,M=E-x,A=S/M,C=Math.max(0,S+c);a==="width"&&(i?C=$i(C,ip):C=Math.round(C));let I=Math.max(0,M+d);a==="height"&&(i?I=$i(I,ip):I=Math.round(I)),C=Math.max(Xo,C),I=Math.max(Xo,I),Az(C,I,M,A,P(y,x),a,g,U,l,n)}else{let[g]=h,U=g==null?void 0:g.latest,y=g==null?void 0:g.original;if(U&&y&&Df(U,a)){let x=Math.max(0,y.width+c);a==="width"&&(i?x=$i(x,ip):x=Math.round(x));let w=Math.max(0,y.height+d);a==="height"&&(i?w=$i(w,ip):w=Math.round(w)),x=Math.max(Xo,x),w=Math.max(Xo,w),q2(x,w,U,y,l,n,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate()},T$e=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:s})=>{let o=T.useMemo(()=>r.map(f=>{let c=E9(f,n);if(c.length>1){let[u,h,g,U]=tn(c.map(y=>y.latest));return Math.round((e==="width"?g-u:U-h)*100)/100}let[d]=c;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,r,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return m.jsx(zf,{label:e==="width"?"W":"H",elements:t,dragInputCallback:A$e,value:a,editable:l,appState:s,property:e,scene:i})},Tz=T$e,I$e=15,N$e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,property:i,scene:s})=>{let o=s.getNonDeletedElementsMap(),a=t.map(f=>o.get(f.id)).filter(f=>f&&!p6(f)&&Df(f,i)),l=t.filter(f=>!p6(f)&&Df(f,i));if(r!==void 0){let f=xh(r);for(let c of a){if(!c)continue;ye(c,{angle:f},!1);let d=xt(c,o);d&&!Et(c)&&ye(d,{angle:f},!1)}s.triggerUpdate();return}for(let f=0;f<a.length;f++){let c=a[f];if(!c)continue;let d=l[f],u=Math.round(Fb(d.angle)*100)/100,h=Math.round(e),g=(u+h)%360;n&&(g=$i(g,I$e)),g=g<0?g+360:g;let U=xh(g);ye(c,{angle:U},!1);let y=xt(c,o);y&&!Et(c)&&ye(y,{angle:U},!1)}s.triggerUpdate()},R$e=({elements:e,scene:t,appState:n,property:r})=>{let i=e.filter(l=>!p6(l)&&Df(l,"angle")),s=i.map(l=>Math.round(Fb(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=i.some(l=>Df(l,"angle"));return m.jsx(zf,{label:"A",icon:iq,value:o,elements:e,dragInputCallback:N$e,editable:a,appState:n,scene:t,property:r})},_$e=R$e,Iz=4,P$e=4,D$e=(e,t)=>e.reduce((n,r)=>{if(!r||p6(r))return n;if(Oe(r))return n.push(r),n;if(ca(r)){let i=xt(r,t);if(i)return n.push(i),n}return n},[]),L$e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:r,scene:i})=>{let s=i.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id)),a;if(r){a=Math.max(Math.round(r),Iz);for(let l of o)ye(l,{fontSize:a},!1),ms(l,i.getContainerElement(l),s,!1);i.triggerUpdate()}else{let l=t;for(let f=0;f<o.length;f++){let c=o[f],d=l[f],u=Math.round(d.fontSize),h=Math.round(e),g=Math.max(u+h,Iz);n&&(g=$i(g,P$e)),ye(c,{fontSize:g},!1),ms(c,i.getContainerElement(c),s,!1)}i.triggerUpdate()}},O$e=({elements:e,scene:t,appState:n,property:r,elementsMap:i})=>{let s=D$e(e,i);if(!s.length)return null;let o=s.map(f=>Math.round(f.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return m.jsx(zf,{label:"F",icon:P7,elements:s,dragInputCallback:L$e,value:a,editable:l,scene:t,property:r,appState:n})},j$e=O$e,Nz=10,B$e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:r,shouldChangeByStepSize:i,nextValue:s,property:o,scene:a,originalAppState:l})=>{let f=a.getNonDeletedElementsMap(),c=a.getNonDeletedElements(),d=n[0],[u,h]=[d.x+d.width/2,d.y+d.height/2],[g,U]=pe(P(d.x,d.y),P(u,h),d.angle);if(l.croppingElementId===d.id){let S=f.get(d.id);if(!S||!Yt(S)||!S.crop)return;let M=S.crop,A=M,C=S.scale[0]===-1,I=S.scale[1]===-1,{width:R,height:L}=Mf(S);if(s!==void 0){if(o==="x"){let $=s*(M.naturalWidth/R);C?A={...M,x:At(M.naturalWidth-$-M.width,0,M.naturalWidth-M.width)}:A={...M,x:At(s*(M.naturalWidth/R),0,M.naturalWidth-M.width)}}o==="y"&&(A={...M,y:At(s*(M.naturalHeight/L),0,M.naturalHeight-M.height)}),ye(S,{crop:A});return}let _=(o==="x"?t:0)*(C?-1:1),O=(o==="y"?t:0)*(I?-1:1);A={...M,x:At(M.x+_,0,M.naturalWidth-M.width),y:At(M.y+O,0,M.naturalHeight-M.height)},ye(S,{crop:A});return}if(s!==void 0){rb(o==="x"?s:g,o==="y"?s:U,d,f,c,a,r);return}let y=o==="x"?e:0,x=o==="y"?e:0,w=o==="x"?Math.round(i?$i(d.x+y,Nz):g+y):g,E=o==="y"?Math.round(i?$i(d.y+x,Nz):U+x):U;rb(w,E,d,f,c,a,r)},F$e=({property:e,element:t,elementsMap:n,scene:r,appState:i})=>{let[s,o]=pe(P(t.x,t.y),P(t.x+t.width/2,t.y+t.height/2),t.angle),a=Jl(e==="x"?s:o,2);if(i.croppingElementId===t.id&&Yt(t)&&t.crop){let l=LAe(t);l&&(a=Jl(e==="x"?l.x:l.y,2))}return m.jsx(zf,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:B$e,scene:r,value:a,property:e,appState:i})},Rz=F$e,$$e=10,z$e=(e,t,n,r,i,s,o,a)=>{for(let l=0;l<r.length;l++){let f=i[l],[c,d]=[f.x+f.width/2,f.y+f.height/2],[u,h]=pe(P(f.x,f.y),P(c,d),f.angle),g=e==="x"?Math.round(u+t):u,U=e==="y"?Math.round(h+n):h;rb(g,U,f,s,r,a,o,!1)}},H$e=(e,t,n,r,i,s,o)=>{let[a,l,,]=tn(n),f=e-a,c=t-l;for(let d=0;d<n.length;d++){let u=n[d],h=r.get(u.id);if(h&&(!Oe(h)||!h.containerId)){let[g,U]=[h.x+h.width/2,h.y+h.height/2],[y,x]=pe(P(h.x,h.y),P(g,U),h.angle);rb(y+f,x+c,u,r,i,o,s,!1)}}},V$e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:r,nextValue:i,property:s,scene:o,originalAppState:a})=>{var d,u;let l=o.getNonDeletedElementsMap(),f=o.getNonDeletedElements();if(i!==void 0){for(let h of nN(t,a)){let g=E9(h,l,n);if(g.length>1){let[U,y,,]=tn(g.map(x=>x.latest));H$e(s==="x"?i:U,s==="y"?i:y,g.map(x=>x.original),l,f,n,o)}else{let U=(d=g[0])==null?void 0:d.original,y=(u=g[0])==null?void 0:u.latest;if(U&&y&&Df(y,s)){let[x,w]=[U.x+U.width/2,U.y+U.height/2],[E,S]=pe(P(U.x,U.y),P(x,w),U.angle);rb(s==="x"?i:E,s==="y"?i:S,U,l,f,o,n,!1)}}}o.triggerUpdate();return}let c=r?$i(e,$$e):e;z$e(s,s==="x"?c:0,s==="y"?c:0,t,t,l,n,o),o.triggerUpdate()},W$e=({property:e,elements:t,elementsMap:n,atomicUnits:r,scene:i,appState:s})=>{let o=T.useMemo(()=>r.map(l=>{let f=Object.keys(l).map(U=>n.get(U)).filter(U=>U!==void 0);if(f.length>1){let[U,y]=tn(f);return Math.round((e==="x"?U:y)*100)/100}let[c]=f,[d,u]=[c.x+c.width/2,c.y+c.height/2],[h,g]=pe(P(c.x,c.y),P(d,u),c.angle);return Math.round((e==="x"?h:g)*100)/100}),[r,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return m.jsx(zf,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:V$e,value:a,property:e,scene:i,appState:s})},_z=W$e,Pz=5,G$e=({property:e,scene:t,appState:n,setAppState:r})=>m.jsx(zf,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:i,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{r(l=>{let f;return i?f=i:s&&(f=o?$i(l.gridStep+Pz*Math.sign(s),Pz):l.gridStep+s),f?(f=Jq(f),a(f),{gridStep:f}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),X$e=G$e,K$e=50,rN=e=>{let t=e8(),n=e.app.scene.getSceneNonce()||1,r=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),i=K2(e.app);return m.jsx(Y$e,{...e,appState:t,sceneNonce:n,selectedElements:r,gridModeEnabled:i})},kn=({children:e,columns:t=1,heading:n,style:r,...i})=>m.jsx("div",{className:ze("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...r},...i,children:e});kn.displayName="StatsRow";var S9=({children:e,order:t,style:n,...r})=>m.jsx("div",{className:"exc-stats__rows",style:{order:t,...n},...r,children:e});S9.displayName="StatsRows";rN.StatsRow=kn;rN.StatsRows=S9;var Y$e=T.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:r,appState:i,sceneNonce:s,gridModeEnabled:o})=>{let a=e.scene,l=a.getNonDeletedElements(),f=a.getNonDeletedElementsMap(),c=Gr(),d=r.length===1?r[0]:null,u=r.length>1?r:null,h=i.croppingElementId&&Yt(d),g=h?Mf(d):null,[U,y]=T.useState({width:0,height:0}),x=T.useMemo(()=>Ob(S=>{let M=tn(S);y({width:Math.round(M[2])-Math.round(M[0]),height:Math.round(M[3])-Math.round(M[1])})},K$e),[]);T.useEffect(()=>{x(l)},[s,l,x]),T.useEffect(()=>()=>x.cancel(),[x]);let w=T.useMemo(()=>nN(r,i),[r,i]),E=T.useMemo(()=>QQ(r),[r]);return m.jsx("div",{className:"exc-stats",children:m.jsxs(tl,{padding:3,children:[m.jsxs("div",{className:"title",children:[m.jsx("h2",{children:j("stats.title")}),m.jsx("div",{className:"close",onClick:t,children:R6})]}),m.jsxs(yM,{label:m.jsx("h3",{children:j("stats.generalStats")}),open:!!(i.stats.panels&Sp.generalStats),openTrigger:()=>c(S=>({stats:{open:!0,panels:S.stats.panels^Sp.generalStats}})),children:[m.jsxs(S9,{children:[m.jsx(kn,{heading:!0,children:j("stats.scene")}),m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.shapes")}),m.jsx("div",{children:l.length})]}),m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.width")}),m.jsx("div",{children:U.width})]}),m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.height")}),m.jsx("div",{children:U.height})]}),o&&m.jsxs(m.Fragment,{children:[m.jsx(kn,{heading:!0,children:"Canvas"}),m.jsx(kn,{children:m.jsx(X$e,{property:"gridStep",scene:a,appState:i,setAppState:c})})]})]}),n==null?void 0:n(l,i)]}),!E&&r.length>0&&m.jsx("div",{id:"elementStats",style:{marginTop:12},children:m.jsx(yM,{label:m.jsx("h3",{children:j("stats.elementProperties")}),open:!!(i.stats.panels&Sp.elementProperties),openTrigger:()=>c(S=>({stats:{open:!0,panels:S.stats.panels^Sp.elementProperties}})),children:m.jsxs(S9,{children:[d&&m.jsxs(m.Fragment,{children:[h&&m.jsx(kn,{heading:!0,children:j("labels.unCroppedDimension")}),i.croppingElementId&&Yt(d)&&g&&m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.width")}),m.jsx("div",{children:Jl(g.width,2)})]}),i.croppingElementId&&Yt(d)&&g&&m.jsxs(kn,{columns:2,children:[m.jsx("div",{children:j("stats.height")}),m.jsx("div",{children:Jl(g.height,2)})]}),m.jsx(kn,{heading:!0,"data-testid":"stats-element-type",children:i.croppingElementId?j("labels.imageCropping"):j(`element.${d.type}`)}),m.jsx(kn,{children:m.jsx(Rz,{element:d,property:"x",elementsMap:f,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Rz,{element:d,property:"y",elementsMap:f,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Cz,{property:"width",element:d,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Cz,{property:"height",element:d,scene:a,appState:i})}),!Fe(d)&&m.jsx(kn,{children:m.jsx(v$e,{property:"angle",element:d,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(k$e,{property:"fontSize",element:d,scene:a,appState:i})})]}),u&&m.jsxs(m.Fragment,{children:[iQ(u)&&m.jsx(kn,{heading:!0,children:j("element.group")}),m.jsxs(kn,{columns:2,style:{margin:"0.3125rem 0"},children:[m.jsx("div",{children:j("stats.shapes")}),m.jsx("div",{children:r.length})]}),m.jsx(kn,{children:m.jsx(_z,{property:"x",elements:u,elementsMap:f,atomicUnits:w,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(_z,{property:"y",elements:u,elementsMap:f,atomicUnits:w,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Tz,{property:"width",elements:u,elementsMap:f,atomicUnits:w,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(Tz,{property:"height",elements:u,elementsMap:f,atomicUnits:w,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(_$e,{property:"angle",elements:u,scene:a,appState:i})}),m.jsx(kn,{children:m.jsx(j$e,{property:"fontSize",elements:u,scene:a,appState:i,elementsMap:f})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),Z$e=({sourceElementId:e,onClose:t,elementsMap:n,appState:r,generateLinkForSelection:i=NQ})=>{var d;let s=((d=n.get(e))==null?void 0:d.link)??null,[o,a]=T.useState(s),[l,f]=T.useState(!1);T.useEffect(()=>{let u=wt(n,r),h=s;if(u.length>0&&i){let g=RQ(u,r);g&&(h=go(i(g.id,g.type)))}a(h)},[n,r,r.selectedElementIds,s,i]);let c=T.useCallback(()=>{var u;if(o&&o!==((u=n.get(e))==null?void 0:u.link)){let h=n.get(e);h&&ye(h,{link:o})}if(!o&&l&&e){let h=n.get(e);h&&ye(h,{link:null})}t==null||t()},[e,o,n,l,t]);return T.useEffect(()=>{let u=h=>{var g,U;((g=r.openDialog)==null?void 0:g.name)==="elementLinkSelector"&&h.key===Q.ENTER&&c(),((U=r.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&h.key===Q.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[r,t,c]),m.jsxs("div",{className:"ElementLinkDialog",children:[m.jsxs("div",{className:"ElementLinkDialog__header",children:[m.jsx("h2",{children:j("elementLink.title")}),m.jsx("p",{children:j("elementLink.desc")})]}),m.jsxs("div",{className:"ElementLinkDialog__input",children:[m.jsx(QI,{value:o??"",onChange:u=>{l||f(!0),a(u)},onKeyDown:u=>{u.key===Q.ENTER&&c()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),s&&o&&m.jsx(Ot,{type:"button",title:j("buttons.remove"),"aria-label":j("buttons.remove"),label:j("buttons.remove"),onClick:()=>{a(null),f(!0)},className:"ElementLinkDialog__remove",icon:Yh})]}),m.jsxs("div",{className:"ElementLinkDialog__actions",children:[m.jsx(w6,{label:j("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),m.jsx(w6,{label:j("buttons.confirm"),onClick:c,actionType:"primary"})]})]})},q$e=Z$e,Q$e=({UIOptions:e})=>m.jsxs(Ms,{__fallback:!0,children:[m.jsx(Ms.DefaultItems.LoadScene,{}),m.jsx(Ms.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&m.jsx(Ms.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&m.jsx(Ms.DefaultItems.SaveAsImage,{}),m.jsx(Ms.DefaultItems.SearchMenu,{}),m.jsx(Ms.DefaultItems.Help,{}),m.jsx(Ms.DefaultItems.ClearCanvas,{}),m.jsx(Ms.Separator,{}),m.jsx(Ms.Group,{title:"Excalidraw links",children:m.jsx(Ms.DefaultItems.Socials,{})}),m.jsx(Ms.Separator,{}),m.jsx(Ms.DefaultItems.ToggleTheme,{}),m.jsx(Ms.DefaultItems.ChangeCanvasBackground,{})]}),J$e=()=>m.jsxs(MS,{__fallback:!0,children:[m.jsx(MS.Actions.SaveToDisk,{}),m.jsx(MS.Actions.ExportToImage,{})]}),eze=({actionManager:e,appState:t,files:n,setAppState:r,elements:i,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:f,renderTopRightUI:c,renderCustomStats:d,UIOptions:u,onExportImage:h,renderWelcomeScreen:g,children:U,app:y,isCollaborating:x,generateLinkForSelection:w})=>{var z,H,G;let E=Wr(),S=FBe(),M=S.tunnelsJotai.Provider,[A,C]=rr(fx),I=()=>u.canvasActions.export?m.jsx(LFe,{elements:i,appState:t,files:n,actionManager:e,exportOpts:u.canvasActions.export,canvas:s,setAppState:r}):null,R=()=>{var V;return!u.canvasActions.saveAsImage||((V=t.openDialog)==null?void 0:V.name)!=="imageExport"?null:m.jsx(dFe,{elements:i,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>r({openDialog:null}),name:y.getName()})},L=()=>m.jsxs("div",{style:{position:"relative"},children:[m.jsx(S.MainMenuTunnel.Out,{}),g&&m.jsx(S.WelcomeScreenMenuHintTunnel.Out,{})]}),_=()=>m.jsx(nb,{heading:"selectedShapeActions",className:ze("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:m.jsx(tl,{className:i6.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:m.jsx(Sne,{appState:t,elementsMap:y.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:y})})}),O=()=>{var K,q,se,de,xe;let V=xI(t,i),Y=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((K=t.openDialog)==null?void 0:K.name)!=="elementLinkSelector";return m.jsx(_ne,{side:"top",children:m.jsxs("div",{className:"App-menu App-menu_top",children:[m.jsxs(Jo.Col,{gap:6,className:ze("App-menu_top__left"),children:[L(),V&&_()]}),!t.viewModeEnabled&&((q=t.openDialog)==null?void 0:q.name)!=="elementLinkSelector"&&m.jsx(nb,{heading:"shapes",className:"shapes-section",children:ve=>m.jsxs("div",{style:{position:"relative"},children:[g&&m.jsx(S.WelcomeScreenToolbarHintTunnel.Out,{}),m.jsx(Jo.Col,{gap:4,align:"start",children:m.jsxs(Jo.Row,{gap:1,className:ze("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[m.jsxs(tl,{padding:1,className:ze("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[m.jsx(Lne,{appState:t,isMobile:E.editor.isMobile,device:E,app:y}),ve,m.jsxs(Jo.Row,{gap:1,children:[m.jsx(jne,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:j("toolBar.penMode"),penDetected:t.penDetected}),m.jsx(One,{checked:t.activeTool.locked,onChange:o,title:j("toolBar.lock")}),m.jsx("div",{className:"App-toolbar__divider"}),m.jsx(Bne,{checked:o6(t),onChange:()=>a(),title:j("toolBar.hand"),isMobile:!0}),m.jsx(kne,{appState:t,activeTool:t.activeTool,UIOptions:u,app:y})]})]}),x&&m.jsx(tl,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:m.jsx(n$e,{title:j("toolBar.laser"),checked:t.activeTool.type===$r.laser,onChange:()=>y.setActiveTool({type:$r.laser}),isMobile:!0})})]})})]})}),m.jsxs("div",{className:ze("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&m.jsx(Fne,{collaborators:t.collaborators,userToFollow:((se=t.userToFollow)==null?void 0:se.socketId)||null}),c==null?void 0:c(E.editor.isMobile,t),!t.viewModeEnabled&&((de=t.openDialog)==null?void 0:de.name)!=="elementLinkSelector"&&(!B||((xe=t.openSidebar)==null?void 0:xe.name)!==Qa.name)&&m.jsx(S.DefaultSidebarTriggerTunnel.Out,{}),Y&&m.jsx(rN,{app:y,onClose:()=>{e.executeAction(EM)},renderCustomStats:d})]})]})})},$=()=>m.jsx(Ez,{__fallback:!0,onDock:V=>{vn("sidebar",`toggleDock (${V?"dock":"undock"})`,`(${E.editor.isMobile?"mobile":"desktop"})`)}}),B=Ite(JI),F=m.jsxs(m.Fragment,{children:[U,m.jsx(Q$e,{UIOptions:u}),m.jsx(Ez.Trigger,{__fallback:!0,icon:kT,title:F5(j("toolBar.library")),onToggle:V=>{V&&vn("sidebar",`${Qa.name} (open)`,`button (${E.editor.isMobile?"mobile":"desktop"})`)},tab:Qa.defaultTab,children:j("toolBar.library")}),m.jsx(J$e,{}),((z=t.openDialog)==null?void 0:z.name)==="ttd"&&m.jsx(d$e,{__fallback:!0}),t.isLoading&&m.jsx(_te,{delay:250}),t.errorMessage&&m.jsx(sFe,{onClose:()=>r({errorMessage:null}),children:t.errorMessage}),A&&!E.editor.isMobile&&m.jsx(_Oe,{colorPickerType:A.colorPickerType,onCancel:()=>{C(null)},onChange:(V,Y,K,{altKey:q})=>{var se;if(!(V!=="elementBackground"&&V!=="elementStroke"))if(K.length){for(let de of K)ye(de,{[q&&A.swapPreviewOnAlt?V==="elementBackground"?"strokeColor":"backgroundColor":V==="elementBackground"?"backgroundColor":"strokeColor"]:Y},!1),Hn.delete(de);(se=Nf.getScene(K[0]))==null||se.triggerUpdate()}else r(V==="elementBackground"?{currentItemBackgroundColor:Y}:{currentItemStrokeColor:Y})},onSelect:(V,Y)=>{var K;C(q=>q!=null&&q.keepOpenOnAlt&&Y.altKey?q:null),(K=A==null?void 0:A.onSelect)==null||K.call(A,V,Y)}}),((H=t.openDialog)==null?void 0:H.name)==="help"&&m.jsx(IFe,{onClose:()=>{r({openDialog:null})}}),m.jsx(WBe,{}),((G=t.openDialog)==null?void 0:G.name)==="elementLinkSelector"&&m.jsx(q$e,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{r({openDialog:null})},elementsMap:y.scene.getNonDeletedElementsMap(),appState:t,generateLinkForSelection:w}),m.jsx(S.OverwriteConfirmDialogTunnel.Out,{}),R(),I(),t.pasteDialog.shown&&m.jsx(SFe,{setAppState:r,appState:t,onClose:()=>r({pasteDialog:{shown:!1,data:null}})}),E.editor.isMobile&&m.jsx(EFe,{app:y,appState:t,elements:i,actionManager:e,renderJSONExportDialog:I,renderImageExportDialog:R,setAppState:r,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:c,renderCustomStats:d,renderSidebars:$,device:E,renderWelcomeScreen:g,UIOptions:u}),!E.editor.isMobile&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"layer-ui__wrapper",style:t.openSidebar&&B&&E.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[g&&m.jsx(S.WelcomeScreenCenterTunnel.Out,{}),O(),m.jsx(jFe,{appState:t,actionManager:e,showExitZenModeBtn:f,renderWelcomeScreen:g}),t.scrolledOutside&&m.jsx("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{r(V=>({...G2(i,V)}))},children:j("buttons.scrollBackToContent")})]}),$()]})]});return m.jsx(Hte.Provider,{value:t,children:m.jsx(M,{children:m.jsx(vne.Provider,{value:S,children:F})})})},Dz=e=>{let{suggestedBindings:t,startBoundElement:n,cursorButton:r,scrollX:i,scrollY:s,...o}=e;return o},tze=(e,t)=>{if(e.children!==t.children)return!1;let{canvas:n,appState:r,...i}=e,{canvas:s,appState:o,...a}=t;return ki(Dz(r),Dz(o),{selectedElementIds:ki,selectedGroupIds:ki})&&ki(i,a)},nze=Te.memo(eze,tze),rze=5e3,ize=({message:e,onClose:t,closable:n=!1,duration:r=rze,style:i})=>{let s=T.useRef(0),o=r!==1/0,a=T.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),r))},[t,r,o]);return T.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,r,o]),m.jsxs("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:i,children:[m.jsx("p",{className:"Toast__message",children:e}),n&&m.jsx(Ot,{icon:R6,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},Lz=_e({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:IT,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:me.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[Q.CTRL_OR_CMD]&&e.altKey&&e.code===Ft.R}),wre=(e,t)=>{let n=t.scene.getSelectedElements(e);return n.length===1&&at(n[0])},sze=_e({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;if(at(i)){let s=dc(Un(e),i.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:me.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:me.EVENTUALLY}},predicate:(e,t,n,r)=>wre(t,r)}),oze=_e({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,r)=>{let i=r.scene.getSelectedElements(t).at(0)||null;return at(i)?{elements:YQ(e,i),appState:{...t,selectedElementIds:{[i.id]:!0}},captureUpdate:me.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:me.EVENTUALLY}},predicate:(e,t,n,r)=>wre(t,r)});_e({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:me.EVENTUALLY}),checked:e=>e.frameRendering.enabled});_e({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:oq,viewMode:!1,perform:(e,t,n,r)=>{let i=Ur(t,{type:"frame"});return Al(r.interactiveCanvas,{...t,activeTool:i}),{elements:e,appState:{...t,activeTool:Ur(t,{type:"frame"})},captureUpdate:me.EVENTUALLY}},keyTest:e=>!e[Q.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===Q.F});var aze=_e({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=wt(e,t);return i.length>0&&!i.some(s=>at(s))},perform:(e,t,n,r)=>{let i=wt(e,t),[s,o,a,l]=tn(i,r.scene.getNonDeletedElementsMap()),f=16,c=$T({x:s-f,y:o-f,width:a-s+f*2,height:l-o+f*2});if(t.editingGroupId){let d=Cn(i,t.editingGroupId);for(let u of d){let h=u.groupIds.indexOf(t.editingGroupId);ye(u,{groupIds:u.groupIds.slice(0,h)},!1)}}return{elements:V5([...r.scene.getElementsIncludingDeleted(),c],i,c,t),appState:{selectedElementIds:{[c.id]:!0}},captureUpdate:me.IMMEDIATELY}}}),lze=()=>m.jsxs("div",{"data-testid":"brave-measure-text-error",children:[m.jsx("p",{children:m.jsx(ql,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>m.jsx("span",{style:{fontWeight:600},children:e})})}),m.jsx("p",{children:m.jsx(ql,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>m.jsx("span",{style:{fontWeight:600},children:e})})}),m.jsx("p",{children:m.jsx(ql,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>m.jsx("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),m.jsx("p",{children:m.jsx(ql,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>m.jsx("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>m.jsxs("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),cze=lze,Uy={width:100,height:0},f0=100,fze=(e,t,n)=>{let r=yo({x:0,y:0,textAlign:B2.CENTER,verticalAlign:mo.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:r.id})}),ms(r,e,n),[e,r]},Oz=(e,t,n,r,i)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){let c=(t==null?void 0:t.width)??f0,d=(t==null?void 0:t.height)??f0,u;t.id&&(u=r.getElement(t.id),u||console.error(`No element for start binding with id ${t.id} found`));let h=t.x||e.x-c,g=t.y||e.y-d/2,U=u?u.type:t.type;if(U){if(U==="text"){let y="";u&&u.type==="text"?y=u.text:t.type==="text"&&(y=t.text),y||console.error(`No text found for start binding text element for ${e.id}`),s=yo({x:h,y:g,type:"text",...u,...t,text:y}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(U){case"rectangle":case"ellipse":case"diamond":{s=cc({x:h,y:g,width:c,height:d,...u,...t,type:U});break}default:Xh(e,`Unhandled element start type "${t.type}"`,!0)}ac(e,s,"start",i)}}if(n){let c=(n==null?void 0:n.height)??f0,d=(n==null?void 0:n.width)??f0,u;n.id&&(u=r.getElement(n.id),u||console.error(`No element for end binding with id ${n.id} found`));let h=n.x||e.x+e.width,g=n.y||e.y-c/2,U=u?u.type:n.type;if(U){if(U==="text"){let y="";u&&u.type==="text"?y=u.text:n.type==="text"&&(y=n.text),y||console.error(`No text found for end binding text element for ${e.id}`),o=yo({x:h,y:g,type:"text",...u,...n,text:y}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(U){case"rectangle":case"ellipse":case"diamond":{o=cc({x:h,y:g,width:d,height:c,...u,...n,type:U});break}default:Xh(e,`Unhandled element end type "${U}"`,!0)}ac(e,o,"end",i)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};let a=e.points.length-1,l=.5,f=yf(e.points);return e.points[a][0]>e.points[a-1][0]&&(f[0][0]=l,f[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(f[0][0]=-l,f[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(f[0][1]=l,f[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(f[0][1]=-l,f[a][1]+=l),Object.assign(e,{points:f}),{linearElement:e,startBoundElement:s,endBoundElement:o}},dze=class{constructor(){Z(this,"excalidrawElements",new Map),Z(this,"add",e=>{e&&this.excalidrawElements.set(e.id,e)}),Z(this,"getElements",()=>If(Array.from(this.excalidrawElements.values()))),Z(this,"getElementsMap",()=>aa(ct(this.getElements()))),Z(this,"getElement",e=>this.excalidrawElements.get(e))}},RM=(e,t)=>{var a,l,f;if(!e)return[];let n=yf(e),r=new dze,i=new Map,s=new Map;for(let c of n){let d,u=c.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(c,{id:fa()}),c.type){case"rectangle":case"ellipse":case"diamond":{let h=(a=c==null?void 0:c.label)!=null&&a.text&&c.width===void 0?0:(c==null?void 0:c.width)||f0,g=(l=c==null?void 0:c.label)!=null&&l.text&&c.height===void 0?0:(c==null?void 0:c.height)||f0;d=cc({...c,width:h,height:g});break}case"line":{let h=c.width||Uy.width,g=c.height||Uy.height;d=Sh({width:h,height:g,points:[P(0,0),P(h,g)],...c});break}case"arrow":{let h=c.width||Uy.width,g=c.height||Uy.height;d=zT({width:h,height:g,endArrowhead:"arrow",points:[P(0,0),P(h,g)],...c,type:"arrow"}),Object.assign(d,h6(d.points));break}case"text":{let h=(c==null?void 0:c.fontFamily)||B0,g=(c==null?void 0:c.fontSize)||Bf,U=(c==null?void 0:c.lineHeight)||qh(h),y=c.text??"",x=f6(y),w=Xi(x,ln({fontFamily:h,fontSize:g}),U);d=yo({width:w.width,height:w.height,fontFamily:h,fontSize:g,...c});break}case"image":{d=mQ({width:(c==null?void 0:c.width)||f0,height:(c==null?void 0:c.height)||f0,...c});break}case"frame":{d=$T({x:0,y:0,...c});break}case"magicframe":{d=WC({x:0,y:0,...c});break}case"freedraw":case"iframe":case"embeddable":{d=c;break}default:d=c,Xh(c,`Unhandled element type "${c.type}"`,!0)}r.getElement(d.id)?console.error(`Duplicate id found for ${d.id}`):(r.add(d),i.set(d.id,c),u&&s.set(u,d.id))}let o=r.getElementsMap();for(let[c,d]of i){let u=r.getElement(c);switch(d.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((f=d.label)!=null&&f.text){let[h,g]=fze(u,d==null?void 0:d.label,o);if(r.add(h),r.add(g),Et(h)){let U=d.type==="arrow"?d==null?void 0:d.start:void 0,y=d.type==="arrow"?d==null?void 0:d.end:void 0;if(U&&U.id){let S=s.get(U.id);S&&Object.assign(U,{id:S})}if(y&&y.id){let S=s.get(y.id);S&&Object.assign(y,{id:S})}let{linearElement:x,startBoundElement:w,endBoundElement:E}=Oz(h,U,y,r,o);h=x,r.add(x),r.add(w),r.add(E)}}else switch(d.type){case"arrow":{let{start:h,end:g}=d;if(h&&h.id){let w=s.get(h.id);Object.assign(h,{id:w})}if(g&&g.id){let w=s.get(g.id);Object.assign(g,{id:w})}let{linearElement:U,startBoundElement:y,endBoundElement:x}=Oz(u,h,g,r,o);r.add(U),r.add(y),r.add(x);break}}break}}}for(let[c,d]of i){if(d.type!=="frame"&&d.type!=="magicframe")continue;let u=r.getElement(c);if(!u)throw new Error(`Excalidraw element with id ${c} doesn't exist`);let h=[];d.children.forEach(C=>{var L;let I=s.get(C);if(!I)throw new Error(`Element with ${C} wasn't mapped correctly`);let R=r.getElement(I);if(!R)throw new Error(`Frame element with id ${I} doesn't exist`);Object.assign(R,{frameId:u.id}),(L=R==null?void 0:R.boundElements)==null||L.forEach(_=>{let O=r.getElement(_.id);if(!O)throw new Error(`Bound element with id ${_.id} doesn't exist`);Object.assign(O,{frameId:u.id}),h.push(O)}),h.push(R)});let[g,U,y,x]=tn(h),w=10;g=g-w,U=U-w,y=y+w,x=x+w;let E=(u==null?void 0:u.x)||g,S=(u==null?void 0:u.y)||U,M=(u==null?void 0:u.width)||y-g,A=(u==null?void 0:u.height)||x-U;Object.assign(u,{x:E,y:S,width:M,height:A}),jZ()&&d.children.length&&(u!=null&&u.x||u!=null&&u.y||u!=null&&u.width||u!=null&&u.height)&&console.info("User provided frame attributes are being considered, if you find this inaccurate, please remove any of the attributes - x, y, width and height so frame coordinates and dimensions are calculated automatically")}return r.getElements()},Zn=e=>t=>{ii.unstable_batchedUpdates(e,t)},TS=e=>T7(t=>{ii.unstable_batchedUpdates(e,t)}),iN=(()=>{let e;try{let n=T.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),uze="#ff6b6b",hze="#ff0000",jz=1,Bz=2,pze=(e,t)=>{if(!t.snapLines.length)return;let n=t.theme===It.LIGHT||t.zenModeEnabled?uze:hze,r=(t.zenModeEnabled?jz*1.5:jz)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(let i of t.snapLines)i.type==="pointer"?(e.lineWidth=r,e.strokeStyle=n,gze(i,e,t)):i.type==="gap"?(e.lineWidth=r,e.strokeStyle=n,bze(i.points[0],i.points[1],i.direction,t,e)):i.type==="points"&&(e.lineWidth=r,e.strokeStyle=n,mze(i,e,t));e.restore()},mze=(e,t,n)=>{if(!n.zenModeEnabled){let r=e.points[0],i=e.points[e.points.length-1];Oo(r,i,t)}for(let r of e.points)Ere(r,n,t)},gze=(e,t,n)=>{Ere(e.points[0],n,t),n.zenModeEnabled||Oo(e.points[0],e.points[1],t)},Ere=([e,t],n,r)=>{r.save();let i=(n.zenModeEnabled?Bz*1.5:Bz)/n.zoom.value;r.beginPath(),r.moveTo(e-i,t-i),r.lineTo(e+i,t+i),r.moveTo(e+i,t-i),r.lineTo(e-i,t+i),r.stroke(),r.restore()},Oo=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},bze=(e,t,n,r,i)=>{let s=8/r.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){let l=[(e[0]+t[0])/2,e[1]];r.zenModeEnabled||Oo(P(e[0],e[1]-s),P(e[0],e[1]+s),i),Oo(P(l[0]-a,l[1]-o),P(l[0]-a,l[1]+o),i),Oo(P(l[0]+a,l[1]-o),P(l[0]+a,l[1]+o),i),r.zenModeEnabled||(Oo(P(t[0],t[1]-s),P(t[0],t[1]+s),i),Oo(e,t,i))}else{let l=[e[0],(e[1]+t[1])/2];r.zenModeEnabled||Oo(P(e[0]-s,e[1]),P(e[0]+s,e[1]),i),Oo(P(l[0]-o,l[1]-a),P(l[0]+o,l[1]-a),i),Oo(P(l[0]-o,l[1]+a),P(l[0]+o,l[1]+a),i),r.zenModeEnabled||(Oo(P(t[0]-s,t[1]),P(t[0]+s,t[1]),i),Oo(e,t,i))}},Uze=(e,t)=>{Gi(t.selectedLinearElement,"selectedLinearElement is null");let{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;Gi(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),Sre(n,e,t),e.restore()},yze=(e,t,n)=>{var a,l;let{elementId:r,hoverPointIndex:i}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(i))return;let s=je.getElement(r,n);if(!s)return;let o=je.getPointAtIndexGlobalCoordinates(s,i,n);e.save(),e.translate(t.scrollX,t.scrollY),Sre(o,e,t),e.restore()},Sre=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",X7(t,e[0],e[1],je.POINT_HANDLE_SIZE/n.zoom.value,!1)},Qb=(e,t,n,r,i,s,o,a,l=!1,f=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,r,i),f&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,r,i,f),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,r,i),e.restore()},xze=(e,t,n,r,i,s)=>{e.save(),e.translate(r,i),e.rotate(s),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.restore()},IS=(e,t,n,r,i,s=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",i?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),X7(e,n[0],n[1],r/t.zoom.value,!s)},vze=(e,t,n,r,i,s)=>{e.beginPath(),e.ellipse(r,i,t/2,n/2,s,0,Math.PI*2),e.stroke()},wze=(e,t,n,r)=>{let[i,s,o,a]=gt(t,n),l=o-i,f=a-s;e.strokeStyle="rgba(0,0,0,.05)";let c=r.value<1?r.value:1;e.lineWidth=jT/c;let d=e.lineWidth/2+BT,u=Ja(Math.min(t.width,t.height),t);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":Qb(e,i-d,s-d,l+d*2,f+d*2,i+l/2,s+f/2,t.angle,void 0,u);break;case"diamond":let h=Math.hypot(l,f),g=d*h/f,U=d*h/l;xze(e,l+g*2,f+U*2,i+l/2,s+f/2,t.angle);break;case"ellipse":vze(e,l+d*2,f+d*2,i+l/2,s+f/2,t.angle);break}},Eze=(e,t,n,r)=>{let[i,s,o]=t,a=Wb(o,o.width,o.height,r);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(l=>{let[f,c]=je.getPointAtIndexGlobalCoordinates(i,l,n);X7(e,f,c,a)})},kre=(e,t,n)=>{let{angle:r,x1:i,y1:s,x2:o,y2:a,selectionColors:l,cx:f,cy:c,dashed:d,activeEmbeddable:u}=n,h=o-i,g=a-s,U=(n.padding??Wh*2)/t.zoom.value,y=8/t.zoom.value,x=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(u?4:1)/t.zoom.value;let w=l.length;for(let E=0;E<w;++E)e.strokeStyle=l[E],d&&e.setLineDash([y,x+(y+x)*(w-1)]),e.lineDashOffset=(y+x)*E,Qb(e,i-U,s-U,h+U*2,g+U*2,f,c,r);e.restore()},Sze=(e,t,n,r)=>{let i=Array.isArray(n)?Eze:wze;e.save(),e.translate(t.scrollX,t.scrollY),i(e,n,r,t.zoom),e.restore()},kze=(e,t,n,r)=>{let[i,s,o,a]=gt(n,r),l=o-i,f=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=$n.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Qb(e,i,s,l,f,i+l/2,s+f/2,n.angle,!1,$n.radius/t.zoom.value),e.restore()},Cze=(e,t,n)=>{let r=n.filter(a=>a.groupIds.length===0),i=n.filter(a=>a.groupIds.length>0),s=a=>{let[l,f,c,d]=tn(a);return{angle:0,x1:l,x2:c,y1:f,y2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(c-l)/2,cy:f+(d-f)/2,activeEmbeddable:!1}},o=a=>{let l=Cn(n,a);return s(l)};Object.entries(rQ(i,t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>o(a)).concat(r.map(a=>s([a]))).forEach(a=>kre(e,t,a))},NS=(e,t,n,r)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;let i=je.getPointsGlobalCoordinates(n,r),{POINT_HANDLE_SIZE:s}=je,o=t.editingLinearElement?s:s/2;if(i.forEach((l,f)=>{var d,u;if(Fe(n)&&f!==0&&f!==i.length-1)return;let c=!!((u=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&u.includes(f));IS(e,t,l,o,c)}),Fe(n)){let l=((a=n.fixedSegments)==null?void 0:a.map(f=>f.index))||[];i.slice(0,-1).forEach((f,c)=>{je.isSegmentTooShort(n,i[c+1],i[c],c,t.zoom)||IS(e,t,P((f[0]+i[c+1][0])/2,(f[1]+i[c+1][1])/2),s/2,!1,!l.includes(c+1))})}else je.getEditorMidPoints(n,r,t).filter((l,f,c)=>l!==null&&!(Fe(n)&&(f===0||f===c.length-1))).forEach(l=>{(t.editingLinearElement||i.length===2)&&IS(e,t,l,s/2,!1,!0)});e.restore()},Fz=(e,t,n,r,i)=>{Object.keys(r).forEach(s=>{let o=r[s];if(o!==void 0){let[a,l,f,c]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?X7(e,a+f/2,l+c/2,f/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,f,c,2/n.zoom.value),e.fill(),e.stroke()):Qb(e,a,l,f,c,a+f/2,l+c/2,i,!0),e.restore()}})},Mze=(e,t,n,r,i)=>{let[s,o,,,a,l]=gt(r,i),f=3,c=20,d=f/n.zoom.value,u=d/2,h=a-s+d,g=l-o+d,U=Math.min(c/n.zoom.value,h),y=Math.min(c/n.zoom.value,g);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-g],[0,u],[U,u],[u,0],[u,y]],[[h-u,-g],[u,u],[-U+u,u],[0,0],[0,y]],[[-h,g],[0,-u],[U,-u],[u,0],[u,-y]],[[h-u,g],[u,-u],[-U+u,-u],[0,0],[0,-y]]].forEach(x=>{let[[w,E],[S,M],[A,C],[I,R],[L,_]]=x;e.save(),e.translate(a,l),e.rotate(r.angle),e.beginPath(),e.moveTo(w+S,E+M),e.lineTo(w+A,E+C),e.stroke(),e.beginPath(),e.moveTo(w+I,E+R),e.lineTo(w+L,E+_),e.stroke(),e.restore()}),e.restore()},Aze=(e,t,n,r)=>{t.save();let i=Wh*2/n.zoom.value,s=e.width+i*2,o=e.height+i*2,a=e.x+s/2,l=e.y+o/2,f=-(s/2+i),c=-(o/2+i);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=r,t.strokeRect(f,c,s,o),t.restore()},Cre=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:r,allElementsMap:i,scale:s,appState:o,renderConfig:a,device:l})=>{var U,y,x;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};let[f,c]=XT(e,s),d=KT({canvas:e,scale:s,normalizedWidth:f,normalizedHeight:c});d.save(),d.scale(o.zoom.value,o.zoom.value);let u;if(n.forEach(w=>{var E;((E=o.editingLinearElement)==null?void 0:E.elementId)===w.id&&w&&(u=w)}),u&&NS(d,o,u,t),o.selectionElement&&!o.isCropping)try{$Ae(o.selectionElement,d,o,a.selectionColor)}catch(w){console.error(w)}if(o.editingTextElement&&Oe(o.editingTextElement)){let w=i.get(o.editingTextElement.id);w&&!w.autoResize&&Aze(w,d,o,a.selectionColor)}o.isBindingEnabled&&o.suggestedBindings.filter(w=>w!=null).forEach(w=>{Sze(d,o,w,t)}),o.frameToHighlight&&kze(d,o,o.frameToHighlight,t),o.elementsToHighlight&&Cze(d,o,o.elementsToHighlight);let h=r.some(w=>at(w));if(r.length===1&&((U=o.editingLinearElement)==null?void 0:U.elementId)===r[0].id&&NS(d,o,r[0],t),Fe(r[0])&&o.selectedLinearElement&&o.selectedLinearElement.segmentMidPointHoveredCoords?Uze(d,o):o.selectedLinearElement&&o.selectedLinearElement.hoverPointIndex>=0&&!(Fe(r[0])&&o.selectedLinearElement.hoverPointIndex>0&&o.selectedLinearElement.hoverPointIndex<r[0].points.length-1)&&yze(d,o,t),!o.multiElement&&!o.editingLinearElement){let w=iJ(r,o),E=r.length===1&&mt(r[0]);E&&((y=o.selectedLinearElement)==null?void 0:y.elementId)===r[0].id&&!r[0].locked&&NS(d,o,r[0],t);let S=a.selectionColor||li.black;if(w){let M=ct(r),A=[];for(let I of t.values()){let R=[],L=a.remoteSelectedElementIds.get(I.id);if(E&&Fe(I)&&(I.startBinding||I.endBinding)||(M.has(I.id)&&!tQ(o,I)&&R.push(S),L&&R.push(...L.map(_=>mx(_,o.collaborators.get(_))))),R.length){let[_,O,$,B,F,z]=gt(I,t,!0);A.push({angle:I.angle,x1:_,y1:O,x2:$,y2:B,selectionColors:R,dashed:!!L,cx:F,cy:z,activeEmbeddable:((x=o.activeEmbeddable)==null?void 0:x.element)===I&&o.activeEmbeddable.state==="active",padding:I.id===o.croppingElementId||Yt(I)?0:void 0})}}let C=I=>{let R=Cn(t,I),[L,_,O,$]=tn(R);A.push({angle:0,x1:L,x2:O,y1:_,y2:$,selectionColors:[li.black],dashed:!0,cx:L+(O-L)/2,cy:_+($-_)/2,activeEmbeddable:!1})};for(let I of Eh(o))C(I);o.editingGroupId&&C(o.editingGroupId),A.forEach(I=>kre(d,o,I))}if(d.save(),d.translate(o.scrollX,o.scrollY),r.length===1){d.fillStyle=li.white;let M=rJ(r[0],o.zoom,t,"mouse",W5(l));if(!o.viewModeEnabled&&w&&!Oe(o.editingTextElement)&&!o.croppingElementId&&Fz(d,a,o,M,r[0].angle),o.croppingElementId&&!o.isCropping){let A=t.get(o.croppingElementId);A&&Yt(A)&&Mze(d,a,o,A,t)}}else if(r.length>1&&!o.isRotating){let M=Wh*2/o.zoom.value;d.fillStyle=li.white;let[A,C,I,R]=tn(r),L=d.getLineDash();d.setLineDash([2/o.zoom.value]);let _=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=S,Qb(d,A-M,C-M,I-A+M*2,R-C+M*2,(A+I)/2,(C+R)/2,0),d.lineWidth=_,d.setLineDash(L);let O=bI([A,C,I,R,(A+I)/2,(C+R)/2],0,o.zoom,"mouse",h?{...W5(l),rotation:!0}:W5(l));r.some($=>!$.locked)&&Fz(d,a,o,O,0)}d.restore()}o.searchMatches.forEach(({id:w,focus:E,matchedLines:S})=>{let M=t.get(w);if(M&&Oe(M)){let[A,C,,,I,R]=gt(M,t,!0);d.save(),o.theme===It.LIGHT?E?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":E?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)",d.translate(o.scrollX,o.scrollY),d.translate(I,R),d.rotate(M.angle),S.forEach(L=>{d.fillRect(A+L.offsetX-I,C+L.offsetY-R,L.width,L.height)}),d.restore()}}),pze(d,o),d.restore(),pje({context:d,renderConfig:a,appState:o,normalizedWidth:f,normalizedHeight:c});let g;return a.renderScrollbars&&(g=vFe(n,f,c,o),d.save(),d.fillStyle=xFe,d.strokeStyle="rgba(255,255,255,0.8)",[g.horizontal,g.vertical].forEach(w=>{w&&sne(d,w.x,w.y,w.width,w.height,c0/2)}),d.restore()),{scrollBars:g,atLeastOneVisibleElement:n.length>0,elementsMap:t}},Mre=T7(e=>{var n;let t=Cre(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),Tze=(e,t)=>{if(t){Mre(e);return}let n=Cre(e);return e.callback(n),n},Ize=e=>{let t=T.useRef(!1);return T.useEffect(()=>{var l;if(!t.current){t.current=!0;return}let n=new Map,r=new Map,i=new Map,s=new Map,o=new Map;e.appState.collaborators.forEach((f,c)=>{if(f.selectedElementIds)for(let d of Object.keys(f.selectedElementIds))i.has(d)||i.set(d,[]),i.get(d).push(c);!f.pointer||f.pointer.renderCursor===!1||(f.username&&s.set(c,f.username),f.userState&&o.set(c,f.userState),r.set(c,Ga({sceneX:f.pointer.x,sceneY:f.pointer.y},e.appState)),n.set(c,f.button))});let a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";Tze({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:r,remotePointerButton:n,remoteSelectedElementIds:i,remotePointerUsernames:s,remotePointerUserStates:o,selectionColor:a,renderScrollbars:!1},device:e.device,callback:e.renderInteractiveSceneCallback},iN())}),m.jsx("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?nn.GRAB:nn.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:j("labels.drawingCanvas")})},$z=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),Nze=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements?!1:ki($z(e.appState),$z(t.appState)),Rze=Te.memo(Ize,Nze),_ze=e=>{let t=T.useRef(null),n=T.useRef(!1);return T.useEffect(()=>{let r=t.current;if(!r)return;let i=e.canvas;n.current||(n.current=!0,r.replaceChildren(i),i.classList.add("excalidraw__canvas","static"));let s=`${e.appState.width}px`,o=`${e.appState.height}px`;i.style.width!==s&&(i.style.width=s),i.style.height!==o&&(i.style.height=o);let a=e.appState.width*e.scale,l=e.appState.height*e.scale;i.width!==a&&(i.width=a),i.height!==l&&(i.height=l),DQ({canvas:i,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},iN())}),m.jsx("div",{className:"excalidraw__canvas-wrapper",ref:t})},zz=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),Pze=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:ki(zz(e.appState),zz(t.appState))&&ki(e.renderConfig,t.renderConfig),Dze=Te.memo(_ze,Pze),Hz=class{constructor(e){Z(this,"scene"),Z(this,"getRenderableElements",(()=>{let t=({elementsMap:r,zoom:i,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:f,width:c})=>{let d=[];for(let u of r.values())f9(u,c,f,{zoom:i,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},r)&&d.push(u);return d},n=({elements:r,editingTextElement:i,newElementId:s,pendingImageElementId:o})=>{let a=aa(new Map);for(let l of r)Yt(l)&&o===l.id||s!==l.id&&(!i||i.type!=="text"||l.id!==i.id)&&a.set(l.id,l);return a};return yve(({zoom:r,offsetLeft:i,offsetTop:s,scrollX:o,scrollY:a,height:l,width:f,editingTextElement:c,newElementId:d,pendingImageElementId:u,sceneNonce:h})=>{let g=this.scene.getNonDeletedElements(),U=n({elements:g,editingTextElement:c,newElementId:d,pendingImageElementId:u}),y=t({elementsMap:U,zoom:r,offsetLeft:i,offsetTop:s,scrollX:o,scrollY:a,height:l,width:f});return{elementsMap:U,visibleElements:y}})})()),this.scene=e}destroy(){Mre.cancel(),PQ.cancel(),this.getRenderableElements.clear()}},Lze=({trails:e})=>{let t=T.useRef(null);return T.useEffect(()=>{if(t.current)for(let n of e)n.start(t.current);return()=>{for(let n of e)n.stop()}},e),m.jsx("div",{className:"SVGLayer",children:m.jsx("svg",{ref:t})})},Oze=5,jze=(e,t,n)=>{let[r,i]=gt(e,n),{x:s,y:o}=Ga({sceneX:r+e.width,sceneY:i},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},Vz=({children:e,element:t,elementsMap:n})=>{let r=e8();if(r.contextMenu||r.newElement||r.resizingElement||r.isRotating||r.openMenu||r.viewModeEnabled)return null;let{x:i,y:s}=jze(t,r,n);return m.jsx("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${i}px`,padding:Oze},children:e})},Bze="small",RS=e=>m.jsxs("label",{className:ze("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${Bze}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[m.jsx("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m.jsx("div",{className:"ToolIcon__icon",children:e.icon})]}),Fze=({height:e,width:t,userToFollow:n,onDisconnect:r})=>m.jsx("div",{className:"follow-mode",style:{width:t,height:e},children:m.jsxs("div",{className:"follow-mode__badge",children:[m.jsxs("div",{className:"follow-mode__badge__label",children:["Following"," ",m.jsx("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),m.jsx("button",{type:"button",onClick:r,className:"follow-mode__disconnect-btn",children:R6})]})}),$ze=Fze,zze=class{constructor(){Z(this,"targets",new WeakMap),Z(this,"rafIds",new WeakMap)}register(e,t){this.targets.set(e,{callback:t,stopped:!0})}start(e){let t=this.targets.get(e);t&&(this.rafIds.has(e)||(this.targets.set(e,{...t,stopped:!1}),this.scheduleFrame(e)))}stop(e){let t=this.targets.get(e);t&&!t.stopped&&this.targets.set(e,{...t,stopped:!0}),this.cancelFrame(e)}constructFrame(e){return t=>{let n=this.targets.get(e);if(!n)return;let r=this.onFrame(n,t);!n.stopped&&!r?this.scheduleFrame(e):this.cancelFrame(e)}}scheduleFrame(e){let t=requestAnimationFrame(this.constructFrame(e));this.rafIds.set(e,t)}cancelFrame(e){if(this.rafIds.has(e)){let t=this.rafIds.get(e);cancelAnimationFrame(t)}this.rafIds.delete(e)}onFrame(e,t){return e.callback(t)??!1}},_M=class{constructor(e,t,n){this.animationFrameHandler=e,this.app=t,this.options=n,Z(this,"currentTrail"),Z(this,"pastTrails",[]),Z(this,"container"),Z(this,"trailElement"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS($t,"path")}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(e,t){if(this.currentTrail){let n=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[n-1][0]===e&&this.currentTrail.originalPoints[n-1][1]===t}return!1}start(e){e&&(this.container=e),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var e;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((e=this.container)==null||e.removeChild(this.trailElement))}startPath(e,t){this.currentTrail=new U9(this.options),this.currentTrail.addPoint([e,t,performance.now()]),this.update()}addPointToPath(e,t){this.currentTrail&&(this.currentTrail.addPoint([e,t,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){let e=[];for(let n of this.pastTrails)e.push(this.drawTrail(n,this.app.state));if(this.currentTrail){let n=this.drawTrail(this.currentTrail,this.app.state);e.push(n)}this.pastTrails=this.pastTrails.filter(n=>n.getStrokeOutline().length!==0),e.length===0&&this.stop();let t=e.join(" ").trim();this.trailElement.setAttribute("d",t),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(e,t){let n=e.getStrokeOutline(e.options.size/t.zoom.value).map(([r,i])=>{let s=Ga({sceneX:r,sceneY:i},t);return[s.x,s.y]});return xve(n,!0)}},Hze=class{constructor(e,t){this.animationFrameHandler=e,this.app=t,Z(this,"localTrail"),Z(this,"collabTrails",new Map),Z(this,"container"),this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new _M(e,t,{...this.getTrailOptions(),fill:()=>vxe})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:e=>{let t=Math.max(0,1-(performance.now()-e.pressure)/1e3),n=(50-Math.min(50,e.totalLength-e.currentIndex))/50;return Math.min(vh(n),vh(t))}}}startPath(e,t){this.localTrail.startPath(e,t)}addPointToPath(e,t){this.localTrail.addPointToPath(e,t)}endPath(){this.localTrail.endPath()}start(e){this.container=e,this.animationFrameHandler.start(this),this.localTrail.start(e)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(let[e,t]of this.app.state.collaborators.entries()){let n;this.collabTrails.has(e)?n=this.collabTrails.get(e):(n=new _M(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=t.pointer)==null?void 0:r.laserColor)||mx(e,t)}}),n.start(this.container),this.collabTrails.set(e,n)),t.pointer&&t.pointer.tool==="laser"&&(t.button==="down"&&!n.hasCurrentTrail&&n.startPath(t.pointer.x,t.pointer.y),t.button==="down"&&n.hasCurrentTrail&&!n.hasLastPoint(t.pointer.x,t.pointer.y)&&n.addPointToPath(t.pointer.x,t.pointer.y),t.button==="up"&&n.hasCurrentTrail&&(n.addPointToPath(t.pointer.x,t.pointer.y),n.endPath()))}for(let e of this.collabTrails.keys())this.app.state.collaborators.has(e)||(this.collabTrails.get(e).stop(),this.collabTrails.delete(e))}}},Vze=(e,t,n,r,i,s)=>{let{zoom:o}=r,a=180*n/Math.PI,l=e*(o.value-1)/2,f=t*(o.value-1)/2;return e>i&&o.value!==1&&(l=i*(o.value-1)/2),t>s&&o.value!==1&&(f=s*(o.value-1)/2),`translate(${l}px, ${f}px) scale(${o.value}) rotate(${a}deg)`},Wze=({id:e,onChange:t,onSubmit:n,getViewportCoords:r,element:i,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{let f=(F,z)=>{if(!z.style.fontFamily||!z.style.fontSize)return!1;let H=z.style.fontFamily.replace(/"/g,"");return a6({fontFamily:F.fontFamily})!==H||`${F.fontSize}px`!==z.style.fontSize},c=()=>{var Y;let F=a.state,z=(Y=Nf.getScene(i))==null?void 0:Y.getElement(e);if(!z)return;let{textAlign:H,verticalAlign:G}=z,V=a.scene.getNonDeletedElementsMap();if(z&&Oe(z)){let K=z.x,q=z.y,se=di(z,a.scene.getNonDeletedElementsMap()),de=z.width,xe=z.height,ve=z.width,ue=z.height;if(se&&z.containerId){if(Et(se)){let jt=je.getBoundTextElementPosition(se,z,V);K=jt.x,q=jt.y}let ht=f(z,d),st;if(ht?st=n9(se.id,se.height):(st=g6[se.id],st||(st=n9(se.id,se.height))),ve=Tf(se,z),ue=G7(se,z),!Et(se)&&xe>ue){let jt=Jh(xe,se.type);ye(se,{height:jt});return}else if(!Et(se)&&se.height>st.height&&xe<ue){let jt=Jh(xe,se.type);ye(se,{height:jt})}else{let{y:jt}=W7(se,z,V);q=jt}}let[te,le]=r(K,q),he=d.selectionStart,we=d.selectionEnd,Se=d.value.length;if(he===we&&we!==Se){let ht=Se-we;d.selectionStart=d.value.length-ht,d.selectionEnd=d.value.length-ht}se?de+=.5:(ve=(F.width-8-te)/F.zoom.value,de=Math.min(de,ve)),xe*=1.05;let De=ln(z),Ge=(F.height-le)/F.zoom.value;Object.assign(d.style,{font:De,lineHeight:z.lineHeight,width:`${de}px`,height:`${xe}px`,left:`${te}px`,top:`${le}px`,transform:Vze(de,xe,JTe(z,se),F,ve,Ge),textAlign:H,verticalAlign:G,color:z.strokeColor,opacity:z.opacity/100,filter:"var(--theme-filter)",maxHeight:`${Ge}px`}),d.scrollTop=0,kf()&&(d.style.fontFamily=a6(z)),ye(z,{x:K,y:q})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let u="pre",h="normal";(An(i)||!i.autoResize)&&(u="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:u,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=i.originalText,c(),t&&(d.onpaste=async F=>{let z=await VQ(F,!0);if(!z.text)return;let H=f6(z.text);if(!H)return;let G=di(i,a.scene.getNonDeletedElementsMap()),V=ln({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(G){let Y=xt(G,a.scene.getNonDeletedElementsMap()),K=f1(`${d.value}${H}`,V,Tf(G,Y)),q=ET(K,V);d.style.width=`${q}px`}},d.oninput=()=>{let F=f6(d.value);if(d.value!==F){let z=d.selectionStart;d.value=F,d.selectionStart=z,d.selectionEnd=z}t(d.value)}),d.onkeydown=F=>{if(!F.shiftKey&&V$.keyTest(F))F.preventDefault(),a.actionManager.executeAction(V$),c();else if(!F.shiftKey&&W$.keyTest(F))F.preventDefault(),a.actionManager.executeAction(W$),c();else if(!F.shiftKey&&G$.keyTest(F))F.preventDefault(),a.actionManager.executeAction(G$),c();else if($$.keyTest(F))a.actionManager.executeAction($$);else if(z$.keyTest(F))a.actionManager.executeAction(z$);else if(F.key===Q.ESCAPE)F.preventDefault(),M=!0,A();else if(F.key===Q.ENTER&&F[Q.CTRL_OR_CMD]){if(F.preventDefault(),F.isComposing||F.keyCode===229)return;M=!0,A()}else if(F.key===Q.TAB||F[Q.CTRL_OR_CMD]&&(F.code===Ft.BRACKET_LEFT||F.code===Ft.BRACKET_RIGHT)){if(F.preventDefault(),F.isComposing)return;F.shiftKey||F.code===Ft.BRACKET_LEFT?w():x(),d.dispatchEvent(new Event("input"))}};let g=4,U=" ".repeat(g),y=new RegExp(`^ {1,${g}}`),x=()=>{let{selectionStart:F,selectionEnd:z}=d,H=E(),G=d.value;H.forEach(V=>{let Y=G.slice(0,V),K=G.slice(V);G=`${Y}${U}${K}`}),d.value=G,d.selectionStart=F+g,d.selectionEnd=z+g*H.length},w=()=>{let{selectionStart:F,selectionEnd:z}=d,H=E(),G=[],V=d.value;H.forEach(Y=>{let K=V.slice(Y,Y+g).match(y);if(K){let q=V.slice(0,Y),se=V.slice(Y+K[0].length);V=`${q}${se}`,G.push(Y)}}),d.value=V,G.length&&(F>G[G.length-1]?d.selectionStart=Math.max(F-g,G[G.length-1]):d.selectionStart=F,d.selectionEnd=Math.max(d.selectionStart,z-g*G.length))},E=()=>{let{selectionStart:F,selectionEnd:z,value:H}=d,G=H.slice(0,F).match(/[^\n]*$/)[0].length;return F=F-G,H.slice(F,z).split(`
`).reduce((V,Y,K,q)=>V.concat(K?V[K-1]+q[K-1].length+1:F),[]).reverse()},S=F=>{F.target instanceof HTMLCanvasElement&&(F.preventDefault(),F.stopPropagation())},M=!1,A=()=>{var H,G;if($)return;$=!0,C();let F=(H=Nf.getScene(i))==null?void 0:H.getElement(i.id);if(!F)return;let z=di(F,a.scene.getNonDeletedElementsMap());if(z){if(d.value.trim()){let V=Af(z);!V||V!==i.id?ye(z,{boundElements:(z.boundElements||[]).concat({type:"text",id:i.id})}):Et(z)&&q7(z)}else ye(z,{boundElements:(G=z.boundElements)==null?void 0:G.filter(V=>!Oe(V))});ms(F,z,a.scene.getNonDeletedElementsMap())}n({viaKeyboard:M,nextOriginalText:d.value})},C=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,B&&B.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("wheel",S,!0),window.removeEventListener("pointerdown",L),window.removeEventListener("pointerup",I),window.removeEventListener("blur",A),window.removeEventListener("beforeunload",A),_(),O(),d.remove()},I=F=>{window.removeEventListener("pointerup",I);let z=F==null?void 0:F.target,H=z instanceof HTMLElement&&z.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=A,H||d.focus()})},R=()=>{d.onblur=null,window.addEventListener("pointerup",I),window.addEventListener("blur",A)},L=F=>{let z=F==null?void 0:F.target;if(F.button===kd.WHEEL){z instanceof HTMLTextAreaElement&&(F.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(F)),R();return}let H=z instanceof HTMLElement&&z.classList.contains("properties-trigger");(F.target instanceof HTMLElement||F.target instanceof SVGElement)&&F.target.closest(`.${i6.SHAPE_ACTIONS_MENU}, .${i6.ZOOM_ACTIONS}`)&&!Eu(F.target)||H?R():F.target instanceof HTMLCanvasElement&&!kf()&&requestAnimationFrame(()=>{A()})},_=a.scene.onUpdate(()=>{var F;c(),(F=document.activeElement)!=null&&F.closest(".properties-content")||d.focus()}),O=a.onScrollChangeEmitter.on(()=>{c()}),$=!1;l&&d.select(),I();let B=null;s&&"ResizeObserver"in window?(B=new window.ResizeObserver(()=>{c()}),B.observe(s)):window.addEventListener("resize",c),d.onpointerdown=F=>F.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",L,{capture:!0})}),window.addEventListener("beforeunload",A),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d)},Gze=_e({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,r)=>{let i=wt(e,t);return i.length===1&&Oe(i[0])&&!i[0].autoResize},perform:(e,t,n,r)=>{let i=wt(e,t);return{appState:t,elements:e.map(s=>{if(s.id===i[0].id&&Oe(s)){let o=Xi(s.originalText,ln(s),s.lineHeight);return yt(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:me.IMMEDIATELY}}}),Xze=e=>{let t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(n=>`\\s*${n}(-beta)?`).join("|")})\\b`).test(e.trim())},Are=({canvas:e,rc:t,newElement:n,elementsMap:r,allElementsMap:i,scale:s,appState:o,renderConfig:a})=>{if(e){let[l,f]=XT(e,s),c=KT({canvas:e,scale:s,normalizedWidth:l,normalizedHeight:f});c.save(),c.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?yu(n,r,i,t,c,a,o):c.clearRect(0,0,l,f)}},Kze=T7(e=>{Are(e)},{trailing:!0}),Yze=(e,t)=>{if(t){Kze(e);return}Are(e)},Zze=e=>{let t=T.useRef(null);return T.useEffect(()=>{t.current&&Yze({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},iN())}),m.jsx("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},qze=Zze,Tre=Te.createContext(null),Ire=Te.createContext(null),Nre={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},sN=Te.createContext(Nre);sN.displayName="DeviceContext";var oN=Te.createContext({container:null,id:null});oN.displayName="ExcalidrawContainerContext";var aN=Te.createContext([]);aN.displayName="ExcalidrawElementsContext";var lN=Te.createContext({...oc(),width:0,height:0,offsetLeft:0,offsetTop:0});lN.displayName="ExcalidrawAppStateContext";var cN=Te.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});cN.displayName="ExcalidrawSetAppStateContext";var fN=Te.createContext(null);fN.displayName="ExcalidrawActionManagerContext";var bc=()=>T.useContext(Tre),Jb=()=>T.useContext(Ire),Wr=()=>T.useContext(sN),Uc=()=>T.useContext(oN),bx=()=>T.useContext(aN),e8=()=>T.useContext(lN),Gr=()=>T.useContext(cN),Gs=()=>T.useContext(fN),Wg=!1,_S=0,fu=!1,Gg=!1,PS=!1,DS={horizontal:null,vertical:null},vd=0,Xg=!1,LS=new Map,yy=!1,Wz=0,Gz=!1,du=null,Xt={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},Qze=class Rre extends Te.Component{constructor(t){super(t),Z(this,"canvas"),Z(this,"interactiveCanvas",null),Z(this,"rc"),Z(this,"unmounted",!1),Z(this,"actionManager"),Z(this,"device",Nre),Z(this,"excalidrawContainerRef",Te.createRef()),Z(this,"scene"),Z(this,"fonts"),Z(this,"renderer"),Z(this,"visibleElements"),Z(this,"resizeObserver"),Z(this,"nearestScrollableContainer"),Z(this,"library"),Z(this,"libraryItemsFromStorage"),Z(this,"id"),Z(this,"store"),Z(this,"history"),Z(this,"excalidrawContainerValue"),Z(this,"files",{}),Z(this,"imageCache",new Map),Z(this,"iFrameRefs",new Map),Z(this,"embedsValidationStatus",new Map),Z(this,"initializedEmbeds",new Set),Z(this,"elementsPendingErasure",new Set),Z(this,"flowChartCreator",new gFe),Z(this,"flowChartNavigator",new mFe),Z(this,"hitLinkElement"),Z(this,"lastPointerDownEvent",null),Z(this,"lastPointerUpEvent",null),Z(this,"lastPointerMoveEvent",null),Z(this,"lastPointerMoveCoords",null),Z(this,"lastViewportPosition",{x:0,y:0}),Z(this,"animationFrameHandler",new zze),Z(this,"laserTrails",new Hze(this.animationFrameHandler,this)),Z(this,"eraserTrail",new _M(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:c=>{let d=Math.max(0,1-(performance.now()-c.pressure)/200),u=(10-Math.min(10,c.totalLength-c.currentIndex))/10;return Math.min(vh(u),vh(d))},fill:()=>this.state.theme===It.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"})),Z(this,"onChangeEmitter",new Nl),Z(this,"onPointerDownEmitter",new Nl),Z(this,"onPointerUpEmitter",new Nl),Z(this,"onUserFollowEmitter",new Nl),Z(this,"onScrollChangeEmitter",new Nl),Z(this,"missingPointerEventCleanupEmitter",new Nl),Z(this,"onRemoveEventListenersEmitter",new Nl),Z(this,"getEffectiveGridSize",()=>K2(this)?this.state.gridSize:null),Z(this,"updateEmbedValidationStatus",(c,d)=>{this.embedsValidationStatus.set(c.id,d),Hn.delete(c)}),Z(this,"updateEmbeddables",()=>{let c=new Set,d=!1;this.scene.getNonDeletedElements().filter(u=>{if(Rs(u)){if(c.add(u.id),!this.embedsValidationStatus.has(u.id)){d=!0;let h=i3(u.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(u,h)}}else Rd(u)&&c.add(u.id);return!1}),d&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((u,h)=>{c.has(h)||this.iFrameRefs.delete(h)})}),Z(this,"getFrameNameDOMId",c=>`${this.id}-frame-name-${c.id}`),Z(this,"frameNameBoundsCache",{get:c=>{let d=this.frameNameBoundsCache._cache.get(c.id);if(!d||d.zoom!==this.state.zoom.value||d.versionNonce!==c.versionNonce){let u=document.getElementById(this.getFrameNameDOMId(c));if(u){let h=u.getBoundingClientRect(),g=xn({clientX:h.x,clientY:h.y},this.state),U=xn({clientX:h.right,clientY:h.bottom},this.state);return d={x:g.x,y:g.y,width:U.x-g.x,height:U.y-g.y,angle:0,zoom:this.state.zoom.value,versionNonce:c.versionNonce},this.frameNameBoundsCache._cache.set(c.id,d),d}return null}return d},_cache:new Map}),Z(this,"resetEditingFrame",c=>{var d;c&&ye(c,{name:((d=c.name)==null?void 0:d.trim())||null}),this.setState({editingFrame:null})}),Z(this,"renderFrameNames",()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;let c=this.state.theme===It.DARK;return this.scene.getNonDeletedFramesLikes().map(d=>{if(!f9(d,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===d.id&&this.resetEditingFrame(d),null;let{x:u,y:h}=Ga({sceneX:d.x,sceneY:d.y},this.state),g=6,U,y=qQ(d);if(d.id===this.state.editingFrame){let x=y;U=m.jsx("input",{autoFocus:!0,value:x,onChange:w=>{ye(d,{name:w.target.value})},onFocus:w=>w.target.select(),onBlur:()=>this.resetEditingFrame(d),onKeyDown:w=>{(w.key===Q.ESCAPE||w.key===Q.ENTER)&&this.resetEditingFrame(d)},style:{background:this.state.viewBackgroundColor,filter:c?gT:"none",zIndex:2,border:"none",display:"block",padding:`${g}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${g}px, ${g}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-u-g}px`},size:x.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else U=y;return m.jsx("div",{id:this.getFrameNameDOMId(d),style:{position:"absolute",bottom:`${this.state.height+$n.nameOffsetY-h+this.state.offsetTop}px`,left:`${u-this.state.offsetLeft}px`,zIndex:2,fontSize:$n.nameFontSize,color:c?$n.nameColorDarkTheme:$n.nameColorLightTheme,lineHeight:$n.nameLineHeight,width:"max-content",maxWidth:`${d.width}px`,overflow:d.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:nn.MOVE,pointerEvents:this.state.viewModeEnabled?Z1.disabled:Z1.enabled},onPointerDown:x=>this.handleCanvasPointerDown(x),onWheel:x=>this.handleWheel(x),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:d.id})},children:U},d.id)})}),Z(this,"focusContainer",()=>{var c;(c=this.excalidrawContainerRef.current)==null||c.focus()}),Z(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted()),Z(this,"getSceneElements",()=>this.scene.getNonDeletedElements()),Z(this,"onInsertElements",c=>{this.addElementsFromPasteOrLibrary({elements:c,position:"center",files:null})}),Z(this,"onExportImage",async(c,d,u)=>{vn("export",c,"ui");let h=await px(c,d,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:u.exportingFrame}).catch(LZ).catch(g=>{console.error(g),this.setState({errorMessage:g.message})});this.state.exportEmbedScene&&h&&vI(h)&&this.setState({fileHandle:h})}),Z(this,"magicGenerations",new Map),Z(this,"updateMagicGeneration",({frameElement:c,data:d})=>{d.status==="pending"?ye(c,{customData:{generationData:void 0}},!1):ye(c,{customData:{generationData:d}},!1),this.magicGenerations.set(c.id,d),this.triggerRender()}),Z(this,"plugins",{}),Z(this,"onMagicframeToolSelect",()=>{let c=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(c.length===0)this.setActiveTool({type:$r.magicframe}),vn("ai","tool-select (empty-selection)","d2c");else{let d=c.length===1&&Qy(c[0])&&c[0];if(!d&&c.some(h=>at(h)||h.frameId)){this.setActiveTool({type:$r.magicframe});return}vn("ai","tool-select (existing selection)","d2c");let u;if(d)u=d;else{let[h,g,U,y]=tn(c),x=50;u=WC({...$n,x:h-x,y:g-x,width:U-h+x*2,height:y-g+x*2,opacity:100,locked:!1}),this.scene.insertElement(u);for(let w of c)ye(w,{frameId:u.id});this.setState({selectedElementIds:{[u.id]:!0}})}this.onMagicFrameGenerate(u,"upstream")}}),Z(this,"openEyeDropper",({type:c})=>{Za.set(fx,{swapPreviewOnAlt:!0,colorPickerType:c==="stroke"?"elementStroke":"elementBackground",onSelect:(d,u)=>{let h=c==="background"&&u.altKey||c==="stroke"&&!u.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?h?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:d},captureUpdate:me.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:d},captureUpdate:me.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(g=>this.state.selectedElementIds[g.id]?yt(g,{[h?"strokeColor":"backgroundColor"]:d}):g),captureUpdate:me.IMMEDIATELY})},keepOpenOnAlt:!1})}),Z(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})}),Z(this,"syncActionResult",Zn(c=>{var h,g,U,y,x,w;if(this.unmounted||c===!1)return;c.captureUpdate===me.NEVER?this.store.shouldUpdateSnapshot():c.captureUpdate===me.IMMEDIATELY&&this.store.shouldCaptureIncrement();let d=!1,u=null;if(c.elements&&(this.scene.replaceAllElements(c.elements),d=!0),c.files&&(this.addMissingFiles(c.files,c.replaceFiles),this.addNewImagesToImageCache()),c.appState||u||this.state.contextMenu){let E=((h=c==null?void 0:c.appState)==null?void 0:h.viewModeEnabled)||!1,S=((g=c==null?void 0:c.appState)==null?void 0:g.zenModeEnabled)||!1,M=((U=c==null?void 0:c.appState)==null?void 0:U.theme)||this.props.theme||It.LIGHT,A=((y=c==null?void 0:c.appState)==null?void 0:y.name)??this.state.name,C=((x=c==null?void 0:c.appState)==null?void 0:x.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(E=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(S=this.props.zenModeEnabled),u=((w=c.appState)==null?void 0:w.editingTextElement)||null,c.elements&&u&&c.elements.forEach(I=>{(u==null?void 0:u.id)===I.id&&u!==I&&eM(I)&&Oe(I)&&(u=I)}),u!=null&&u.isDeleted&&(u=null),this.setState(I=>{let R=c.appState||{};return{...I,...R,contextMenu:null,editingTextElement:u,viewModeEnabled:E,zenModeEnabled:S,theme:M,name:A,errorMessage:C}}),d=!0}!d&&c.captureUpdate!==me.EVENTUALLY&&this.scene.triggerUpdate()})),Z(this,"onBlur",Zn(()=>{fu=!1,this.setState({isBindingEnabled:!0})})),Z(this,"onUnload",()=>{this.onBlur()}),Z(this,"disableEvent",c=>{c.preventDefault()}),Z(this,"resetHistory",()=>{this.history.clear()}),Z(this,"resetStore",()=>{this.store.clear()}),Z(this,"resetScene",Zn(c=>{this.scene.replaceAllElements([]),this.setState(d=>({...oc(),isLoading:c!=null&&c.resetLoadingState?!1:d.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()})),Z(this,"initializeScene",async()=>{var u;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async h=>{if(!h.files.length)return;let g=h.files[0],U=await g.getFile();this.loadFileToCanvas(new File([U],U.name||"",{type:U.type}),g)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let c=null;try{typeof this.props.initialData=="function"?c=await this.props.initialData()||null:c=await this.props.initialData||null,c!=null&&c.libraryItems&&this.library.updateLibrary({libraryItems:c.libraryItems,merge:!0}).catch(h=>{console.error(h)})}catch(h){console.error(h),c={appState:{errorMessage:h.message||"Encountered an error during importing or restoring scene data"}}}let d=K7(c,null,null,{repairBindings:!0});d.appState={...d.appState,theme:this.props.theme||d.appState.theme,openSidebar:((u=d.appState)==null?void 0:u.openSidebar)||this.state.openSidebar,activeTool:d.appState.activeTool.type==="image"?{...d.appState.activeTool,type:"selection"}:d.appState.activeTool,isLoading:!1,toast:this.state.toast},c!=null&&c.scrollToContent&&(d.appState={...d.appState,...G2(d.elements,{...d.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...d,captureUpdate:me.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(h=>{this.fonts.onLoaded(h)}),H5(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})}),Z(this,"isMobileBreakpoint",(c,d)=>c<Rxe||d<Pxe&&c<_xe),Z(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;let{clientWidth:c,clientHeight:d}=document.body,u=this.device.viewport,h=Zy(u,{isLandscape:c>d,isMobile:this.isMobileBreakpoint(c,d)});return u!==h?(this.device={...this.device,viewport:h},!0):!1}),Z(this,"refreshEditorBreakpoints",()=>{let c=this.excalidrawContainerRef.current;if(!c)return;let{width:d,height:u}=c.getBoundingClientRect(),h=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Dxe,g=this.device.editor,U=Zy(g,{isMobile:this.isMobileBreakpoint(d,u),canFitSidebar:d>h});return g!==U?(this.device={...this.device,editor:U},!0):!1}),Z(this,"onResize",Zn(()=>{this.scene.getElementsIncludingDeleted().forEach(c=>Hn.delete(c)),this.refreshViewportBreakpoints(),this.updateDOMRect(),CC||this.refreshEditorBreakpoints(),this.setState({})})),Z(this,"onFullscreenChange",()=>{var c;!document.fullscreenElement&&((c=this.state.activeEmbeddable)==null?void 0:c.state)==="active"&&this.setState({activeEmbeddable:null})}),Z(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:c,scrollBars:d,elementsMap:u})=>{d&&(DS=d);let h=this.state.editingTextElement?!1:!c&&u.size>0;this.state.scrolledOutside!==h&&this.setState({scrolledOutside:h}),this.scheduleImageRefresh()}),Z(this,"onScroll",l6(()=>{let{offsetTop:c,offsetLeft:d}=this.getCanvasOffsets();this.setState(u=>u.offsetLeft===d&&u.offsetTop===c?null:{offsetTop:c,offsetLeft:d})},Ixe)),Z(this,"onCut",Zn(c=>{var d;!((d=this.excalidrawContainerRef.current)!=null&&d.contains(document.activeElement))||Eu(c.target)||(this.actionManager.executeAction(Q$,"keyboard",c),c.preventDefault(),c.stopPropagation())})),Z(this,"onCopy",Zn(c=>{var d;!((d=this.excalidrawContainerRef.current)!=null&&d.contains(document.activeElement))||Eu(c.target)||(this.actionManager.executeAction(p3,"keyboard",c),c.preventDefault(),c.stopPropagation())})),Z(this,"onTouchStart",c=>{if(EZ&&c.preventDefault(),!Wg){Wg=!0,clearTimeout(_S),_S=window.setTimeout(Rre.resetTapTwice,Axe);return}if(Wg&&c.touches.length===1){let d=c.touches[0];this.handleCanvasDoubleClick({clientX:d.clientX,clientY:d.clientY}),Wg=!1,clearTimeout(_S)}c.touches.length===2&&this.setState({selectedElementIds:Kt({},this.state),activeEmbeddable:null})}),Z(this,"onTouchEnd",c=>{this.resetContextMenuTimer(),c.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:Kt(this.state.previousSelectedElementIds,this.state)}):Xt.pointers.clear()}),Z(this,"pasteFromClipboard",Zn(async c=>{var E,S;let d=!!yy,u=document.activeElement,h=(E=this.excalidrawContainerRef.current)==null?void 0:E.contains(u);if(c&&!h)return;let g=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(c&&(!(g instanceof HTMLCanvasElement)||Eu(u)))return;let{x:U,y}=xn({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),x=(S=c==null?void 0:c.clipboardData)==null?void 0:S.files[0],w=await VQ(c,d);if(!x&&!d){if(w.mixedContent)return this.addElementsFromMixedContentPaste(w.mixedContent,{isPlainPaste:d,sceneX:U,sceneY:y});if(w.text){let M=w.text.trim();M.startsWith("<svg")&&M.endsWith("</svg>")&&(x=GF(M))}}if(kh(x)&&!w.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:j("errors.imageToolNotSupported")});return}let M=this.createImageElement({sceneX:U,sceneY:y});this.insertImageElement(M,x),this.initializeImageDimensions(M),this.setState({selectedElementIds:Kt({[M.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(w,c)===!1)return}catch(M){console.error(M)}if(w.errorMessage)this.setState({errorMessage:w.errorMessage});else if(w.spreadsheet&&!d)this.setState({pasteDialog:{data:w.spreadsheet,shown:!0}});else if(w.elements){let M=w.programmaticAPI?RM(w.elements):w.elements;this.addElementsFromPasteOrLibrary({elements:M,files:w.files||null,position:"cursor",retainSeed:d})}else if(w.text){if(w.text&&Xze(w.text)){let C=await Ve(()=>import("./index-BIQatzAd.js").then(I=>I.aR),[]);try{let{elements:I,files:R}=await C.parseMermaidToExcalidraw(w.text),L=RM(I,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:L,files:R,position:"cursor"});return}catch(I){console.warn(`parsing pasted text as mermaid definition failed: ${I.message}`)}}let M=$Z(w.text).split(/\n+/).map(C=>C.trim()).filter(Boolean),A=M.map(C=>AIe(C)).filter(C=>{var I;return i3(C,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(C)||((I=Ap(C))==null?void 0:I.type)==="video")});if(!yy&&A.length>0&&A.length===M.length){let C=[];for(let I of A){let R=C[C.length-1],L=this.insertEmbeddableElement({sceneX:R?R.x+R.width+20:U,sceneY:y,link:go(I)});L&&C.push(L)}C.length&&this.setState({selectedElementIds:Object.fromEntries(C.map(I=>[I.id,!0]))});return}this.addTextFromPaste(w.text,d)}this.setActiveTool({type:"selection"}),c==null||c.preventDefault()})),Z(this,"addElementsFromPasteOrLibrary",c=>{var F,z;let d=iI(c.elements,null,void 0),[u,h,g,U]=tn(d),y=Fi(u,g)/2,x=Fi(h,U)/2,w=typeof c.position=="object"?c.position.clientX:c.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,E=typeof c.position=="object"?c.position.clientY:c.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:S,y:M}=xn({clientX:w,clientY:E},this.state),A=S-y,C=M-x,[I,R]=Ar(A,C,this.getEffectiveGridSize()),L=UQ(d.map(H=>yt(H,{x:H.x+I-u,y:H.y+R-h})),{randomizeSeed:!c.retainSeed}),_=this.scene.getElementsIncludingDeleted(),O=[..._,...L];O=((z=(F=this.props).onDuplicate)==null?void 0:z.call(F,O,_))||O,fc(O,ct(L));let $=this.getTopLayerFrameAtSceneCoords({x:S,y:M});if($){let H=LNe(L,$);V5(O,H,$,this.state)}this.scene.replaceAllElements(O),L.forEach(H=>{if(Oe(H)&&An(H)){let G=di(H,this.scene.getElementsMapIncludingDeleted());ms(H,G,this.scene.getElementsMapIncludingDeleted())}}),mxe&&xf.loadElementsFonts(L).then(H=>{this.fonts.onLoaded(H)}),c.files&&this.addMissingFiles(c.files),this.store.shouldCaptureIncrement();let B=pI(L);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Za.get(JI)?this.state.openSidebar:null,...is({editingGroupId:null,selectedElementIds:B.reduce((H,G)=>(An(G)||(H[G.id]=!0),H),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{c.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),c.fitToContent&&this.scrollToContent(L,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})}),Z(this,"setAppState",(c,d)=>{this.setState(c,d)}),Z(this,"removePointer",c=>{vd&&this.resetContextMenuTimer(),Xt.pointers.delete(c.pointerId)}),Z(this,"toggleLock",(c="ui")=>{this.state.activeTool.locked||vn("toolbar","toggleLock",`${c} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(d=>({activeTool:{...d.activeTool,...Ur(this.state,d.activeTool.locked?{type:"selection"}:d.activeTool),locked:!d.activeTool.locked}}))}),Z(this,"updateFrameRendering",c=>{this.setState(d=>{let u=typeof c=="function"?c(d.frameRendering):c;return{frameRendering:{enabled:(u==null?void 0:u.enabled)??d.frameRendering.enabled,clip:(u==null?void 0:u.clip)??d.frameRendering.clip,name:(u==null?void 0:u.name)??d.frameRendering.name,outline:(u==null?void 0:u.outline)??d.frameRendering.outline}}})}),Z(this,"togglePenMode",c=>{this.setState(d=>({penMode:c??!d.penMode,penDetected:!0}))}),Z(this,"onHandToolToggle",()=>{this.actionManager.executeAction(JOe)}),Z(this,"zoomCanvas",c=>{this.setState({...Hu({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:mf(c)},this.state)})}),Z(this,"cancelInProgressAnimation",null),Z(this,"scrollToContent",(c=this.scene.getNonDeletedElements(),d)=>{var y;if(typeof c=="string"){let x;if(H5(c)?x=DIe(c):x=c,x){let w=this.scene.getElementsFromId(x);w!=null&&w.length?this.scrollToContent(w,{fitToContent:(d==null?void 0:d.fitToContent)??!0,animate:(d==null?void 0:d.animate)??!0}):H5(c)&&this.setState({toast:{message:j("elementLink.notFound"),duration:3e3,closable:!0}})}return}(y=this.cancelInProgressAnimation)==null||y.call(this);let u=Array.isArray(c)?c:[c],h=this.state.zoom,g=this.state.scrollX,U=this.state.scrollY;if(d!=null&&d.fitToContent||d!=null&&d.fitToViewport){let{appState:x}=ux({canvasOffsets:d.canvasOffsets,targetElements:u,appState:this.state,fitToViewport:!!(d!=null&&d.fitToViewport),viewportZoomFactor:d==null?void 0:d.viewportZoomFactor,minZoom:d==null?void 0:d.minZoom,maxZoom:d==null?void 0:d.maxZoom});h=x.zoom,g=x.scrollX,U=x.scrollY}else{let x=G2(u,this.state);g=x.scrollX,U=x.scrollY}if(d!=null&&d.animate){let x=this.state.scrollX,w=this.state.scrollY,E=this.state.zoom.value,S=ove({fromValues:{scrollX:x,scrollY:w,zoom:E},toValues:{scrollX:g,scrollY:U,zoom:h.value},interpolateValue:(M,A,C,I)=>{if(I==="zoom")return M*Math.pow(A/M,vh(C))},onStep:({scrollX:M,scrollY:A,zoom:C})=>{this.setState({scrollX:M,scrollY:A,zoom:{value:C}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(d==null?void 0:d.duration)??500});this.cancelInProgressAnimation=()=>{S(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:g,scrollY:U,zoom:h})}),Z(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})}),Z(this,"translateCanvas",c=>{var d;(d=this.cancelInProgressAnimation)==null||d.call(this),this.maybeUnfollowRemoteUser(),this.setState(c)}),Z(this,"setToast",c=>{this.setState({toast:c})}),Z(this,"restoreFileFromShare",async()=>{try{let c=await caches.open("web-share-target"),d=await c.match("shared-file");if(d){let u=await d.blob(),h=new File([u],u.name||"",{type:u.type});this.loadFileToCanvas(h,null),await c.delete("shared-file"),window.history.replaceState(null,bxe,window.location.pathname)}}catch(c){this.setState({errorMessage:c.message})}}),Z(this,"addFiles",Zn(c=>{let{addedFiles:d}=this.addMissingFiles(c);this.clearImageShapeCache(d),this.scene.triggerUpdate(),this.addNewImagesToImageCache()})),Z(this,"addMissingFiles",(c,d=!1)=>{let u=d?{}:{...this.files},h={},g=Array.isArray(c)?c:Object.values(c);for(let U of g)if(!u[U.id]&&(h[U.id]=U,u[U.id]=U,U.mimeType===rt.svg))try{let y=cRe(gF(dRe(U.dataURL)),rt.svg);U.dataURL!==y&&(U.version=(U.version??1)+1,U.dataURL=y)}catch(y){console.error(y)}return this.files=u,{addedFiles:h}}),Z(this,"updateScene",Zn(c=>{let d=If(c.elements??[]);if(c.captureUpdate&&c.captureUpdate!==me.EVENTUALLY){let u=this.store.snapshot.appState,h=this.store.snapshot.elements,g=c.appState?Object.assign({},u,c.appState):u,U=c.elements?this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(),ct(d)):h;c.captureUpdate===me.IMMEDIATELY?this.store.captureIncrement(U,g):c.captureUpdate===me.NEVER&&this.store.updateSnapshot(U,g)}c.appState&&this.setState(c.appState),c.elements&&this.scene.replaceAllElements(d),c.collaborators&&this.setState({collaborators:c.collaborators})})),Z(this,"triggerRender",c=>{c===!0?this.scene.triggerUpdate():this.setState({})}),Z(this,"toggleSidebar",({name:c,tab:d,force:u})=>{var U,y;let h;u===void 0?h=((U=this.state.openSidebar)==null?void 0:U.name)===c&&((y=this.state.openSidebar)==null?void 0:y.tab)===d?null:c:h=u?c:null;let g=h?{name:h}:null;return g&&d&&(g.tab=d),this.setState({openSidebar:g}),!!h}),Z(this,"updateCurrentCursorPosition",Zn(c=>{this.lastViewportPosition.x=c.clientX,this.lastViewportPosition.y=c.clientY})),Z(this,"getEditorUIOffsets",()=>{var g,U,y,x,w,E,S,M,A,C;let c=((x=(y=(U=(g=this.excalidrawContainerRef)==null?void 0:g.current)==null?void 0:U.querySelector(".App-toolbar"))==null?void 0:y.getBoundingClientRect())==null?void 0:x.bottom)??0,d=(S=(E=(w=this.excalidrawContainerRef)==null?void 0:w.current)==null?void 0:E.querySelector(".sidebar"))==null?void 0:S.getBoundingClientRect(),u=(C=(A=(M=this.excalidrawContainerRef)==null?void 0:M.current)==null?void 0:A.querySelector(".App-menu__left"))==null?void 0:C.getBoundingClientRect(),h=16;return eb().rtl?{top:c+h,right:Math.max(this.state.width-((u==null?void 0:u.left)??this.state.width),0)+h,bottom:h,left:Math.max((d==null?void 0:d.right)??0,0)+h}:{top:c+h,right:Math.max(this.state.width-((d==null?void 0:d.left)??this.state.width)+h,0),bottom:h,left:Math.max((u==null?void 0:u.right)??0,0)+h}}),Z(this,"onKeyDown",Zn(c=>{var g,U;if("Proxy"in window&&(!c.shiftKey&&/^[A-Z]$/.test(c.key)||c.shiftKey&&/^[a-z]$/.test(c.key))&&(c=new Proxy(c,{get(y,x){let w=y[x];return typeof w=="function"?w.bind(y):x==="key"?c.shiftKey?y.key.toUpperCase():y.key.toLowerCase():w}})),!TC(c.target)){if((c.key===Q.ESCAPE||c.key===Q.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}let y=wt(this.scene.getNonDeletedElementsMap(),this.state);if(y.length===1&&Yt(y[0])&&c.key===Q.ENTER){this.startImageCropping(y[0]);return}if(c.key===Q.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}let x=d5(c.key);if(c[Q.CTRL_OR_CMD]&&x&&!c.shiftKey){c.preventDefault();let w=wt(this.scene.getNonDeletedElementsMap(),this.state);w.length===1&&N7(w[0])&&this.flowChartCreator.createNodes(w[0],this.scene.getNonDeletedElementsMap(),this.state,gz(c.key)),(g=this.flowChartCreator.pendingNodes)!=null&&g.length&&!l3(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(c.altKey){let w=wt(this.scene.getNonDeletedElementsMap(),this.state);if(w.length===1&&x){c.preventDefault();let E=this.flowChartNavigator.exploreByDirection(w[0],this.scene.getNonDeletedElementsMap(),gz(c.key));if(E){this.setState(M=>({selectedElementIds:Kt({[E]:!0},M)}));let S=this.scene.getNonDeletedElementsMap().get(E);S&&!l3([S],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(S,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(c[Q.CTRL_OR_CMD]&&c.key===Q.P&&!c.shiftKey&&!c.altKey){this.setToast({message:j("commandPalette.shortcutHint",{shortcut:Vi("commandPalette")})}),c.preventDefault();return}if(c[Q.CTRL_OR_CMD]&&c.key.toLowerCase()===Q.V&&(yy=c.shiftKey,clearTimeout(Wz),Wz=window.setTimeout(()=>{yy=!1},100)),c[Q.CTRL_OR_CMD]&&Eu(c.target)&&(c.code===Ft.MINUS||c.code===Ft.EQUAL)){c.preventDefault();return}if(Eu(c.target)&&c.key!==Q.ESCAPE||d5(c.key)&&TC(c.target))return;if(c.key===Q.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(c.key.toLowerCase()===Q.E&&c.shiftKey&&c[Q.CTRL_OR_CMD]){c.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(c.key===Q.PAGE_UP||c.key===Q.PAGE_DOWN){let y=(c.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;c.key===Q.PAGE_DOWN&&(y=-y),c.shiftKey?this.translateCanvas(x=>({scrollX:x.scrollX+y})):this.translateCanvas(x=>({scrollY:x.scrollY+y}))}if(((U=this.state.openDialog)==null?void 0:U.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(c)||this.state.viewModeEnabled)return;if(c[Q.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),d5(c.key)){let y=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),x=y.find(Fe),w=new Set;y.filter(Fe).filter(A=>{let C=A.startBinding&&!y.some(R=>{var L;return R.id===((L=A.startBinding)==null?void 0:L.elementId)}),I=A.endBinding&&!y.some(R=>{var L;return R.id===((L=A.endBinding)==null?void 0:L.elementId)});return C||I}).forEach(A=>w.add(A.id)),y=y.filter(A=>!w.has(A.id));let E=this.getEffectiveGridSize()&&(c.shiftKey?sB:this.getEffectiveGridSize())||(c.shiftKey?yxe:sB),S=0,M=0;c.key===Q.ARROW_LEFT?S=-E:c.key===Q.ARROW_RIGHT?S=E:c.key===Q.ARROW_UP?M=-E:c.key===Q.ARROW_DOWN&&(M=E),y.forEach(A=>{ye(A,{x:A.x+S,y:A.y+M},!1),zs(A,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:y})}),this.setState({suggestedBindings:qE(y.filter(A=>A.id!==(x==null?void 0:x.id)||E!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),c.preventDefault()}else if(c.key===Q.ENTER){let y=this.scene.getSelectedElements(this.state);if(y.length===1){let x=y[0];if(c[Q.CTRL_OR_CMD])mt(x)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==y[0].id)&&(this.store.shouldCaptureIncrement(),Fe(x)||this.setState({editingLinearElement:new je(x)}));else if(Oe(x)||rIe(x)){let w;Oe(x)||(w=x);let E=QE(x,this.state,this.scene.getNonDeletedElementsMap()),S=E.x,M=E.y;this.startTextEditing({sceneX:S,sceneY:M,container:w}),c.preventDefault();return}else at(x)&&this.setState({editingFrame:x.id})}}else if(!c.ctrlKey&&!c.altKey&&!c.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){let y=AAe(c.key);y?(this.state.activeTool.type!==y&&vn("toolbar",y,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),y==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(x=>({currentItemArrowType:x.currentItemArrowType===ni.sharp?ni.round:x.currentItemArrowType===ni.round?ni.elbow:ni.sharp})),this.setActiveTool({type:y}),c.stopPropagation()):c.key===Q.Q&&(this.toggleLock("keyboard"),c.stopPropagation())}if(c.key===Q.SPACE&&Xt.pointers.size===0&&(fu=!0,on(this.interactiveCanvas,nn.GRAB),c.preventDefault()),(c.key===Q.G||c.key===Q.S)&&!c.altKey&&!c[Q.CTRL_OR_CMD]){let y=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!y.length)return;c.key===Q.G&&(u6(this.state.activeTool.type)||y.some(x=>u6(x.type)))&&(this.setState({openPopup:"elementBackground"}),c.stopPropagation()),c.key===Q.S&&(this.setState({openPopup:"elementStroke"}),c.stopPropagation())}if(!c[Q.CTRL_OR_CMD]&&c.shiftKey&&c.key.toLowerCase()===Q.F){let y=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!y.length)return;(this.state.activeTool.type==="text"||y.find(x=>Oe(x)||xt(x,this.scene.getNonDeletedElementsMap())))&&(c.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(c.key===Q.K&&!c.altKey&&!c[Q.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}c[Q.CTRL_OR_CMD]&&(c.key===Q.BACKSPACE||c.key===Q.DELETE)&&Za.set(gx,"clearCanvas");let d=c.key.toLocaleLowerCase(),u=d===Q.S&&c.shiftKey,h=c.key===Q.I||d===Q.G&&c.shiftKey;(u||h)&&this.openEyeDropper({type:u?"stroke":"background"})})),Z(this,"onKeyUp",Zn(c=>{var d,u,h,g;if(c.key===Q.SPACE&&(this.state.viewModeEnabled||((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?on(this.interactiveCanvas,nn.GRAB):this.state.activeTool.type==="selection"?Aa(this.interactiveCanvas):(Al(this.interactiveCanvas,this.state),this.setState({selectedElementIds:Kt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),fu=!1),!c[Q.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),d5(c.key)&&(e9(this.scene.getSelectedElements(this.state).filter(mt),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,$u(this.state),((u=this.state.selectedLinearElement)==null?void 0:u.selectedPointsIndices)??[],this.state.zoom),this.setState({suggestedBindings:[]})),c.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:me.IMMEDIATELY})),!c[Q.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(h=this.flowChartCreator.pendingNodes)!=null&&h.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);let U=(g=this.flowChartCreator.pendingNodes)==null?void 0:g[0];U&&(this.setState(y=>({selectedElementIds:Kt({[U.id]:!0},y)})),l3([U],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(U,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:me.IMMEDIATELY})}})),Z(this,"isToolSupported",c=>{var d;return((d=this.props.UIOptions.tools)==null?void 0:d[c])!==!1}),Z(this,"setActiveTool",c=>{if(!this.isToolSupported(c.type)){console.warn(`"${c.type}" tool is disabled via "UIOptions.canvasActions.tools.${c.type}"`);return}let d=Ur(this.state,c);d.type==="hand"?on(this.interactiveCanvas,nn.GRAB):fu||Al(this.interactiveCanvas,{...this.state,activeTool:d}),ive(document.activeElement)&&this.focusContainer(),xT(d.type)||this.setState({suggestedBindings:[]}),d.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(c.type==="image"&&c.insertOnCanvasDirectly)??!1}),this.setState(u=>{let h={snapLines:u.snapLines.length?[]:u.snapLines,originSnapOffset:null,activeEmbeddable:null};return d.type==="freedraw"&&this.store.shouldCaptureIncrement(),d.type!=="selection"?{...u,activeTool:d,selectedElementIds:Kt({},u),selectedGroupIds:Kt({},u),editingGroupId:null,multiElement:null,...h}:{...u,activeTool:d,...h}})}),Z(this,"setOpenDialog",c=>{this.setState({openDialog:c})}),Z(this,"setCursor",c=>{on(this.interactiveCanvas,c)}),Z(this,"resetCursor",()=>{Aa(this.interactiveCanvas)}),Z(this,"isTouchScreenMultiTouchGesture",()=>Xt.pointers.size>=2),Z(this,"getName",()=>this.state.name||this.props.name||`${j("labels.untitled")}-${hB()}`),Z(this,"onGestureStart",Zn(c=>{c.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:Kt({},this.state),activeEmbeddable:null}),Xt.initialScale=this.state.zoom.value})),Z(this,"onGestureChange",Zn(c=>{if(c.preventDefault(),this.isTouchScreenMultiTouchGesture())return;let d=Xt.initialScale;d&&this.setState(u=>({...Hu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:mf(d*c.scale)},u)}))})),Z(this,"onGestureEnd",Zn(c=>{c.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:Kt(this.state.previousSelectedElementIds,this.state)}),Xt.initialScale=null})),Z(this,"startTextEditing",({sceneX:c,sceneY:d,insertAtParentCenter:u=!0,container:h,autoEdit:g=!0})=>{let U=!1,y=u&&this.getTextWysiwygSnappedToCenterPosition(c,d,this.state,h);h&&y&&(xt(h,this.scene.getNonDeletedElementsMap())||(U=!0));let x=null,w=this.scene.getSelectedElements(this.state);w.length===1?Oe(w[0])?x=w[0]:h?x=xt(w[0],this.scene.getNonDeletedElementsMap()):x=this.getTextElementAtPosition(c,d):x=this.getTextElementAtPosition(c,d);let E=(x==null?void 0:x.fontFamily)||this.state.currentItemFontFamily,S=(x==null?void 0:x.lineHeight)||qh(E),M=this.state.currentItemFontSize;if(!x&&U&&h&&!Et(h)){let I=XZ(ln({fontSize:M,fontFamily:E}),S),R=KZ(M,S),L=Math.max(h.height,R),_=Math.max(h.width,I);ye(h,{height:L,width:_}),c=h.x+_/2,d=h.y+L/2,y&&(y=this.getTextWysiwygSnappedToCenterPosition(c,d,this.state,h))}let A=this.getTopLayerFrameAtSceneCoords({x:c,y:d}),C=x||yo({x:y?y.elementCenterX:c,y:y?y.elementCenterY:d,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:M,fontFamily:E,textAlign:y?"center":this.state.currentItemTextAlign,verticalAlign:y?mo.MIDDLE:O4,containerId:U?h==null?void 0:h.id:void 0,groupIds:(h==null?void 0:h.groupIds)??[],lineHeight:S,angle:(h==null?void 0:h.angle)??0,frameId:A?A.id:null});if(!x&&U&&h&&ye(h,{boundElements:(h.boundElements||[]).concat({type:"text",id:C.id})}),this.setState({editingTextElement:C}),!x)if(h&&U){let I=this.scene.getElementIndex(h.id);this.scene.insertElementAtIndex(C,I+1)}else this.scene.insertElement(C);g||x||h?this.handleTextWysiwyg(C,{isExistingElement:!!x}):this.setState({newElement:C,multiElement:null})}),Z(this,"startImageCropping",c=>{this.store.shouldCaptureIncrement(),this.setState({croppingElementId:c.id})}),Z(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.shouldCaptureIncrement(),this.setState({croppingElementId:null}))}),Z(this,"handleCanvasDoubleClick",c=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;let d=this.scene.getSelectedElements(this.state),{x:u,y:h}=xn(c,this.state);if(d.length===1&&mt(d[0])){if(c[Q.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==d[0].id)&&!Fe(d[0])){this.store.shouldCaptureIncrement(),this.setState({editingLinearElement:new je(d[0])});return}else if(this.state.selectedLinearElement&&Fe(d[0])){let g=je.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:u,y:h},this.state,this.scene.getNonDeletedElementsMap()),U=g?je.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,g,this.scene.getNonDeletedElementsMap()):-1;if(U&&U>-1){this.store.shouldCaptureIncrement(),je.deleteFixedSegment(d[0],U);let y=je.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:u,y:h},this.state,this.scene.getNonDeletedElementsMap()),x=y?je.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,y,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:x,value:g,added:!1}},segmentMidPointHoveredCoords:y}});return}}}if(d.length===1&&Yt(d[0])){this.startImageCropping(d[0]);return}if(Aa(this.interactiveCanvas),Eh(this.state).length>0){let g=this.getElementAtPosition(u,h),U=g&&DTe(g,this.state.selectedGroupIds);if(U){this.store.shouldCaptureIncrement(),this.setState(y=>({...y,...is({editingGroupId:U,selectedElementIds:{[g.id]:!0}},this.scene.getNonDeletedElements(),y,this)}));return}}if(Aa(this.interactiveCanvas),!c[Q.CTRL_OR_CMD]&&!this.state.viewModeEnabled){let g=this.getElementAtPosition(u,h);if(Qo(g)){this.setState({activeEmbeddable:{element:g,state:"active"}});return}let U=this.getTextBindableContainerAtPosition(u,h);if(U&&(ca(U)||!Ka(U.backgroundColor)||hp({x:u,y:h,element:U,shape:Kc(U,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){let y=QE(U,this.state,this.scene.getNonDeletedElementsMap());u=y.x,h=y.y}this.startTextEditing({sceneX:u,sceneY:h,insertAtParentCenter:!c.altKey,container:U})}}),Z(this,"getElementLinkAtPosition",(c,d)=>{let u=this.scene.getNonDeletedElements(),h=-1;for(let g=u.length-1;g>=0;g--){let U=u[g];if(d&&U.id===d.id&&(h=g),U.link&&g>=h&&JE(U,this.scene.getNonDeletedElementsMap(),this.state,P(c.x,c.y),this.device.editor.isMobile))return U}}),Z(this,"redirectToLink",(c,d)=>{let u=Zt(P(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),P(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||u>Uu)return;let h=xn(this.lastPointerDownEvent,this.state),g=this.scene.getNonDeletedElementsMap(),U=JE(this.hitLinkElement,g,this.state,P(h.x,h.y),this.device.editor.isMobile),y=xn(this.lastPointerUpEvent,this.state),x=JE(this.hitLinkElement,g,this.state,P(y.x,y.y),this.device.editor.isMobile);if(U&&x){iz();let w=this.hitLinkElement.link;if(w){w=go(w);let E;if(this.props.onLinkOpen&&(E=BZ("excalidraw-link",c.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:w},E)),!(E!=null&&E.defaultPrevented)){let S=lQ(w)?"_self":"_blank",M=window.open(void 0,S);M&&(M.opener=null,M.location=w)}}}}),Z(this,"getTopLayerFrameAtSceneCoords",c=>{let d=this.scene.getNonDeletedElementsMap(),u=this.scene.getNonDeletedFramesLikes().filter(h=>_F(c,h,d));return u.length?u[u.length-1]:null}),Z(this,"handleCanvasPointerMove",c=>{var E,S,M,A,C,I;this.savePointer(c.clientX,c.clientY,this.state.cursorButton),this.lastPointerMoveEvent=c.nativeEvent,Xt.pointers.has(c.pointerId)&&Xt.pointers.set(c.pointerId,{x:c.clientX,y:c.clientY});let d=Xt.initialScale;if(Xt.pointers.size===2&&Xt.lastCenter&&d&&Xt.initialDistance){let R=hz(Xt.pointers),L=R.x-Xt.lastCenter.x,_=R.y-Xt.lastCenter.y;Xt.lastCenter=R;let O=pz(Array.from(Xt.pointers.values())),$=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:O/Xt.initialDistance,B=$?mf(d*$):this.state.zoom.value;this.setState(F=>{let z=Hu({viewportX:R.x,viewportY:R.y,nextZoom:B},F);this.translateCanvas({zoom:z.zoom,scrollX:z.scrollX+2*(L/B),scrollY:z.scrollY+2*(_/B),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else Xt.lastCenter=Xt.initialDistance=Xt.initialScale=null;if(fu||Gg||PS||o6(this.state))return;let u=Uz(DS,c.clientX-this.state.offsetLeft,c.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(u?Aa(this.interactiveCanvas):Al(this.interactiveCanvas,this.state));let h=xn(c,this.state),{x:g,y:U}=h;if(!this.state.newElement&&YTe(this.state.activeTool.type)){let{originOffset:R,snapLines:L}=KTe(this.scene.getNonDeletedElements(),this,{x:g,y:U},c,this.scene.getNonDeletedElementsMap());this.setState(_=>{let O=jg(_.snapLines,L),$=_.originSnapOffset?jg(_.originSnapOffset,R):R;return _.snapLines===O&&_.originSnapOffset===$?null:{snapLines:O,originSnapOffset:$}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(R=>R.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){let R=je.handlePointerMove(c,g,U,this,this.scene.getNonDeletedElementsMap());R&&R!==this.state.editingLinearElement&&ii.flushSync(()=>{this.setState({editingLinearElement:R})}),(R==null?void 0:R.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(h,R.elbowed):ii.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(HZ(this.state.activeTool.type)){let{newElement:R}=this.state;Xl(R,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(R,[h],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(h,!1)}if(this.state.multiElement){let{multiElement:R}=this.state,{x:L,y:_}=R,{points:O,lastCommittedPoint:$}=R,B=O[O.length-1];if(Al(this.interactiveCanvas,this.state),B===$)Zt(P(g-L,U-_),B)>=Yy?ye(R,{points:[...O,P(g-L,U-_)]},!1):on(this.interactiveCanvas,nn.POINTER);else if(O.length>2&&$&&Zt(P(g-L,U-_),$)<Yy)on(this.interactiveCanvas,nn.POINTER),ye(R,{points:O.slice(0,-1)},!1);else{let[F,z]=Ar(g,U,c[Q.CTRL_OR_CMD]||Fe(R)?null:this.getEffectiveGridSize()),[H,G]=(R==null?void 0:R.lastCommittedPoint)??[0,0],V=F-L-H,Y=z-_-G;$5(c)&&({width:V,height:Y}=QC(H+L,G+_,F,z)),Cf(O,this.state.zoom.value)&&on(this.interactiveCanvas,nn.POINTER),ye(R,{points:[...O.slice(0,-1),P(H+V,G+Y)]},!1,{isDragging:!0}),this.triggerRender(!1)}return}if(c.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;let y=this.scene.getNonDeletedElements(),x=this.scene.getSelectedElements(this.state);if(x.length===1&&!u&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,g,U),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((E=this.state.openDialog)==null?void 0:E.name)!=="elementLinkSelector"&&!(x.length===1&&Fe(x[0]))){let R=FF(y,this.state,g,U,this.state.zoom,c.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(R&&R.transformHandleType){on(this.interactiveCanvas,zF(R));return}}}else if(x.length>1&&!u&&((S=this.state.openDialog)==null?void 0:S.name)!=="elementLinkSelector"){let R=$F(tn(x),g,U,this.state.zoom,c.pointerType,this.device);if(R){on(this.interactiveCanvas,zF({transformHandleType:R}));return}}let w=this.getElementAtPosition(h.x,h.y);this.hitLinkElement=this.getElementLinkAtPosition(h,w),!Il(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(on(this.interactiveCanvas,nn.POINTER),Nje(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(iz(),w&&(w.link||Rs(w))&&this.state.selectedElementIds[w.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?on(this.interactiveCanvas,Oe(w)?nn.TEXT:nn.CROSSHAIR):this.state.viewModeEnabled?on(this.interactiveCanvas,nn.GRAB):((M=this.state.openDialog)==null?void 0:M.name)==="elementLinkSelector"?on(this.interactiveCanvas,nn.AUTO):u?on(this.interactiveCanvas,nn.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,g,U):c[Q.CTRL_OR_CMD]?on(this.interactiveCanvas,nn.AUTO):(w||this.isHittingCommonBoundingBoxOfSelectedElements(h,x))&&!(w!=null&&w.locked)&&(w&&Qo(w)&&this.isIframeLikeElementCenter(w,c,g,U)?(on(this.interactiveCanvas,nn.POINTER),this.setState({activeEmbeddable:{element:w,state:"hover"}})):(!w||!Fe(w))&&(on(this.interactiveCanvas,nn.MOVE),((A=this.state.activeEmbeddable)==null?void 0:A.state)==="hover"&&this.setState({activeEmbeddable:null})))),((C=this.state.openDialog)==null?void 0:C.name)==="elementLinkSelector"&&w?this.setState(R=>({hoveredElementIds:jg(R.hoveredElementIds,is({editingGroupId:R.editingGroupId,selectedElementIds:{[w.id]:!0}},this.scene.getNonDeletedElements(),R,this).selectedElementIds)})):((I=this.state.openDialog)==null?void 0:I.name)==="elementLinkSelector"&&!w&&this.setState(R=>({hoveredElementIds:jg(R.hoveredElementIds,{})})))}),Z(this,"handleEraser",(c,d,u)=>{this.eraserTrail.addPointToPath(u.x,u.y);let h=!1,g=new Set,U=this.scene.getNonDeletedElements(),y=M=>{var A;for(let C of M){if(C.locked)return;if(c.altKey?this.elementsPendingErasure.delete(C.id)&&(h=!0):this.elementsPendingErasure.has(C.id)||(h=!0,this.elementsPendingErasure.add(C.id)),h&&((A=C.groupIds)==null?void 0:A.length)){let I=C.groupIds.at(-1);if(!g.has(I)){g.add(I);let R=Cn(U,I);for(let L of R)c.altKey?this.elementsPendingErasure.delete(L.id):this.elementsPendingErasure.add(L.id)}}}},x=Zt(P(d.lastCoords.x,d.lastCoords.y),P(u.x,u.y)),w=this.getElementHitThreshold(),E={...d.lastCoords},S=0;for(;S<=x;){let M=this.getElementsAtPosition(E.x,E.y);if(y(M),S===x)break;S=Math.min(S+w,x);let A=S/x,C=(1-A)*E.x+A*u.x,I=(1-A)*E.y+A*u.y;E.x=C,E.y=I}if(d.lastCoords.x=u.x,d.lastCoords.y=u.y,h){for(let M of this.scene.getNonDeletedElements())An(M)&&(this.elementsPendingErasure.has(M.id)||this.elementsPendingErasure.has(M.containerId))&&(c.altKey?(this.elementsPendingErasure.delete(M.id),this.elementsPendingErasure.delete(M.containerId)):(this.elementsPendingErasure.add(M.id),this.elementsPendingErasure.add(M.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.triggerRender()}}),Z(this,"handleTouchMove",c=>{Xg=!0}),Z(this,"handleCanvasPointerDown",c=>{var w,E,S;let d=c.target;if(d.setPointerCapture&&d.setPointerCapture(c.pointerId),this.maybeCleanupAfterMissingPointerUp(c.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(M=>({searchMatches:M.searchMatches.map(A=>({...A,focus:!1}))})),Za.set(dre,null)),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(c),c.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){let M=this.state.newElement;this.updateScene({...M.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(A=>A.id!==M.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:Kt(Object.keys(this.state.selectedElementIds).filter(A=>A!==M.id).reduce((A,C)=>(A[C]=this.state.selectedElementIds[C],A),{}),this.state)},captureUpdate:((w=this.state.openDialog)==null?void 0:w.name)==="elementLinkSelector"?me.EVENTUALLY:me.NEVER});return}let u=document.getSelection();if(u!=null&&u.anchorNode&&u.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(c),!this.state.penDetected&&c.pointerType==="pen"&&this.setState(M=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(c.pointerType)&&(this.device=Zy(this.device,{isTouchScreen:!0})),Gg||(this.lastPointerDownEvent=c,this.handleCanvasPanUsingWheelOrSpaceDrag(c)))return;if(this.setState({lastPointerDownWith:c.pointerType,cursorButton:"down"}),this.savePointer(c.clientX,c.clientY,"down"),c.button===kd.ERASER&&this.state.activeTool.type!==$r.eraser){this.setState({activeTool:Ur(this.state,{type:$r.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(c);let M=()=>{A(),C==null||C(),Il(this.state)&&this.setState({activeTool:Ur(this.state,{...this.state.activeTool.lastActiveTool||{type:$r.selection},lastActiveToolBeforeEraser:null})})},A=jn(window,"pointerup",M,{once:!0}),C;requestAnimationFrame(()=>{C=this.missingPointerEventCleanupEmitter.once(M)})});return}if(c.button!==kd.MAIN&&c.button!==kd.TOUCH&&c.button!==kd.ERASER||Xt.pointers.size>1)return;let h=this.initialPointerDownState(c);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(c,h)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(c),this.handleSelectionOnPointerDown(c,h))||!(!this.state.penMode||c.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(c,h);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(c,this.state.activeTool.type,h);else if(this.state.activeTool.type==="image"){on(this.interactiveCanvas,nn.CROSSHAIR);let M=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!M)return;this.setState({newElement:M,pendingImageElementId:null,multiElement:null});let{x:A,y:C}=xn(c,this.state),I=this.getTopLayerFrameAtSceneCoords({x:A,y:C});ye(M,{x:A,y:C,frameId:I?I.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(c,this.state.activeTool.type,h):this.state.activeTool.type==="custom"?Al(this.interactiveCanvas,this.state):this.state.activeTool.type===$r.frame||this.state.activeTool.type===$r.magicframe?this.createFrameElementOnPointerDown(h,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(h.lastCoords.x,h.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,h);(S=(E=this.props)==null?void 0:E.onPointerDown)==null||S.call(E,this.state.activeTool,h),this.onPointerDownEmitter.trigger(this.state.activeTool,h,c),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(h.lastCoords.x,h.lastCoords.y);let g=this.onPointerMoveFromPointerDownHandler(h),U=this.onPointerUpFromPointerDownHandler(h),y=this.onKeyDownFromPointerDownHandler(h),x=this.onKeyUpFromPointerDownHandler(h);this.missingPointerEventCleanupEmitter.once(M=>U(M||c.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener("pointermove",g),window.addEventListener("pointerup",U),window.addEventListener("keydown",y),window.addEventListener("keyup",x),h.eventListeners.onMove=g,h.eventListeners.onUp=U,h.eventListeners.onKeyUp=x,h.eventListeners.onKeyDown=y)}),Z(this,"handleCanvasPointerUp",c=>{var h;this.removePointer(c),this.lastPointerUpEvent=c;let d=xn({clientX:c.clientX,clientY:c.clientY},this.state),u=c.timeStamp-(((h=this.lastPointerDownEvent)==null?void 0:h.timeStamp)??0);if(this.device.editor.isMobile&&u<300){let g=this.getElementAtPosition(d.x,d.y);if(Qo(g)&&this.isIframeLikeElementCenter(g,c,d.x,d.y)){this.handleEmbeddableCenterClick(g);return}}if(this.device.isTouchScreen){let g=this.getElementAtPosition(d.x,d.y);this.hitLinkElement=this.getElementLinkAtPosition(d,g)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?u<300&&Qo(this.hitLinkElement)&&!IQ(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,P(d.x,d.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(c,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})}),Z(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",c=>{c.pointerType==="touch"&&(Xg=!1,vd?Xg=!0:vd=window.setTimeout(()=>{vd=0,Xg||this.handleCanvasContextMenu(c)},Txe))}),Z(this,"resetContextMenuTimer",()=>{clearTimeout(vd),vd=0,Xg=!1}),Z(this,"maybeCleanupAfterMissingPointerUp",c=>{du==null||du(),this.missingPointerEventCleanupEmitter.trigger(c).clear()}),Z(this,"handleCanvasPanUsingWheelOrSpaceDrag",c=>{if(!(Xt.pointers.size<=1&&(c.button===kd.WHEEL||c.button===kd.MAIN&&fu||o6(this.state)||this.state.viewModeEnabled)))return!1;Gg=!0,this.focusContainer(),this.state.editingTextElement||c.preventDefault();let d=!1,u=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);on(this.interactiveCanvas,nn.GRABBING);let{clientX:h,clientY:g}=c,U=TS(x=>{let w=h-x.clientX,E=g-x.clientY;if(h=x.clientX,g=x.clientY,u&&!d&&(Math.abs(w)>1||Math.abs(E)>1)){d=!0;let S=A=>{document.body.removeEventListener("paste",S),A.stopPropagation()},M=()=>{setTimeout(()=>{document.body.removeEventListener("paste",S),window.removeEventListener("pointerup",M)},100)};document.body.addEventListener("paste",S),window.addEventListener("pointerup",M)}this.translateCanvas({scrollX:this.state.scrollX-w/this.state.zoom.value,scrollY:this.state.scrollY-E/this.state.zoom.value})}),y=Zn(du=()=>{du=null,Gg=!1,fu||(this.state.viewModeEnabled?on(this.interactiveCanvas,nn.GRAB):Al(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(c.clientX,c.clientY,"up"),window.removeEventListener("pointermove",U),window.removeEventListener("pointerup",y),window.removeEventListener("blur",y),U.flush()});return window.addEventListener("blur",y),window.addEventListener("pointermove",U,{passive:!0}),window.addEventListener("pointerup",y),!0}),Z(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.setState({selectedElementIds:Kt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}),Z(this,"handleSelectionOnPointerDown",(c,d)=>{var u;if(this.state.activeTool.type==="selection"){let h=this.scene.getNonDeletedElements(),g=this.scene.getNonDeletedElementsMap(),U=this.scene.getSelectedElements(this.state);if(U.length===1&&!this.state.editingLinearElement&&!Fe(U[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){let y=FF(h,this.state,d.origin.x,d.origin.y,this.state.zoom,c.pointerType,this.scene.getNonDeletedElementsMap(),this.device);y!=null&&(y.transformHandleType==="rotation"?(this.setState({resizingElement:y.element}),d.resize.handleType=y.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:y.element}),d.resize.handleType=y.transformHandleType))}else U.length>1&&(d.resize.handleType=$F(tn(U),d.origin.x,d.origin.y,this.state.zoom,c.pointerType,this.device));if(d.resize.handleType)d.resize.isResizing=!0,d.resize.offset=Xa(KNe(d.resize.handleType,U,g,d.origin.x,d.origin.y)),U.length===1&&mt(U[0])&&U[0].points.length===2&&(d.resize.arrowDirection=YNe(d.resize.handleType,U[0]));else{if(this.state.selectedLinearElement){let w=this.state.editingLinearElement||this.state.selectedLinearElement,E=je.handlePointerDown(c,this,this.store,d.origin,w,this.scene);if(E.hitElement&&(d.hit.element=E.hitElement),E.linearElementEditor&&(this.setState({selectedLinearElement:E.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:E.linearElementEditor})),E.didAddPoint)return!0}if(d.hit.element=d.hit.element??this.getElementAtPosition(d.origin.x,d.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(d.origin,d.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((u=d.hit.element)==null?void 0:u.id)!==this.state.croppingElementId&&this.finishImageCropping(),d.hit.element&&this.getElementLinkAtPosition({x:d.origin.x,y:d.origin.y},d.hit.element))return!1;d.hit.allHitElements=this.getElementsAtPosition(d.origin.x,d.origin.y);let y=d.hit.element,x=d.hit.allHitElements.some(w=>this.isASelectedElement(w));if((y===null||!x)&&!c.shiftKey&&!d.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(y),this.state.editingLinearElement)this.setState({selectedElementIds:Kt({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(y!=null){if(c[Q.CTRL_OR_CMD])return this.state.selectedElementIds[y.id]||(d.hit.wasAddedToSelection=!0),this.setState(w=>({...PTe(w,y),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[y.id]||(this.state.editingGroupId&&!X2(y,this.state.editingGroupId)&&this.setState({selectedElementIds:Kt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!x&&!d.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(w=>{var M;let E={...w.selectedElementIds,[y.id]:!0},S=[];if(Object.keys(w.selectedElementIds).forEach(A=>{let C=this.scene.getElement(A);C&&S.push(C)}),at(y))dc(S,y.id).forEach(A=>{delete E[A.id]});else if(y.frameId)E[y.frameId]&&delete E[y.id];else{let A=y.groupIds,C=new Set(A.flatMap(I=>Cn(this.scene.getNonDeletedElements(),I)).filter(I=>at(I)).map(I=>I.id));C.size>0&&S.forEach(I=>{I.frameId&&C.has(I.frameId)&&(delete E[I.id],I.groupIds.flatMap(R=>Cn(this.scene.getNonDeletedElements(),R)).forEach(R=>{delete E[R.id]}))})}return((M=w.openDialog)==null?void 0:M.name)==="elementLinkSelector"&&(y.groupIds.some(A=>w.selectedGroupIds[A])||(E={[y.id]:!0})),{...is({editingGroupId:w.editingGroupId,selectedElementIds:E},this.scene.getNonDeletedElements(),w,this),showHyperlinkPopup:y.link||Rs(y)?"info":!1}}),d.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1}),Z(this,"handleTextOnPointerDown",(c,d)=>{if(this.state.editingTextElement)return;let u=d.origin.x,h=d.origin.y,g=this.getElementAtPosition(u,h,{includeBoundTextElement:!0}),U=this.getTextBindableContainerAtPosition(u,h);ca(g)&&(U=g,u=g.x+g.width/2,h=g.y+g.height/2),this.startTextEditing({sceneX:u,sceneY:h,insertAtParentCenter:!c.altKey,container:U,autoEdit:!1}),Aa(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:Ur(this.state,{type:"selection"})})}),Z(this,"handleFreeDrawElementOnPointerDown",(c,d,u)=>{let[h,g]=Ar(u.origin.x,u.origin.y,null),U=this.getTopLayerFrameAtSceneCoords({x:h,y:g}),y=c.pressure===.5,x=hIe({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:y,locked:!1,frameId:U?U.id:null,points:[P(0,0)],pressures:y?[]:[c.pressure]});this.scene.insertElement(x),this.setState(E=>{let S={...E.selectedElementIds};return delete S[x.id],{selectedElementIds:Kt(S,E)}});let w=Ya(u.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:x,startBoundElement:w,suggestedBindings:[]})}),Z(this,"insertIframeElement",({sceneX:c,sceneY:d,width:u,height:h})=>{var x;let[g,U]=Ar(c,d,(x=this.lastPointerDownEvent)!=null&&x[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=fIe({type:"iframe",x:g,y:U,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:u,height:h});return this.scene.insertElement(y),y}),Z(this,"insertEmbeddableElement",({sceneX:c,sceneY:d,link:u})=>{var x;let[h,g]=Ar(c,d,(x=this.lastPointerDownEvent)!=null&&x[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=Ap(u);if(!U)return;U.error instanceof URIError&&this.setToast({message:j("toast.unrecognizedLinkFormat"),closable:!0});let y=sF({type:"embeddable",x:h,y:g,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:U.intrinsicSize.w,height:U.intrinsicSize.h,link:u});return this.scene.insertElement(y),y}),Z(this,"createImageElement",({sceneX:c,sceneY:d,addToFrameUnderCursor:u=!0})=>{var y;let[h,g]=Ar(c,d,(y=this.lastPointerDownEvent)!=null&&y[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=u?this.getTopLayerFrameAtSceneCoords({x:h,y:g}):null;return mQ({type:"image",x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:U?U.id:null})}),Z(this,"handleLinearElementOnPointerDown",(c,d,u)=>{if(this.state.multiElement){let{multiElement:h}=this.state;if(h.type==="line"&&Cf(h.points,this.state.zoom.value)){ye(h,{lastCommittedPoint:h.points[h.points.length-1]}),this.actionManager.executeAction(ka);return}if(Fe(h)&&h.points.length>1){ye(h,{lastCommittedPoint:h.points[h.points.length-1]}),this.actionManager.executeAction(ka);return}let{x:g,y:U,lastCommittedPoint:y}=h;if(h.points.length>1&&y&&Zt(P(u.origin.x-g,u.origin.y-U),y)<Yy){this.actionManager.executeAction(ka);return}this.setState(x=>({selectedElementIds:Kt({...x.selectedElementIds,[h.id]:!0},x)})),ye(h,{lastCommittedPoint:h.points[h.points.length-1]}),on(this.interactiveCanvas,nn.POINTER)}else{let[h,g]=Ar(u.origin.x,u.origin.y,c[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),U=this.getTopLayerFrameAtSceneCoords({x:h,y:g}),{currentItemStartArrowhead:y,currentItemEndArrowhead:x}=this.state,[w,E]=d==="arrow"?[y,x]:[null,null],S=d==="arrow"?zT({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===ni.round?{type:Rr.PROPORTIONAL_RADIUS}:null,startArrowhead:w,endArrowhead:E,locked:!1,frameId:U?U.id:null,elbowed:this.state.currentItemArrowType===ni.elbow,fixedSegments:this.state.currentItemArrowType===ni.elbow?[]:null}):Sh({type:d,x:h,y:g,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:Rr.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:U?U.id:null});this.setState(A=>{let C={...A.selectedElementIds};return delete C[S.id],{selectedElementIds:Kt(C,A)}}),ye(S,{points:[...S.points,P(0,0)]});let M=Ya(u.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,Fe(S),Fe(S));this.scene.insertElement(S),this.setState({newElement:S,startBoundElement:M,suggestedBindings:[]})}}),Z(this,"createGenericElementOnPointerDown",(c,d)=>{var x;let[u,h]=Ar(d.origin.x,d.origin.y,(x=this.lastPointerDownEvent)!=null&&x[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g=this.getTopLayerFrameAtSceneCoords({x:u,y:h}),U={x:u,y:h,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(c),locked:!1,frameId:g?g.id:null},y;c==="embeddable"?y=sF({type:"embeddable",...U}):y=cc({type:c,...U}),y.type==="selection"?this.setState({selectionElement:y}):(this.scene.insertElement(y),this.setState({multiElement:null,newElement:y}))}),Z(this,"createFrameElementOnPointerDown",(c,d)=>{var y;let[u,h]=Ar(c.origin.x,c.origin.y,(y=this.lastPointerDownEvent)!=null&&y[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),g={x:u,y:h,opacity:this.state.currentItemOpacity,locked:!1,...$n},U=d===$r.magicframe?WC(g):$T(g);this.scene.insertElement(U),this.setState({multiElement:null,newElement:U})}),Z(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()}),Z(this,"eraseElements",()=>{let c=!1,d=this.scene.getElementsIncludingDeleted().map(u=>this.elementsPendingErasure.has(u.id)||u.frameId&&this.elementsPendingErasure.has(u.frameId)||An(u)&&this.elementsPendingErasure.has(u.containerId)?(c=!0,yt(u,{isDeleted:!0})):u);this.elementsPendingErasure=new Set,c&&(this.store.shouldCaptureIncrement(),this.scene.replaceAllElements(d))}),Z(this,"initializeImage",async({imageFile:c,imageElement:d,showCursorImagePreview:u=!1})=>{var x,w,E,S,M;if(!kh(c))throw new Error(j("errors.unsupportedFileType"));let h=c.type;if(on(this.interactiveCanvas,"wait"),h===rt.svg)try{c=GF(gF(await c.text()),c.name)}catch(A){throw console.warn(A),new Error(j("errors.svgImageInsertError"))}let g=await(((w=(x=this.props).generateIdForFile)==null?void 0:w.call(x,c))||lRe(c));if(!g)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(j("errors.imageInsertError"));if(!((E=this.files[g])!=null&&E.dataURL)){try{c=await tM(c,{maxWidthOrHeight:Lxe})}catch(A){console.error("Error trying to resizing image file on insertion",A)}if(c.size>aB)throw new Error(j("errors.fileTooBig",{maxSize:`${Math.trunc(aB/1024/1024)}MB`}))}if(u){let A=(S=this.files[g])==null?void 0:S.dataURL,C=A&&fRe(A);this.setImagePreviewCursor(C||c)}let U=((M=this.files[g])==null?void 0:M.dataURL)||await WF(c),y=ye(d,{fileId:g},!1);return new Promise(async(A,C)=>{var I;try{this.addMissingFiles([{mimeType:h,id:g,dataURL:U,created:Date.now(),lastRetrieved:Date.now()}]);let R=this.imageCache.get(g);R||(this.addNewImagesToImageCache(),await this.updateImageCache([y])),(R==null?void 0:R.image)instanceof Promise&&await R.image,this.state.pendingImageElementId!==y.id&&((I=this.state.newElement)==null?void 0:I.id)!==y.id&&this.initializeImageDimensions(y,!0),A(y)}catch(R){console.error(R),C(new Error(j("errors.imageInsertError")))}finally{u||Aa(this.interactiveCanvas)}})}),Z(this,"insertImageElement",async(c,d,u)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:j("errors.imageToolNotSupported")});return}this.scene.insertElement(c);try{return await this.initializeImage({imageFile:d,imageElement:c,showCursorImagePreview:u})}catch(h){return ye(c,{isDeleted:!0}),this.actionManager.executeAction(ka),this.setState({errorMessage:h.message||j("errors.imageInsertError")}),null}}),Z(this,"setImagePreviewCursor",async c=>{let d;try{d=await tM(c,{maxWidthOrHeight:96})}catch(h){throw h.cause==="UNSUPPORTED"?new Error(j("errors.unsupportedFileType")):h}let u=await WF(d);if(c.type===rt.svg){let h=await kQ(u),g=Math.min(h.height,96),U=g*(h.width/h.height);U>96&&(U=96,g=U*(h.height/h.width));let y=document.createElement("canvas");y.height=g,y.width=U,y.getContext("2d").drawImage(h,0,0,U,g),u=y.toDataURL(rt.svg)}this.state.pendingImageElementId&&on(this.interactiveCanvas,`url(${u}) 4 4, auto`)}),Z(this,"onImageAction",async({insertOnCanvasDirectly:c})=>{try{let d=this.state.width/2+this.state.offsetLeft,u=this.state.height/2+this.state.offsetTop,{x:h,y:g}=xn({clientX:d,clientY:u},this.state),U=await VT({description:"Image",extensions:Object.keys(s6)}),y=this.createImageElement({sceneX:h,sceneY:g,addToFrameUnderCursor:!1});c?(this.insertImageElement(y,U),this.initializeImageDimensions(y),this.setState({selectedElementIds:Kt({[y.id]:!0},this.state)},()=>{this.actionManager.executeAction(ka)})):this.setState({pendingImageElementId:y.id},()=>{this.insertImageElement(y,U,!0)})}catch(d){d.name!=="AbortError"?console.error(d):console.warn(d),this.setState({pendingImageElementId:null,newElement:null,activeTool:Ur(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(ka)})}}),Z(this,"initializeImageDimensions",(c,d=!1)=>{var h;let u=Zo(c)&&((h=this.imageCache.get(c.fileId))==null?void 0:h.image);if(!u||u instanceof Promise){if(c.width<Uu/this.state.zoom.value&&c.height<Uu/this.state.zoom.value){let g=100/this.state.zoom.value;ye(c,{x:c.x-g/2,y:c.y-g/2,width:g,height:g})}return}if(d||c.width<Uu/this.state.zoom.value&&c.height<Uu/this.state.zoom.value){let g=Math.max(this.state.height-120,160),U=Math.min(g,Math.floor(this.state.height*.5)/this.state.zoom.value),y=Math.min(u.naturalHeight,U),x=y*(u.naturalWidth/u.naturalHeight),w=c.x+c.width/2-x/2,E=c.y+c.height/2-y/2;ye(c,{x:w,y:E,width:x,height:y,crop:null})}}),Z(this,"updateImageCache",async(c,d=this.files)=>{let{updatedFiles:u,erroredFiles:h}=await CQ({imageCache:this.imageCache,fileIds:c.map(g=>g.fileId),files:d});if(u.size||h.size)for(let g of c)u.has(g.fileId)&&Hn.delete(g);return h.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(g=>Zo(g)&&h.has(g.fileId)?yt(g,{status:"error"}):g)),{updatedFiles:u,erroredFiles:h}}),Z(this,"addNewImagesToImageCache",async(c=MQ(this.scene.getNonDeletedElements()),d=this.files)=>{let u=c.filter(h=>!h.isDeleted&&!this.imageCache.has(h.fileId));if(u.length){let{updatedFiles:h}=await this.updateImageCache(u,d);h.size&&this.scene.triggerUpdate()}}),Z(this,"scheduleImageRefresh",Ob(()=>{this.addNewImagesToImageCache()},Mxe)),Z(this,"updateBindingEnabledOnPointerMove",c=>{let d=cTe(c);this.state.isBindingEnabled!==d&&this.setState({isBindingEnabled:d})}),Z(this,"maybeSuggestBindingAtCursor",(c,d)=>{let u=Ya(c,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,d);this.setState({suggestedBindings:u!=null?[u]:[]})}),Z(this,"maybeSuggestBindingsForLinearElementAtCoords",(c,d,u)=>{if(!d.length)return;let h=d.reduce((g,U)=>{let y=Ya(U,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,Fe(c),Fe(c));return y!=null&&!Xq(c,u==null?void 0:u.id,y)&&g.push(y),g},[]);this.setState({suggestedBindings:h})}),Z(this,"handleInteractiveCanvasRef",c=>{var d,u;c!==null?(this.interactiveCanvas=c,this.interactiveCanvas.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener("touchend",this.onTouchEnd)):((d=this.interactiveCanvas)==null||d.removeEventListener("touchstart",this.onTouchStart),(u=this.interactiveCanvas)==null||u.removeEventListener("touchend",this.onTouchEnd))}),Z(this,"handleAppOnDrop",async c=>{var y,x,w,E;let{file:d,fileHandle:u}=await hRe(c),{x:h,y:g}=xn(c,this.state);try{if(kh(d)&&this.isToolSupported("image")){if((d==null?void 0:d.type)===rt.png||(d==null?void 0:d.type)===rt.svg)try{let M=await uJ(d,this.state,this.scene.getElementsIncludingDeleted(),u);this.syncActionResult({...M,appState:{...M.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:me.IMMEDIATELY});return}catch(M){if(M.name!=="EncodingError")throw new Error(j("alerts.couldNotLoadInvalidFile"))}let S=this.createImageElement({sceneX:h,sceneY:g});this.insertImageElement(S,d),this.initializeImageDimensions(S),this.setState({selectedElementIds:Kt({[S.id]:!0},this.state)});return}}catch(S){return this.setState({isLoading:!1,errorMessage:S.message})}let U=c.dataTransfer.getData(rt.excalidrawlib);if(U&&typeof U=="string"){try{let S=hJ(U);this.addElementsFromPasteOrLibrary({elements:pne(S),position:c,files:null})}catch(S){this.setState({errorMessage:S.message})}return}if(d&&await this.loadFileToCanvas(d,u),(x=(y=c.dataTransfer)==null?void 0:y.types)==null?void 0:x.includes("text/plain")){let S=(w=c.dataTransfer)==null?void 0:w.getData("text");if(S&&i3(S,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(S)||((E=Ap(S))==null?void 0:E.type)==="video")){let M=this.insertEmbeddableElement({sceneX:h,sceneY:g,link:go(S)});M&&this.setState({selectedElementIds:{[M.id]:!0}})}}}),Z(this,"loadFileToCanvas",async(c,d)=>{c=await wI(c);try{let u=this.scene.getElementsIncludingDeleted(),h;try{h=await dJ(c,this.state,u,d)}catch(g){let U=g instanceof Fu;if(U&&g.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:j("errors.imageToolNotSupported")});return}let y=j(U?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:y})}if(!h)return;h.type===rt.excalidraw?(If(u.concat(h.data.elements)),this.store.updateSnapshot(ct(u),this.state),this.setState({isLoading:!0}),this.syncActionResult({...h.data,appState:{...h.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:me.IMMEDIATELY})):h.type===rt.excalidrawlib&&await this.library.updateLibrary({libraryItems:c,merge:!0,openLibraryMenu:!0}).catch(g=>{console.error(g),this.setState({errorMessage:j("errors.importLibraryError")})})}catch(u){this.setState({isLoading:!1,errorMessage:u.message})}}),Z(this,"handleCanvasContextMenu",c=>{if(c.preventDefault(),("pointerType"in c.nativeEvent&&c.nativeEvent.pointerType==="touch"||"pointerType"in c.nativeEvent&&c.nativeEvent.pointerType==="pen"&&c.button!==kd.SECONDARY)&&this.state.activeTool.type!=="selection")return;let{x:d,y:u}=xn(c,this.state),h=this.getElementAtPosition(d,u,{preferSelected:!0,includeLockedElements:!0}),g=this.scene.getSelectedElements(this.state),U=this.isHittingCommonBoundingBoxOfSelectedElements({x:d,y:u},g),y=h||U?"element":"canvas",x=this.excalidrawContainerRef.current,{top:w,left:E}=x.getBoundingClientRect(),S=c.clientX-E,M=c.clientY-w;vn("contextMenu","openContextMenu",y),this.setState({...h&&!this.state.selectedElementIds[h.id]?{...this.state,...is({editingGroupId:this.state.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:mt(h)?new je(h):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:M,left:S,items:this.getContextMenuItems(y)}})})}),Z(this,"maybeDragNewGenericElement",(c,d,u=!0)=>{var A,C,I;let h=this.state.selectionElement,g=c.lastCoords;if(h&&this.state.activeTool.type!=="eraser"){VF({newElement:h,elementType:this.state.activeTool.type,originX:c.origin.x,originY:c.origin.y,x:g.x,y:g.y,width:Fi(c.origin.x,g.x),height:Fi(c.origin.y,g.y),shouldMaintainAspectRatio:Bg(d),shouldResizeFromCenter:YE(d),zoom:this.state.zoom.value,informMutation:u});return}let U=this.state.newElement;if(!U)return;let[y,x]=Ar(g.x,g.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),w=Zo(U)&&((A=this.imageCache.get(U.fileId))==null?void 0:A.image),E=w&&!(w instanceof Promise)?w.width/w.height:null;this.maybeCacheReferenceSnapPoints(d,[U]);let{snapOffset:S,snapLines:M}=XTe(U,this,d,{x:c.originInGrid.x+(((C=this.state.originSnapOffset)==null?void 0:C.x)??0),y:c.originInGrid.y+(((I=this.state.originSnapOffset)==null?void 0:I.y)??0)},{x:y-c.originInGrid.x,y:x-c.originInGrid.y},this.scene.getNonDeletedElementsMap());y+=S.x,x+=S.y,this.setState({snapLines:M}),VF({newElement:U,elementType:this.state.activeTool.type,originX:c.originInGrid.x,originY:c.originInGrid.y,x:y,y:x,width:Fi(c.originInGrid.x,y),height:Fi(c.originInGrid.y,x),shouldMaintainAspectRatio:Yt(U)?!Bg(d):Bg(d),shouldResizeFromCenter:YE(d),zoom:this.state.zoom.value,widthAspectRatio:E,originOffset:this.state.originSnapOffset,informMutation:u}),this.setState({newElement:U}),(this.state.activeTool.type===$r.frame||this.state.activeTool.type===$r.magicframe)&&this.setState({elementsToHighlight:o3(this.scene.getNonDeletedElements(),U,this.state,this.scene.getNonDeletedElementsMap())})}),Z(this,"maybeHandleCrop",(c,d)=>{var x;if(!this.state.croppingElementId)return!1;let u=c.resize.handleType,h=c.lastCoords,[g,U]=Ar(h.x-c.resize.offset.x,h.y-c.resize.offset.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),y=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(u&&y&&Yt(y)){let w=c.originalElements.get(y.id),E=Zo(y)&&((x=this.imageCache.get(y.fileId))==null?void 0:x.image);if(w&&Yt(w)&&E&&!(E instanceof Promise)){let[S,M]=Ar(h.x,h.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),A={x:S-c.originInGrid.x,y:M-c.originInGrid.y};this.maybeCacheReferenceSnapPoints(d,[y]);let{snapOffset:C,snapLines:I}=rF([y],[w],this,d,A,u);ye(y,RAe(y,u,E.naturalWidth,E.naturalHeight,g+C.x,U+C.y,d.shiftKey?w.width/w.height:void 0)),zs(y,this.scene.getNonDeletedElementsMap(),{newSize:{width:y.width,height:y.height}}),this.setState({isCropping:u&&u!=="rotation",snapLines:I})}return!0}return!1}),Z(this,"maybeHandleResize",(c,d)=>{let u=this.scene.getSelectedElements(this.state),h=u.filter(E=>at(E)),g=c.resize.handleType;if(h.length>0&&g==="rotation"||u.length===1&&Fe(u[0])||this.state.croppingElementId)return!1;this.setState({isResizing:g&&g!=="rotation",isRotating:g==="rotation",activeEmbeddable:null});let U=c.lastCoords,[y,x]=Ar(U.x-c.resize.offset.x,U.y-c.resize.offset.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),w=new Map;if(h.forEach(E=>{dc(this.scene.getNonDeletedElements(),E.id).forEach(S=>{w.set(E.id+S.id,{x:S.x-E.x,y:S.y-E.y})})}),!this.state.selectedElementsAreBeingDragged){let[E,S]=Ar(U.x,U.y,d[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),M={x:E-c.originInGrid.x,y:S-c.originInGrid.y},A=[...c.originalElements.values()];this.maybeCacheReferenceSnapPoints(d,u);let{snapOffset:C,snapLines:I}=rF(u,wt(A,this.state),this,d,M,g);y+=C.x,x+=C.y,this.setState({snapLines:I})}if(VNe(c.originalElements,g,u,this.scene.getElementsMapIncludingDeleted(),this.scene,$5(d),YE(d),u.some(E=>Yt(E))?!Bg(d):Bg(d),y,x,c.resize.center.x,c.resize.center.y)){let E=qE(u,this.scene.getNonDeletedElementsMap(),this.state.zoom),S=new Set;return h.forEach(M=>{o3(this.scene.getNonDeletedElements(),M,this.state,this.scene.getNonDeletedElementsMap()).forEach(A=>S.add(A))}),this.setState({elementsToHighlight:[...S],suggestedBindings:E}),!0}return!1}),Z(this,"getContextMenuItems",c=>{let d=[];return d.push(ez,J$),c==="canvas"?this.state.viewModeEnabled?[...d,nz,wM,Lz,EM]:[q$,Br,ez,J$,tz,Br,pOe,Dje,Br,nz,wje,wM,Lz,EM]:(d.push(tz),this.state.viewModeEnabled?[p3,...d]:[Br,Q$,p3,q$,Br,sze,oze,aze,Br,QBe,Br,...d,Br,aje,lje,Br,fje,Gze,Eje,Sje,Mje,dje,Br,mje,Br,fOe,dOe,uOe,hOe,Br,yje,xje,Br,qBe,Br,dne,Mne,Br,UOe,Pje,Br,Pte])}),Z(this,"handleWheel",Zn(c=>{if(!(c.target instanceof HTMLCanvasElement||c.target instanceof HTMLTextAreaElement||c.target instanceof HTMLIFrameElement)){c[Q.CTRL_OR_CMD]&&c.preventDefault();return}if(c.preventDefault(),Gg)return;let{deltaX:d,deltaY:u}=c;if(c.metaKey||c.ctrlKey){let h=Math.sign(u),g=M7*100,U=Math.abs(u),y=u;U>g&&(y=g*h);let x=this.state.zoom.value-y/100;x+=Math.log10(Math.max(1,this.state.zoom.value))*-h*Math.min(1,U/20),this.translateCanvas(w=>({...Hu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:mf(x)},w),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(c.shiftKey){this.translateCanvas(({zoom:h,scrollX:g})=>({scrollX:g-(u||d)/h.value}));return}this.translateCanvas(({zoom:h,scrollX:g,scrollY:U})=>({scrollX:g-d/h.value,scrollY:U-u/h.value}))})),Z(this,"savePointer",(c,d,u)=>{var y,x;if(!c||!d)return;let{x:h,y:g}=xn({clientX:c,clientY:d},this.state),U={x:h,y:g,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(x=(y=this.props).onPointerUpdate)==null||x.call(y,{pointer:U,button:u,pointersMap:Xt.pointers})}),Z(this,"resetShouldCacheIgnoreZoomDebounced",l6(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300)),Z(this,"updateDOMRect",c=>{var d;if((d=this.excalidrawContainerRef)!=null&&d.current){let u=this.excalidrawContainerRef.current,{width:h,height:g,left:U,top:y}=u.getBoundingClientRect(),{width:x,height:w,offsetTop:E,offsetLeft:S}=this.state;if(h===x&&g===w&&U===S&&y===E){c&&c();return}this.setState({width:h,height:g,offsetLeft:U,offsetTop:y},()=>{c&&c()})}}),Z(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});let n=oc(),{excalidrawAPI:r,viewModeEnabled:i=!1,zenModeEnabled:s=!1,gridModeEnabled:o=!1,objectsSnapModeEnabled:a=!1,theme:l=n.theme,name:f=`${j("labels.untitled")}-${hB()}`}=t;if(this.state={...n,theme:l,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:i,zenModeEnabled:s,objectsSnapModeEnabled:a,gridModeEnabled:o??n.gridModeEnabled,name:f,width:window.innerWidth,height:window.innerHeight},this.id=cT(),this.library=new Wje(this),this.actionManager=new nFe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new Nf,this.canvas=document.createElement("canvas"),this.rc=j0.canvas(this.canvas),this.renderer=new Hz(this.scene),this.visibleElements=[],this.store=new yIe,this.history=new uz,r){let c={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:d=>{this.actionManager.registerAction(d)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:d=>this.onChangeEmitter.on(d),onPointerDown:d=>this.onPointerDownEmitter.on(d),onPointerUp:d=>this.onPointerUpEmitter.on(d),onScrollChange:d=>this.onScrollChangeEmitter.on(d),onUserFollow:d=>this.onUserFollowEmitter.on(d)};typeof r=="function"?r(c):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new xf(this.scene),this.history=new uz,this.actionManager.registerAll(VC),this.actionManager.registerAction(eFe(this.history,this.store)),this.actionManager.registerAction(tFe(this.history,this.store))}onWindowMessage(t){if(t.origin!=="https://player.vimeo.com"&&t.origin!=="https://www.youtube.com")return;let n=null;try{n=JSON.parse(t.data)}catch{}if(n)switch(t.origin){case"https://player.vimeo.com":if(n.method==="paused"){let r=null,i=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!i)break;for(let s of i)s.contentWindow===t.source&&(r=s.contentWindow);r==null||r.postMessage(JSON.stringify({method:n.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(n.event==="infoDelivery"&&n.info&&n.id&&typeof n.info.playerState=="number"){let r=n.id,i=n.info.playerState;Object.values(QU).includes(i)&&LS.set(r,i)}break}}cacheEmbeddableRef(t,n){n&&this.iFrameRefs.set(t.id,n)}getHTMLIFrameElement(t){return this.iFrameRefs.get(t.id)}handleEmbeddableCenterClick(t){var r,i,s,o;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===t&&((i=this.state.activeEmbeddable)==null?void 0:i.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:t,state:"active"},selectedElementIds:{[t.id]:!0},newElement:null,selectionElement:null})},100),Rd(t)))return;let n=this.getHTMLIFrameElement(t);if(n!=null&&n.contentWindow){if(n.src.includes("youtube")){let a=LS.get(t.id);switch(a||(LS.set(t.id,QU.UNSTARTED),n.contentWindow.postMessage(JSON.stringify({event:"listening",id:t.id}),"*")),a){case QU.PLAYING:case QU.BUFFERING:(s=n.contentWindow)==null||s.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(o=n.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}n.src.includes("player.vimeo.com")&&n.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(t,n,r,i){var s,o;return t&&!n.altKey&&!n.shiftKey&&!n.metaKey&&!n.ctrlKey&&(((s=this.state.activeEmbeddable)==null?void 0:s.element)!==t||((o=this.state.activeEmbeddable)==null?void 0:o.state)==="hover"||!this.state.activeEmbeddable)&&r>=t.x+t.width/3&&r<=t.x+2*t.width/3&&i>=t.y+t.height/3&&i<=t.y+2*t.height/3}renderEmbeddables(){let t=this.state.zoom.value,n=this.state.width,r=this.state.height,i=this.scene.getNonDeletedElements().filter(s=>Rs(s)&&this.embedsValidationStatus.get(s.id)===!0||Rd(s));return m.jsx(m.Fragment,{children:i.map(s=>{var h,g,U,y,x,w,E,S,M;let{x:o,y:a}=Ga({sceneX:s.x,sceneY:s.y},this.state),l=f9(s,n,r,this.state,this.scene.getNonDeletedElementsMap()),f=this.initializedEmbeds.has(s.id);if(l&&!f&&this.initializedEmbeds.add(s.id),!(l||f))return null;let c;if(Rd(s)){c=null;let A=(((h=s.customData)==null?void 0:h.generationData)??this.magicGenerations.get(s.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(A.status==="done"){let C=A.html;c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>C}}else if(A.status==="pending")c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>z5(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===It.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let C;A.code==="ERR_GENERATION_INTERRUPTED"?C="Generation was interrupted...":C=A.message||"Generation failed",c={intrinsicSize:{w:s.width,h:s.height},type:"document",srcdoc:()=>z5(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Mt.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${C}</h3>
                  `)}}}else c=Ap(cQ(s.link||""));let d=((g=this.state.activeEmbeddable)==null?void 0:g.element)===s&&((U=this.state.activeEmbeddable)==null?void 0:U.state)==="active",u=((y=this.state.activeEmbeddable)==null?void 0:y.element)===s&&((x=this.state.activeEmbeddable)==null?void 0:x.state)==="hover";return m.jsx("div",{className:ze("excalidraw__embeddable-container",{"is-hovered":u}),style:{transform:l?`translate(${o-this.state.offsetLeft}px, ${a-this.state.offsetTop}px) scale(${t})`:"none",display:l?"block":"none",opacity:Pq(s,Hs(s,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((w=this.state.openDialog)==null?void 0:w.name)==="elementLinkSelector"?TZ:1),"--embeddable-radius":`${Ja(Math.min(s.width,s.height),s)}px`},children:m.jsxs("div",{className:"excalidraw__embeddable-container__inner",style:{width:l?`${s.width}px`:0,height:l?`${s.height}px`:0,transform:l?`rotate(${s.angle}rad)`:"none",pointerEvents:d?Z1.enabled:Z1.disabled},children:[u&&m.jsx("div",{className:"excalidraw__embeddable-hint",children:j("buttons.embeddableInteractionButton")}),m.jsx("div",{className:"excalidraw__embeddable__outer",style:{padding:`${s.strokeWidth}px`},children:(Rs(s)?(S=(E=this.props).renderEmbeddable)==null?void 0:S.call(E,s,this.state):null)??m.jsx("iframe",{ref:A=>this.cacheEmbeddableRef(s,A),className:"excalidraw__embeddable",srcDoc:(c==null?void 0:c.type)==="document"?c.srcdoc(this.state.theme):void 0,src:(c==null?void 0:c.type)!=="document"?(c==null?void 0:c.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(M=c==null?void 0:c.sandbox)!=null&&M.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},s.id)})})}toggleOverscrollBehavior(t){document.documentElement.style.overscrollBehaviorX=t.type==="pointerenter"?"none":"auto"}render(){var c,d,u,h,g,U,y,x;let t=this.scene.getSelectedElements(this.state),{renderTopRightUI:n,renderCustomStats:r}=this.props,i=this.scene.getSceneNonce(),{elementsMap:s,visibleElements:o}=this.renderer.getRenderableElements({sceneNonce:i,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(c=this.state.newElement)==null?void 0:c.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=o;let a=this.scene.getNonDeletedElementsMap(),l="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",f=t[0];return m.jsx("div",{className:ze("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":l?Z1.disabled:Z1.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:m.jsx(Tre.Provider,{value:this,children:m.jsx(Ire.Provider,{value:this.props,children:m.jsx(oN.Provider,{value:this.excalidrawContainerValue,children:m.jsx(sN.Provider,{value:this.device,children:m.jsx(cN.Provider,{value:this.setAppState,children:m.jsx(lN.Provider,{value:this.state,children:m.jsxs(aN.Provider,{value:this.scene.getNonDeletedElements(),children:[m.jsxs(fN.Provider,{value:this.actionManager,children:[m.jsx(nze,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:eb().code,renderTopRightUI:n,renderCustomStats:r,showExitZenModeBtn:typeof((u=this.props)==null?void 0:u.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),m.jsx("div",{className:"excalidraw-textEditorContainer"}),m.jsx("div",{className:"excalidraw-contextMenuContainer"}),m.jsx("div",{className:"excalidraw-eye-dropper-container"}),m.jsx(Lze,{trails:[this.laserTrails,this.eraserTrail]}),t.length===1&&((h=this.state.openDialog)==null?void 0:h.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&m.jsx(Ije,{element:f,elementsMap:a,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},f.id),this.props.aiEnabled!==!1&&t.length===1&&Qy(f)&&m.jsx(Vz,{element:f,elementsMap:s,children:m.jsx(RS,{title:j("labels.convertToCode"),icon:cq,checked:!1,onChange:()=>this.onMagicFrameGenerate(f,"button")})}),t.length===1&&Rd(f)&&((U=(g=f.customData)==null?void 0:g.generationData)==null?void 0:U.status)==="done"&&m.jsxs(Vz,{element:f,elementsMap:s,children:[m.jsx(RS,{title:j("labels.copySource"),icon:TT,checked:!1,onChange:()=>this.onIframeSrcCopy(f)}),m.jsx(RS,{title:"Enter fullscreen",icon:oEe,checked:!1,onChange:()=>{let w=this.getHTMLIFrameElement(f);if(w)try{w.requestFullscreen(),this.setState({activeEmbeddable:{element:f,state:"active"},selectedElementIds:{[f.id]:!0},newElement:null,selectionElement:null})}catch(E){console.warn(E),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&m.jsx(ize,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&m.jsx(iFe,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:w=>{this.setState({contextMenu:null},()=>{this.focusContainer(),w==null||w()})}}),m.jsx(Dze,{canvas:this.canvas,rc:this.rc,elementsMap:s,allElementsMap:a,visibleElements:o,sceneNonce:i,selectionNonce:(y=this.state.selectionElement)==null?void 0:y.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:K2(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&m.jsx(qze,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:s,allElementsMap:a,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),m.jsx(Rze,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:s,visibleElements:o,allElementsMap:a,selectedElements:t,sceneNonce:i,selectionNonce:(x=this.state.selectionElement)==null?void 0:x.versionNonce,scale:window.devicePixelRatio,appState:this.state,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&m.jsx($ze,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(t){Object.assign(this.plugins,t)}async onMagicFrameGenerate(t,n){var o;let r=(o=this.plugins.diagramToCode)==null?void 0:o.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}let i=hI(this.scene.getNonDeletedElements(),t).filter(a=>!Qy(a));if(!i.length){n==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),vn("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}let s=this.insertIframeElement({sceneX:t.x+t.width+30,sceneY:t.y,width:t.width,height:t.height});if(s){this.updateMagicGeneration({frameElement:s,data:{status:"pending"}}),this.setState({selectedElementIds:{[s.id]:!0}}),vn("ai","generate (start)","d2c");try{let{html:a}=await r({frame:t,children:i});if(vn("ai","generate (success)","d2c"),!a.trim()){this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}let l=a.includes("<!DOCTYPE html>")&&a.includes("</html>")?a.slice(a.indexOf("<!DOCTYPE html>"),a.indexOf("</html>")+7):a;this.updateMagicGeneration({frameElement:s,data:{status:"done",html:l}})}catch(a){vn("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:s,data:{status:"error",code:"ERR_OAI",message:a.message||"Unknown error during generation"}})}}}onIframeSrcCopy(t){var n,r;((r=(n=t.customData)==null?void 0:n.generationData)==null?void 0:r.status)==="done"&&(Xb(t.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(t){let n=t??this.files;this.scene.getNonDeletedElements().forEach(r=>{Zo(r)&&n[r.fileId]&&(this.imageCache.delete(r.fileId),Hn.delete(r))})}async componentDidMount(){var t;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,(vt.MODE===Fs.TEST||vt.DEV)&&(this.setState.bind(this),Object.defineProperties(window.h,{state:{configurable:!0,get:()=>this.state},setState:{configurable:!0,value:(...n)=>this.setState(...n)},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history},store:{configurable:!0,value:this.store},fonts:{configurable:!0,value:this.fonts}})),this.store.onStoreIncrementEmitter.on(n=>{this.history.record(n.elementsChange,n.appStateChange)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),kf()||(this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints()),CC&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(t=this.resizeObserver)==null||t.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),gxe()&&!Cve()&&this.setState({errorMessage:m.jsx(cze,{})})}componentWillUnmount(){var t,n;(t=window.launchQueue)==null||t.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new Nf,this.fonts=new xf(this.scene),this.renderer=new Hz(this.scene),this.files={},this.imageCache.clear(),(n=this.resizeObserver)==null||n.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),Hn.destroy(),Hc.destroy(),clearTimeout(vd),_r.clearCache(),is.clearCache(),vd=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(jn(document,"keydown",this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(jn(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),jn(window,"message",this.onWindowMessage,!1),jn(document,"pointerup",this.removePointer,{passive:!1}),jn(document,"copy",this.onCopy,{passive:!1}),jn(document,"keyup",this.onKeyUp,{passive:!0}),jn(document,"pointermove",this.updateCurrentCursorPosition,{passive:!1}),jn(document.fonts,"loadingdone",t=>{let n=t.fontfaces;this.fonts.onLoaded(n)},{passive:!1}),jn(document,"gesturestart",this.onGestureStart,!1),jn(document,"gesturechange",this.onGestureChange,!1),jn(document,"gestureend",this.onGestureEnd,!1),jn(window,"focus",()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(jn(document,"fullscreenchange",this.onFullscreenChange,{passive:!1}),jn(document,"paste",this.pasteFromClipboard,{passive:!1}),jn(document,"cut",this.onCut,{passive:!1}),jn(window,"resize",this.onResize,!1),jn(window,"unload",this.onUnload,!1),jn(window,"blur",this.onBlur,!1),jn(this.excalidrawContainerRef.current,"wheel",this.handleWheel,{passive:!1}),jn(this.excalidrawContainerRef.current,"dragover",this.disableEvent,!1),jn(this.excalidrawContainerRef.current,"drop",this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(jn(uve(this.excalidrawContainerRef.current),"scroll",this.onScroll,{passive:!1})))}componentDidUpdate(t,n){var a,l,f,c,d,u,h,g,U,y;this.updateEmbeddables();let r=this.scene.getElementsIncludingDeleted(),i=this.scene.getElementsMapIncludingDeleted(),s=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),t.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),n.userToFollow&&!this.state.collaborators.has(n.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(n.zoom.value!==this.state.zoom.value||n.scrollX!==this.state.scrollX||n.scrollY!==this.state.scrollY)&&((l=(a=this.props)==null?void 0:a.onScrollChange)==null||l.call(a,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),n.userToFollow!==this.state.userToFollow&&(n.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:n.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Il(this.state)&&this.setState({activeTool:Ur(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&n.theme!==this.state.theme&&uQ(this.interactiveCanvas,this.state.theme),n.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),t.langCode!==this.props.langCode&&this.updateLanguage(),Il(n)&&!Il(this.state)&&this.eraserTrail.endPath(),t.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),n.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((f=n.openDialog)==null?void 0:f.name)==="elementLinkSelector"||((c=this.state.openDialog)==null?void 0:c.name)==="elementLinkSelector")&&((d=n.openDialog)==null?void 0:d.name)!==((u=this.state.openDialog)==null?void 0:u.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),t.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),t.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(h=this.excalidrawContainerRef.current)==null||h.classList.toggle("theme--dark",this.state.theme===It.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(ka)}),(g=this.state.editingTextElement)!=null&&g.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});let{multiElement:o}=n;n.activeTool!==this.state.activeTool&&o!=null&&$u(this.state)&&Xl(o,!1)&&zC(o,this.state,Xa(je.getPointAtIndexGlobalCoordinates(o,-1,s)),this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.store.commit(i,this.state),this.state.isLoading||((y=(U=this.props).onChange)==null||y.call(U,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){Wg=!1}async addElementsFromMixedContentPaste(t,{isPlainPaste:n,sceneX:r,sceneY:i}){if(!n&&t.some(s=>s.type==="imageUrl")&&this.isToolSupported("image")){let s=t.filter(d=>d.type==="imageUrl").map(d=>d.value),o=await Promise.all(s.map(async d=>{try{return{file:await uRe(d)}}catch(u){let h=u.message;return u.cause==="FETCH_ERROR"?h=j("errors.failedToFetchImage"):u.cause==="UNSUPPORTED"&&(h=j("errors.unsupportedFileType")),{errorMessage:h}}})),a=i,l=!1,f={};for(let d of o)if(d.file){let u=this.createImageElement({sceneX:r,sceneY:a}),h=await this.insertImageElement(u,d.file);h&&(l||(l=!0,a-=h.height/2),ye(h,{y:a},!1),a=u.y+u.height+25,f[u.id]=!0)}this.setState({selectedElementIds:Kt(f,this.state)});let c=o.find(d=>!!d.errorMessage);c&&c.errorMessage&&this.setState({errorMessage:c.errorMessage})}else{let s=t.filter(o=>o.type==="text");s.length&&this.addTextFromPaste(s.map(o=>o.value).join(`

`),n)}}addTextFromPaste(t,n=!1){let{x:r,y:i}=xn({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),s={x:r,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:t,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Bb,verticalAlign:O4,locked:!1},o=ln({fontSize:s.fontSize,fontFamily:s.fontFamily}),a=qh(s.fontFamily),[l,,f]=iTe(this.state),c=Math.max(Math.min((f-l)*.5,800),200),d=10,u=i,h=n?[t]:t.split(`
`),g=h.reduce((U,y,x)=>{var E;let w=f6(y).trim();if(w.length){let S=this.getTopLayerFrameAtSceneCoords({x:r,y:u}),M=Xi(w,o,a),A=M.width>c,C=A?f1(w,o,c):w;M=A?Xi(C,o,a):M;let I=r-M.width/2,R=u-M.height/2,L=yo({...s,x:I,y:R,text:C,originalText:w,lineHeight:a,autoResize:!A,frameId:S?S.id:null});U.push(L),u+=L.height+d}else(E=h[x-1])!=null&&E.trim()&&(u+=Hb(s.fontSize,a)+d);return U},[]);g.length!==0&&(this.scene.insertElements(g),this.setState({selectedElementIds:Kt(Object.fromEntries(g.map(U=>[U.id,!0])),this.state)}),!n&&g.length>1&&Gz===!1&&!this.device.editor.isMobile&&(this.setToast({message:j("toast.pasteAsSingleElement",{shortcut:Ue("CtrlOrCmd+Shift+V")}),duration:5e3}),Gz=!0),this.store.shouldCaptureIncrement())}handleTextWysiwyg(t,{isExistingElement:n=!1}){let r=this.scene.getElementsMapIncludingDeleted(),i=(s,o)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(a=>a.id===t.id&&Oe(a)?yt(a,{originalText:s,isDeleted:o??a.isDeleted,...pQ(a,di(a,r),r,s)}):a)])};Wze({id:t.id,canvas:this.canvas,getViewportCoords:(s,o)=>{let{x:a,y:l}=Ga({sceneX:s,sceneY:o},this.state);return[a-this.state.offsetLeft,l-this.state.offsetTop]},onChange:Zn(s=>{i(s,!1),eM(t)&&zs(t,this.scene.getNonDeletedElementsMap())}),onSubmit:Zn(({viaKeyboard:s,nextOriginalText:o})=>{let a=!o.trim();if(i(o,a),!a&&s){let l=t.containerId?t.containerId:t.id;ii.flushSync(()=>{this.setState(f=>({selectedElementIds:Kt({...f.selectedElementIds,[l]:!0},f)}))})}a&&qq(this.scene.getNonDeletedElements(),[t]),(!a||n)&&this.store.shouldCaptureIncrement(),ii.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&Al(this.interactiveCanvas,this.state),this.focusContainer()}),element:t,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),i(t.originalText,!1)}deselectElements(){this.setState({selectedElementIds:Kt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(t,n){let r=this.getElementAtPosition(t,n,{includeBoundTextElement:!0});return r&&Oe(r)&&!r.isDeleted?r:null}getElementAtPosition(t,n,r){let i=this.getElementsAtPosition(t,n,r==null?void 0:r.includeBoundTextElement,r==null?void 0:r.includeLockedElements);if(i.length>1){if(r!=null&&r.preferSelected){for(let o=i.length-1;o>-1;o--)if(this.state.selectedElementIds[i[o].id])return i[o]}let s=i[i.length-1];return hp({x:t,y:n,element:s,shape:Kc(s,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:at(s)?this.frameNameBoundsCache.get(s):null})?s:i[i.length-2]}return i.length===1?i[0]:null}getElementsAtPosition(t,n,r=!1,i=!1){let s=[],o=this.scene.getNonDeletedElementsMap();return(r&&i?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(a=>(i||!a.locked)&&(r||!(Oe(a)&&a.containerId)))).filter(a=>this.hitElement(t,n,a)).filter(a=>{let l=Hs(a,o);return l&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?_F({x:t,y:n},l,o):!0}).filter(a=>Rd(a)?(s.push(a),!1):!0).concat(s)}getElementHitThreshold(){return Exe/this.state.zoom.value}hitElement(t,n,r,i=!0){if(i&&this.state.selectedElementIds[r.id]&&iJ([r],this.state)){let s=lAe(r,this.scene.getNonDeletedElementsMap(),Yt(r)?0:this.getElementHitThreshold());if(q4(P(t,n),s))return!0}return kq(t,n,Mq(r,this.scene.getNonDeletedElementsMap()))?!0:hp({x:t,y:n,element:r,shape:Kc(r,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:at(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(t,n){let r=this.scene.getNonDeletedElements(),i=this.scene.getSelectedElements(this.state);if(i.length===1)return wh(i[0],!1)?i[0]:null;let s=null;for(let o=r.length-1;o>=0;--o){if(r[o].isDeleted)continue;let[a,l,f,c]=gt(r[o],this.scene.getNonDeletedElementsMap());if(Et(r[o])&&hp({x:t,y:n,element:r[o],shape:Kc(r[o],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){s=r[o];break}else if(a<t&&t<f&&l<n&&n<c){s=r[o];break}}return wh(s,!1)?s:null}handleHoverSelectedLinearElement(t,n,r){let i=this.scene.getNonDeletedElementsMap(),s=je.getElement(t.elementId,i);if(s)if(this.state.selectedLinearElement){let o=-1,a=null;hp({x:n,y:r,element:s,shape:Kc(s,this.scene.getNonDeletedElementsMap())})?(o=je.getPointIndexUnderCursor(s,i,this.state.zoom,n,r),a=je.getSegmentMidpointHitCoords(t,{x:n,y:r},this.state,this.scene.getNonDeletedElementsMap()),(Fe(s)?o===0||o===s.points.length-1:o>=0)||a?on(this.interactiveCanvas,nn.POINTER):this.hitElement(n,r,s)&&on(this.interactiveCanvas,nn.MOVE)):this.hitElement(n,r,s)&&(!Fe(s)||!(s.startBinding||s.endBinding))&&on(this.interactiveCanvas,nn.MOVE),this.state.selectedLinearElement.hoverPointIndex!==o&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:o}}),je.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,a)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:a}})}else on(this.interactiveCanvas,nn.AUTO)}updateGestureOnPointerDown(t){Xt.pointers.set(t.pointerId,{x:t.clientX,y:t.clientY}),Xt.pointers.size===2&&(Xt.lastCenter=hz(Xt.pointers),Xt.initialScale=this.state.zoom.value,Xt.initialDistance=pz(Array.from(Xt.pointers.values())))}initialPointerDownState(t){let n=xn(t,this.state),r=this.scene.getSelectedElements(this.state),[i,s,o,a]=tn(r),l=r.findIndex(Fe)===0;return{origin:n,withCmdOrCtrl:t[Q.CTRL_OR_CMD],originInGrid:Xa(Ar(n.x,n.y,t[Q.CTRL_OR_CMD]||l?null:this.getEffectiveGridSize())),scrollbars:Uz(DS,t.clientX-this.state.offsetLeft,t.clientY-this.state.offsetTop),lastCoords:{...n},originalElements:this.scene.getNonDeletedElements().reduce((f,c)=>(f.set(c.id,d1(c)),f),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(o+i)/2,y:(a+s)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(n,r)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(t,n){if(!(n.scrollbars.isOverEither&&!this.state.multiElement))return!1;PS=!0,n.lastCoords.x=t.clientX,n.lastCoords.y=t.clientY;let r=TS(s=>{s.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(s,n)}),i=Zn(()=>{du=null,PS=!1,Al(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(t.clientX,t.clientY,"up"),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),r.flush()});return du=i,window.addEventListener("pointermove",r),window.addEventListener("pointerup",i),!0}isASelectedElement(t){return t!=null&&this.state.selectedElementIds[t.id]}isHittingCommonBoundingBoxOfSelectedElements(t,n){if(n.length<2)return!1;let r=this.getElementHitThreshold(),[i,s,o,a]=tn(n);return t.x>i-r&&t.x<o+r&&t.y>s-r&&t.y<a+r}getCurrentItemRoundness(t){return this.state.currentItemRoundness==="round"?{type:N6(t)?Rr.ADAPTIVE_RADIUS:Rr.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(t,n,r=!1){M0({event:t,app:this,selectedElements:n})&&(r||!Hc.getReferenceSnapPoints())&&Hc.setReferenceSnapPoints(HTe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(t,n,r=!1){M0({event:t,app:this,selectedElements:n})&&(r||!Hc.getVisibleGaps())&&Hc.setVisibleGaps(zTe(this.scene.getNonDeletedElements(),n,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(t){return Zn(n=>{this.maybeHandleResize(t,n)||this.maybeDragNewGenericElement(t,n)})}onKeyUpFromPointerDownHandler(t){return Zn(n=>{n.key===Q.ALT&&n.preventDefault(),!this.maybeHandleResize(t,n)&&this.maybeDragNewGenericElement(t,n)})}onPointerMoveFromPointerDownHandler(t){return TS(n=>{var c,d,u,h,g,U;if(((c=this.state.openDialog)==null?void 0:c.name)==="elementLinkSelector")return;let r=xn(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){let[y,x]=Ar(r.x,r.y,n[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),w=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(w<0){let S=je.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:y,y:x},this.state,this.scene.getNonDeletedElementsMap());w=S?je.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,S,this.scene.getNonDeletedElementsMap()):-1}let E=je.moveFixedSegment(this.state.selectedLinearElement,w,y,x,this.scene.getNonDeletedElementsMap());ii.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:E.segmentMidPointHoveredCoords,pointerDownState:E.pointerDownState}})});return}let i=this.lastPointerMoveCoords??t.origin;if(this.lastPointerMoveCoords=r,t.drag.offset===null&&(t.drag.offset=Xa(nRe(this.scene.getSelectedElements(this.state),t.origin.x,t.origin.y))),!(n.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(n,t))return;if(Il(this.state)){this.handleEraser(n,t,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);let[s,o]=Ar(r.x,r.y,n[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!t.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&Zt(P(r.x,r.y),P(t.origin.x,t.origin.y))<Uu)return;if(t.resize.isResizing&&(t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeHandleCrop(t,n)||this.maybeHandleResize(t,n)))return!0;let a=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){let y=this.state.editingLinearElement||this.state.selectedLinearElement;if(je.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,a)){let x=je.addMidpoint(this.state.selectedLinearElement,r,this,!n[Q.CTRL_OR_CMD],a);if(!x)return;ii.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices}})});return}else if(y.pointerDownState.segmentMidpoint.value!==null&&!y.pointerDownState.segmentMidpoint.added)return;if(je.handlePointDragging(n,this,r.x,r.y,(x,w)=>{this.maybeSuggestBindingsForLinearElementAtCoords(x,w)},y,this.scene)){t.lastCoords.x=r.x,t.lastCoords.y=r.y,t.drag.hasOccurred=!0,this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging&&this.setState({editingLinearElement:{...this.state.editingLinearElement,isDragging:!0}}),this.state.selectedLinearElement.isDragging||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isDragging:!0}});return}}let l=t.hit.allHitElements.some(y=>this.isASelectedElement(y)),f=this.state.editingLinearElement&&n.shiftKey&&this.state.editingLinearElement.elementId===((d=t.hit.element)==null?void 0:d.id);if((l||t.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!f){let y=this.scene.getSelectedElements(this.state);if(y.every(S=>S.locked))return;let x=y.find(S=>at(S)),w=this.getTopLayerFrameAtSceneCoords(r),E=w&&!x?w:null;if(this.state.frameToHighlight!==E&&ii.flushSync(()=>{this.setState({frameToHighlight:E})}),t.drag.hasOccurred=!0,y.length>0&&!t.withCmdOrCtrl&&!this.state.editingTextElement&&((u=this.state.activeEmbeddable)==null?void 0:u.state)!=="active"){let S={x:r.x-t.origin.x,y:r.y-t.origin.y},M=[...t.originalElements.values()],A=n.shiftKey;if(A){let R=Math.abs(S.x),L=Math.abs(S.y),_=A&&R<L,O=A&&R>L;_&&(S.x=0),O&&(S.y=0)}if(this.state.croppingElementId){let R=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(R&&Yt(R)&&R.crop!==null&&t.hit.element===R){let L=R.crop,_=Zo(R)&&((h=this.imageCache.get(R.fileId))==null?void 0:h.image);if(_&&!(_ instanceof Promise)){let O=tr(yi(r.x-i.x,r.y-i.y),Math.max(this.state.zoom.value,2)),[$,B,F,z,H,G]=gt(R,a),V=Ye(pe(P($,B),P(H,G),R.angle)),Y=Ye(pe(P(F,B),P(H,G),R.angle)),K=Ye(pe(P($,z),P(H,G),R.angle)),q=Hi(H4(Y,V)),se=Hi(H4(K,V)),de=yi(cB(O,q),cB(O,se)),xe={...L,x:At(L.x-de[0]*Math.sign(R.scale[0]),0,_.naturalWidth-L.width),y:At(L.y-de[1]*Math.sign(R.scale[1]),0,_.naturalHeight-L.height)};ye(R,{crop:xe});return}}}this.maybeCacheVisibleGaps(n,y),this.maybeCacheReferenceSnapPoints(n,y);let{snapOffset:C,snapLines:I}=VTe(M,S,this,n,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:I}),this.state.editingFrame||eRe(t,y,S,this.scene,C,n[Q.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(y.length!==1||!Fe(y[0]))&&this.setState({suggestedBindings:qE(y,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),n.altKey&&!t.hit.hasBeenDuplicated){t.hit.hasBeenDuplicated=!0;let R=[],L=[],_=new Map,O=new Map,$=t.hit.element,B=new Set(this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}).map(H=>H.id)),F=this.scene.getElementsIncludingDeleted();for(let H of F){let G=B.has(H.id)||H.id===($==null?void 0:$.id)&&t.hit.wasAddedToSelection;if(Math.abs(H.x)>1e7||Math.abs(H.x)>1e7||Math.abs(H.width)>1e7||Math.abs(H.height)>1e7){console.error("Alt+dragging element in scene with invalid dimensions",H.x,H.y,H.width,H.height,G);return}if(G){let V=bQ(this.state.editingGroupId,_,H);if(Math.abs(V.x)>1e7||Math.abs(V.x)>1e7||Math.abs(V.width)>1e7||Math.abs(V.height)>1e7){console.error("Alt+dragging duplicated element with invalid dimensions",V.x,V.y,V.width,V.height);return}let Y=t.originalElements.get(H.id);if(Math.abs(Y.x)>1e7||Math.abs(Y.x)>1e7||Math.abs(Y.width)>1e7||Math.abs(Y.height)>1e7){console.error("Alt+dragging duplicated element with invalid dimensions",Y.x,Y.y,Y.width,Y.height);return}ye(V,{x:Y.x,y:Y.y}),t.originalElements.set(V.id,V),R.push(V),L.push(H),O.set(H.id,V.id)}else R.push(H)}let z=[...R,...L];z=((U=(g=this.props).onDuplicate)==null?void 0:U.call(g,z,F))||z,fc(z,ct(L)),aQ(R,L,O),Zq(z,L,O,"duplicatesServeAsOld"),XQ(z,L,O),this.scene.replaceAllElements(z),this.maybeCacheVisibleGaps(n,y,!0),this.maybeCacheReferenceSnapPoints(n,y,!0)}return}}if(this.state.selectionElement)t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeDragNewGenericElement(t,n);else{let y=this.state.newElement;if(!y)return;if(y.type==="freedraw"){let x=y.points,w=r.x-y.x,E=r.y-y.y,S=x.length>0&&x[x.length-1];if(!(S&&S[0]===w&&S[1]===E)){let M=y.simulatePressure?y.pressures:[...y.pressures,n.pressure];ye(y,{points:[...x,P(w,E)],pressures:M},!1),this.setState({newElement:y})}}else if(mt(y)){t.drag.hasOccurred=!0;let x=y.points,w=s-y.x,E=o-y.y;$5(n)&&x.length===2&&({width:w,height:E}=QC(y.x,y.y,r.x,r.y)),x.length===1?ye(y,{points:[...x,P(w,E)]},!1):(x.length===2||x.length>1&&Fe(y))&&ye(y,{points:[...x.slice(0,-1),P(w,E)]},!1,{isDragging:!0}),this.setState({newElement:y}),Xl(y,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(y,[r],this.state.startBoundElement)}else t.lastCoords.x=r.x,t.lastCoords.y=r.y,this.maybeDragNewGenericElement(t,n,!1)}if(this.state.activeTool.type==="selection"){t.boxSelection.hasOccurred=!0;let y=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)je.handleBoxSelection(n,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let x=!0;!n.shiftKey&&_r(y,this.state)&&(t.withCmdOrCtrl&&t.hit.element?this.setState(E=>is({...E,selectedElementIds:{[t.hit.element.id]:!0}},this.scene.getNonDeletedElements(),E,this)):x=!1);let w=this.state.selectionElement?mI(y,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(E=>{let S={...x&&E.selectedElementIds,...w.reduce((M,A)=>(M[A.id]=!0,M),{})};return t.hit.element&&(w.length?delete S[t.hit.element.id]:S[t.hit.element.id]=!0),E=x?E:{...E,selectedGroupIds:{},editingGroupId:null},{...is({editingGroupId:E.editingGroupId,selectedElementIds:S},this.scene.getNonDeletedElements(),E,this),selectedLinearElement:w.length===1&&mt(w[0])?new je(w[0]):null,showHyperlinkPopup:w.length===1&&(w[0].link||Rs(w[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(t,n){if(n.scrollbars.isOverHorizontal){let r=t.clientX,i=r-n.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-i/this.state.zoom.value}),n.lastCoords.x=r,!0}if(n.scrollbars.isOverVertical){let r=t.clientY,i=r-n.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-i/this.state.zoom.value}),n.lastCoords.y=r,!0}return!1}onPointerUpFromPointerDownHandler(t){return Zn(n=>{var U,y,x,w,E,S,M,A,C,I,R,L;this.removePointer(n),t.eventListeners.onMove&&t.eventListeners.onMove.flush();let{newElement:r,resizingElement:i,croppingElementId:s,multiElement:o,activeTool:a,isResizing:l,isRotating:f,isCropping:c}=this.state;this.setState(_=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:jg(_.snapLines,[]),originSnapOffset:null})),this.lastPointerMoveCoords=null,Hc.setReferenceSnapPoints(null),Hc.setVisibleGaps(null),this.savePointer(n.clientX,n.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});let d=this.scene.getNonDeletedElementsMap();if(t.drag.hasOccurred&&((y=(U=t.hit)==null?void 0:U.element)!=null&&y.id)){let _=d.get(t.hit.element.id);sl(_)&&((x=_.boundElements)==null||x.filter(O=>O.type==="arrow").map(O=>d.get(O.id)).filter(O=>Fe(O)).forEach(O=>{O&&ye(O,{},!0)}))}if(this.state.editingLinearElement)if(!t.boxSelection.hasOccurred&&((E=(w=t.hit)==null?void 0:w.element)==null?void 0:E.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(ka);else{let _=je.handlePointerUp(n,this.state.editingLinearElement,this.state,this.scene);_!==this.state.editingLinearElement&&this.setState({editingLinearElement:_,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){let _=je.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());_&&ye(_,{},!0)}if(((M=(S=t.hit)==null?void 0:S.element)==null?void 0:M.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{let _=je.handlePointerUp(n,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:O,endBindingElement:$}=_,B=this.scene.getElement(_.elementId);Xl(B)&&B7(B,O,$,d,this.scene),_!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{..._,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener("pointermove",t.eventListeners.onMove),window.removeEventListener("pointerup",t.eventListeners.onUp),window.removeEventListener("keydown",t.eventListeners.onKeyDown),window.removeEventListener("keyup",t.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(C=(A=this.props)==null?void 0:A.onPointerUp)==null||C.call(A,a,t),this.onPointerUpEmitter.trigger(this.state.activeTool,t,n),(r==null?void 0:r.type)==="freedraw"){let _=xn(n,this.state),O=r.points,$=_.x-r.x,B=_.y-r.y;$===O[0][0]&&B===O[0][1]&&(B+=1e-4,$+=1e-4);let F=r.simulatePressure?[]:[...r.pressures,n.pressure];ye(r,{points:[...O,P($,B)],pressures:F,lastCommittedPoint:P($,B)}),this.actionManager.executeAction(ka);return}if(Yt(r)){let _=r;try{this.initializeImageDimensions(_),this.setState({selectedElementIds:Kt({[_.id]:!0},this.state)},()=>{this.actionManager.executeAction(ka)})}catch(O){console.error(O),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter($=>$.id!==_.id)),this.actionManager.executeAction(ka)}return}if(mt(r)){r.points.length>1&&this.store.shouldCaptureIncrement();let _=xn(n,this.state);!t.drag.hasOccurred&&r&&!o?(ye(r,{points:[...r.points,P(_.x-r.x,_.y-r.y)]}),this.setState({multiElement:r,newElement:r})):t.drag.hasOccurred&&!o&&($u(this.state)&&Xl(r,!1)&&zC(r,this.state,_,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements()),this.setState({suggestedBindings:[],startBoundElement:null}),a.locked?this.setState(O=>({newElement:null})):(Aa(this.interactiveCanvas),this.setState(O=>({newElement:null,activeTool:Ur(this.state,{type:"selection"}),selectedElementIds:Kt({...O.selectedElementIds,[r.id]:!0},O),selectedLinearElement:new je(r)}))),this.scene.triggerUpdate());return}if(Oe(r)){let _=vT(ln({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<_&&ye(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(a.type!=="selection"&&r&&y6(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(_=>_.id!==r.id),appState:{newElement:null},captureUpdate:me.NEVER});return}if(at(r)){let _=PNe(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(V5(this.scene.getElementsMapIncludingDeleted(),_,r,this.state))}if(r&&(ye(r,tJ(r)),this.scene.triggerUpdate()),t.drag.hasOccurred){let _=xn(n,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){let O=this.scene.getElement(this.state.selectedLinearElement.elementId);if(O!=null&&O.frameId){let $=Hs(O,d);$&&O&&(T0(O,$,this.scene.getNonDeletedElementsMap())||(ye(O,{groupIds:[]}),Y7([O],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{let O=this.getTopLayerFrameAtSceneCoords(_),$=this.scene.getSelectedElements(this.state),B=this.scene.getElementsMapIncludingDeleted(),F=z=>{if(z.length>0){for(let H of z){let G=H.groupIds.indexOf(this.state.editingGroupId);ye(H,{groupIds:H.groupIds.slice(0,G)},!1)}B.forEach(H=>{H.groupIds.length&&Cn(B,H.groupIds[H.groupIds.length-1]).length<2&&ye(H,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(O&&!this.state.selectedElementIds[O.id]){let z=$.filter(H=>H.frameId!==O.id&&c9(H,B,this.state));this.state.editingGroupId&&F(z),B=V5(B,z,O,this.state)}else if(!O&&this.state.editingGroupId){let z=$.filter(H=>H.frameId&&!c9(H,B,this.state));F(z)}B=U6(B,this.state,this),this.scene.replaceAllElements(B)}}if(i&&this.store.shouldCaptureIncrement(),i&&y6(i)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(_=>_.id!==i.id),captureUpdate:me.NEVER}),t.resize.isResizing){let _=U6(this.scene.getElementsIncludingDeleted(),this.state,this),O=this.scene.getSelectedElements(this.state).filter($=>at($));for(let $ of O)_=ZQ(_,o3(this.scene.getElementsIncludingDeleted(),$,this.state,d),$,this);this.scene.replaceAllElements(_)}let u=t.hit.element;((I=this.state.selectedLinearElement)==null?void 0:I.elementId)!==(u==null?void 0:u.id)&&mt(u)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new je(u)}),(!s||s&&(!u&&!c||u&&u.id!==s))&&this.finishImageCropping();let h=this.lastPointerDownEvent,g=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Il(this.state)&&h&&g){if(this.eraserTrail.endPath(),Zt(P(h.clientX,h.clientY),P(g.clientX,g.clientY))===0){let _=xn({clientX:g.clientX,clientY:g.clientY},this.state);this.getElementsAtPosition(_.x,_.y).forEach(O=>this.elementsPendingErasure.add(O.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(u&&!t.drag.hasOccurred&&!t.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!t.boxSelection.hasOccurred)&&(n.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[u.id]?tQ(this.state,u)?this.setState(_=>{let O={..._.selectedElementIds};for(let $ of u.groupIds.flatMap(B=>Cn(this.scene.getNonDeletedElements(),B)))delete O[$.id];return{selectedGroupIds:{..._.selectedElementIds,...u.groupIds.map($=>({[$]:!1})).reduce(($,B)=>({...$,...B}),{})},selectedElementIds:Kt(O,_)}}):(R=this.state.selectedLinearElement)!=null&&R.isDragging||this.setState(_=>{let O={..._.selectedElementIds};delete O[u.id];let $=wt(this.scene.getNonDeletedElements(),{selectedElementIds:O});return{...is({editingGroupId:_.editingGroupId,selectedElementIds:O},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:$.length===1&&mt($[0])?new je($[0]):_.selectedLinearElement}}):u.frameId&&this.state.selectedElementIds[u.frameId]?this.setState(_=>{var $;let O={..._.selectedElementIds,[u.id]:!0};return delete O[u.frameId],((($=this.scene.getElement(u.frameId))==null?void 0:$.groupIds)??[]).flatMap(B=>Cn(this.scene.getNonDeletedElements(),B)).forEach(B=>{delete O[B.id]}),{...is({editingGroupId:_.editingGroupId,selectedElementIds:O},this.scene.getNonDeletedElements(),_,this),showHyperlinkPopup:u.link||Rs(u)?"info":!1}}):this.setState(_=>({selectedElementIds:Kt({..._.selectedElementIds,[u.id]:!0},_)})):this.setState(_=>{var O;return{...is({editingGroupId:_.editingGroupId,selectedElementIds:{[u.id]:!0}},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:mt(u)&&((O=_.selectedLinearElement)==null?void 0:O.elementId)!==u.id?new je(u):_.selectedLinearElement}})),!(u&&Fe(u))&&!t.drag.hasOccurred&&!this.state.isResizing&&(u&&wAe({x:t.origin.x,y:t.origin.y,element:u,shape:Kc(u,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:at(u)?this.frameNameBoundsCache.get(u):null},d)||!u&&t.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:Kt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),on(this.interactiveCanvas,nn.AUTO);return}if(!a.locked&&a.type!=="freedraw"&&r&&this.setState(_=>({selectedElementIds:Kt({..._.selectedElementIds,[r.id]:!0},_),showHyperlinkPopup:Rs(r)&&!r.link?"editor":_.showHyperlinkPopup})),(a.type!=="selection"||_r(this.scene.getNonDeletedElements(),this.state)||!ki(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.shouldCaptureIncrement(),t.drag.hasOccurred||l||f||c){let _=this.scene.getSelectedElements(this.state).filter(mt);e9(_,this.scene.getNonDeletedElementsMap(),this.scene.getNonDeletedElements(),this.scene,$u(this.state),((L=this.state.selectedLinearElement)==null?void 0:L.selectedPointsIndices)??[],this.state.zoom)}if(a.type==="laser"){this.laserTrails.endPath();return}!a.locked&&a.type!=="freedraw"?(Aa(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:Ur(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),u&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&Xt.pointers.size<=1&&Qo(u)&&this.isIframeLikeElementCenter(u,this.lastPointerUpEvent,t.origin.x,t.origin.y)&&this.handleEmbeddableCenterClick(u)})}clearSelection(t){this.setState(n=>({selectedElementIds:Kt({},n),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:n.editingGroupId&&t!=null&&X2(t,n.editingGroupId)?n.editingGroupId:null})),this.setState({selectedElementIds:Kt({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(t,n,r,i){if(i){let s=i.x+i.width/2,o=i.y+i.height/2,a=QE(i,r,this.scene.getNonDeletedElementsMap());if(a&&(s=a.x,o=a.y),Math.hypot(t-s,n-o)<xxe){let{x:l,y:f}=Ga({sceneX:s,sceneY:o},r);return{viewportX:l,viewportY:f,elementCenterX:s,elementCenterY:o}}}}getCanvasOffsets(){var t;if((t=this.excalidrawContainerRef)!=null&&t.current){let n=this.excalidrawContainerRef.current,{left:r,top:i}=n.getBoundingClientRect();return{offsetLeft:r,offsetTop:i}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){let t=$I.find(n=>n.code===this.props.langCode)||D6;await Nte(t),this.setAppState({})}},Jze=()=>{(vt.MODE===Fs.TEST||vt.DEV)&&(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene.getElementsIncludingDeleted()},set(e){var t;return(t=this.app)==null?void 0:t.scene.replaceAllElements(If(e))}},scene:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene}}}))};Jze();var eHe=Qze,tHe=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},nHe=tHe,rHe=()=>m.jsx("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:m.jsx("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),iHe=()=>m.jsxs("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[m.jsx("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),m.jsx("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),sHe=({style:e,size:t="small",withText:n})=>m.jsxs("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[m.jsx(rHe,{}),n&&m.jsx(iHe,{})]}),dN=({icon:e,shortcut:t,children:n})=>{let r=Wr();return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"welcome-screen-menu-item__icon",children:e}),m.jsx("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!r.editor.isMobile&&m.jsx("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};dN.displayName="WelcomeScreenMenuItemContent";var t8=({onSelect:e,children:t,icon:n,shortcut:r,className:i="",...s})=>m.jsx("button",{...s,type:"button",className:`welcome-screen-menu-item ${i}`,onClick:e,children:m.jsx(dN,{icon:n,shortcut:r,children:t})});t8.displayName="WelcomeScreenMenuItem";var _re=({children:e,href:t,icon:n,shortcut:r,className:i="",...s})=>m.jsx("a",{...s,className:`welcome-screen-menu-item ${i}`,href:t,target:"_blank",rel:"noreferrer",children:m.jsx(dN,{icon:n,shortcut:r,children:e})});_re.displayName="WelcomeScreenMenuItemLink";var Hf=({children:e})=>{let{WelcomeScreenCenterTunnel:t}=vo();return m.jsx(t.In,{children:m.jsx("div",{className:"welcome-screen-center",children:e||m.jsxs(m.Fragment,{children:[m.jsx(uN,{}),m.jsx(hN,{children:j("welcomeScreen.defaults.center_heading")}),m.jsxs(pN,{children:[m.jsx(gN,{}),m.jsx(mN,{})]})]})})})};Hf.displayName="Center";var uN=({children:e})=>m.jsx("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||m.jsx(sHe,{withText:!0})});uN.displayName="Logo";var hN=({children:e})=>m.jsx("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});hN.displayName="Heading";var pN=({children:e})=>m.jsx("div",{className:"welcome-screen-menu",children:e});pN.displayName="Menu";var mN=()=>{let e=Gs();return m.jsx(t8,{onSelect:()=>e.executeAction(YI),shortcut:"?",icon:MT,children:j("helpDialog.title")})};mN.displayName="MenuItemHelp";var gN=()=>{let e=Us(),t=Gs();return e.viewModeEnabled?null:m.jsx(t8,{onSelect:()=>t.executeAction(vM),shortcut:Vi("loadScene"),icon:AT,children:j("buttons.load")})};gN.displayName="MenuItemLoadScene";var Pre=({onSelect:e})=>{let{t}=Zi();return m.jsx(t8,{shortcut:null,onSelect:e,icon:nq,children:t("labels.liveCollaboration")})};Pre.displayName="MenuItemLiveCollaborationTrigger";Hf.Logo=uN;Hf.Heading=hN;Hf.Menu=pN;Hf.MenuItem=t8;Hf.MenuItemLink=_re;Hf.MenuItemHelp=mN;Hf.MenuItemLoadScene=gN;Hf.MenuItemLiveCollaborationTrigger=Pre;var oHe=({children:e})=>{let{WelcomeScreenMenuHintTunnel:t}=vo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[Wve,m.jsx("div",{className:"welcome-screen-decor-hint__label",children:e||j("welcomeScreen.defaults.menuHint")})]})})};oHe.displayName="MenuHint";var aHe=({children:e})=>{let{WelcomeScreenToolbarHintTunnel:t}=vo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[m.jsx("div",{className:"welcome-screen-decor-hint__label",children:e||j("welcomeScreen.defaults.toolbarHint")}),Xve]})})};aHe.displayName="ToolbarHint";var lHe=({children:e})=>{let{WelcomeScreenHelpHintTunnel:t}=vo();return m.jsx(t.In,{children:m.jsxs("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[m.jsx("div",{children:e||j("welcomeScreen.defaults.helpHint")}),Gve]})})};lHe.displayName="HelpHint";Ob((e,t,n)=>{if(vt.DEV||vt.MODE===Fs.TEST||window!=null&&window.DEBUG_FRACTIONAL_INDICES){let r=If(e.map(i=>({...i})));HT(r,{shouldThrow:vt.DEV||vt.MODE===Fs.TEST,includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1});nHe();var cHe=e=>{var G,V,Y,K;let{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i=!1,onPointerUpdate:s,renderTopRightUI:o,langCode:a=D6.code,viewModeEnabled:l,zenModeEnabled:f,gridModeEnabled:c,libraryReturnUrl:d,theme:u,name:h,renderCustomStats:g,onPaste:U,detectScroll:y=!0,handleKeyboardGlobally:x=!1,onLibraryChange:w,autoFocus:E=!1,generateIdForFile:S,onLinkOpen:M,generateLinkForSelection:A,onPointerDown:C,onPointerUp:I,onScrollChange:R,onDuplicate:L,children:_,validateEmbeddable:O,renderEmbeddable:$,aiEnabled:B,showDeprecatedFonts:F}=e,z=(G=e.UIOptions)==null?void 0:G.canvasActions,H={...e.UIOptions,canvasActions:{...oB.canvasActions,...z},tools:{image:((Y=(V=e.UIOptions)==null?void 0:V.tools)==null?void 0:Y.image)??!0}};return z!=null&&z.export&&(H.canvasActions.export.saveFileToDisk=((K=z.export)==null?void 0:K.saveFileToDisk)??oB.canvasActions.export.saveFileToDisk),H.canvasActions.toggleTheme===null&&typeof u>"u"&&(H.canvasActions.toggleTheme=!0),T.useEffect(()=>{(async()=>await Ve(()=>import("./roundRect-0PYZxl1G.js"),[]))();let q=se=>{typeof se.scale=="number"&&se.scale!==1&&se.preventDefault()};return document.addEventListener("touchmove",q,{passive:!1}),()=>{document.removeEventListener("touchmove",q)}},[]),m.jsx(qLe,{store:Za,children:m.jsx(tOe,{langCode:a,theme:u,children:m.jsx(eHe,{onChange:t,initialData:n,excalidrawAPI:r,isCollaborating:i,onPointerUpdate:s,renderTopRightUI:o,langCode:a,viewModeEnabled:l,zenModeEnabled:f,gridModeEnabled:c,libraryReturnUrl:d,theme:u,name:h,renderCustomStats:g,UIOptions:H,onPaste:U,detectScroll:y,handleKeyboardGlobally:x,onLibraryChange:w,autoFocus:E,generateIdForFile:S,onLinkOpen:M,generateLinkForSelection:A,onPointerDown:C,onPointerUp:I,onScrollChange:R,onDuplicate:L,validateEmbeddable:O,renderEmbeddable:$,aiEnabled:B!==!1,showDeprecatedFonts:F,children:_})})})},fHe=(e,t)=>{if(e.children!==t.children)return!1;let{initialData:n,UIOptions:r={},...i}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(r),f=Object.keys(o);return l.length!==f.length?!1:l.every(c=>c==="canvasActions"?Object.keys(r.canvasActions).every(d=>{var u,h,g,U;return d==="export"&&((u=r==null?void 0:r.canvasActions)!=null&&u.export)&&((h=o==null?void 0:o.canvasActions)!=null&&h.export)?r.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((g=r==null?void 0:r.canvasActions)==null?void 0:g[d])===((U=o==null?void 0:o.canvasActions)==null?void 0:U[d])}):r[c]===o[c])&&ki(i,a)},Dre=Te.memo(cHe,fHe);Dre.displayName="Excalidraw";const dHe=({thread:e})=>{const[t,n]=T.useState(null),[r,i]=T.useState(!0),s=T.useRef(null);T.useRef(null),T.useEffect(()=>{let a=!1;return(async()=>{try{const l=await Bi.loadThreadCanvas(e.id);a||n(l)}catch(l){console.error("Failed to load canvas:",l)}finally{a||i(!1)}})(),()=>{a=!0}},[e.id]);const o=T.useCallback((a,l)=>{r||(s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{const f={elements:a,appState:{viewBackgroundColor:l.viewBackgroundColor,zoom:l.zoom,scrollX:l.scrollX,scrollY:l.scrollY}};Bi.saveThreadCanvas(e.id,f).catch(c=>console.error("Failed to save canvas:",c))},2e3))},[e.id,r]);return T.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),r?m.jsx("div",{className:"thread-canvas-loading",children:m.jsx("div",{className:"loading-spinner"})}):m.jsx("div",{className:"thread-canvas",children:m.jsx(Dre,{initialData:t||void 0,theme:"dark",onChange:o,UIOptions:{canvasActions:{loadScene:!1}}})})},uHe={ROOT:"#888",EVIDENCE:"#4fc3f7",REFERENCE:"#ab47bc",CONTEXT:"#ff8a65",EXAMPLE:"#66bb6a",COUNTERPOINT:"#ef5350",SYNTHESIS:"#fdd835"},hHe=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"],pHe=({thread:e,onDone:t})=>{const[n,r]=T.useState([]),[i,s]=T.useState(!0),o=T.useRef(null),a=T.useRef(null),l=T.useRef(null);T.useEffect(()=>{e!=null&&e.id&&f()},[e==null?void 0:e.id]);const f=async()=>{s(!0);try{const U=e.nodes||[],y=await Bi.loadArticleSequence(e.id);if(y&&Array.isArray(y)){const x=new Set(y),w=y.map(S=>U.find(M=>M.id===S)).filter(Boolean),E=U.filter(S=>!x.has(S.id));r([...w,...E])}else r([...U])}catch(U){console.error("Failed to load sequence:",U),r([...e.nodes||[]])}finally{s(!1)}},c=T.useCallback(U=>{l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{try{const y=U.map(x=>x.id);await Bi.saveArticleSequence(e.id,y)}catch(y){console.error("Failed to save sequence:",y)}},400)},[e==null?void 0:e.id]),d=U=>{o.current=U},u=U=>{a.current=U},h=()=>{if(o.current===null||a.current===null)return;if(o.current===a.current){o.current=null,a.current=null;return}const U=[...n],[y]=U.splice(o.current,1);U.splice(a.current,0,y),r(U),c(U),o.current=null,a.current=null},g=U=>U.node_type?U.node_type:typeof U.type=="number"?hHe[U.type]||"ROOT":U.type||"ROOT";return i?m.jsx("div",{className:"se-page",children:m.jsx("div",{className:"se-loading",children:"Loading sequence..."})}):m.jsx("div",{className:"se-page",children:m.jsxs("div",{className:"se-container",children:[m.jsxs("div",{className:"se-header",children:[m.jsx("h2",{className:"se-title",children:"Reading Order"}),m.jsx("button",{className:"se-done-btn",onClick:t,children:"Done"})]}),m.jsx("p",{className:"se-hint",children:"Drag items to reorder. The article reader will follow this sequence."}),n.length===0?m.jsx("div",{className:"se-empty",children:"No nodes in this thread yet."}):m.jsx("ul",{className:"se-list",children:n.map((U,y)=>{const x=g(U),w=uHe[x]||"#888";return m.jsxs("li",{className:"se-item",draggable:!0,onDragStart:()=>d(y),onDragEnter:()=>u(y),onDragEnd:h,onDragOver:E=>E.preventDefault(),children:[m.jsx("span",{className:"se-handle",children:""}),m.jsx("span",{className:"se-index",children:y+1}),m.jsx("span",{className:"se-badge",style:{background:w},children:x}),m.jsx("span",{className:"se-node-title",children:U.title||`Node ${U.id}`})]},U.id)})})]})})},mHe=[{key:"graph",label:"Graph"},{key:"article",label:"Article"},{key:"sequence",label:"Sequence"},{key:"canvas",label:"Canvas"}],gHe=({view:e,onChangeView:t,threadTitle:n,onPrevThread:r,onNextThread:i,hasPrev:s,hasNext:o})=>m.jsxs("div",{className:"view-tab-bar",children:[m.jsxs("div",{className:"vtb-thread-nav",children:[m.jsx("button",{className:"vtb-arrow",disabled:!s,onClick:r,"aria-label":"Previous thread",children:""}),m.jsx("span",{className:"vtb-thread-title",title:n,children:n}),m.jsx("button",{className:"vtb-arrow",disabled:!o,onClick:i,"aria-label":"Next thread",children:""})]}),m.jsx("div",{className:"vtb-tabs",children:mHe.map(({key:a,label:l})=>m.jsx("button",{className:`vtb-tab ${e===a?"vtb-tab--active":""}`,onClick:()=>t(a),children:l},a))})]}),Xz=[{value:0,label:"ROOT"},{value:1,label:"EVIDENCE"},{value:2,label:"REFERENCE"},{value:3,label:"CONTEXT"},{value:4,label:"EXAMPLE"},{value:5,label:"COUNTERPOINT"},{value:6,label:"SYNTHESIS"}],bHe={ROOT:"Root Title",EVIDENCE:"Source",EXAMPLE:"Example Title",COUNTERPOINT:"Argument",REFERENCE:"Title",CONTEXT:"Title",SYNTHESIS:"Title"},UHe={ROOT:"Describe this root node...",EVIDENCE:"Present your evidence...",EXAMPLE:"Describe this example...",COUNTERPOINT:"Explain the counterpoint...",REFERENCE:"Write reference content...",CONTEXT:"Provide context...",SYNTHESIS:"Write your synthesis..."},yHe=({editor:e})=>{if(!e)return null;const t=T.useCallback(()=>{const s=window.prompt("URL:");s&&e.chain().focus().extendMarkRange("link").setLink({href:s}).run()},[e]),n=T.useCallback(()=>{const s=window.prompt("YouTube URL:");s&&e.commands.setYoutubeVideo({src:s})},[e]),r=({onClick:s,active:o,children:a})=>m.jsx("button",{type:"button",onClick:s,className:o?"is-active":"",children:a}),i=()=>m.jsx("span",{className:"ne-toolbar-divider"});return m.jsxs("div",{className:"ne-toolbar",children:[m.jsx(r,{onClick:()=>e.chain().focus().toggleBold().run(),active:e.isActive("bold"),children:"B"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleItalic().run(),active:e.isActive("italic"),children:"I"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleStrike().run(),active:e.isActive("strike"),children:"S"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),active:e.isActive("heading",{level:1}),children:"H1"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),active:e.isActive("heading",{level:2}),children:"H2"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),active:e.isActive("heading",{level:3}),children:"H3"}),m.jsx(i,{}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBulletList().run(),active:e.isActive("bulletList"),children:"Bullet"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleOrderedList().run(),active:e.isActive("orderedList"),children:"Ordered"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleBlockquote().run(),active:e.isActive("blockquote"),children:"Quote"}),m.jsx(r,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),active:e.isActive("codeBlock"),children:"Code"}),m.jsx(i,{}),m.jsx(r,{onClick:t,active:e.isActive("link"),children:"Link"}),m.jsx(r,{onClick:n,children:"YouTube"})]})},xHe=({thread:e,selectedNode:t,onSubmit:n,onCancel:r})=>{var x;const i=(t==null?void 0:t.type)==="thread",[s,o]=T.useState(()=>i?"0":"1"),[a,l]=T.useState(""),[f,c]=T.useState(""),[d,u]=T.useState(!1),h=((x=Xz[Number(s)])==null?void 0:x.label)||"EVIDENCE",g=$K({extensions:[bY,tY.configure({openOnClick:!1}),yY.configure({width:640,height:360}),xY.configure({placeholder:UHe[h]||"Write your content..."})],content:"",onUpdate:({editor:w})=>{u(!w.isEmpty)}}),U=()=>{if(!g||!a.trim())return;const w=g.getHTML();let E,S;switch(h){case"ROOT":E=JSON.stringify({title:a,description:w,keywords:f.split(",").map(A=>A.trim()).filter(Boolean)}),S=a;break;case"EVIDENCE":E=JSON.stringify({point:w,source:a}),S=g.getText().substring(0,100);break;case"EXAMPLE":E=JSON.stringify({title:a,description:w}),S=g.getText().substring(0,100);break;case"COUNTERPOINT":E=JSON.stringify({argument:a,explanation:w}),S=a;break;default:E=w,S=g.getText().substring(0,100)}S.length===100&&(S+="...");const M=i?null:parseInt(String(t.id).replace("node-",""),10);n({id:t.id,type:t.type,newNode:{title:a,content:E,description:S,type:Number(s),parentId:M,threadId:e.id,metadata:{title:a||"New Node",description:S,content:E,type:h}}})},y=a.trim()&&g&&d;return m.jsxs("div",{className:"ne-page",children:[m.jsxs("header",{className:"ne-header",children:[m.jsx("button",{className:"ne-back",onClick:r,children:" Back to graph"}),m.jsx("button",{className:"ne-submit",disabled:!y,onClick:U,children:"Add Node"})]}),m.jsx("div",{className:"ne-body",children:m.jsxs("div",{className:"ne-column",children:[m.jsx("select",{className:"ne-select",value:s,onChange:w=>o(w.target.value),children:Xz.filter(w=>i||w.label!=="ROOT").map(w=>m.jsx("option",{value:w.value,children:w.label},w.value))}),m.jsx("input",{className:"ne-title-input",type:"text",placeholder:bHe[h]||"Title",value:a,onChange:w=>l(w.target.value)}),h==="ROOT"&&m.jsx("input",{className:"ne-keywords-input",type:"text",placeholder:"Keywords (comma-separated)",value:f,onChange:w=>c(w.target.value)}),m.jsxs("div",{children:[m.jsx(yHe,{editor:g}),m.jsx("div",{className:"ne-editor-wrapper",children:m.jsx(VA,{editor:g})})]})]})})]})};function vHe(){var Eo,ma,ga;const[e,t]=T.useState(null),[n,r]=T.useState(null),[i,s]=T.useState([]),[o,a]=T.useState(""),[l,f]=T.useState(""),[c,d]=T.useState(""),[u,h]=T.useState(!1),[g,U]=T.useState(null),[y,x]=T.useState(null);T.useState(""),T.useState(0);const[w,E]=T.useState(null),[S,M]=T.useState("");T.useState({});const[A,C]=T.useState(null),[I,R]=T.useState(!1),[L,_]=T.useState(""),[O,$]=T.useState(!1),[B,F]=T.useState(!1),[z,H]=T.useState(!1),[G,V]=T.useState(!1),[Y,K]=T.useState([]),[q,se]=T.useState(!1),de=T.useRef(null),[xe,ve]=T.useState(!1),[ue,te]=T.useState("graph"),[le,he]=T.useState(null),[we,Se]=T.useState(null),De=["ROOT","EVIDENCE","REFERENCE","CONTEXT","EXAMPLE","COUNTERPOINT","SYNTHESIS"];T.useEffect(()=>{G&&ht()},[]);async function Ge(){try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x7A69",chainName:"Hardhat Local",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["http://127.0.0.1:8545"]}]}),!0}catch(Me){return console.error("Error setting up network:",Me),!1}}async function ht(){if(typeof window.ethereum<"u")try{console.log("Connecting to wallet and setting up contract...");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x7A69"}]})}catch(kt){if(kt.code===4902){if(!await Ge())return}else{console.error("Failed to switch network:",kt);return}}const Me=await window.ethereum.request({method:"eth_requestAccounts"});t(Me[0]);const ot=new rfe("http://127.0.0.1:8545"),Be=await ot.getSigner(Me[0]);console.log("Setting up contract with address:",vU.canonThread);const Wt=new uh(vU.canonThread,hfe.abi,Be);try{if(await ot.getCode(vU.canonThread)==="0x"){console.error("No contract deployed at the specified address");return}}catch(kt){console.error("Error verifying contract deployment:",kt);return}r(Wt),console.log("Contract setup complete");const or=new uh(vU.canonToken,wfe.abi,Be);E(or),U(null),await cn(),window.ethereum.on("accountsChanged",kt=>{kt.length===0?(t(null),r(null)):(t(kt[0]),ht())}),window.ethereum.on("chainChanged",()=>{window.location.reload()})}catch(Me){console.error("Error connecting to wallet:",Me)}}async function st(Me){try{const ot=new FormData,Be=new Blob([JSON.stringify(Me)],{type:"application/json"});ot.append("path",Be);const kt=(await(await fetch("http://localhost:5001/api/v0/add",{method:"POST",body:ot})).json()).Hash;if(!kt||kt.length!==46||!kt.startsWith("Qm"))throw new Error("Invalid IPFS hash format. Must start with Qm and be 46 characters long.");return kt}catch(ot){throw console.error("Error uploading to IPFS:",ot),ot}}async function jt(){try{if(h(!0),U(null),!o.trim()){U("Title is required"),h(!1);return}if(console.log("Creating thread with content:",{title:o,description:l,content:c}),G&&n){const Me={title:o,description:l,createdAt:new Date().toISOString(),version:1},ot={title:o,content:c,lastUpdated:new Date().toISOString()},Be=await st(Me),Wt=await st(ot);await(await n.createThread(Be,Wt)).wait();const kt=await n.threadCounter();a(""),f(""),d(""),R(!1),await cn(),C(Number(kt))}else{const Me=await Bi.createThread({title:o,description:l,content:"",metadata:{createdAt:new Date().toISOString(),version:1,title:o,description:l}});console.log("Created thread:",Me),a(""),f(""),d(""),R(!1),await Qi(),C(Me.id),te("article")}}catch(Me){console.error("Error creating thread:",Me),U("Failed to create thread: "+Me.message)}finally{h(!1)}}async function En(Me){try{const ot=await fetch(`http://localhost:8080/ipfs/${Me}`);if(!ot.ok)throw new Error(`IPFS request failed with status ${ot.status}`);return await ot.json()}catch(ot){console.error("Error fetching from IPFS:",ot);try{const Be=await fetch(`http://localhost:5001/api/v0/cat?arg=${Me}`);if(!Be.ok)throw new Error(`IPFS API request failed with status ${Be.status}`);return await Be.json()}catch(Be){return console.error("Error fetching from IPFS API:",Be),null}}}async function cn(){if(!n||!e){console.log("Contract or account not initialized:",{contract:!!n,account:!!e});return}try{console.log("Loading on-chain threads...");const Me=await n.threadCounter();if(console.log("Thread count:",Me),Me>0){const Be=Number(Me),Wt=await n.threads(Be);if(Wt&&Wt.creator!=="0x0000000000000000000000000000000000000000"){const or=await En(Wt.metadataHash),kt=await En(Wt.contentHash),Tn={...Wt,metadata:or,content:kt,nodes:[],id:Be,hasVoted:!1,votesFor:Tc("0"),votesAgainst:Tc("0"),proposalDeadline:0,hasActiveProposal:!1};s([Tn]),C(Be),(async()=>{const Kr=await n.nodeCounter(),xc=await n.proposalCounter(),So=Math.floor(Date.now()/1e3),Wf=await n.hasVoted(Be,e),Zs=[];for(let pi=1;pi<=Kr;pi++){const Lr=await n.nodes(pi);if(Lr&&Lr.threadId.toString()===Be.toString()&&Lr.contentHash!==""){const ys=await En(Lr.metadataHash),H0=await En(Lr.contentHash),V0=await n.hasVoted(pi,e);Zs.push({...Lr,metadata:ys,content:H0,id:pi,type:Number(Lr.nodeType),hasVoted:V0})}}let qs=Tc("0"),ko=Tc("0"),Gn=0,Dn=!1;for(let pi=1;pi<=xc;pi++){const Lr=await n.proposals(pi);if(Lr.threadId.toString()===Be.toString()&&!Lr.executed){qs=Lr.votesFor,ko=Lr.votesAgainst,Gn=Number(Lr.deadline),Dn=So<Gn+60;break}}s(pi=>[{...pi[0],nodes:Zs,hasVoted:Wf,votesFor:qs,votesAgainst:ko,proposalDeadline:Gn,hasActiveProposal:Dn}])})()}}(async()=>{const Be=await n.nodeCounter(),Wt=await n.proposalCounter(),or=Math.floor(Date.now()/1e3);for(let kt=Me-1;kt>=1;kt--){const Tn=await n.threads(kt);if(Tn&&Tn.creator!=="0x0000000000000000000000000000000000000000"){const Ys=await En(Tn.metadataHash),Kr=await En(Tn.contentHash);s(Gn=>[...Gn,{...Tn,metadata:Ys,content:Kr,nodes:[],id:kt,hasVoted:!1,votesFor:Tc("0"),votesAgainst:Tc("0"),proposalDeadline:0,hasActiveProposal:!1}]);const xc=await n.hasVoted(kt,e),So=[];for(let Gn=1;Gn<=Be;Gn++){const Dn=await n.nodes(Gn);if(Dn&&Dn.threadId.toString()===kt.toString()&&Dn.contentHash!==""){const pi=await En(Dn.metadataHash),Lr=await En(Dn.contentHash),ys=await n.hasVoted(Gn,e);So.push({...Dn,metadata:pi,content:Lr,id:Gn,type:Number(Dn.nodeType),hasVoted:ys})}}let Wf=Tc("0"),Zs=Tc("0"),qs=0,ko=!1;for(let Gn=1;Gn<=Wt;Gn++){const Dn=await n.proposals(Gn);if(Dn.threadId.toString()===kt.toString()&&!Dn.executed){Wf=Dn.votesFor,Zs=Dn.votesAgainst,qs=Number(Dn.deadline),ko=or<qs+60;break}}s(Gn=>Gn.map(Dn=>Dn.id===kt?{...Dn,nodes:So,hasVoted:xc,votesFor:Wf,votesAgainst:Zs,proposalDeadline:qs,hasActiveProposal:ko}:Dn))}}})()}catch(Me){console.error("Error loading threads:",Me),U("Failed to load on-chain threads: "+Me.message)}}const hi=Me=>{x(Me)},Mi=()=>{x(null)},qi=async(Me,ot)=>{if(!(!n||!w||!e))try{h(!0),U(null);const Be=Tc(S);await(await w.approve(n.target,Be)).wait(),await(await n.vote(Me,ot,Be)).wait(),M(""),x(null),cn()}catch(Be){console.error("Error voting:",Be),U("Error voting: "+(Be.message||"Unknown error occurred"))}finally{h(!1)}},Xs=async Me=>{var ot;if(!(!n||!w||!e))try{h(!0),U(null);const Be=await n.MINIMUM_STAKE();console.log("Minimum stake required:",Zse(Be),"CANON");const Wt={title:`Update Proposal for ${Me.type==="thread"?"Thread":"Node"} ${Me.id}`,description:"Proposal to update content",createdAt:new Date().toISOString()},or={content:((ot=Me.content)==null?void 0:ot.content)||"",lastUpdated:new Date().toISOString()},kt=await st(Wt),Tn=await st(or);console.log("Approving tokens..."),await(await w.approve(n.target,Be)).wait(),console.log("Creating proposal..."),await(await n.proposeUpdate(Me.id,kt,Tn,Be)).wait(),console.log("Proposal created"),await cn(),x(null)}catch(Be){console.error("Error creating proposal:",Be),U("Error creating proposal: "+(Be.message||"Unknown error occurred"))}finally{h(!1)}},Ks=async Me=>{if(G&&(!n||!e)){console.log("No contract or account for on-chain operation");return}const{id:ot,newNode:Be}=Me;if(console.log("Creating node with data:",Be),!(Be!=null&&Be.title)||!(Be!=null&&Be.content)){console.log("Missing node data");return}try{if(h(!0),U(null),G){const Wt={title:Be.title,description:Be.content.substring(0,100)+(Be.content.length>100?"...":""),createdAt:new Date().toISOString()},or={content:Be.content,lastUpdated:new Date().toISOString()},kt=await st(Wt),Tn=await st(or);await(await n.createNode(ot,kt,Tn,Be.type)).wait(),await cn()}else{console.log("Creating off-chain node with type:",Be.type);const Wt=typeof Be.type=="number"?De[Be.type]:Be.type||De[0],or=await Bi.createNode({threadId:Be.threadId,title:Be.title,content:Be.content,nodeType:Wt,parentId:Be.parentId,metadata:{title:Be.title,description:Be.content.substring(0,100)+(Be.content.length>100?"...":""),createdAt:new Date().toISOString()}}),{nodes:kt,edges:Tn}=await Bi.getThreadNodes(Be.threadId),Ys={...Me,nodes:kt.map(Kr=>({...Kr,id:Kr.id,type:De.indexOf(Kr.node_type),content:Kr.content,parent_id:Kr.parent_id})),edges:Tn};await Qi()}x(null)}catch(Wt){console.error("Error creating node:",Wt),U("Failed to create node: "+Wt.message)}finally{h(!1)}},Qi=async()=>{try{const Me=await Bi.getThreads();console.log("Loaded threads:",Me);const ot=await Promise.all(Me.map(async Be=>{var kt;const{nodes:Wt,edges:or}=await Bi.getThreadNodes(Be.id);return console.log(`Loaded nodes for thread ${Be.id}:`,Wt),{...Be,content:Be.content||((kt=Be.metadata)==null?void 0:kt.content),nodes:Wt.map(Tn=>{var Ys;return{...Tn,content:Tn.content||((Ys=Tn.metadata)==null?void 0:Ys.content),type:De.indexOf(Tn.node_type)}}),edges:or}}));console.log("Threads with nodes:",ot),K(ot),!A&&ot.length>0&&C(ot[0].id)}catch(Me){console.error("Error loading off-chain threads:",Me),U("Failed to load off-chain threads")}};T.useEffect(()=>{G?ht():Qi()},[]);const sr=G?i:Y;T.useEffect(()=>{n&&G&&cn()},[n]);const yn=sr.find(Me=>Me.id===A),un=yn?[yn]:[],Xr=sr.findIndex(Me=>Me.id===A),kr=Xr>0,Ai=Xr>=0&&Xr<sr.length-1,Vf=()=>{kr&&C(sr[Xr-1].id)},ua=()=>{Ai&&C(sr[Xr+1].id)},ha=T.useMemo(()=>L?sr.filter(Me=>{var ot,Be;return(Be=(ot=Me.metadata)==null?void 0:ot.title)==null?void 0:Be.toLowerCase().includes(L.toLowerCase())}):[],[sr,L]),yc=T.useCallback(()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),F(!1)):(document.documentElement.requestFullscreen().catch(Me=>{console.error(`Error attempting to enable full-screen mode: ${Me.message}`)}),F(!0))},[]),pa=async()=>{if(G)try{const Me=await fetch("http://localhost:5001/api/v0/id",{method:"POST",headers:{"Content-Type":"application/json"}});if(!Me.ok)throw new Error(`IPFS request failed with status ${Me.status}`);const ot=await Me.json();if(ot&&ot.ID)return se(!0),!0;throw new Error("Invalid IPFS response")}catch(Me){return Me.message.includes("Failed to fetch")?console.error("IPFS daemon not running"):console.error("IPFS connection failed:",Me),se(!1),!1}};T.useEffect(()=>{if(G){pa();const Me=setInterval(pa,3e4);return()=>clearInterval(Me)}else se(!1)},[G]),T.useEffect(()=>{function Me(ot){de.current&&!de.current.contains(ot.target)&&H(!1)}return document.addEventListener("mousedown",Me),()=>{document.removeEventListener("mousedown",Me)}},[]);const wo=async Me=>{const ot=Me.target.value;_(ot),$(!!ot)},hl=async Me=>{if(Me.key==="Enter"&&L.trim()){Me.preventDefault();try{ve(!0);const ot=await Bi.searchThreads(L);if(ot.length===0){const Be=await Bi.generateThread(L);C(Be.id),await Qi(),_(""),$(!1)}else K(Be=>{const Wt=new Set(Be.map(kt=>kt.id)),or=ot.filter(kt=>!Wt.has(kt.id));return[...Be,...or]}),$(!0)}catch(ot){console.error("Search/Generate error:",ot),U("Failed to search or generate thread")}finally{ve(!1)}}};return m.jsxs("div",{className:"app",children:[g&&m.jsx("div",{className:"error",children:g}),m.jsxs("div",{className:"header",children:[m.jsx("div",{className:"header-center",children:m.jsx("h1",{children:"canonthread"})}),m.jsx("div",{className:"header-right",children:m.jsx("button",{className:"fullscreen-toggle",onClick:yc,title:B?"Exit full screen":"Enter full screen","aria-label":B?"Exit full screen":"Enter full screen"})})]}),m.jsxs("div",{className:"main-content",children:[yn&&m.jsx(gHe,{view:ue,onChangeView:te,threadTitle:((Eo=yn.metadata)==null?void 0:Eo.title)||yn.title||`Thread ${yn.id}`,onPrevThread:Vf,onNextThread:ua,hasPrev:kr,hasNext:Ai}),ue==="editor"&&le&&yn?m.jsx(xHe,{thread:yn,selectedNode:le,onSubmit:async Me=>{await Ks(Me),te("graph"),he(null)},onCancel:()=>{te("graph"),he(null)}}):ue==="sequence"&&yn?m.jsx(pHe,{thread:yn,onDone:()=>te("article")}):ue==="canvas"&&yn?m.jsx(dHe,{thread:yn}):ue==="article"&&yn?m.jsx(Tye,{thread:yn,initialNodeId:we}):null,m.jsxs("div",{className:"visualization-container",style:{display:ue==="graph"?void 0:"none"},children:[m.jsxs("div",{className:"thread-controls",children:[m.jsxs("div",{className:"custom-select",ref:de,children:[m.jsx("button",{className:"thread-selector",onClick:()=>H(!z),children:A?((ga=(ma=sr.find(Me=>Me.id===A))==null?void 0:ma.metadata)==null?void 0:ga.title)||`Thread ${A}`:"Select a Thread"}),z&&m.jsxs("div",{className:"dropdown-menu",children:[m.jsx("div",{className:"dropdown-item create-thread-option",onClick:()=>{R(!0),H(!1)},children:"+ Create New Thread"}),sr.map(Me=>{var ot;return m.jsx("div",{className:"dropdown-item",onClick:()=>{C(Me.id),H(!1)},children:((ot=Me.metadata)==null?void 0:ot.title)||`Thread ${Me.id}`},Me.id)})]})]}),m.jsxs("div",{className:"search-container",children:[m.jsx("input",{type:"text",className:"search-input",placeholder:"Search threads...",value:L,onChange:wo,onKeyDown:hl,onFocus:()=>$(!0)}),O&&L&&m.jsx("div",{className:"search-results",children:xe?m.jsxs("div",{className:"loading-results",children:[m.jsx("div",{className:"loading-spinner"}),m.jsxs("p",{children:['Generating thread for "',L,'"...']})]}):ha.length>0?ha.map(Me=>{var ot;return m.jsx("div",{className:"search-result-item",onClick:()=>{C(Me.id),_(""),$(!1)},children:((ot=Me.metadata)==null?void 0:ot.title)||`Thread ${Me.id}`},Me.id)}):m.jsxs("div",{className:"no-results",children:['Press Enter to generate a new thread about "',L,'"']})})]})]}),A?m.jsx(NG,{children:m.jsx(kme,{threads:un,onNodeClick:hi,onAddNode:Ks,onOpenEditor:Me=>{he(Me),te("editor")},onSelectedNodeChange:Se,loading:u})}):m.jsx("div",{className:"no-thread-message",children:"Please select a thread from the dropdown"})]}),I&&m.jsx("div",{className:"modal-overlay",onClick:()=>R(!1),children:m.jsxs("div",{className:"modal-content",onClick:Me=>Me.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Create New Thread"}),m.jsx("button",{className:"close-button",onClick:()=>R(!1),children:""})]}),m.jsx("div",{className:"modal-body",children:m.jsxs("div",{className:"create-thread-form",children:[m.jsx("input",{type:"text",placeholder:"Title",value:o,onChange:Me=>a(Me.target.value),className:"thread-input"}),m.jsx("input",{type:"text",placeholder:"Description",value:l,onChange:Me=>f(Me.target.value),className:"thread-input"}),m.jsxs("div",{className:"form-buttons",children:[m.jsx("button",{className:"cancel-button",onClick:()=>R(!1),disabled:u,children:"Cancel"}),m.jsx("button",{className:"submit-button",onClick:async()=>{await jt(),g||R(!1)},disabled:u||G&&!n,children:u?"Creating...":"Create Thread"})]})]})})]})}),y&&m.jsx(Cme,{node:y,onClose:Mi,onVote:qi,onCreateProposal:Xs,onAddNode:Ks,loading:u,voteAmount:S,setVoteAmount:M})]})]})}Sse.createRoot(document.getElementById("root")).render(m.jsx(T.StrictMode,{children:m.jsx(vHe,{})}));const Lre=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:gRe,encodePngMetadata:mRe,getTEXtChunk:xJ},Symbol.toStringTag,{value:"Module"})),wHe=Object.freeze(Object.defineProperty({__proto__:null,alerts:CJ,buttons:kJ,canvasError:RJ,clearCanvasDialog:BJ,colorPicker:YJ,colors:XJ,commandPalette:tee,confirmDialog:zJ,default:EI,element:TJ,elementLink:wJ,encrypted:VJ,errorDialog:LJ,errorSplash:_J,errors:MJ,exportDialog:OJ,fontList:JJ,headings:IJ,helpDialog:jJ,hints:NJ,imageExportDialog:HJ,labels:vJ,library:EJ,mermaid:qJ,overwriteConfirm:ZJ,publishDialog:FJ,publishSuccessDialog:$J,quickSearch:QJ,roomDialog:DJ,search:SJ,shareDialog:PJ,stats:WJ,toast:GJ,toolBar:AJ,userList:eee,welcomeScreen:KJ},Symbol.toStringTag,{value:"Module"})),EHe=Object.freeze(Object.defineProperty({__proto__:null,default:iee,en:nee,kaa:ree},Symbol.toStringTag,{value:"Module"}));export{Sb as C,js as R,Uo as S,Ve as _,Rfe as a,x5 as b,n0 as c,exe as d,sA as e,rW as f,hc as g,v0e as h,$l as i,CHe as j,MHe as k,oW as n,JV as r,ho as s};
